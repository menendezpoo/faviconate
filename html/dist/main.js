(()=>{"use strict";var e={1600:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(445),o=i.n(n),s=i(352),r=i.n(s)()(o());r.push([e.id,".ui-button-wrap{display:inline-flex;align-items:stretch}.ui-button-wrap.split>.split-part>.ui-icon.size-8{margin-left:0}.ui-button{display:inline-flex;align-items:center;padding:0.6em}.ui-button>.ui-icon.size-8{margin-left:0.6em}.swatch{display:block;width:20px;height:20px}.ui-clickable:not(.disabled){cursor:pointer}.ui-clickable.disabled{opacity:0.3}.ui-icon{background:center center no-repeat;background-size:100% 100%}.ui-icon.size-8{width:8px;height:8px}.ui-icon.size-16{width:16px;height:16px}.ui-icon.size-32{width:32px;height:32px}.ui-item-group{display:inline-flex;overflow:hidden;align-items:stretch}.ui-label.with-icon{display:flex;align-items:center}.ui-label.with-icon .ui-icon{margin-right:0.5em}.ui-label .desc{opacity:50%}.ui-separator{position:relative;height:1em}.ui-separator::after{display:block;position:absolute;content:'.';color:transparent;left:0;right:0;top:50%;height:1px}.ui-textbox{display:inline-flex;position:relative;border:solid 1px WindowFrame;background-color:white}.ui-textbox input{border:none;background-color:white}.ui-textbox input:focus{outline:none}.ui-menuitem{position:relative;display:flex;align-items:center;padding:0.6em;cursor:pointer}.ui-menuitem .ui-icon.icon-chevron-right{position:absolute;right:0.6em}.ui-menuitem .ui-label{padding-right:25px}.ui-tree-item{display:flex;padding:0.6em;align-items:center;cursor:pointer}.ui-tree-item>.collapse-glyph{margin-right:0.6em}.ui-dock-view,.ui-dock-view>.dock-side,.ui-dock-view>.main-side{position:absolute;top:0;left:0;right:0;bottom:0}.ui-dock-view .dock-side,.ui-dock-view>.main-side{overflow:auto}.ui-dock-view.side-left>.dock-side{right:auto}.ui-dock-view.side-top>.dock-side{bottom:auto}.ui-dock-view.side-right>.dock-side{left:auto}.ui-dock-view.side-bottom>.dock-side{top:auto}.ui-split-view.side-left>.dock-side{border-right-style:solid;border-right-width:1px}.ui-split-view.side-top>.dock-side{border-bottom-style:solid;border-bottom-width:1px}.ui-split-view.side-right>.dock-side{border-left-style:solid;border-left-width:1px}.ui-split-view.side-bottom>.dock-side{border-top-style:solid;border-top-width:1px}.ui-tab-view>.tabs>.items>.tab{padding-left:2em;padding-right:2em}.ui-tree-view{position:absolute;top:0;left:0;right:0;bottom:0}.ui-toolbar-view>.toolbar{display:flex;justify-content:space-between}.ui-toolbar-view>.toolbar>.items{display:flex;align-items:stretch}.ui-toolbar-view>.content{flex-grow:1;overflow:auto}.ui-toolbar-view.side-left>.toolbar,.ui-toolbar-view.side-right>.toolbar{flex-direction:column}.ui-toolbar-view.side-left>.toolbar>.items,.ui-toolbar-view.side-right>.toolbar>.items{flex-direction:column}.ui-menu-overlay{min-width:100px;box-shadow:3px 3px 3px rgba(0,0,0,0.3);z-index:10000}.ui-suggestions-overlay{background-color:Menu}.ui-suggestions-overlay .ui-clickable,.ui-suggestions-overlay .ui-loader{padding:0.6em}.ui-overlay{position:fixed;z-index:10000}\n","",{version:3,sources:["webpack://./src/hui/items/Button.scss","webpack://./src/hui/items/ColorPicker.scss","webpack://./src/hui/items/Clickable.scss","webpack://./src/hui/items/Icon.scss","webpack://./src/hui/items/ItemGroup.scss","webpack://./src/hui/items/Label.scss","webpack://./src/hui/items/Separator.scss","webpack://./src/hui/items/TextBox.scss","webpack://./src/hui/items/MenuItem.scss","webpack://./src/hui/items/TreeItem.scss","webpack://./src/hui/layout/DockView.scss","webpack://./src/hui/layout/SplitView.scss","webpack://./src/hui/layout/TabView.scss","webpack://./src/hui/layout/TreeView.scss","webpack://./src/hui/layout/ToolbarView.scss","webpack://./src/hui/overlays/MenuOverlay.scss","webpack://./src/hui/overlays/SuggestionsOverlay.scss","webpack://./src/hui/overlays/Overlay.scss"],names:[],mappings:"AAAA,gBACE,mBAAoB,CACpB,mBAAoB,CAFtB,kDAOQ,aAAc,CACf,WAML,mBAAoB,CACpB,kBAAmB,CACnB,aAAc,CAHhB,2BAMI,iBAAkB,CACnB,QCnBA,aAAc,CACd,UAAW,CACX,WAAY,CACb,6BCDE,cAAe,CAHnB,uBAOI,WAAY,CACb,SCPD,kCAAmC,CACnC,yBAA0B,CAF5B,gBAIa,SAAU,CAAG,UAAW,CAJrC,iBAKa,UAAW,CAAE,WAAY,CALtC,iBAMa,UAAW,CAAE,WAAY,CAAI,eCLxC,mBAAoB,CACpB,eAAgB,CAChB,mBAAoB,CACrB,oBCDG,YAAa,CACb,kBAAmB,CAJvB,6BAOM,kBAAmB,CAPzB,gBAYI,WAAY,CACb,cCZD,iBAAkB,CAClB,UAAW,CAFb,qBAKI,aAAc,CACd,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,MAAO,CACP,OAAQ,CACR,OAAQ,CACR,UAAW,CACZ,YCZD,mBAAoB,CACpB,iBAAkB,CAClB,4BAA6B,CAC7B,sBAAuB,CAJzB,kBAOI,WAAY,CACZ,sBAAuB,CAR3B,wBAUM,YAAa,CACd,aCVH,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,aAAc,CACd,cAAe,CALjB,yCAaI,iBAAkB,CAClB,WAAY,CAdhB,uBAkBI,kBAAmB,CACpB,cClBD,YAAa,CACb,aAAc,CACd,kBAAmB,CACnB,cAAe,CAJjB,8BAOI,kBAAmB,CACpB,gECLC,iBAAkB,CAClB,KAAK,CACL,MAAM,CACN,OAAQ,CACR,QAAQ,CAPZ,kDAWI,aAAc,CAXlB,mCAc8B,UAAY,CAd1C,kCAe8B,WAAY,CAf1C,oCAgB8B,SAAY,CAhB1C,qCAiB8B,QAAY,CAAI,oCCfhB,wBAAyB,CAAE,sBAAuB,CAFhF,mCAG8B,yBAA0B,CAAE,uBAAwB,CAHlF,qCAI8B,uBAAwB,CAAE,qBAAsB,CAJ9E,sCAK8B,sBAAuB,CAAE,oBAAqB,CAAI,+BCF1E,gBAAiB,CACjB,iBAAkB,CACnB,cCJH,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,OAAQ,CACR,QAAS,CACV,0BCHG,YAAa,CACb,6BAA8B,CAJlC,iCAOM,YAAa,CACb,mBAAoB,CAR1B,0BAaI,WAAY,CACZ,aAAc,CAdlB,yEAmBM,qBAAsB,CAnB5B,uFAsBQ,qBAAsB,CACvB,iBCtBL,eAAgB,CAChB,sCAA0C,CAC1C,aAAc,CACf,wBCHC,qBAAsB,CADxB,yEAII,aAAc,CACf,YCJD,cAAe,CACf,aAAc",sourcesContent:[".ui-button-wrap{\n  display: inline-flex;\n  align-items: stretch;\n\n  &.split {\n    > .split-part {\n      > .ui-icon.size-8 {\n        margin-left: 0;\n      }\n    }\n  }\n}\n\n.ui-button{\n  display: inline-flex;\n  align-items: center;\n  padding: 0.6em;\n\n  > .ui-icon.size-8{\n    margin-left: 0.6em;\n  }\n}"," .swatch{\n   display: block;\n   width: 20px;\n   height: 20px;\n }",".ui-clickable{\n\n  &:not(.disabled){\n    cursor: pointer;\n  }\n\n  &.disabled{\n    opacity: 0.3;\n  }\n\n  &.is-open,&:hover{\n\n  }\n}",".ui-icon {\n  background: center center no-repeat;\n  background-size: 100% 100%;\n\n  &.size-8 { width: 8px;  height: 8px;  }\n  &.size-16{ width: 16px; height: 16px; }\n  &.size-32{ width: 32px; height: 32px; }\n\n}\n",".ui-item-group{\n  display: inline-flex;\n  overflow: hidden;\n  align-items: stretch;\n}",".ui-label{\n\n  &.with-icon{\n    display: flex;\n    align-items: center;\n\n    .ui-icon{\n      margin-right: 0.5em;\n    }\n  }\n\n  .desc{\n    opacity: 50%;\n  }\n}\n",".ui-separator{\n  position: relative;\n  height: 1em;\n\n  &::after{\n    display: block;\n    position: absolute;\n    content: '.';\n    color: transparent;\n    left: 0;\n    right: 0;\n    top: 50%;\n    height: 1px;\n  }\n}",".ui-textbox {\n  display: inline-flex;\n  position: relative;\n  border: solid 1px WindowFrame;\n  background-color: white;\n\n  input{\n    border: none;\n    background-color: white;\n    &:focus{\n      outline: none;\n    }\n  }\n}",".ui-menuitem{\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 0.6em;\n  cursor: pointer;\n\n\n  &.is-open,&:hover{\n    /* Colors */\n  }\n\n  .ui-icon.icon-chevron-right{\n    position: absolute;\n    right: 0.6em;\n  }\n\n  .ui-label{\n    padding-right: 25px; // Based on a 16px icon to be positioned as chevron to the right\n  }\n}",".ui-tree-item{\n  display: flex;\n  padding: 0.6em;\n  align-items: center;\n  cursor: pointer;\n\n  > .collapse-glyph {\n    margin-right: 0.6em;\n  }\n}\n\n.tree-item-children{\n}",".ui-dock-view{\n\n  &, > .dock-side, > .main-side{\n    position: absolute;\n    top:0;\n    left:0;\n    right: 0;\n    bottom:0;\n  }\n\n  .dock-side, > .main-side {\n    overflow: auto;\n  }\n\n  &.side-left   > .dock-side{ right:  auto; }\n  &.side-top    > .dock-side{ bottom: auto; }\n  &.side-right  > .dock-side{ left:   auto; }\n  &.side-bottom > .dock-side{ top:    auto; }\n}",".ui-split-view{\n\n  &.side-left > .dock-side{   border-right-style: solid; border-right-width: 1px; }\n  &.side-top > .dock-side{    border-bottom-style: solid; border-bottom-width: 1px; }\n  &.side-right > .dock-side{  border-left-style: solid; border-left-width: 1px; }\n  &.side-bottom > .dock-side{ border-top-style: solid; border-top-width: 1px; }\n}",".ui-tab-view{\n  > .tabs{\n    > .items > .tab{\n      padding-left: 2em;\n      padding-right: 2em;\n    }\n  }\n\n}",".ui-tree-view{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}",".ui-toolbar-view{\n\n  > .toolbar{\n    display: flex;\n    justify-content: space-between;\n\n    > .items{\n      display: flex;\n      align-items: stretch;\n    }\n  }\n\n  > .content{\n    flex-grow: 1;\n    overflow: auto;\n  }\n\n  &.side-left, &.side-right{\n    > .toolbar{\n      flex-direction: column;\n\n      > .items{\n        flex-direction: column;\n      }\n    }\n  }\n\n}",".ui-menu-overlay {\n  min-width: 100px;\n  box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.3);\n  z-index: 10000;\n}",".ui-suggestions-overlay{\n  background-color: Menu;\n\n  .ui-clickable, .ui-loader{\n    padding: 0.6em;\n  }\n}",".ui-overlay{\n  position: fixed;\n  z-index: 10000;\n}"],sourceRoot:""}]);const a=r},4561:(e,t,i)=>{i.d(t,{Z:()=>S});var n=i(445),o=i.n(n),s=i(352),r=i.n(s),a=i(8393),c=i.n(a),l=i(6789),h=i(4951),u=i(6803),d=i(6090),p=i(2590),g=i(7839),f=i(2318),m=i(5164),b=r()(o()),v=c()(l.Z),A=c()(h.Z),w=c()(u.Z),C=c()(d.Z),y=c()(p.Z),k=c()(g.Z),x=c()(f.Z),B=c()(m.Z);b.push([e.id,"body{font:caption}.ui-panel>div{margin:50px}.ui-icon.icon-cross{background-image:url("+v+")}.ui-icon.icon-floppy{background-image:url("+A+")}.ui-icon.icon-file{background-image:url("+w+")}.ui-icon.icon-folder{background-image:url("+C+")}.ui-icon.icon-chevron-up{background-image:url("+y+")}.ui-icon.icon-chevron-down{background-image:url("+k+")}.ui-icon.icon-chevron-left{background-image:url("+x+")}.ui-icon.icon-chevron-right{background-image:url("+B+")}\n","",{version:3,sources:["webpack://./src/hui/css/styles.css"],names:[],mappings:"AAAA,KACI,YAAa,CAChB,cAGG,WAAY,CAEf,oBAEqB,wDAA8C,CAAI,qBACjD,wDAAmD,CAAI,mBACzD,wDAAkD,CAAI,qBACpD,wDAA8C,CAAI,yBAC9C,wDAAkD,CAAI,2BACpD,wDAAoD,CAAI,2BACxD,wDAAoD,CAAI,4BACvD,wDAAqD",sourcesContent:['body{\n    font: caption;\n}\n\n.ui-panel > div {\n    margin: 50px;\n    /*box-shadow: 0 0 0 3px blue;*/\n}\n\n.ui-icon.icon-cross { background-image: url("icons/0822-cross2.svg"); }\n.ui-icon.icon-floppy { background-image: url("icons/0175-floppy-disk.svg"); }\n.ui-icon.icon-file { background-image: url("icons/0180-file-empty.svg"); }\n.ui-icon.icon-folder { background-image: url("icons/0187-folder.svg"); }\n.ui-icon.icon-chevron-up { background-image: url("icons/0826-chevron-up.svg"); }\n.ui-icon.icon-chevron-down { background-image: url("icons/0827-chevron-down.svg"); }\n.ui-icon.icon-chevron-left { background-image: url("icons/0828-chevron-left.svg"); }\n.ui-icon.icon-chevron-right { background-image: url("icons/0829-chevron-right.svg"); }'],sourceRoot:""}]);const S=b},2955:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(445),o=i.n(n),s=i(352),r=i.n(s)()(o());r.push([e.id,".ui-clickable.is-open{background-color:Highlight;color:HighlightText}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:Highlight;color:HighlightText}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:Highlight;color:HighlightText}.ui-menu-overlay,.ui-suggestions-overlay{background-color:Window;color:WindowText;border:solid 1px #ddd;box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.ui-separator:after{background-color:rgba(0,0,0,0.13)}.ui-item-group{border:solid 1px #ddd;border-radius:0.5em}.ui-item-group>.ui-clickable.selected:not(.disabled){background-color:#ddd}.ui-split-view>.dock-side{border-color:#ddd}.ui-tab-view>.tabs{background-color:#ddd}.ui-tab-view>.tabs>.items>.tab{margin-top:0.6em}.ui-tab-view>.tabs>.items>.selected{background-color:white}.ui-tree-view:focus .ui-tree-item.selected{background-color:Highlight;color:HighlightText}.ui-tree-item.selected{background-color:#f0f0f0;color:HighlightText}.ui-tree-item:not(.selected):hover{background-color:#E3EFFE}\n","",{version:3,sources:["webpack://./src/hui/css/theme.css"],names:[],mappings:"AAAA,sBACI,0BAA2B,CAC3B,mBAAoB,CACvB,mMAOG,0BAA2B,CAC3B,mBAAoB,CACvB,8CAIG,0BAA2B,CAC3B,mBAAoB,CACvB,yCAIG,uBAAwB,CACxB,gBAAiB,CACjB,qBAAsB,CACtB,sCAA0C,CAC7C,oBAGG,iCAAqC,CACxC,eAEG,qBAAsB,CACtB,mBAAoB,CACvB,qDAGG,qBAAsB,CACzB,0BAE4B,iBAAkB,CAAK,mBAE7B,qBAAsB,CAAG,+BACT,gBAAiB,CAAG,oCACf,sBAAuB,CAAI,2CAGnE,0BAA2B,CAC3B,mBAAoB,CACvB,uBAGG,wBAAyB,CACzB,mBAAoB,CACvB,mCAGG,wBAAyB",sourcesContent:[".ui-clickable.is-open{\n    background-color: Highlight;\n    color: HighlightText;\n}\n\n.ui-button-wrap.split:hover > .ui-button-split-part,\n.ui-button-wrap.split:hover > .ui-button,\n.ui-button:hover:not(.face-never):not(.disabled),\n.ui-clickable.selected:not(.disabled),\n.ui-button.is-open{\n    background-color: Highlight;\n    color: HighlightText;\n}\n\n.ui-menuitem.is-open,\n.ui-menuitem.is-selected{\n    background-color: Highlight;\n    color: HighlightText;\n}\n\n.ui-menu-overlay,\n.ui-suggestions-overlay{\n    background-color: Window;\n    color: WindowText;\n    border: solid 1px #ddd;\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\n}\n\n.ui-separator:after{\n    background-color: rgba(0, 0, 0, 0.13);\n}\n.ui-item-group{\n    border: solid 1px #ddd;\n    border-radius: 0.5em;\n}\n\n.ui-item-group > .ui-clickable.selected:not(.disabled){\n    background-color: #ddd;\n}\n\n.ui-split-view > .dock-side{ border-color: #ddd;  }\n\n.ui-tab-view > .tabs { background-color: #ddd;}\n.ui-tab-view > .tabs  > .items > .tab {margin-top: 0.6em;}\n.ui-tab-view > .tabs  > .items > .selected{ background-color: white; }\n\n.ui-tree-view:focus .ui-tree-item.selected{\n    background-color: Highlight;\n    color: HighlightText;\n}\n\n.ui-tree-item.selected{\n    background-color: #f0f0f0;\n    color: HighlightText;\n}\n\n.ui-tree-item:not(.selected):hover{\n    background-color: #E3EFFE;\n}"],sourceRoot:""}]);const a=r},4800:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(445),o=i.n(n),s=i(352),r=i.n(s)()(o());r.push([e.id,"div.canvas-view{position:absolute;top:0;left:0;right:0;bottom:0}\n","",{version:3,sources:["webpack://./src/components/CanvasView.scss"],names:[],mappings:"AAAA,gBAEE,iBAAkB,CAClB,KAAM,CAAE,MAAO,CAAE,OAAQ,CAAE,QAAQ",sourcesContent:["div.canvas-view{\n\n  position: absolute;\n  top: 0; left: 0; right: 0; bottom:0;\n\n}"],sourceRoot:""}]);const a=r},4951:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/eaa6b0d5c4b755a1c5f442a5b31d3913.svg"},6803:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/1c7c2677071e811d4aca7f0b4a48fbb3.svg"},6090:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/ae2087a3922088a93b0f3fde77c0e56f.svg"},6789:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/bb9f1f8d917fff10d0587496ee1e8cfd.svg"},2590:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/38aee18e86f51b62ad5e548bd745488d.svg"},7839:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/384b04f25826b885bb36dbf1d2d847c1.svg"},2318:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/16d86ed52ad1cc4fa6e0eb00d1794003.svg"},5164:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"images/12f0f97012b8956a484acfdd52300568.svg"},352:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(o[r]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);n&&o[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},445:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}e.exports=function(e){var i,n,o=(n=4,function(e){if(Array.isArray(e))return e}(i=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw s}}return i}}(i,n)||function(e,i){if(e){if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,i):void 0}}(i,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[1],r=o[3];if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),l="/*# ".concat(c," */"),h=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[s].concat(h).concat([l]).join("\n")}return[s].join("\n")}},8393:e=>{e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},5701:(e,t,i)=>{var n,o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),s=[];function r(e){for(var t=-1,i=0;i<s.length;i++)if(s[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},n=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],l=i[c]||0,h="".concat(c," ").concat(l);i[c]=l+1;var u=r(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(s[u].references++,s[u].updater(d)):s.push({identifier:h,updater:f(d,t),references:1}),n.push(h)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=i.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function d(e,t,i){var n=i.css,o=i.media,s=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,g=0;function f(e,t){var i,n,o;if(t.singleton){var s=g++;i=p||(p=c(t)),n=u.bind(null,i,s,!1),o=u.bind(null,i,s,!0)}else i=c(t),n=d.bind(null,i,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=r(i[n]);s[o].references--}for(var c=a(e,t),l=0;l<i.length;l++){var h=r(i[l]);0===s[h].references&&(s[h].updater(),s.splice(h,1))}i=c}}}},4512:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(5701),o=i.n(n),s=i(1600);o()(s.Z,{insert:"head",singleton:!1});const r=s.Z.locals||{}},4728:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(5701),o=i.n(n),s=i(4561);o()(s.Z,{insert:"head",singleton:!1});const r=s.Z.locals||{}},7261:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(5701),o=i.n(n),s=i(2955);o()(s.Z,{insert:"head",singleton:!1});const r=s.Z.locals||{}},9620:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(5701),o=i.n(n),s=i(4800);o()(s.Z,{insert:"head",singleton:!1});const r=s.Z.locals||{}},78:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=s(i(3804)),a=i(8529),c=i(3826),l=i(1070),h=i(2633),u=i(9304),d=i(5708),p=i(1281),g=i(9570),f=i(5),m=i(7065),b=i(602);class v extends r.Component{constructor(e){super(e),this.controller=new d.IconCanvasController,this.state={previewCanvas:null,selectedTool:null,undos:0,redos:0,showBackground:!0,showGrid:!0},this.usePen()}useEraser(){this.setState({selectedTool:new p.EraserTool(this.controller)})}usePen(){const e=new g.PencilTool(this.controller);this.setState({selectedTool:e})}useSelection(){this.setState({selectedTool:new b.SelectionTool(this.controller)})}colorPick(e){this.controller.tool instanceof g.PencilTool&&(this.controller.tool.color=e)}undo(){this.controller.editor.undo();const e=this.state.undos+1;this.setState({undos:e})}redo(){this.controller.editor.redo();const e=this.state.redos+1;this.setState({redos:e})}componentDidMount(){this.controller.editor.documentSubmitted=()=>{this.setState({previewCanvas:this.controller.editor.getImageCanvas()})}}render(){const e=this.controller,t=r.createElement(r.Fragment,null,r.createElement(c.Button,{text:"Faviconate"}),r.createElement(l.Separator,null),r.createElement(c.Button,{text:"Undo",onClick:()=>this.undo(),disabled:0==e.editor.undoCount}),r.createElement(c.Button,{text:"Redo",onClick:()=>this.redo(),disabled:0==e.editor.redoCount}),r.createElement(c.Button,{text:"Copy"}),r.createElement(c.Button,{text:"Paste"})),i=r.createElement(r.Fragment,null,r.createElement(c.Button,{text:"Sel",onClick:()=>this.useSelection(),selected:this.state.selectedTool instanceof b.SelectionTool}),r.createElement(c.Button,{text:"Pen",onClick:()=>this.usePen(),selected:this.state.selectedTool instanceof g.PencilTool&&!(this.state.selectedTool instanceof p.EraserTool)}),r.createElement(c.Button,{text:"Ers",onClick:()=>this.useEraser(),selected:this.state.selectedTool instanceof p.EraserTool}),r.createElement(c.Button,{text:"Bg",onClick:()=>this.setState({showBackground:!this.state.showBackground}),selected:this.state.showBackground}),r.createElement(c.Button,{text:"Gr",onClick:()=>this.setState({showGrid:!this.state.showGrid}),selected:this.state.showGrid})),n=r.createElement(r.Fragment,null,r.createElement(m.PreviewPanel,{canvas:this.state.previewCanvas}),r.createElement(f.ColorPicker,{colorPicked:e=>this.colorPick(e)}));return this.state.previewCanvas&&function(e){const t=document.createElement("link"),i=document.getElementById("dynamic-favicon");t.id="dynamic-favicon",t.rel="shortcut icon",t.href=e,i&&document.head.removeChild(i),document.head.appendChild(t)}(this.state.previewCanvas.toDataURL()),this.controller.tool=this.state.selectedTool,this.controller.showBackground=this.state.showBackground,this.controller.showGrid=this.state.showGrid,r.createElement(a.ToolbarView,{items:t},r.createElement(h.DockView,{side:"right",sideView:n},r.createElement(a.ToolbarView,{side:"left",items:i},r.createElement(u.CanvasView,{controller:e}))))}}t.App=v},9304:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasView=void 0;const r=s(i(3804)),a=i(6333);class c extends r.Component{constructor(e){super(e),this.containerRef=r.createRef(),this.canvasRef=r.createRef(),this.canvasSize=a.makeSz(0,0),this._cursor=null,this.resizer=()=>this.updateCanvasSize(),this.catcher=e=>this.mouseUp(e),this.controller=e.controller}canvasPoint(e,t){if(this.canvasRef.current){const i=a.Rectangle.fromDOMRect(this.canvasRef.current.getBoundingClientRect());return a.makePt(e-i.left,t-i.top)}return a.makePt(e,t)}registerResizeHook(){window.addEventListener("resize",this.resizer)}unRegisterResizeHook(){window.removeEventListener("resize",this.resizer)}updateCanvasSize(){if(this.containerRef.current){const e=a.Rectangle.fromDOMRect(this.containerRef.current.getBoundingClientRect());this.canvasRef.current?(this.canvasSize=a.makeSz(e.width,e.height),this.canvasRef.current.width=e.width,this.canvasRef.current.height=e.height):console.log("Diagram::resize: No canvasRef")}else console.log("Diagram::resize: No containerRef")}mouseDown(e){if(this.controller.pointingGestureStart){const t=this.canvasPoint(e.clientX,e.clientY);this.controller.pointingGestureStart({point:t,touch:!1})}document.body.addEventListener("mouseup",this.catcher)}mouseUp(e){if(this.canvasRef.current&&this.controller.pointingGestureEnd){const t=this.canvasPoint(e.clientX,e.clientY);this.controller.pointingGestureEnd({point:t,touch:!1})}document.body.removeEventListener("mouseup",this.catcher)}mouseMove(e){if(this.controller.pointingGestureMove){const t=this.canvasPoint(e.clientX,e.clientY),i=this.controller.pointingGestureMove({point:t,touch:!1});i.cursor&&(this.cursor=i.cursor)}}touchEnd(e){if(this.controller.pointingGestureEnd)if(e.touches.length>0){const t=e.touches[0];this.controller.pointingGestureEnd({point:this.canvasPoint(t.clientX,t.clientY),touch:!0})}else this.controller.pointingGestureEnd({point:a.makePt(0,0),touch:!0})}touchMove(e){if(this.controller.pointingGestureMove&&e.touches.length>0){const t=e.touches[0];this.controller.pointingGestureMove({point:this.canvasPoint(t.clientX,t.clientY),touch:!0})}}touchStart(e){if(this.controller.pointingGestureStart&&e.touches.length>0){e.preventDefault(),e.stopPropagation();const t=e.touches[0],i=this.canvasPoint(t.clientX,t.clientY);this.controller.pointingGestureStart({point:i,touch:!0})}}keyDown(e){this.controller.keyDown&&this.controller.keyDown({key:e.key})}keyUp(e){this.controller.keyUp&&this.controller.keyUp({key:e.key})}componentDidMount(){if(this.resizer(),this.canvasRef.current){const e=this.canvasRef.current.getContext("2d");if(e){const t=()=>{this.controller.render(e,this.canvasSize),requestAnimationFrame(t)};console.log("Start draw...",this.canvasSize),requestAnimationFrame((()=>t()))}else console.log("No context")}else console.log("No canvasRef")}componentWillMount(){this.registerResizeHook()}componentWillUnmount(){this.unRegisterResizeHook()}render(){return r.createElement("div",{ref:this.containerRef,className:"canvas-view"},r.createElement("canvas",{ref:this.canvasRef,onMouseDown:e=>this.mouseDown(e),onMouseMove:e=>this.mouseMove(e),onTouchStart:e=>this.touchStart(e),onTouchMove:e=>this.touchMove(e),onTouchEnd:e=>this.touchEnd(e),onKeyDown:e=>this.keyDown(e),onKeyUp:e=>this.keyUp(e)}))}get cursor(){return this._cursor}set cursor(e){e!==this._cursor&&(this.canvasRef.current&&(this.canvasRef.current.style.cursor=e||""),this._cursor=e)}}t.CanvasView=c},7065:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPanel=void 0;const r=s(i(3804));class a extends r.Component{constructor(){super(...arguments),this.ref=r.createRef()}updateCanvas(){this.ref.current&&this.props.canvas&&(this.ref.current.innerHTML="",this.ref.current.appendChild(this.props.canvas))}render(){return this.updateCanvas(),r.createElement("div",{ref:this.ref,className:"preview-panel"})}}t.PreviewPanel=a},8270:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClickDismiss=void 0;class i{constructor(e){this.stack=[],this.preventNext=!1,window.addEventListener(e,(e=>{this.preventNext?this.preventNext=!1:this.stack.length>0&&(e.stopImmediatePropagation(),this.popAndExecute())}))}isIdRegistered(e){return this.stack.filter((t=>t.id===e)).length>0}register(e){const t=i.idReminder++;return this.stack.push({id:t,call:e}),t}popAndExecute(){const e=this.stack.pop();e&&(e.call(),this.unregister(e.id))}preventNextEvent(){this.preventNext=!0}unregister(e){this.stack=this.stack.filter((t=>t.id!=e)),this.preventNext=!1}}t.ClickDismiss=i,i.mouseup=new i("mouseup"),i.idReminder=1},2514:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Color=t.InvalidColorFormatError=void 0;class i extends Error{}t.InvalidColorFormatError=i;class n{constructor(e,t,i,n=1){this.r=e,this.g=t,this.b=i,this.a=n}static hexParsable(e){return null!==e.match(/#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?/)}static fromHex(e){if(!n.hexParsable(e))throw new i(e);let t=function(e){return parseInt(e,16)},o=0,s=0,r=0,a=1;return 3==(e=e.replace("#","")).length?(o=t(e[0]+e[0]),s=t(e[1]+e[1]),r=t(e[2]+e[2])):(o=t(e[0]+e[1]),s=t(e[2]+e[3]),r=t(e[4]+e[5]),8==e.length&&(a=t(e[6]+e[7]))),new n(o,s,r,a)}static get transparent(){return new n(0,0,0,0)}get cssRgb(){return`rgb(${this.r}, ${this.g}, ${this.b})`}get cssRgba(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}get hexRgb(){const e=e=>{const t=e.toString(16);return 1==t.length?`0${t}`:t};return`#${e(this.r)}${e(this.g)}${e(this.b)}`}get hexRgba(){const e=e=>{const t=e.toString(16);return 1==t.length?`0${t}`:t};return`#${e(this.r)}${e(this.g)}${e(this.b)}${e(Math.round(255*this.a))}`}get isTransparent(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}}t.Color=n},3022:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FocusStackHandler=void 0;class i{constructor(e){this.stack=[],window.addEventListener("keydown",(t=>{t.key===e&&this.stack.length>0&&(t.stopImmediatePropagation(),this.popAndExecute())}))}isIdRegistered(e){return this.stack.filter((t=>t.id===e)).length>0}register(e){const t=i.idReminder++;return this.stack.push({id:t,call:e}),t}popAndExecute(){const e=this.stack.pop();e&&(e.call(),this.unregister(e.id))}unregister(e){this.stack=this.stack.filter((t=>t.id!=e))}}t.FocusStackHandler=i,i.idReminder=1,i.dismiss=new i("Escape"),i.commit=new i("Enter")},4826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCaptureStackHandler=void 0;class i{constructor(){this.stack=[],window.addEventListener("keydown",(e=>{this.stack.length>0&&this.execute(e)}),!0)}isIdRegistered(e){return this.stack.filter((t=>t.id===e)).length>0}register(e){const t=i.idReminder++;return this.stack.push({id:t,call:e}),t}execute(e){this.stack.length>0&&this.stack[this.stack.length-1].call(e)}unregister(e){this.stack=this.stack.filter((t=>t.id!=e))}}t.KeyCaptureStackHandler=i,i.idReminder=1,i.instance=new i},6333:(e,t)=>{function i(e,t){return{x:e,y:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=t.distance=t.midPoint=t.slope=t.makeSz=t.makePt=void 0,t.makePt=i,t.makeSz=function(e,t){return{width:e,height:t}},t.slope=function(e,t){return(t.y-e.y)/(t.x-e.x)},t.midPoint=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},t.distance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};class n{constructor(e,t,i,n){this.left=e,this.top=t,this.width=i,this.height=n}static get empty(){return new n(0,0,0,0)}static fromRect(e){return new n(e.left,e.top,e.width,e.height)}static fromDOMRect(e){return new n(e.left,e.top,e.width,e.height)}static fromLTRB(e,t,i,o){return new n(e,t,i-e,o-t)}static fromPoint(e){return new n(e.x,e.y,0,0)}static fromSize(e){return new n(0,0,e.width,e.height)}static unionOf(...e){if(0==e.length)return null;let t=e[0];for(let i=1;i<e.length;i++)t=t.union(e[i]);return t}centerAt(e){return this.withLocation(i(e.x-this.width/2,e.y-this.height/2))}clone(){return new n(this.left,this.top,this.width,this.height)}contains(e){return e.x>=this.left&&e.x<this.right&&e.y>=this.top&&e.y<this.bottom}deflate(e,t){return n.fromLTRB(this.left+e,this.top+t,this.right-e,this.bottom-t)}equals(e){return e.left===this.left&&e.top===this.top&&e.width===this.width&&e.height===this.height}getCardinalPoint(e){switch(e){case"n":return this.north;case"ne":return this.northEast;case"e":return this.east;case"se":return this.southEast;case"s":return this.south;case"sw":return this.southWest;case"w":return this.west;case"nw":return this.northWest}}inflate(e,t){return n.fromLTRB(this.left-e,this.top-t,this.right+e,this.bottom+t)}intersects(e){let t=this.left,i=this.top,n=this.width,o=this.height,s=e.left,r=e.top,a=e.width,c=e.height;return s<t+n&&t<s+a&&r<i+o&&i<r+c}round(){return new n(Math.round(this.left),Math.round(this.top),Math.round(this.width),Math.round(this.height))}toString(){return`(Rect: ${this.left}, ${this.top}, ${this.width}, ${this.height})`}union(e){const t=[this.left,this.right,e.left,e.right],i=[this.top,this.bottom,e.top,e.bottom];return n.fromLTRB(Math.min(...t),Math.min(...i),Math.max(...t),Math.max(...i))}withBottom(e){return new n(this.left,e-this.height,this.width,this.height)}withHeight(e){return new n(this.left,this.top,this.width,e)}withLeft(e){return new n(e,this.top,this.width,this.height)}withLocation(e){return new n(e.x,e.y,this.width,this.height)}withRight(e){return new n(e-this.width,this.top,this.width,this.height)}withSize(e){return new n(this.left,this.top,e.width,e.height)}withTop(e){return new n(this.left,e,this.width,this.height)}withWidth(e){return new n(this.left,this.top,e,this.height)}get center(){return{x:this.left+this.width/2,y:this.top+this.height/2}}get isEmpty(){return 0==this.width&&0==this.height&&0==this.left&&0==this.top}get right(){return this.left+this.width}get bottom(){return this.top+this.height}get location(){return i(this.left,this.top)}get tuple(){return[this.left,this.top,this.width,this.height]}get northEast(){return{x:this.right,y:this.top}}get southEast(){return{x:this.right,y:this.bottom}}get southWest(){return{x:this.left,y:this.bottom}}get northWest(){return{x:this.left,y:this.top}}get east(){return i(this.right,this.center.y)}get north(){return i(this.center.x,this.top)}get south(){return i(this.center.x,this.bottom)}get west(){return i(this.left,this.center.y)}get size(){return{width:this.width,height:this.height}}}t.Rectangle=n},3826:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const r=s(i(3804)),a=i(7782),c=i(1022),l=i(6570),h=i(3022),u=i(8270),d=i(6333);class p extends r.Component{constructor(e){super(e),this.escapeKeyDismissId=0,this.clickDismissId=0,this.buttonRef=r.createRef(),this.state={},this.activate=this.activate.bind(this),this.showDropDown=this.showDropDown.bind(this),this.hideDropDown=this.hideDropDown.bind(this),this.keyDownHide=this.keyDownHide.bind(this),this.keyDownShow=this.keyDownShow.bind(this),this.keyDownActivate=this.keyDownActivate.bind(this)}activate(){!0!==this.props.disabled&&this.props.onClick&&this.props.onClick()}keyPass(e,t){"Enter"!==e.key&&" "!==e.key||this.props.disabled||(e.stopPropagation(),e.preventDefault(),t())}keyDownHide(e){this.keyPass(e,(()=>this.hideDropDown()))}keyDownShow(e){this.props.disabled||this.keyPass(e,(()=>this.showDropDown()))}keyDownActivate(e){this.keyPass(e,(()=>this.activate()))}hideDropDown(){this.setState({dropDownVisible:!1}),h.FocusStackHandler.dismiss.unregister(this.escapeKeyDismissId),u.ClickDismiss.mouseup.unregister(this.clickDismissId)}showDropDown(){this.setState({dropDownVisible:!0}),this.escapeKeyDismissId=h.FocusStackHandler.dismiss.register((()=>{this.hideDropDown()})),this.clickDismissId=u.ClickDismiss.mouseup.register((()=>this.hideDropDown()))}render(){var e;const t=d.Rectangle.fromDOMRect((null===(e=this.buttonRef.current)||void 0===e?void 0:e.getBoundingClientRect())||new DOMRect),i=()=>r.createElement(c.Icon,{name:"chevron-down",size:8}),n=()=>r.createElement(a.Label,Object.assign({},this.props)),o=()=>r.createElement(l.MenuOverlay,{top:t.top+t.height,left:t.left,refRect:t,onDismissSignal:this.hideDropDown},this.props.children),s=[`face-${this.props.face||"hover"}`,this.props.classTag,this.props.disabled?"disabled":null,this.props.selected?"selected":null].filter((e=>!!e)).join(" "),h=this.props.disabled?{}:{tabIndex:0};return this.props.children?this.props.split?this.state.dropDownVisible?r.createElement("div",{className:"ui-button-wrap split "},r.createElement("div",Object.assign({},h,{ref:this.buttonRef,className:`ui-clickable ui-button is-open ${s}`,onClick:this.activate}),n()),r.createElement("div",Object.assign({},h,{className:"ui-clickable ui-button split-part",onClick:this.showDropDown,onKeyDown:this.keyDownShow}),i(),o())):r.createElement("div",{className:`ui-button-wrap split ${s}`},r.createElement("div",Object.assign({},h,{ref:this.buttonRef,className:"ui-clickable ui-button",onKeyDown:this.keyDownActivate,onClick:this.activate}),n()),r.createElement("div",Object.assign({},h,{className:"ui-clickable ui-button split-part",onClick:this.showDropDown,onKeyDown:this.keyDownShow}),i())):this.state.dropDownVisible?r.createElement("div",{className:"ui-button-wrap"},r.createElement("div",Object.assign({},h,{ref:this.buttonRef,className:`ui-clickable ui-button is-open ${s}`,onKeyDown:this.keyDownHide,onClick:this.showDropDown}),n(),i()),o()):r.createElement("div",{className:"ui-button-wrap"},r.createElement("div",Object.assign({},h,{ref:this.buttonRef,className:`ui-clickable ui-button ${s}`,onClick:this.showDropDown,onKeyDown:this.keyDownShow}),n(),i())):r.createElement("div",Object.assign({},h,{ref:this.buttonRef,className:`ui-clickable ui-button ${s}`,onClick:this.activate,onKeyDown:this.keyDownActivate}),n())}}t.Button=p},6334:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Clickable=void 0;const r=s(i(3804)),a=i(7782);class c extends r.Component{constructor(e){super(e),this.state={},this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this)}mouseEnter(){!0!==this.props.avoidHover&&this.setState({isHovered:!0})}mouseLeave(){!0!==this.props.avoidHover&&this.setState({isHovered:!1})}render(){return r.createElement("div",{className:"ui-clickable "+(this.props.isSelected||this.state.isHovered?"selected":""),onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave,onClick:this.props.onClick},r.createElement(a.Label,Object.assign({},this.props)))}}t.Clickable=c},5:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;const r=s(i(3804)),a=i(2514),c=i(306);class l extends r.Component{constructor(e){super(e),this.state={currentColor:a.Color.transparent}}handleChange(e){if(a.Color.hexParsable(e)){const t=a.Color.fromHex(e);this.setState({currentColor:t}),this.props.colorPicked&&this.props.colorPicked(t)}}render(){return r.createElement("div",null,r.createElement(c.TextBox,{change:e=>this.handleChange(e)}),r.createElement("div",{className:"swatch",style:{background:this.state.currentColor.hexRgb}}))}}t.ColorPicker=l},1022:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;const r=s(i(3804));t.Icon=e=>r.createElement("div",{className:`ui-icon size-${e.size||16} icon-${e.name} ${e.classNames||""}`})},7782:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;const r=s(i(3804)),a=i(1022);t.Label=e=>{if(e.icon&&!e.text)return r.createElement("div",{className:"ui-label"},r.createElement(a.Icon,{name:e.icon,size:e.iconSize}));if(e.icon||e.description){if(!e.icon&&e.description)return r.createElement("div",{className:"ui-label"},r.createElement("div",{className:"text"},e.text),r.createElement("div",{className:"desc"},e.description));if(e.icon)return e.description?r.createElement("div",{className:"ui-label with-icon"},r.createElement(a.Icon,{name:e.icon,size:e.iconSize}),r.createElement("div",{className:"text-side"},r.createElement("div",{className:"text"},e.text),r.createElement("div",{className:"desc"},e.description))):r.createElement("div",{className:"ui-label with-icon"},r.createElement(a.Icon,{name:e.icon,size:e.iconSize}),r.createElement("div",{className:"text"},e.text));throw"Undesired configuration"}return r.createElement("div",{className:"ui-label"},e.text)}},5419:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;const r=s(i(3804)),a=i(7782);class c extends r.Component{render(){return r.createElement("div",{className:"ui-loader"},r.createElement(a.Label,Object.assign({},this.props)))}}t.Loader=c},1070:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Separator=void 0;const r=s(i(3804));class a extends r.Component{render(){return r.createElement("div",{className:"ui-separator"})}}t.Separator=a},306:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t},r=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TextBox=void 0;const a=s(i(3804)),c=i(3826),l=i(1798),h=i(1070),u=i(5419),d=i(6334);class p extends a.Component{constructor(e){super(e),this.triggeredWhileLoading=!1,this.tRef=a.createRef(),this.wRef=a.createRef(),this.state={value:e.defaultValue||"",focused:!1},this.clear=this.clear.bind(this),this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}activateSuggestion(e){this.setState({value:e.text||"",suggestions:void 0}),this.props.onSuggestionSelected&&this.props.onSuggestionSelected(e)}clear(){this.setState({value:""}),this.tRef.current&&this.tRef.current.focus()}getSuggestionsOptions(){if(this.props.suggestions)return"function"==typeof this.props.suggestions?{getSuggestions:this.props.suggestions}:this.props.suggestions}handleChange(e){this.setState({value:e.target.value}),this.props.change&&this.props.change(e.target.value),setTimeout((()=>this.loadSuggestions()))}handleKeyDown(e){let t=!0;"ArrowUp"===e.key?this.selectPreviousSuggestion():"ArrowDown"===e.key?this.selectNextSuggestion():"Escape"===e.key?this.setState({suggestions:void 0}):"Enter"===e.key?"number"==typeof this.state.selectedSuggestion&&this.state.suggestions&&this.activateSuggestion(this.state.suggestions[this.state.selectedSuggestion]):t=!1,t&&(e.stopPropagation(),e.preventDefault())}loadSuggestions(){return r(this,void 0,void 0,(function*(){const e=this.getSuggestionsOptions();if(!e||!e.getSuggestions||this.state.value.length<(e.charsToTrigger||3))return this.triggeredWhileLoading=!1,void this.setState({loadingSuggestions:!1,suggestions:void 0,selectedSuggestion:void 0});if(this.state.loadingSuggestions)return void(this.triggeredWhileLoading=!0);this.setState({loadingSuggestions:!0});const t=yield e.getSuggestions(this.state.value);setTimeout((()=>{this.setState({suggestions:t,loadingSuggestions:!1,selectedSuggestion:void 0}),this.triggeredWhileLoading&&(this.triggeredWhileLoading=!1,setTimeout((()=>this.loadSuggestions())))}))}))}render(){var e;const t=a.createElement("input",{ref:this.tRef,placeholder:this.props.placeholder,type:"text",value:this.state.value,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),i=this.props.clearButton||!1,n="always"===i||i&&!!this.state.value,o=a.createElement(c.Button,{icon:n?"cross":"empty",classTag:"clear",face:"never",iconSize:8,onClick:this.clear,disabled:!n});let s,r=this.getSuggestionsOptions();if(r&&(this.state.loadingSuggestions||this.state.suggestions)&&this.state.value.length>=(r.charsToTrigger||3)&&this.wRef.current){const t=null===(e=this.state.suggestions)||void 0===e?void 0:e.map(((e,t)=>!0===e.separator?a.createElement(h.Separator,{key:e.key}):a.createElement(d.Clickable,Object.assign({},e,{isSelected:this.state.selectedSuggestion===t,onClick:()=>this.activateSuggestion(e)})))),i=a.createElement(u.Loader,{text:"Loading"});s=a.createElement(l.SuggestionsOverlay,{relativeElement:this.wRef.current},t,t&&this.state.loadingSuggestions?a.createElement(h.Separator,null):void 0,this.state.loadingSuggestions?i:void 0)}return!1!==i?a.createElement("div",{ref:this.wRef,className:"ui-textbox"},t,o,s):a.createElement("div",{ref:this.wRef,className:"ui-textbox"},t,s)}selectNextSuggestion(){const e=this.state.suggestions;if(!e)return;let t=("number"==typeof this.state.selectedSuggestion?this.state.selectedSuggestion:-1)+1;e[t]&&e[t].separator&&t++,t>=e.length&&(t=e.length-1),this.setState({selectedSuggestion:t})}selectPreviousSuggestion(){const e=this.state.suggestions;if(!e)return;let t=("number"==typeof this.state.selectedSuggestion?this.state.selectedSuggestion:e.length)-1;e[t]&&e[t].separator&&t--,t<0&&(t=0),this.setState({selectedSuggestion:t})}}t.TextBox=p},2633:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DockView=void 0;const r=s(i(3804));class a extends r.Component{render(){const e=this.props.side||"left",t=this.props.length||300;let i={},n={};switch(e){case"left":i.width=t+"px",n.left=t+"px";break;case"right":i.width=t+"px",n.right=t+"px";break;case"top":i.height=t+"px",n.top=t+"px";break;case"bottom":i.height=t+"px",n.bottom=t+"px"}return r.createElement("div",{className:`ui-dock-view side-${e} ${this.props.classNames}`},r.createElement("div",{className:`dock-side ${this.props.sideClassNames||""}`,style:i},this.props.sideView),r.createElement("div",{className:`main-side ${this.props.containerClassNames||""}`,style:n},this.props.children))}}t.DockView=a},8529:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarView=void 0;const r=s(i(3804)),a=i(2633);class c extends r.Component{render(){const e=this.props.length||40,t=this.props.side||"top";return r.createElement(a.DockView,Object.assign({},this.props,{length:e,classNames:`ui-toolbar-view ${this.props.classNames||""}`,side:t,sideClassNames:`toolbar ${this.props.sideClassNames||""}`,sideView:r.createElement(r.Fragment,null,r.createElement("div",{className:"items near"},this.props.items),r.createElement("div",{className:"items center"},this.props.itemsCenter),r.createElement("div",{className:"items far"},this.props.itemsFar))}),this.props.children)}}t.ToolbarView=c},6570:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MenuOverlay=void 0;const r=s(i(3804)),a=i(1070),c=i(6333),l=i(4826);class h extends r.Component{constructor(e){super(e),this.separators=[],this.overlayRef=r.createRef(),this.state={},this.setOpenItem=this.setOpenItem.bind(this);const t=e=>"Enter"===e.key||" "===e.key,i=(e,t)=>{e.stopPropagation(),e.preventDefault(),t()};this.keyCaptureId=l.KeyCaptureStackHandler.instance.register((e=>{"ArrowDown"==e.key?i(e,this.selectNext.bind(this)):"ArrowUp"===e.key?i(e,this.selectPrev.bind(this)):"ArrowRight"===e.key||t(e)?(i(e,this.openCurrentIndex.bind(this)),t(e)&&this.setState({activatedIndex:this.state.selectedIndex})):"ArrowLeft"===e.key&&void 0!==this.props.parentMenuItem&&i(e,(()=>this.sendDismissSingleSignal()))}))}closeOpenedIndex(){void 0!==this.state.openIndex&&this.setState({openIndex:void 0})}componentWillUnmount(){l.KeyCaptureStackHandler.instance.unregister(this.keyCaptureId)}selectNext(){let e=-1;"number"==typeof this.state.selectedIndex&&(e=this.state.selectedIndex);let t=e+1;for(;void 0!==this.separators.find((e=>e===t));)t++;void 0!==this.childCount&&t>=this.childCount&&(t=0),this.setState({selectedIndex:t})}selectPrev(){let e=-1;"number"==typeof this.state.selectedIndex&&(e=this.state.selectedIndex);let t=e-1;for(;void 0!==this.separators.find((e=>e===t));)t--;t<0&&(t=void 0!==this.childCount?this.childCount-1:0),this.setState({selectedIndex:t})}openCurrentIndex(){void 0!==this.state.selectedIndex&&this.setOpenItem(this.state.selectedIndex)}correctPosition(){if(!this.overlayRef||!this.overlayRef.current)return;const e=c.Rectangle.fromDOMRect(this.overlayRef.current.getBoundingClientRect()),t={width:window.innerWidth,height:window.innerHeight},i=this.props.refRect;let n=e.clone();e.right>t.width&&(n=n.withRight(i.right)),e.bottom>t.height&&(n=n.withBottom(t.height)),n.equals(e)||(this.overlayRef.current.style.left=n.left+"px",this.overlayRef.current.style.top=n.top+"px")}setNoOpenItem(){this.setState({selectedIndex:void 0})}setOpenItem(e){this.setState({selectedIndex:e,openIndex:e})}setSelectedItem(e){this.setState({selectedIndex:e})}render(){const e={top:this.props.top+"px",left:this.props.left+"px",width:"auto",height:"auto"};return"number"==typeof this.props.height&&(e.height=this.props.height+"px"),"number"==typeof this.props.width&&(e.width=this.props.width+"px"),setTimeout((()=>{this.correctPosition()})),this.childCount=r.Children.count(this.props.children),this.separators=[],r.createElement("div",{ref:this.overlayRef,className:"ui-overlay ui-menu-overlay",style:e},r.Children.map(this.props.children,((e,t)=>(e.type===a.Separator&&this.separators.push(t),r.cloneElement(e,{onOpen:()=>this.setOpenItem(t),onClose:()=>this.setNoOpenItem(),onDismissSignal:()=>this.sendDismissSignal(),onDismissSingleSignal:()=>this.closeOpenedIndex(),onSelectSignal:()=>this.setSelectedItem(t),isSelected:t===this.state.selectedIndex,isOpen:t===this.state.openIndex,isActivated:t===this.state.activatedIndex,parent:this})))))}sendDismissSignal(){this.props.onDismissSignal&&this.props.onDismissSignal()}sendDismissSingleSignal(){this.props.onDismissSingleSignal&&this.props.onDismissSingleSignal()}}t.MenuOverlay=h},1798:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionsOverlay=void 0;const r=s(i(3804)),a=i(6333);class c extends r.Component{constructor(e){super(e),this.state={}}render(){const e=a.Rectangle.fromDOMRect(this.props.relativeElement.getBoundingClientRect()),t={top:e.bottom+"px",left:e.left+"px",width:"auto",height:"auto"};return r.createElement("div",{className:"ui-overlay ui-suggestions-overlay",style:t},this.props.children)}}t.SuggestionsOverlay=c},2629:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),i(4728),i(7261),i(4512),i(9620);const r=s(i(3804)),a=s(i(7196)),c=i(78);a.render(r.createElement(c.App,null),document.getElementById("root"))},3450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=t.UnsavedChangesError=t.TransactionInProgressError=t.NoTransactionError=t.NoDocumentError=void 0;class i extends Error{}t.NoDocumentError=i;class n extends Error{}t.NoTransactionError=n;class o extends Error{}t.TransactionInProgressError=o;class s extends Error{}t.UnsavedChangesError=s,t.Editor=class{constructor(){this._currentTransaction=null,this._document=null,this._hasChanges=!1,this.undoStack=[],this.redoStack=[],this.documentChanged=null,this.documentSubmitted=null}redo(){if(0==this.redoStack.length)return!1;const e=this.redoStack.pop();return e&&(this.undoStack.push({documentState:this.document}),this._document=e.documentState,this.documentSubmitted&&this.documentSubmitted()),!0}undo(){if(0==this.undoStack.length)return!1;const e=this.undoStack.pop();return e&&(this.redoStack.push({documentState:this.document}),this._document=e.documentState,this.documentSubmitted&&this.documentSubmitted()),!0}begin(){if(!this._document)throw new i;if(this._currentTransaction)throw new o;this._currentTransaction={documentState:this._document}}setDocument(e){if(!this._currentTransaction)throw new n;this._document=e,this.documentChanged&&this.documentChanged()}commit(){if(!this._currentTransaction)throw new n;for(this.undoStack.push(this._currentTransaction),this._currentTransaction=null;this.redoStack.length>0;)this.redoStack.pop();this._hasChanges=!0,this.documentSubmitted&&this.documentSubmitted()}rollback(){if(!this._currentTransaction)throw new n;this._document=this._currentTransaction.documentState,this._currentTransaction=null,this.documentSubmitted&&this.documentSubmitted()}open(e){if(this._currentTransaction)throw new o;if(this._hasChanges)throw new s;this._document=e}close(){if(this._currentTransaction)throw new o;if(this.hasChanges)throw new s;for(this._document=null,this._hasChanges=!1;this.redoStack.length>0;)this.redoStack.pop();for(;this.undoStack.length>0;)this.redoStack.pop()}clearChanges(){this._hasChanges=!1}get currentTransaction(){return this._currentTransaction}get document(){return this._document}get hasChanges(){return this._hasChanges}get redoCount(){return this.redoStack.length}get undoCount(){return this.undoStack.length}}},5708:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconCanvasController=void 0;const n=i(373),o=i(9570),s=i(3450),r=i(900),a=i(1004),c=i(6333);t.IconCanvasController=class{constructor(){this.showBackground=!1,this.showGrid=!1,this.selection=c.Rectangle.empty,this.editor=new n.IconEditor,this._tool=new o.PencilTool(this),this.previewBounds=c.Rectangle.empty,this.previewPixelSize=0,this.editor.open({icon:r.IconService.newIcon(16,16)}),window._editor=this.editor}pixelToData(e){if(this.editor.document)return 4*this.editor.document.icon.width*e.y+4*e.x;throw new s.NoDocumentError}pointToPixel(e){if(!this.previewBounds.contains(e))return null;const t=e.x-this.previewBounds.left,i=e.y-this.previewBounds.top;return c.makePt(Math.floor(t/this.previewPixelSize),Math.floor(i/this.previewPixelSize))}pointToData(e){if(!this.previewBounds.deflate(1,1).contains(e))return-1;const t=this.pointToPixel(e);return t?this.pixelToData(t):-1}pointingGestureStart(e){var t;return(null===(t=this.tool)||void 0===t?void 0:t.pointingGestureStart)?this.tool.pointingGestureStart(e):{}}pointingGestureMove(e){var t;return(null===(t=this.tool)||void 0===t?void 0:t.pointingGestureMove)?this.tool.pointingGestureMove(e):{}}pointingGestureEnd(e){var t;return(null===(t=this.tool)||void 0===t?void 0:t.pointingGestureEnd)?this.tool.pointingGestureEnd(e):{}}keyDown(e){var t;return(null===(t=this.tool)||void 0===t?void 0:t.keyDown)?this.tool.keyDown(e):{}}keyUp(e){var t;return(null===(t=this.tool)||void 0===t?void 0:t.keyUp)?this.tool.keyUp(e):{}}render(e,t){const i=new c.Rectangle(0,0,t.width,t.height),n=i.deflate(10,10);if(this.editor.document){const t=this.editor.document.icon,o=this.previewPixelSize=Math.min(n.size.width,n.size.height)/Math.min(t.width,t.height);this.previewBounds=new c.Rectangle(0,0,t.width*o,t.height*o).centerAt(i.center),new a.IconDocumentRenderer(this.editor.document,e,this.previewBounds,this.showBackground,this.showGrid,this.selection).render()}}get tool(){return this._tool}set tool(e){this._tool=e}}},1004:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconDocumentRenderer=void 0;const n=i(6333),o=i(2514),s=o.Color.fromHex("#d0d0d0"),r=o.Color.fromHex("#e0e0e0"),a=o.Color.transparent,c=o.Color.fromHex("#f0f0f0");class l{constructor(e,t,i,n,o,s){this.document=e,this.context=t,this.bounds=i,this.drawBackground=n,this.drawGrid=o,this.selection=s}static getPattern(e){if(!l.checkerCanvas){const e=l.checkerCanvas=document.createElement("canvas");e.width=e.height=20;const t=e.getContext("2d"),i=10;if(!t)return null;a.isTransparent||(t.fillStyle=a.cssRgba,t.fillRect(0,0,i,i),t.fillRect(i,i,i,i)),c.isTransparent||(t.fillStyle=c.cssRgba,t.fillRect(i,0,i,i),t.fillRect(0,i,i,i))}const t=l.checkerCanvas;return e.createPattern(t,"repeat")}rectStroke(e,t){this.context.strokeStyle=t.cssRgba,this.context.strokeRect(...e.tuple)}rectFill(e,t){this.context.fillStyle=t.cssRgba,this.context.fillRect(...e.tuple)}renderPixels(e){const t=this.document.icon.data;let i=this.bounds.left,s=this.bounds.top,r=0;for(let a=0;a<t.length;a+=4){const c=new o.Color(t[a],t[a+1],t[a+2],t[a+3]/255),l=new n.Rectangle(i,s,e.width,e.height);this.rectFill(l,c),r++,i+=e.width,r%this.document.icon.width==0&&(s+=e.height,i=this.bounds.left)}}renderGrid(e){const t=this.context,i=this.document.icon,n=this.bounds;t.beginPath();let o=this.bounds.left,a=this.bounds.top;for(let s=0;s<i.width;s++)t.moveTo(o,n.top),t.lineTo(o,n.bottom),o+=e.width;for(let o=0;o<i.height;o++)t.moveTo(n.left,a),t.lineTo(n.right,a),a+=e.height;t.strokeStyle=r.cssRgba,t.stroke(),this.rectStroke(this.bounds,s)}renderChecker(){const e=l.getPattern(this.context);e&&(this.context.fillStyle=e,this.context.fillRect(...this.bounds.tuple))}renderSelection(e){const t=new n.Rectangle(this.bounds.left+this.selection.left*e.width,this.bounds.top+this.selection.top*e.height,this.selection.width*e.width,this.selection.height*e.height).round();l.clock++,l.clock%4==0&&(l.clockReminder++,9===l.clockReminder&&(l.clockReminder=0));const i=new Array(Math.round(t.width/5)).fill(5),o=e=>{this.context.beginPath(),this.context.moveTo(e.left,e.top),this.context.lineTo(e.right,e.top),this.context.moveTo(e.right,e.bottom),this.context.lineTo(e.left,e.bottom),this.context.stroke(),this.context.beginPath(),this.context.moveTo(e.right,e.top),this.context.lineTo(e.right,e.bottom),this.context.moveTo(e.left,e.bottom),this.context.lineTo(e.left,e.top),this.context.stroke()},s=this.context.lineWidth;switch(this.context.lineWidth=1.5,l.clockReminder){case 0:this.context.setLineDash([1,...i]);break;case 1:this.context.setLineDash([2,...i]);break;case 2:this.context.setLineDash([3,...i]);break;case 3:this.context.setLineDash([4,...i]);break;case 4:this.context.setLineDash([5,5]);break;case 5:this.context.setLineDash([0,1,...i]);break;case 6:this.context.setLineDash([0,2,...i]);break;case 7:this.context.setLineDash([0,3,...i]);break;case 8:this.context.setLineDash([0,4,...i])}switch(this.context.strokeStyle="#fff",o(t),l.clockReminder){case 0:this.context.setLineDash([0,1,...i]);break;case 1:this.context.setLineDash([0,2,...i]);break;case 2:this.context.setLineDash([0,3,...i]);break;case 3:this.context.setLineDash([0,4,...i]);break;case 4:this.context.setLineDash([0,5,...i]);break;case 5:this.context.setLineDash([1,...i]);break;case 6:this.context.setLineDash([2,...i]);break;case 7:this.context.setLineDash([3,...i]);break;case 8:this.context.setLineDash([4,...i])}this.context.strokeStyle="#000",o(t),this.context.setLineDash([]),this.context.lineWidth=s}render(){const e=n.makeSz(this.bounds.width/this.document.icon.width,this.bounds.height/this.document.icon.height);this.context.clearRect(...this.bounds.inflate(10,10).tuple),this.drawBackground&&this.renderChecker(),this.renderPixels(e),this.drawGrid&&this.renderGrid(e),this.selection.isEmpty||this.renderSelection(e)}}t.IconDocumentRenderer=l,l.clock=0,l.clockReminder=0,l.checkerCanvas=null},373:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconEditor=void 0;const n=i(3450);class o extends n.Editor{cloneDocument(){if(!this.document)throw new n.NoDocumentError;const e=Object.assign({},this.document),t=new Uint8ClampedArray(this.document.icon.data.length);return this.document.icon.data.forEach(((e,i)=>t[i]=e)),e.icon=Object.assign(Object.assign({},e.icon),{data:t}),e}getImageCanvas(){if(!this.document)throw new n.NoDocumentError;const e=document.createElement("canvas"),t=this.document.icon;e.width=this.document.icon.width,e.height=this.document.icon.height;const i=e.getContext("2d");return i&&i.putImageData(new ImageData(t.data,t.width,t.height),0,0),e}}t.IconEditor=o},900:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IconService=void 0;const n=i(6333);class o{static pixelToData(e,t){return 4*t.width*e.y+4*e.x}static region32(e,t,i){let s=0;for(let r=t.top;r<t.bottom;r++)for(let a=t.left;a<t.right;a++)i(o.pixelToData(n.makePt(a,r),e),s),s+=4}static newIcon(e,t,i="rgba"){return{width:e,height:t,model:i,data:new Uint8ClampedArray(e*t*4)}}static fromIcon(e,t){const i=new Uint8ClampedArray(t.width*t.height*4);return this.region32(e,t,((t,n)=>{i[n]=e.data[t],i[n+1]=e.data[t+1],i[n+2]=e.data[t+2],i[n+3]=e.data[t+3]})),{width:t.width,height:t.height,data:i,model:"rgba"}}}t.IconService=o},1281:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EraserTool=void 0;const n=i(9570);class o extends n.PencilTool{}t.EraserTool=o},9570:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PencilTool=void 0;const n=i(3450),o=i(2514);t.PencilTool=class{constructor(e){this.controller=e,this.drawing=!1,this.color=new o.Color(0,0,0)}drawAt(e){const t=this.controller.pointToData(e);if(!(t<0)){if(!this.controller.editor.document)throw new n.NoDocumentError;{const e=this.controller.editor.cloneDocument(),i=e.icon.data;i[t]=this.color.r,i[t+1]=this.color.g,i[t+2]=this.color.b,i[t+3]=Math.round(255*this.color.a),this.controller.editor.setDocument(e)}}}pointingGestureStart(e){return this.drawing=!0,this.controller.editor.document&&!this.controller.editor.currentTransaction&&(this.controller.editor.begin(),this.drawAt(e.point)),{}}pointingGestureMove(e){return this.drawing?(this.drawAt(e.point),{cursor:"default"}):{cursor:"default"}}pointingGestureEnd(e){return this.drawing=!1,this.controller.editor.document&&this.controller.editor.commit(),{}}}},602:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionTool=void 0;const n=i(6333),o=i(900),s=i(3450);t.SelectionTool=class{constructor(e){this.controller=e,this.selecting=!1,this.selStartPixel=n.makePt(0,0),this.selection=null}clipOutSelection(){if(!this.controller.editor.document)throw new s.NoDocumentError;const e=this.controller.editor.document.icon,t=o.IconService.fromIcon(e,this.controller.selection);return o.IconService.region32(e,this.controller.selection,((t,i)=>{console.log(t),e.data[t]=0,e.data[t+1]=0,e.data[t+2]=0,e.data[t+3]=0})),t}updateSel(e,t){this.controller.selection=n.Rectangle.fromLTRB(Math.round(Math.min(e.x,t.x)),Math.round(Math.min(e.y,t.y)),Math.round(Math.max(e.x,t.x))+1,Math.round(Math.max(e.y,t.y))+1)}pointingGestureStart(e){const t=this.controller.pointToPixel(e.point);return t&&this.controller.selection.contains(t)||t&&(this.selStartPixel=t,this.controller.selection=n.Rectangle.empty,this.selecting=!0),{}}pointingGestureEnd(e){const t=this.controller.pointToPixel(e.point);return this.selecting&&(console.log("Clipping"),this.selection=this.clipOutSelection(),this.selecting=!1),t&&this.controller.selection.contains(t)?{cursor:"move"}:{}}pointingGestureMove(e){const t=this.controller.pointToPixel(e.point);if(t&&this.selecting)this.updateSel(this.selStartPixel,t);else if(t&&this.controller.selection.contains(t))return{cursor:"move"};return{cursor:"crosshair"}}}},3804:e=>{e.exports=React},7196:e=>{e.exports=ReactDOM}},t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={id:n,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/dist/",i(2629)})();
//# sourceMappingURL=main.js.map