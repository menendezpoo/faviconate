{"version":3,"sources":["webpack://faviconate/./src/components/icons.css","webpack://faviconate/./src/hui/css/index.scss","webpack://faviconate/./src/hui/css/styles.css","webpack://faviconate/./src/index.scss","webpack://faviconate/./src/components/icons/bucket.svg","webpack://faviconate/./src/components/icons/checker.svg","webpack://faviconate/./src/components/icons/circle-check.svg","webpack://faviconate/./src/components/icons/copy.svg","webpack://faviconate/./src/components/icons/corners.svg","webpack://faviconate/./src/components/icons/crop.svg","webpack://faviconate/./src/components/icons/cut.svg","webpack://faviconate/./src/components/icons/dismiss.svg","webpack://faviconate/./src/components/icons/ellipsis.svg","webpack://faviconate/./src/components/icons/equalizer.svg","webpack://faviconate/./src/components/icons/eraser.svg","webpack://faviconate/./src/components/icons/eye.svg","webpack://faviconate/./src/components/icons/eyedropper.svg","webpack://faviconate/./src/components/icons/floppy.svg","webpack://faviconate/./src/components/icons/full-frame.svg","webpack://faviconate/./src/components/icons/grid-crossed.svg","webpack://faviconate/./src/components/icons/grid.svg","webpack://faviconate/./src/components/icons/minus.svg","webpack://faviconate/./src/components/icons/paste.svg","webpack://faviconate/./src/components/icons/pencil.svg","webpack://faviconate/./src/components/icons/plus.svg","webpack://faviconate/./src/components/icons/redo.svg","webpack://faviconate/./src/components/icons/return.svg","webpack://faviconate/./src/components/icons/select.svg","webpack://faviconate/./src/components/icons/undo.svg","webpack://faviconate/./src/hui/css/icons/0175-floppy-disk.svg","webpack://faviconate/./src/hui/css/icons/0180-file-empty.svg","webpack://faviconate/./src/hui/css/icons/0187-folder.svg","webpack://faviconate/./src/hui/css/icons/0822-cross2.svg","webpack://faviconate/./src/hui/css/icons/0826-chevron-up.svg","webpack://faviconate/./src/hui/css/icons/0827-chevron-down.svg","webpack://faviconate/./src/hui/css/icons/0828-chevron-left.svg","webpack://faviconate/./src/hui/css/icons/0829-chevron-right.svg","webpack://faviconate/./node_modules/css-loader/dist/runtime/api.js","webpack://faviconate/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://faviconate/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://faviconate/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://faviconate/./src/components/icons.css?f097","webpack://faviconate/./src/hui/css/index.scss?80b8","webpack://faviconate/./src/hui/css/styles.css?787b","webpack://faviconate/./src/index.scss?7223","webpack://faviconate/./src/components/App.tsx","webpack://faviconate/./src/components/CanvasView.tsx","webpack://faviconate/./src/components/ContainerPanel.tsx","webpack://faviconate/./src/components/Expando.tsx","webpack://faviconate/./src/components/PaletteManager.tsx","webpack://faviconate/./src/components/PreviewPanel.tsx","webpack://faviconate/./src/components/ReviewStudio.tsx","webpack://faviconate/./src/hui/helpers/ClickDismiss.tsx","webpack://faviconate/./src/hui/helpers/Color.ts","webpack://faviconate/./src/hui/helpers/FocusStackHandler.tsx","webpack://faviconate/./src/hui/helpers/KeyCaptureStackHandler.tsx","webpack://faviconate/./src/hui/helpers/Rectangle.ts","webpack://faviconate/./src/hui/helpers/Utils.ts","webpack://faviconate/./src/hui/helpers/Uuid.ts","webpack://faviconate/./src/hui/helpers/errors.ts","webpack://faviconate/./src/hui/helpers/hui.ts","webpack://faviconate/./src/hui/items/Button.tsx","webpack://faviconate/./src/hui/items/Clickable.tsx","webpack://faviconate/./src/hui/items/ColorPicker.tsx","webpack://faviconate/./src/hui/items/Icon.tsx","webpack://faviconate/./src/hui/items/Label.tsx","webpack://faviconate/./src/hui/items/MenuItem.tsx","webpack://faviconate/./src/hui/items/Range.tsx","webpack://faviconate/./src/hui/items/Separator.tsx","webpack://faviconate/./src/hui/layout/DockView.tsx","webpack://faviconate/./src/hui/layout/ToolbarView.tsx","webpack://faviconate/./src/hui/overlays/MenuOverlay.tsx","webpack://faviconate/./src/index.tsx","webpack://faviconate/./src/model/BlobComposer.ts","webpack://faviconate/./src/model/ClipboardService.ts","webpack://faviconate/./src/model/DocumentService.ts","webpack://faviconate/./src/model/Editor.ts","webpack://faviconate/./src/model/Icon.ts","webpack://faviconate/./src/model/IconCanvasController.ts","webpack://faviconate/./src/model/IconDocumentRenderer.ts","webpack://faviconate/./src/model/IconEditor.ts","webpack://faviconate/./src/model/IconReviewer.ts","webpack://faviconate/./src/model/IconService.ts","webpack://faviconate/./src/model/ImageAdjustService.ts","webpack://faviconate/./src/model/ImageService.ts","webpack://faviconate/./src/model/MarchingAnts.ts","webpack://faviconate/./src/model/PaletteService.ts","webpack://faviconate/./src/model/errors.ts","webpack://faviconate/./src/model/tools/AdjustTool.ts","webpack://faviconate/./src/model/tools/EraserTool.ts","webpack://faviconate/./src/model/tools/FloodFillTool.ts","webpack://faviconate/./src/model/tools/PencilTool.ts","webpack://faviconate/./src/model/tools/SelectionTool.ts","webpack://faviconate/external \"React\"","webpack://faviconate/external \"ReactDOM\"","webpack://faviconate/webpack/bootstrap","webpack://faviconate/webpack/runtime/compat get default export","webpack://faviconate/webpack/runtime/define property getters","webpack://faviconate/webpack/runtime/hasOwnProperty shorthand","webpack://faviconate/webpack/runtime/make namespace object","webpack://faviconate/webpack/runtime/publicPath","webpack://faviconate/webpack/startup"],"names":["___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","___CSS_LOADER_URL_REPLACEMENT_8___","___CSS_LOADER_URL_REPLACEMENT_9___","___CSS_LOADER_URL_REPLACEMENT_10___","___CSS_LOADER_URL_REPLACEMENT_11___","___CSS_LOADER_URL_REPLACEMENT_12___","___CSS_LOADER_URL_REPLACEMENT_13___","___CSS_LOADER_URL_REPLACEMENT_14___","___CSS_LOADER_URL_REPLACEMENT_15___","___CSS_LOADER_URL_REPLACEMENT_16___","___CSS_LOADER_URL_REPLACEMENT_17___","___CSS_LOADER_URL_REPLACEMENT_18___","___CSS_LOADER_URL_REPLACEMENT_19___","___CSS_LOADER_URL_REPLACEMENT_20___","___CSS_LOADER_URL_REPLACEMENT_21___","___CSS_LOADER_URL_REPLACEMENT_22___","___CSS_LOADER_URL_REPLACEMENT_23___","___CSS_LOADER_URL_REPLACEMENT_24___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_arrayLikeToArray","arr","len","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","next","done","value","err","_iterableToArrayLimit","o","minLen","n","prototype","call","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","url","options","__esModule","default","hash","needQuotes","replace","memo","getTarget","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","key","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","DEFAULT_ICON","makeSz","m","getElementById","innerHTML","App","React","Component","props","super","state","newDocumentState","icon","controller","editor","IconService","asBlobUrl","then","setState","previews","DocumentService","restoreIcons","icons","setIcons","size","newIcon","width","height","createController","selectedTool","PencilTool","controllers","undos","redos","showBackground","showGrid","colorA","darkModeOn","Color","white","black","doc","SelectionTool","blob","asBlobWithMime","fromFile","selectAll","iconSz","persist","dir","console","log","InvalidImageError","Promise","c","tool","preventDefault","dataTransfer","items","file","getAsFile","importFile","copy","catch","cut","paste","r","warnings","w","success","input","type","display","onchange","files","body","setTimeout","click","toLowerCase","endsWith","fromIcoBlob","useTool","AdjustTool","EraserTool","FloodFillTool","color","useColor","undo","undoPeek","selectionRegion","redo","redoPeek","IconCanvasController","docChanged","setPreviewData","documentSubmitted","documentChanged","saveIcons","p","find","currentIcon","format","downloadAs","addEventListener","focused","tagName","ctrlMeta","ctrlKey","metaKey","shiftKey","useSelection","useEraser","useFlood","usePen","apply","contrast","adjustState","brightness","palette","ReactDOM","render","ReviewStudio","unnamed","prompt","PaletteService","upsert","commandSetPalette","clearSelection","deleteSelection","cropToSelection","prevProps","prevState","snapshot","activeController","colorable","isEraser","Expando","title","Label","text","Button","iconSize","onClick","commandSelectAll","commandClearSelection","commandDeleteSelection","commandCrop","ColorPicker","colorPicked","colorPick","paletteItems","updateAdjustments","unsaved","commandResetPalette","commandSavePalette","className","Range","min","max","onChange","commandBrightness","commandContrast","PaletteManager","paletteChanged","classNames","commandApplyAdjustments","currentId","mainToolbarItems","MenuItem","onActivate","newDocument","Separator","importFileDialog","disabled","undoCount","redoCount","toolToolbarItems","selected","useAdjustments","commandReview","sizeOf","itemId","ctl","sortedPreviews","sort","a","b","compareSize","sideBar","newIconEntry","removeIconEntry","PreviewPanel","goToIcon","toolComponent","download","preview","src","link","oldLink","rel","href","changeFavicon","onDragOver","appDragOver","onDrop","appDrop","ToolbarView","sideClassNames","DockView","side","sideView","CanvasView","containerRef","createRef","canvasRef","canvasSize","_cursor","resizer","updateCanvasSize","mouseUpCatcher","mouseUp","keyDownCatcher","keyDown","keyUpCatcher","keyUp","clientX","clientY","current","bounds","Rectangle","fromDOMRect","getBoundingClientRect","makePt","left","top","rect","pointingGestureStart","point","canvasPoint","touch","adoptCursor","pointingGestureEnd","removeEventListener","pointingGestureMove","cursor","touches","t","stopPropagation","ignoreKey","context","getContext","draw","requestAnimationFrame","ref","onMouseDown","mouseDown","onMouseMove","mouseMove","onTouchStart","touchStart","onTouchMove","touchMove","onTouchEnd","touchEnd","ContainerPanel","cn","children","setPalette","colors","tuple","swatch","fromTupleInt8","backgroundColor","hexRgb","addMode","native","tupleInt8","dismissAddColor","colorToAdd","addColor","getAll","palettes","colorPicker","cssRgba","refreshPalette","pal","startEyeDrop","addSelectedColor","Clickable","startAddMode","natives","palettePreview","fromHex","Math","level","ceil","alt","previewCanvas","reviewCanvas","sampleSize","startCorner","mode","previewSize","scaleToContain","reviewer","IconReviewer","updateCanvasesGraphics","drawPreviewCanvas","drawReviewCanvas","cx","contentBounds","focusRegion","na","nb","right","sa","bottom","sb","wa","wb","ea","eb","MarchingAnts","line","sourceCanvas","asCanvas","srcW","srcH","h","destCx","GraphicsMemoryError","clearRect","imageSmoothingEnabled","drawImage","sampleW","sample","sampleH","pixelSize","focusSize","focusLocation","currentHotspot","fromPoint","withSize","marchingAntsMarker","reviewSource","reviewImage","reviewCx","graphicSize","fromSize","reviewSize","centerAt","center","move","parentElement","topItems","topItemsFar","sideItems","setupItems","round","v","setSampleSize","setStartCorner","reviewItems","mainContent","itemsFar","ClickDismiss","eventName","stack","preventNext","stopImmediatePropagation","popAndExecute","idReminder","entry","pop","unregister","mouseup","InvalidColorFormatError","g","hexColor","match","hexParsable","toDecimal","hex","parseInt","s","f","q","floor","alpha","rr","gg","bb","diff","diff_c","FocusStackHandler","dismiss","commit","KeyCaptureStackHandler","execute","instance","x","y","sqrt","pow","container","scalable","wOriented","hOriented","rects","union","withLocation","horizontal","vertical","fromLTRB","north","northEast","east","southEast","south","southWest","west","northWest","rectangle","thisX","thisY","thisW","thisH","rectX","rectY","rectW","rectH","xOffset","yOffset","location","matchMedia","matches","Uuid","random","stringValue","Uint8ClampedArray","args","thing","prop","String","escapeKeyDismissId","clickDismissId","buttonRef","activate","showDropDown","hideDropDown","keyDownHide","keyDownShow","keyDownActivate","keyPass","dropDownVisible","register","DOMRect","chevron","useChevron","Icon","label","menu","MenuOverlay","refRect","onDismissSignal","tags","face","tabProp","tabIndex","split","onKeyDown","mouseEnter","mouseLeave","avoidHover","isHovered","classTags","isSelected","onMouseEnter","onMouseLeave","BG_COLOR_A","BG_COLOR_B","ColorPickerFields","dataUrlFrom","imageData","ImageData","canvas","putImageData","toDataURL","focus","txtHex","txtR","txtG","txtB","txtA","currentColor","selectedHue","hsv","hue","updateColor","fromHsv","withAlpha","satValue","keyValue","sat","where","txt","getInput","handleChange","getInputValueFor","syncInputValues","satImg","z","j","createSaturationPattern","hueHandleStyle","background","hueContainerStyle","backgroundImage","hueBar","backgroundSize","satContainerStyle","alphaContainerStyle","bgPattern","swatchBgStyle","swatchStyle","direction","containerStyle","updateSatLight","handleStyle","updateHue","updateAlpha","arrayColors","fill","foo","flatArrayColors","createHuePattern","lineOfA","lineOfB","rowA","rowB","chunkA","chunkB","BG_SQ_SIZE","createBgPattern","classTag","description","showOverlay","hideOverlay","mouseActivate","sendDismissSignal","sendDismissSingleSignal","sendSelectSignal","preventNextEvent","onClose","onOpen","selectedClass","propsWithIcon","assign","isActivated","Children","isOpen","parentMenuItem","onDismissSingleSignal","onSelectSignal","handleRef","dragging","handleOffset","mouseMoveHandler","mouseUpHandler","touchMoveHandler","touchEndHandler","capture","handle","boundingRects","maxSpace","curSpace","passive","clearWindowHandlers","refsReady","updateHandleOffset","handleOffsetX","handleOffsetY","valueFromRects","v2d","avail","rawValue","handleOffsetFromValue","value2d","updateHandleForValue","handleMouseDown","handleTouchStart","sideCss","mainCss","containerClassNames","itemsCenter","separators","overlayRef","setOpenItem","isActivationKey","cancelAndDo","keyCaptureId","selectNext","selectPrev","openCurrentIndex","activatedIndex","selectedIndex","openIndex","childCount","prev","view","innerWidth","innerHeight","newRectangle","clone","withRight","withBottom","equals","st","correctPosition","menuItem","cloneElement","setNoOpenItem","closeOpenedIndex","setSelectedItem","parent","offset","Blob","buffer","writeBuffer","arrayBuffer","buff","writeUint8Clamped","set","MIME_PNG","ClipboardEmptyError","mime","systemCopyBlob","systemPasteBlob","reject","ctorName","ctor","navigator","clipboard","write","read","types","indexOf","getType","ICONS_STORAGE_KEY","binToString","bin","ch","stringToBin","str","nmb","charAt","localStorage","setItem","serializeIcons","getItem","parse","NoTransactionError","TransactionInProgressError","UnsavedChangesError","_currentTransaction","_hasChanges","undoStack","redoStack","_document","documentState","setDocument","begin","Number","MAX_SAFE_INTEGER","_tool","previewBounds","empty","previewPixelSize","IconEditor","picker","_colorPicker","selectionSprite","resolve","ClipboardService","copyBlob","selectionBuffer","NoSelectionError","transact","cloneDocument","pasteBlob","asIcoBlob","URL","createObjectURL","sprite","pasteSprite","newDoc","containerRec","spriteRect","blend","pixel","contains","deflate","pointToPixel","pixelToData","pointToData","cvBounds","previewArea","pixelLength","IconDocumentRenderer","deactivate","dark","GRID_OUT","GRID_LIGHT","CHECKER_EVEN","transparent","CHECKER_ODD","PLATE_BG","plateBounds","drawBackground","drawGrid","pixelsBuffer","pixelsContext","MemoryError","checkerCanvas","localCx","CHECKER_SIZE","isTransparent","fillStyle","fillRect","createPattern","radius","ctx","tl","tr","br","bl","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","lines","strokeStyle","strokeRect","drawn","rectFill","getPixelsBuffer","stroke","pathLines","northSegment","eastSegment","southSegment","westSegment","pattern","getPattern","selection","selBounds","clock","clockReminder","fives","segmentedRect","lineWidthBuffer","lineWidth","setLineDash","pathRoundRect","inflate","drawPlate","renderChecker","renderPixels","renderGrid","renderFrame","renderSelection","Editor","UNVISITED","VISITED","original","wh","hotspot","tintRegion","region","sIndex","dR","dG","dB","dA","sR","sG","sB","sA","rR","rG","rB","rA","cardinalPoint","superSample","imgX","imgY","imgR","imgB","tupleLTRB","offsetX","offsetY","abs","curImgX","curImgY","arrIndex","curIndex","asImageData","toBlob","composer","BlobComposer","pngBlobs","pngBlobSum","writeInt16LE","pngBlob","dataOffset","writeInt32LE","writeBlob","getBlob","array","iconCount","readInt16LE","dirEntryStart","dirEntry","dataSize","readInt32LE","image","ImageService","fromImage","model","getImageData","region32","newSize","naturalWidth","naturalHeight","resize","contain","allowScaleUp","actual","contained","onPixel","spriteOffset","InvalidRegionError","d","baseIndex","spriteIndex","baseR","baseG","baseB","baseA","spR","spG","spB","spA","delta","factor","limit","kernelIndex","serpentine","names","nearestBuffer","Map","nearest","originInt","has","get","distance","getPixel","setPixel","kernel","FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite","xEnd","r1","g1","b1","r2","g2","b2","er","eg","end","x1","y1","r3","g3","b3","REDUCE_MARGIN","reader","FileReader","readEvent","img","Image","FileError","readAsDataURL","reducedSize","resample","destW","destH","data2","ratio_w","ratio_h","ratio_w_half","ratio_h_half","x2","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","center_y","yy","dy","center_x","w0","xx","dx","color1","color2","step","PALETTES_STORAGE_KEY","uuid","findIndex","NoClipboardAccessError","rollback","changed","lastProps","ImageAdjustService","dither","origin","visited","counter","batch","insideArray","matchesColor","drawing","newState","currentTransaction","drawAt","selecting","dragOffset","startPixel","fromIcon","isEmpty","clipOutSelection","moveSelection","implicitX","implicitY","selectRegion","pixelIsInsideSelection","saveDragOffset","selectionEnded","dragEnded","updateSelRegion","updateDrag","offsetSelection","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","definition","defineProperty","enumerable","hasOwnProperty","toStringTag"],"mappings":"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","file":"main.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./icons/bucket.svg\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./icons/circle-check.svg\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"./icons/checker.svg\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"./icons/copy.svg\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"./icons/cut.svg\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"./icons/dismiss.svg\";\nimport ___CSS_LOADER_URL_IMPORT_6___ from \"./icons/ellipsis.svg\";\nimport ___CSS_LOADER_URL_IMPORT_7___ from \"./icons/eraser.svg\";\nimport ___CSS_LOADER_URL_IMPORT_8___ from \"./icons/eye.svg\";\nimport ___CSS_LOADER_URL_IMPORT_9___ from \"./icons/eyedropper.svg\";\nimport ___CSS_LOADER_URL_IMPORT_10___ from \"./icons/equalizer.svg\";\nimport ___CSS_LOADER_URL_IMPORT_11___ from \"./icons/floppy.svg\";\nimport ___CSS_LOADER_URL_IMPORT_12___ from \"./icons/grid.svg\";\nimport ___CSS_LOADER_URL_IMPORT_13___ from \"./icons/minus.svg\";\nimport ___CSS_LOADER_URL_IMPORT_14___ from \"./icons/paste.svg\";\nimport ___CSS_LOADER_URL_IMPORT_15___ from \"./icons/pencil.svg\";\nimport ___CSS_LOADER_URL_IMPORT_16___ from \"./icons/plus.svg\";\nimport ___CSS_LOADER_URL_IMPORT_17___ from \"./icons/redo.svg\";\nimport ___CSS_LOADER_URL_IMPORT_18___ from \"./icons/return.svg\";\nimport ___CSS_LOADER_URL_IMPORT_19___ from \"./icons/select.svg\";\nimport ___CSS_LOADER_URL_IMPORT_20___ from \"./icons/undo.svg\";\nimport ___CSS_LOADER_URL_IMPORT_21___ from \"./icons/corners.svg\";\nimport ___CSS_LOADER_URL_IMPORT_22___ from \"./icons/crop.svg\";\nimport ___CSS_LOADER_URL_IMPORT_23___ from \"./icons/full-frame.svg\";\nimport ___CSS_LOADER_URL_IMPORT_24___ from \"./icons/grid-crossed.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\nvar ___CSS_LOADER_URL_REPLACEMENT_9___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_9___);\nvar ___CSS_LOADER_URL_REPLACEMENT_10___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_10___);\nvar ___CSS_LOADER_URL_REPLACEMENT_11___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_11___);\nvar ___CSS_LOADER_URL_REPLACEMENT_12___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_12___);\nvar ___CSS_LOADER_URL_REPLACEMENT_13___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_13___);\nvar ___CSS_LOADER_URL_REPLACEMENT_14___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_14___);\nvar ___CSS_LOADER_URL_REPLACEMENT_15___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_15___);\nvar ___CSS_LOADER_URL_REPLACEMENT_16___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_16___);\nvar ___CSS_LOADER_URL_REPLACEMENT_17___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_17___);\nvar ___CSS_LOADER_URL_REPLACEMENT_18___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_18___);\nvar ___CSS_LOADER_URL_REPLACEMENT_19___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_19___);\nvar ___CSS_LOADER_URL_REPLACEMENT_20___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_20___);\nvar ___CSS_LOADER_URL_REPLACEMENT_21___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_21___);\nvar ___CSS_LOADER_URL_REPLACEMENT_22___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_22___);\nvar ___CSS_LOADER_URL_REPLACEMENT_23___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_23___);\nvar ___CSS_LOADER_URL_REPLACEMENT_24___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_24___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-icon.icon-bucket{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-icon.icon-circle-check{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.ui-icon.icon-checker{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.ui-icon.icon-copy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.ui-icon.icon-cut{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.ui-icon.icon-dismiss{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.ui-icon.icon-ellipsis{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.ui-icon.icon-eraser{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}.ui-icon.icon-eye{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \")}.ui-icon.icon-eyedropper{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \")}.ui-icon.icon-equalizer{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_10___ + \")}.ui-icon.icon-floppy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_11___ + \")}.ui-icon.icon-grid{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_12___ + \")}.ui-icon.icon-minus{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_13___ + \")}.ui-icon.icon-paste{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_14___ + \")}.ui-icon.icon-pencil{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_15___ + \")}.ui-icon.icon-plus{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_16___ + \")}.ui-icon.icon-redo{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_17___ + \")}.ui-icon.icon-return{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_18___ + \")}.ui-icon.icon-select{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_19___ + \")}.ui-icon.icon-undo{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_20___ + \")}.ui-icon.icon-select{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_19___ + \")}.ui-icon.icon-corners{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_21___ + \")}.ui-icon.icon-crop{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_22___ + \")}.ui-icon.icon-full-frame{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_23___ + \")}.ui-icon.icon-grid-crossed{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_24___ + \")}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/icons.css\"],\"names\":[],\"mappings\":\"AAAA,qBAAuB,wDAAyC,CAAI,2BACvC,wDAA+C,CAAI,sBACxD,wDAA0C,CAAI,mBACjD,wDAAuC,CAAI,kBAC5C,wDAAsC,CAAI,sBACtC,wDAA0C,CAAI,uBAC7C,wDAA2C,CAAI,qBACjD,wDAAyC,CAAI,kBAChD,wDAAsC,CAAI,yBACnC,wDAA6C,CAAI,wBAClD,yDAA4C,CAAI,qBACnD,yDAAyC,CAAI,mBAC/C,yDAAuC,CAAI,oBAC1C,yDAAwC,CAAI,oBAC5C,yDAAwC,CAAI,qBAC3C,yDAAyC,CAAI,mBAC/C,yDAAuC,CAAI,mBAC3C,yDAAuC,CAAI,qBACzC,yDAAyC,CAAI,qBAC7C,yDAAyC,CAAI,mBAC/C,yDAAuC,CAAI,qBACzC,yDAAyC,CAAI,sBAC5C,yDAA0C,CAAI,mBACjD,yDAAuC,CAAI,yBACrC,yDAA6C,CAAI,2BAC/C,yDAA+C\",\"sourcesContent\":[\".ui-icon.icon-bucket { background-image: url(\\\"icons/bucket.svg\\\"); }\\n.ui-icon.icon-circle-check { background-image: url(\\\"icons/circle-check.svg\\\"); }\\n.ui-icon.icon-checker { background-image: url(\\\"icons/checker.svg\\\"); }\\n.ui-icon.icon-copy { background-image: url(\\\"icons/copy.svg\\\"); }\\n.ui-icon.icon-cut { background-image: url(\\\"icons/cut.svg\\\"); }\\n.ui-icon.icon-dismiss { background-image: url(\\\"icons/dismiss.svg\\\"); }\\n.ui-icon.icon-ellipsis { background-image: url(\\\"icons/ellipsis.svg\\\"); }\\n.ui-icon.icon-eraser { background-image: url(\\\"icons/eraser.svg\\\"); }\\n.ui-icon.icon-eye { background-image: url(\\\"icons/eye.svg\\\"); }\\n.ui-icon.icon-eyedropper { background-image: url(\\\"icons/eyedropper.svg\\\"); }\\n.ui-icon.icon-equalizer { background-image: url(\\\"icons/equalizer.svg\\\"); }\\n.ui-icon.icon-floppy { background-image: url(\\\"icons/floppy.svg\\\"); }\\n.ui-icon.icon-grid { background-image: url(\\\"icons/grid.svg\\\"); }\\n.ui-icon.icon-minus { background-image: url(\\\"icons/minus.svg\\\"); }\\n.ui-icon.icon-paste { background-image: url(\\\"icons/paste.svg\\\"); }\\n.ui-icon.icon-pencil { background-image: url(\\\"icons/pencil.svg\\\"); }\\n.ui-icon.icon-plus { background-image: url(\\\"icons/plus.svg\\\"); }\\n.ui-icon.icon-redo { background-image: url(\\\"icons/redo.svg\\\"); }\\n.ui-icon.icon-return { background-image: url(\\\"icons/return.svg\\\"); }\\n.ui-icon.icon-select { background-image: url(\\\"icons/select.svg\\\"); }\\n.ui-icon.icon-undo { background-image: url(\\\"icons/undo.svg\\\"); }\\n.ui-icon.icon-select { background-image: url(\\\"icons/select.svg\\\"); }\\n.ui-icon.icon-corners { background-image: url(\\\"icons/corners.svg\\\"); }\\n.ui-icon.icon-crop { background-image: url(\\\"icons/crop.svg\\\"); }\\n.ui-icon.icon-full-frame { background-image: url(\\\"icons/full-frame.svg\\\"); }\\n.ui-icon.icon-grid-crossed { background-image: url(\\\"icons/grid-crossed.svg\\\"); }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-button-wrap{display:inline-flex;align-items:stretch}.ui-button-wrap.split>.split-part>.ui-icon.size-8{margin-left:0}.ui-button{display:inline-flex;align-items:center;padding:0.6em}.ui-button>.ui-icon.size-8{margin-left:0.6em}.ui-color-picker>.layer.slider-2d .ui-range .handle,.ui-color-picker>.layer.slider-1d .ui-range .handle,.ui-color-picker>.layer.slider-alpha .ui-range .handle{width:8px;height:8px;border:solid 1px silver;background:white}.ui-color-picker>.layer.slider-2d .ui-range .handle:before,.ui-color-picker>.layer.slider-1d .ui-range .handle:before,.ui-color-picker>.layer.slider-alpha .ui-range .handle:after{content:'.';color:transparent;width:40px;height:40px;background:rgba(127,127,127,0.2);position:absolute;border-radius:100%;top:-16px;left:-16px}.ui-color-picker .swatch{display:block;height:20px}.ui-color-picker>.layer{margin:10px 0}.ui-color-picker>.layer:first-child{margin-top:0}.ui-color-picker>.layer:last-child{margin-bottom:0}.ui-color-picker>.layer.swatch{border-radius:5px;overflow:hidden;border:none;height:40px}.ui-color-picker>.layer.swatch .swatch{height:40px}.ui-color-picker>.layer.slider-2d .ui-range{height:100px;background-size:100% 100px;background-repeat:no-repeat;border-radius:5px;border:none}.ui-color-picker>.layer.slider-1d .ui-range{border:none;border-radius:5px;height:10px;margin:30px 0}.ui-color-picker>.layer.slider-alpha .ui-range{border:none;height:10px;margin:30px 0;background-color:transparent;background-size:contain;background-repeat:repeat}.ui-color-picker>.layer.slider-alpha .ui-range:before{content:'.';color:transparent;position:absolute;left:0;top:0;right:0;bottom:0;background:linear-gradient(90deg, rgba(255,255,255,0) 0%, #fff 100%);border-radius:5px}.ui-color-picker>.layer.inputs{display:flex}.ui-color-picker>.layer.inputs .item{flex-shrink:3;text-align:center}.ui-color-picker>.layer.inputs .item.hex{flex-shrink:1}.ui-color-picker>.layer.inputs .item .label{margin:10px 0}.ui-color-picker>.layer.inputs .item input{width:70%;text-align:center}.ui-clickable:not(.disabled){cursor:pointer}.ui-clickable.disabled{opacity:0.3}.ui-icon{background:center center no-repeat;background-size:100% 100%}.ui-icon.size-8{width:8px;height:8px}.ui-icon.size-16{width:16px;height:16px}.ui-icon.size-20{width:20px;height:20px}.ui-icon.size-32{width:32px;height:32px}.ui-icon.size-50{width:50px;height:50px}.ui-item-group{display:inline-flex;overflow:hidden;align-items:stretch}.ui-label.with-icon{display:flex;align-items:center}.ui-label.with-icon .ui-icon{margin-right:0.5em}.ui-label .desc{opacity:50%}.ui-separator{position:relative;height:1em}.ui-separator::after{display:block;position:absolute;content:'.';color:transparent;left:0;right:0;top:50%;height:1px}.ui-textbox{display:inline-flex;position:relative;border:solid 1px WindowFrame;background-color:white}.ui-textbox input{border:none;background-color:white}.ui-textbox input:focus{outline:none}.ui-menuitem{position:relative;display:flex;align-items:center;padding:0.6em;cursor:pointer}.ui-menuitem .ui-icon.icon-chevron-right{position:absolute;right:0.6em}.ui-menuitem .ui-label{padding-right:25px}.ui-tree-item{display:flex;padding:0.6em;align-items:center;cursor:pointer}.ui-tree-item>.collapse-glyph{margin-right:0.6em}.ui-range{height:40px;border-radius:20px;background:#f0f0f0;background-size:contain;position:relative}.ui-range .handle{position:absolute;width:40px;height:40px;border-radius:100%;background:Highlight}.ui-dock-view,.ui-dock-view>.dock-side,.ui-dock-view>.main-side{position:absolute;top:0;left:0;right:0;bottom:0}.ui-dock-view .dock-side,.ui-dock-view>.main-side{overflow:auto}.ui-dock-view.side-left>.dock-side{right:auto}.ui-dock-view.side-top>.dock-side{bottom:auto}.ui-dock-view.side-right>.dock-side{left:auto}.ui-dock-view.side-bottom>.dock-side{top:auto}.ui-split-view.side-left>.dock-side{border-right-style:solid;border-right-width:1px}.ui-split-view.side-top>.dock-side{border-bottom-style:solid;border-bottom-width:1px}.ui-split-view.side-right>.dock-side{border-left-style:solid;border-left-width:1px}.ui-split-view.side-bottom>.dock-side{border-top-style:solid;border-top-width:1px}.ui-tab-view>.tabs>.items>.tab{padding-left:2em;padding-right:2em}.ui-tree-view{position:absolute;top:0;left:0;right:0;bottom:0}.ui-toolbar-view>.toolbar{display:flex;justify-content:space-between}.ui-toolbar-view>.toolbar>.items{display:flex;align-items:stretch}.ui-toolbar-view>.content{flex-grow:1;overflow:auto}.ui-toolbar-view.side-left>.toolbar,.ui-toolbar-view.side-right>.toolbar{flex-direction:column}.ui-toolbar-view.side-left>.toolbar>.items,.ui-toolbar-view.side-right>.toolbar>.items{flex-direction:column}.ui-menu-overlay{min-width:100px;box-shadow:3px 3px 3px rgba(0,0,0,0.3);z-index:10000}.ui-suggestions-overlay{background-color:Menu}.ui-suggestions-overlay .ui-clickable,.ui-suggestions-overlay .ui-loader{padding:0.6em}.ui-overlay{position:fixed;z-index:10000}.ui-clickable.is-open{background-color:Highlight;color:HighlightText}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:Highlight;color:HighlightText}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:Highlight;color:HighlightText}.ui-menu-overlay,.ui-suggestions-overlay{background-color:Window;color:WindowText;border:solid 1px #ddd;box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.ui-separator:after{background-color:rgba(0,0,0,0.13)}.ui-item-group{border:solid 1px #ddd;border-radius:0.5em}.ui-item-group>.ui-clickable.selected:not(.disabled){background-color:#ddd}.ui-split-view>.dock-side{border-color:#ddd}.ui-tab-view>.tabs{background-color:#ddd}.ui-tab-view>.tabs>.items>.tab{margin-top:0.6em}.ui-tab-view>.tabs>.items>.selected{background-color:white}.ui-tree-view:focus .ui-tree-item.selected{background-color:Highlight;color:HighlightText}.ui-tree-item.selected{background-color:#f0f0f0;color:HighlightText}.ui-tree-item:not(.selected):hover{background-color:#E3EFFE}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/items/Button.scss\",\"webpack://./src/hui/items/ColorPicker.scss\",\"webpack://./src/hui/items/Clickable.scss\",\"webpack://./src/hui/items/Icon.scss\",\"webpack://./src/hui/items/ItemGroup.scss\",\"webpack://./src/hui/items/Label.scss\",\"webpack://./src/hui/items/Separator.scss\",\"webpack://./src/hui/items/TextBox.scss\",\"webpack://./src/hui/items/MenuItem.scss\",\"webpack://./src/hui/items/TreeItem.scss\",\"webpack://./src/hui/items/Range.scss\",\"webpack://./src/hui/layout/DockView.scss\",\"webpack://./src/hui/layout/SplitView.scss\",\"webpack://./src/hui/layout/TabView.scss\",\"webpack://./src/hui/layout/TreeView.scss\",\"webpack://./src/hui/layout/ToolbarView.scss\",\"webpack://./src/hui/overlays/MenuOverlay.scss\",\"webpack://./src/hui/overlays/SuggestionsOverlay.scss\",\"webpack://./src/hui/overlays/Overlay.scss\",\"webpack://./src/hui/css/theme.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".ui-button-wrap{\\n  display: inline-flex;\\n  align-items: stretch;\\n\\n  &.split {\\n    > .split-part {\\n      > .ui-icon.size-8 {\\n        margin-left: 0;\\n      }\\n    }\\n  }\\n}\\n\\n.ui-button{\\n  display: inline-flex;\\n  align-items: center;\\n  padding: 0.6em;\\n\\n  > .ui-icon.size-8{\\n    margin-left: 0.6em;\\n  }\\n}\",\".ui-color-picker{\\n\\n  $slider-height: 10px;\\n  $slider-margin: 30px 0;\\n  $handle-margin-top: -14px;\\n  $layer-border: none; //solid 1px #808080;\\n  $layer-border-radius: 5px;\\n  $swatch-height: 40px;\\n\\n  %handle{\\n    width: 8px;\\n    height: 8px;\\n    border: solid 1px silver;\\n    background: white;\\n  }\\n\\n  %handleAura{\\n    content: '.';\\n    color: transparent;\\n    width: 40px;\\n    height: 40px;\\n    background: rgba(127, 127, 127, 0.2);\\n    position: absolute;\\n    border-radius: 100%;\\n    top: -16px;\\n    left: -16px;\\n  }\\n\\n  .swatch{\\n    display: block;\\n    height: 20px;\\n  }\\n\\n  > .layer{\\n    margin: 10px 0;\\n\\n    &:first-child{ margin-top: 0; }\\n    &:last-child{ margin-bottom: 0; }\\n\\n    &.swatch{\\n\\n      border-radius: $layer-border-radius;\\n      overflow: hidden;\\n      border: $layer-border;\\n      height: $swatch-height;\\n      .swatch{\\n        height: $swatch-height;\\n      }\\n    }\\n\\n    &.slider-2d{\\n      .ui-range{\\n        height: 100px;\\n        background-size: 100% 100px;\\n        background-repeat: no-repeat;\\n        border-radius: $layer-border-radius;\\n        border: $layer-border;\\n        .handle{\\n          @extend %handle;\\n          &:before{ @extend %handleAura; }\\n        }\\n      }\\n    }\\n\\n    &.slider-1d{\\n      .ui-range{\\n        border: $layer-border;\\n        border-radius: $layer-border-radius;\\n        height: $slider-height;\\n        margin: $slider-margin;\\n        .handle{\\n          @extend %handle;\\n          &:before{ @extend %handleAura; }\\n        }\\n      }\\n    }\\n\\n    &.slider-alpha{\\n      .ui-range{\\n        border: $layer-border;\\n        height: $slider-height;\\n        margin: $slider-margin;\\n        background-color: transparent;\\n        background-size: contain;\\n        background-repeat: repeat;\\n        .handle{\\n          @extend %handle;\\n          &:after{ @extend %handleAura; }\\n        }\\n        &:before{\\n          content: '.'; color: transparent;\\n          position: absolute;\\n          left: 0; top: 0; right: 0; bottom: 0;\\n          background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);\\n          border-radius: $layer-border-radius;\\n        }\\n      }\\n    }\\n    &.inputs{\\n      display: flex;\\n      .item{\\n        flex-shrink: 3;\\n        text-align: center;\\n\\n        &.hex{\\n          flex-shrink: 1;\\n        }\\n        .label{\\n          margin: 10px 0;\\n        }\\n\\n        input{\\n          width: 70%;\\n          text-align: center;\\n        }\\n      }\\n    }\\n  }\\n\\n}\",\".ui-clickable{\\n\\n  &:not(.disabled){\\n    cursor: pointer;\\n  }\\n\\n  &.disabled{\\n    opacity: 0.3;\\n  }\\n\\n  &.is-open,&:hover{\\n\\n  }\\n}\",\".ui-icon {\\n  background: center center no-repeat;\\n  background-size: 100% 100%;\\n\\n  &.size-8 { width: 8px;  height: 8px;  }\\n  &.size-16{ width: 16px; height: 16px; }\\n  &.size-20{ width: 20px; height: 20px; }\\n  &.size-32{ width: 32px; height: 32px; }\\n  &.size-50{ width: 50px; height: 50px; }\\n\\n}\\n\",\".ui-item-group{\\n  display: inline-flex;\\n  overflow: hidden;\\n  align-items: stretch;\\n}\",\".ui-label{\\n\\n  &.with-icon{\\n    display: flex;\\n    align-items: center;\\n\\n    .ui-icon{\\n      margin-right: 0.5em;\\n    }\\n  }\\n\\n  .desc{\\n    opacity: 50%;\\n  }\\n}\\n\",\".ui-separator{\\n  position: relative;\\n  height: 1em;\\n\\n  &::after{\\n    display: block;\\n    position: absolute;\\n    content: '.';\\n    color: transparent;\\n    left: 0;\\n    right: 0;\\n    top: 50%;\\n    height: 1px;\\n  }\\n}\",\".ui-textbox {\\n  display: inline-flex;\\n  position: relative;\\n  border: solid 1px WindowFrame;\\n  background-color: white;\\n\\n  input{\\n    border: none;\\n    background-color: white;\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n}\",\".ui-menuitem{\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 0.6em;\\n  cursor: pointer;\\n\\n\\n  &.is-open,&:hover{\\n    /* Colors */\\n  }\\n\\n  .ui-icon.icon-chevron-right{\\n    position: absolute;\\n    right: 0.6em;\\n  }\\n\\n  .ui-label{\\n    padding-right: 25px; // Based on a 16px icon to be positioned as chevron to the right\\n  }\\n}\",\".ui-tree-item{\\n  display: flex;\\n  padding: 0.6em;\\n  align-items: center;\\n  cursor: pointer;\\n\\n  > .collapse-glyph {\\n    margin-right: 0.6em;\\n  }\\n}\\n\\n.tree-item-children{\\n}\",\".ui-range{\\n\\n  height: 40px;\\n  border-radius: 20px;\\n  background: #f0f0f0;\\n  background-size: contain;\\n  position: relative;\\n\\n  .handle{\\n    position: absolute;\\n    width: 40px;\\n    height: 40px;\\n    border-radius: 100%;\\n    background: Highlight;\\n  }\\n\\n}\",\".ui-dock-view{\\n\\n  &, > .dock-side, > .main-side{\\n    position: absolute;\\n    top:0;\\n    left:0;\\n    right: 0;\\n    bottom:0;\\n  }\\n\\n  .dock-side, > .main-side {\\n    overflow: auto;\\n  }\\n\\n  &.side-left   > .dock-side{ right:  auto; }\\n  &.side-top    > .dock-side{ bottom: auto; }\\n  &.side-right  > .dock-side{ left:   auto; }\\n  &.side-bottom > .dock-side{ top:    auto; }\\n}\",\".ui-split-view{\\n\\n  &.side-left > .dock-side{   border-right-style: solid; border-right-width: 1px; }\\n  &.side-top > .dock-side{    border-bottom-style: solid; border-bottom-width: 1px; }\\n  &.side-right > .dock-side{  border-left-style: solid; border-left-width: 1px; }\\n  &.side-bottom > .dock-side{ border-top-style: solid; border-top-width: 1px; }\\n}\",\".ui-tab-view{\\n  > .tabs{\\n    > .items > .tab{\\n      padding-left: 2em;\\n      padding-right: 2em;\\n    }\\n  }\\n\\n}\",\".ui-tree-view{\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\",\".ui-toolbar-view{\\n\\n  > .toolbar{\\n    display: flex;\\n    justify-content: space-between;\\n\\n    > .items{\\n      display: flex;\\n      align-items: stretch;\\n    }\\n  }\\n\\n  > .content{\\n    flex-grow: 1;\\n    overflow: auto;\\n  }\\n\\n  &.side-left, &.side-right{\\n    > .toolbar{\\n      flex-direction: column;\\n\\n      > .items{\\n        flex-direction: column;\\n      }\\n    }\\n  }\\n\\n}\",\".ui-menu-overlay {\\n  min-width: 100px;\\n  box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.3);\\n  z-index: 10000;\\n}\",\".ui-suggestions-overlay{\\n  background-color: Menu;\\n\\n  .ui-clickable, .ui-loader{\\n    padding: 0.6em;\\n  }\\n}\",\".ui-overlay{\\n  position: fixed;\\n  z-index: 10000;\\n}\",\"\\n$button-face-hover-bg: Highlight !default;\\n$button-face-hover-fg: HighlightText !default;\\n$button-face-selected-bg: Highlight !default;\\n$button-face-selected-fg: HighlightText !default;\\n$window-bg: Window !default;\\n$window-fg: WindowText !default;\\n$window-border: #ddd !default;\\n$separator: rgba(0, 0, 0, 0.13) !default;\\n\\n.ui-clickable.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n}\\n\\n.ui-button-wrap.split:hover > .ui-button-split-part,\\n.ui-button-wrap.split:hover > .ui-button,\\n.ui-button:hover:not(.face-never):not(.disabled),\\n.ui-clickable.selected:not(.disabled),\\n.ui-button.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n}\\n\\n.ui-menuitem.is-open,\\n.ui-menuitem.is-selected{\\n    background-color: $button-face-selected-bg;\\n    color: $button-face-selected-fg;\\n}\\n\\n.ui-menu-overlay,\\n.ui-suggestions-overlay{\\n    background-color: $window-bg;\\n    color: $window-fg;\\n    border: solid 1px $window-border;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\\n.ui-separator:after{\\n    background-color: $separator;\\n}\\n.ui-item-group{\\n    border: solid 1px $window-border;\\n    border-radius: 0.5em;\\n}\\n\\n.ui-item-group > .ui-clickable.selected:not(.disabled){\\n    background-color: #ddd;\\n}\\n\\n.ui-split-view > .dock-side{ border-color: $window-border;  }\\n\\n.ui-tab-view > .tabs { background-color: #ddd;}\\n.ui-tab-view > .tabs  > .items > .tab {margin-top: 0.6em;}\\n.ui-tab-view > .tabs  > .items > .selected{ background-color: white; }\\n\\n.ui-tree-view:focus .ui-tree-item.selected{\\n    background-color: Highlight;\\n    color: HighlightText;\\n}\\n\\n.ui-tree-item.selected{\\n    background-color: #f0f0f0;\\n    color: HighlightText;\\n}\\n\\n.ui-tree-item:not(.selected):hover{\\n    background-color: #E3EFFE;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./icons/0822-cross2.svg\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./icons/0175-floppy-disk.svg\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"./icons/0180-file-empty.svg\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"./icons/0187-folder.svg\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"./icons/0826-chevron-up.svg\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"./icons/0827-chevron-down.svg\";\nimport ___CSS_LOADER_URL_IMPORT_6___ from \"./icons/0828-chevron-left.svg\";\nimport ___CSS_LOADER_URL_IMPORT_7___ from \"./icons/0829-chevron-right.svg\";\nimport ___CSS_LOADER_URL_IMPORT_8___ from \"../../components/icons/select.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"body{font:caption}.ui-panel>div{margin:50px}.ui-icon.icon-cross{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-icon.icon-floppy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.ui-icon.icon-file{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.ui-icon.icon-folder{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.ui-icon.icon-chevron-up{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.ui-icon.icon-chevron-down{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.ui-icon.icon-chevron-left{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.ui-icon.icon-chevron-right{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}.ui-icon.icon-select{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \")}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/css/styles.css\"],\"names\":[],\"mappings\":\"AAAA,KACI,YAAa,CAChB,cAGG,WAAY,CAEf,oBAEqB,wDAA8C,CAAI,qBACjD,wDAAmD,CAAI,mBACzD,wDAAkD,CAAI,qBACpD,wDAA8C,CAAI,yBAC9C,wDAAkD,CAAI,2BACpD,wDAAoD,CAAI,2BACxD,wDAAoD,CAAI,4BACvD,wDAAqD,CAAI,qBAChE,wDAA0D\",\"sourcesContent\":[\"body{\\n    font: caption;\\n}\\n\\n.ui-panel > div {\\n    margin: 50px;\\n    /*box-shadow: 0 0 0 3px blue;*/\\n}\\n\\n.ui-icon.icon-cross { background-image: url(\\\"icons/0822-cross2.svg\\\"); }\\n.ui-icon.icon-floppy { background-image: url(\\\"icons/0175-floppy-disk.svg\\\"); }\\n.ui-icon.icon-file { background-image: url(\\\"icons/0180-file-empty.svg\\\"); }\\n.ui-icon.icon-folder { background-image: url(\\\"icons/0187-folder.svg\\\"); }\\n.ui-icon.icon-chevron-up { background-image: url(\\\"icons/0826-chevron-up.svg\\\"); }\\n.ui-icon.icon-chevron-down { background-image: url(\\\"icons/0827-chevron-down.svg\\\"); }\\n.ui-icon.icon-chevron-left { background-image: url(\\\"icons/0828-chevron-left.svg\\\"); }\\n.ui-icon.icon-chevron-right { background-image: url(\\\"icons/0829-chevron-right.svg\\\"); }\\n.ui-icon.icon-select { background-image: url(\\\"../../components/icons/select.svg\\\"); }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div.canvas-view{position:absolute;top:0;left:0;right:0;bottom:0;overscroll-behavior:none;height:100%;overflow:hidden}div.canvas-view canvas:focus{outline:none}.container-panel{border-radius:10px}.container-panel>.marker{position:absolute}.container-panel>.marker.n,.container-panel>.marker.s{height:1px;left:0;right:0}.container-panel>.marker.e,.container-panel>.marker.w{width:1px;top:0;bottom:0}.container-panel>.marker.n{top:10px}.container-panel>.marker.s{bottom:10px}.container-panel>.marker.w{left:10px}.container-panel>.marker.e{right:10px}.container-panel>.content{position:absolute;top:10px;left:10px;right:10px;bottom:10px}.expando{margin-bottom:10px}.expando>.head{display:flex;align-items:center;justify-content:space-between;height:50px;border-top-left-radius:10px;border-top-right-radius:10px}.expando>.head>.label{margin-left:10px}.expando>.head>.items{display:flex}.expando>.head>.items .ui-label{margin-right:10px;opacity:0.3}.expando>.body{min-height:20px;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding:10px}.expando>.body>.children>.ui-button{display:block}.preview-panel{position:relative;display:flex;align-items:center;border-radius:7px}.preview-panel:not(:last-child){margin-bottom:10px}.preview-panel.level-1,.preview-panel.level-2{justify-content:space-between}.preview-panel.level-1>.preview,.preview-panel.level-2>.preview{margin-right:10px}.preview-panel.level-3,.preview-panel.level-4{flex-direction:column}.preview-panel.level-3>.preview,.preview-panel.level-4>.preview{margin-bottom:10px}.preview-panel.level-3 .size-label,.preview-panel.level-4 .size-label{margin:10px 0}.preview-panel.level-3 .ui-button.ellipsis,.preview-panel.level-4 .ui-button.ellipsis{position:absolute;right:0;bottom:0;padding:0}.preview-panel.level-1>.preview{width:64px;height:64px}.preview-panel.level-2>.preview{width:128px;height:128px}.preview-panel.level-3>.preview{width:192px;height:192px}.preview-panel.level-4>.preview{width:256px;height:256px}.preview-panel>.preview{display:flex;justify-content:center;align-items:center;overflow:hidden}.preview-panel.selected>.preview{border-right:solid 1px transparent}.ui-palette .palette-label{opacity:0.5}.ui-palette>.palette-label{margin-bottom:10px}.ui-palette .palette-preview{cursor:pointer;font-size:0.8em;padding:10px;border-radius:4px;margin-bottom:3px}.ui-palette .palette-preview:not(:last-child){margin-bottom:10px}.ui-palette .palette-preview .swatches{display:flex}.ui-palette .palette-preview .swatch{width:15px;height:15px;border-radius:7px}.ui-palette .palette-preview .swatch:not(:last-child){margin-right:10px}.ui-palette .swatches>div:not(.label){display:inline-block}.ui-palette .swatches .ui-clickable{padding:10px;margin-right:10px;margin-bottom:10px}.ui-palette .swatches .pal-swatch{border-radius:4px}.ui-palette .swatches .pal-swatch>div{border-radius:10px;width:20px;height:20px}.review-studio>.ui-dock-view{margin:10px}.review-studio .container-panel.main-panel{position:absolute;top:0;left:0;right:0;bottom:0}.review-studio .container-panel.main-panel>.content{display:flex;align-items:center;flex-direction:column;justify-content:center}.review-studio .container-panel.main-panel>.content>.row{width:270px;text-align:center}.review-studio .container-panel.main-panel>.content>.row:not(:last-child){margin-bottom:50px}.review-studio .container-panel.main-panel>.content>.row>.caption{font-size:20px;margin:10px 0}.review-studio .container-panel.main-panel>.content>.row .corner-grid>.row{display:flex;justify-content:center}.review-studio .container-panel.main-panel>.content>.row .corner-grid>.row:not(:last-child){margin-bottom:10px}.review-studio .container-panel.main-panel>.content>.row .corner-grid .corner{width:70px;height:70px;border-radius:10px;cursor:pointer}.review-studio .container-panel.main-panel>.content>.row .corner-grid .corner:not(:last-child){margin-right:10px}.review-studio .container-panel.main-panel>.content>.row .ui-button.cta{font-size:20px;padding:15px 60px;border-radius:50px}.review-studio .review-studio-sidebar{position:relative;margin-left:10px}.review-studio .review-studio-sidebar .container-panel.preview{height:220px}.review-studio .review-studio-sidebar .container-panel.preview .content{display:flex;justify-content:center}html{height:100%;overflow:hidden;position:relative}body{margin:0;height:100%;overflow:auto;position:relative;overscroll-behavior:none;font-family:'Mukta Mahee', 'San Francisco', 'Helvetica', sans-serif}#app{user-select:none;height:100%;overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0}#app .ui-button{border-radius:5px}#app .toolbar .ui-button,#app .expando>.head>.items .ui-button{padding:0}#app .toolbar .ui-button:focus,#app .expando>.head>.items .ui-button:focus{outline:none}#app .adjusters>.ui-range:first-child{margin-bottom:10px}#app .editor-sidebar{margin:0 10px}#app .canvas-main.main-side{overflow:hidden;height:100%;overscroll-behavior:none}#app .side-top>.toolbar.main-tools>.items.near{margin:10px}#app .side-top>.toolbar.main-tools>.items.near .ui-button{margin-right:5px}#app .side-left>.toolbar.main-tools>.items.near{margin:0 10px}#app .side-left>.toolbar.main-tools>.items.near .ui-button{margin-bottom:5px}#app .ui-button:focus{outline:none}#app .cue{text-align:right;font-size:0.7em;opacity:0.5;font-family:monospace}#app .cta.ui-button{border-radius:30px;display:block;background-color:#3175ef;color:white;text-align:center}#root-dialog .modal{position:fixed;top:0;left:0;right:0;bottom:0}.ui-clickable.is-open{background-color:rgba(0,0,0,0.0392157)}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:rgba(0,0,0,0.0392157)}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:rgba(0,0,0,0.0392157)}.ui-button:focus{box-shadow:0 0 10px 0 rgba(5,148,255,0.51)}.ui-button.cta{background-color:#0052A8;color:#fff}.ui-button.cta:hover{background-color:#2780de !important;color:#fff !important}.expando>.head{color:#101010;background-color:rgba(0,0,0,0.1)}.expando>.body{background-color:rgba(0,0,0,0.05)}.preview-panel.selected{background-color:rgba(0,0,0,0.0392157)}.preview-panel.selected>.preview{border-right:solid 1px rgba(0,0,0,0.784314)}.ui-range{background:rgba(0,0,0,0.784314)}.ui-range .handle{background-color:rgba(0,0,0,0.0392157)}.pal-swatch,.palette-preview{background-color:rgba(0,0,0,0.784314)}.pal-swatch.selected,.pal-swatch:hover,.palette-preview.selected,.palette-preview:hover{background-color:rgba(0,0,0,0.0392157)}#root-dialog .modal{background-color:#fff}.container-panel{background-color:rgba(0,0,0,0.784314)}.container-panel>.marker{background-color:rgba(0,0,0,0.784314)}.review-studio .corner-grid .corner{border:solid 1px #555}.review-studio .corner-grid .corner:not(.selected):hover{background-color:rgba(0,0,0,0.0392157)}.review-studio .corner-grid .corner.selected{background-color:#0052A8}@media (prefers-color-scheme: dark){body{background:#232328;color:#828282}.ui-clickable.is-open{background-color:rgba(255,255,255,0.0980392);color:#828282}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:rgba(255,255,255,0.0980392);color:#828282}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:rgba(255,255,255,0.0980392);color:#828282}.ui-menu-overlay,.ui-suggestions-overlay{background-color:#232328;color:#828282;border:solid 1px rgba(255,255,255,0.0509804);box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.ui-separator:after{background-color:rgba(255,255,255,0.0980392)}.ui-color-picker{font-size:14px}.ui-color-picker input{border:none;border-radius:5px;background:rgba(255,255,255,0.0509804);color:#828282}.expando>.head{color:#efefef;background-color:rgba(255,255,255,0.1)}.expando>.body{background-color:rgba(255,255,255,0.05)}.preview-panel.selected{background-color:rgba(255,255,255,0.0980392)}.preview-panel.selected>.preview{border-right:solid 1px rgba(255,255,255,0.0509804)}.ui-range{background:rgba(255,255,255,0.0509804)}.ui-range .handle{background-color:rgba(255,255,255,0.0980392)}.pal-swatch,.palette-preview{background-color:rgba(255,255,255,0.0509804)}.pal-swatch.selected,.pal-swatch:hover,.palette-preview.selected,.palette-preview:hover{background-color:rgba(255,255,255,0.0980392)}#root-dialog .modal{background-color:#232328}.container-panel{background-color:rgba(255,255,255,0.0509804)}.container-panel>.marker{background-color:rgba(255,255,255,0.0509804)}.review-studio .corner-grid .corner{border:solid 1px #828282}.review-studio .corner-grid .corner:not(.selected):hover{background-color:rgba(255,255,255,0.0980392)}.review-studio .corner-grid .corner.selected{background-color:#0052A8}}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/CanvasView.scss\",\"webpack://./src/components/ContainerPanel.scss\",\"webpack://./src/components/Expando.scss\",\"webpack://./src/components/PreviewPanel.scss\",\"webpack://./src/components/Palette.scss\",\"webpack://./src/components/ReviewStudio.scss\",\"webpack://./src/components/App.scss\",\"webpack://./src/theme.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"div.canvas-view{\\n\\n  position: absolute;\\n  top: 0; left: 0; right: 0; bottom:0;\\n  overscroll-behavior: none;\\n  height  : 100%;\\n  overflow: hidden;\\n\\n  canvas:focus{\\n    outline: none;\\n  }\\n\\n}\",\"$radius: 10px;\\n\\n.container-panel{\\n  border-radius: $radius;\\n\\n  > .marker { position: absolute; }\\n  > .marker.n, > .marker.s { height: 1px; left:0; right: 0; }\\n  > .marker.e, > .marker.w { width: 1px; top:0; bottom:0; }\\n  > .marker.n { top: $radius }\\n  > .marker.s { bottom: $radius }\\n  > .marker.w { left: $radius }\\n  > .marker.e { right: $radius }\\n  > .content {\\n    position: absolute;\\n    top: $radius;\\n    left: $radius;\\n    right: $radius;\\n    bottom: $radius;\\n  }\\n\\n}\",\".expando{\\n\\n  $b-rad: 10px;\\n  $space: 10px;\\n\\n  margin-bottom: $space;\\n\\n  > .head{\\n\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n\\n    height: 50px;\\n    border-top-left-radius: $b-rad;\\n    border-top-right-radius: $b-rad;\\n\\n    > .label{\\n      margin-left: $space;\\n    }\\n\\n    > .items{\\n      display: flex;\\n\\n      .ui-label{\\n        margin-right: $space;\\n        opacity: 0.3;\\n      }\\n\\n    }\\n  }\\n\\n  > .body{\\n    min-height: 20px;\\n    border-bottom-left-radius: $b-rad;\\n    border-bottom-right-radius: $b-rad;\\n    padding: $space;\\n\\n    > .children{\\n      > .ui-button{\\n        display: block;\\n      }\\n    }\\n\\n  }\\n\\n}\",\".preview-panel{\\n\\n  $space: 10px;\\n\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  border-radius: 7px;\\n\\n  &:not(:last-child){\\n    margin-bottom: $space;\\n  }\\n\\n  &.level-1, &.level-2{\\n    justify-content: space-between;\\n    > .preview {\\n      margin-right: $space;\\n    }\\n  }\\n\\n  &.level-3, &.level-4{\\n    flex-direction: column;\\n\\n    > .preview{\\n      margin-bottom: $space;\\n    }\\n\\n    .size-label{\\n      margin: $space 0;\\n    }\\n\\n    .ui-button.ellipsis{\\n      position: absolute;\\n      right: 0;\\n      bottom: 0;\\n      padding:0;\\n    }\\n  }\\n\\n  &.level-1{\\n    > .preview { width: 64px; height: 64px; }\\n  }\\n\\n  &.level-2{\\n    > .preview { width: 128px; height: 128px;}\\n  }\\n\\n  &.level-3{\\n    > .preview { width: 192px; height: 192px;}\\n  }\\n\\n  &.level-4{\\n    > .preview { width: 256px; height: 256px;}\\n  }\\n\\n  > .preview {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    overflow: hidden;\\n  }\\n\\n  &.selected{\\n    > .preview {\\n      border-right: solid 1px transparent;\\n    }\\n  }\\n\\n}\",\".ui-palette{\\n  $space:10px;\\n\\n  .palette-label{\\n    opacity: 0.5;\\n  }\\n\\n  > .palette-label{\\n    margin-bottom: $space;\\n  }\\n\\n  .palette-preview{\\n\\n    cursor: pointer;\\n    font-size: 0.8em;\\n    padding:$space;\\n    border-radius: 4px;\\n    margin-bottom: 3px;\\n\\n    &:not(:last-child){\\n      margin-bottom: $space;\\n    }\\n\\n    .swatches{\\n      display: flex;\\n    }\\n\\n    .swatch{\\n      width: 15px;\\n      height: 15px;\\n      border-radius: 7px;\\n\\n      &:not(:last-child){\\n        margin-right: $space;\\n      }\\n    }\\n  }\\n\\n  .swatches{\\n    > div:not(.label) {\\n      display: inline-block;\\n    }\\n\\n    .ui-clickable{\\n      padding: $space;\\n      margin-right: $space;\\n      margin-bottom: $space;\\n    }\\n\\n    .pal-swatch{\\n\\n      border-radius: 4px;\\n\\n      > div {\\n        border-radius: 10px;\\n        width: 20px;\\n        height: 20px;\\n      }\\n    }\\n  }\\n}\",\"\\n$spacing: 10px;\\n$large-font: 20px;\\n\\n.review-studio{\\n\\n  > .ui-dock-view{\\n    margin: 10px;\\n  }\\n\\n  .container-panel.main-panel{\\n    position: absolute;\\n    top: 0; left: 0;\\n    right: 0; bottom: 0;\\n\\n    > .content {\\n\\n      display: flex;\\n      align-items: center;\\n      flex-direction: column;\\n      justify-content: center;\\n\\n      > .row {\\n        width: 270px;\\n        text-align: center;\\n\\n        &:not(:last-child){\\n          margin-bottom: 50px;\\n        }\\n\\n        > .caption {\\n          font-size: $large-font;\\n          margin: 10px 0;\\n        }\\n\\n        .corner-grid{\\n          > .row{\\n            display: flex;\\n            justify-content: center;\\n\\n            &:not(:last-child){\\n              margin-bottom: $spacing;\\n            }\\n          }\\n          .corner{\\n            width: 70px;\\n            height: 70px;\\n            border-radius: 10px;\\n            cursor: pointer;\\n\\n            &:not(:last-child){\\n              margin-right: $spacing;\\n            }\\n          }\\n        }\\n\\n        .ui-button.cta{\\n          font-size: $large-font;\\n          padding: 15px 60px;\\n          border-radius: 50px;\\n        }\\n      }\\n    }\\n  }\\n\\n  .review-studio-sidebar{\\n    position: relative;\\n    margin-left: 10px;\\n\\n    .container-panel.preview{\\n      height: 220px;\\n\\n      .content{\\n        display: flex;\\n        justify-content: center;\\n      }\\n    }\\n  }\\n}\",\"\\nhtml {\\n  height  : 100%;\\n  overflow: hidden;\\n  position: relative;\\n}\\nbody {\\n  margin: 0;\\n  height  : 100%;\\n  overflow: auto;\\n  position: relative;\\n  overscroll-behavior: none;\\n  font-family: 'Mukta Mahee', 'San Francisco', 'Helvetica', sans-serif;\\n}\\n\\n#app{\\n  $space: 10px;\\n  user-select: none;\\n  height  : 100%;\\n  overflow: hidden;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n\\n\\n  .ui-button{\\n    border-radius: 5px;\\n  }\\n\\n  .toolbar .ui-button,\\n  .expando > .head > .items .ui-button{\\n    padding: 0;\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n\\n  .adjusters > .ui-range{\\n    &:first-child{\\n      margin-bottom: $space;\\n    }\\n  }\\n\\n  .editor-sidebar{\\n    margin: 0 10px;\\n  }\\n\\n  .canvas-main.main-side{\\n    overflow: hidden;\\n    height: 100%;\\n    overscroll-behavior: none;\\n  }\\n\\n  .side-top > .toolbar.main-tools {\\n     > .items.near{\\n        margin: 10px;\\n       .ui-button{ margin-right: 5px; }\\n    }\\n  }\\n  .side-left > .toolbar.main-tools {\\n     > .items.near{\\n        margin: 0 10px;\\n       .ui-button{ margin-bottom: 5px; }\\n    }\\n  }\\n\\n  .ui-button{\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n\\n  .cue {\\n    text-align: right;\\n    font-size: 0.7em;\\n    opacity: 0.5;\\n    font-family: monospace;\\n  }\\n  .cta.ui-button{\\n    border-radius: 30px;\\n    display: block;\\n    background-color: #3175ef;\\n    color: white;\\n    text-align: center;\\n  }\\n\\n}\\n\\n#root-dialog .modal{\\n  position: fixed;\\n  top: 0; left: 0;\\n  right: 0; bottom: 0;\\n}\",\"$color-strong: #0000000a;\\n$color-light: #000000c8;\\n$button-face-hover-bg: $color-strong;\\n$button-face-selected-bg: $color-strong;\\n$window-bg: #fff;\\n$window-fg: #555;\\n$cta-bg: #0052A8;\\n$cta-bg-hot: #2780de;\\n$cta-fg: #fff;\\n\\n.ui-clickable.is-open{\\n  background-color: $button-face-hover-bg;\\n}\\n\\n.ui-button-wrap.split:hover > .ui-button-split-part,\\n.ui-button-wrap.split:hover > .ui-button,\\n.ui-button:hover:not(.face-never):not(.disabled),\\n.ui-clickable.selected:not(.disabled),\\n.ui-button.is-open{\\n  background-color: $button-face-hover-bg;\\n}\\n\\n.ui-menuitem.is-open,\\n.ui-menuitem.is-selected{\\n  background-color: $button-face-selected-bg;\\n}\\n\\n.ui-button{\\n  &:focus{\\n    box-shadow: 0 0 10px 0 rgba(5,148,255,0.51);\\n  }\\n\\n  &.cta{\\n    background-color: $cta-bg;\\n    color: $cta-fg;\\n\\n    &:hover{\\n      background-color: $cta-bg-hot !important;\\n      color: $cta-fg !important;\\n    }\\n  }\\n}\\n\\n.expando {\\n  > .head{\\n    color: #101010;\\n    background-color: rgba(0,0,0,0.1);\\n  }\\n  > .body{ background-color: rgba(0,0,0,0.05) }\\n}\\n\\n.preview-panel {\\n  &.selected{\\n    background-color: $color-strong;\\n    > .preview{ border-right: solid 1px $color-light; }\\n  }\\n}\\n\\n.ui-range{\\n  background: $color-light;\\n  .handle{\\n    background-color: $color-strong;\\n  }\\n}\\n\\n.pal-swatch, .palette-preview{\\n  background-color: $color-light;\\n  &.selected,&:hover{\\n    background-color: $color-strong;\\n  }\\n}\\n\\n#root-dialog .modal{\\n  background-color: $window-bg;\\n}\\n\\n.container-panel{\\n  background-color: $color-light;\\n\\n  > .marker { background-color: $color-light; }\\n}\\n\\n.review-studio .corner-grid .corner {\\n  border: solid 1px $window-fg;\\n\\n  &:not(.selected):hover{\\n    background-color: $color-strong;\\n  }\\n\\n  &.selected{\\n    background-color: $cta-bg;\\n  }\\n}\\n\\n/* Dark mode */\\n@media (prefers-color-scheme: dark) {\\n  $color-strong: #ffffff19;\\n  $color-light: #ffffff0d;\\n  $button-face-hover-bg: $color-strong;\\n  $button-face-hover-fg: #828282;\\n  $button-face-selected-bg: $color-strong;\\n  $button-face-selected-fg: #828282;\\n  $window-bg: #232328;\\n  $window-fg: #828282;\\n  $window-border: $color-light;\\n  $separator: $color-strong;\\n  $text-box-bg: $color-light;\\n\\n  body{\\n    background: $window-bg;\\n    color: $window-fg;\\n  }\\n\\n  .ui-clickable.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n  }\\n\\n  .ui-button-wrap.split:hover > .ui-button-split-part,\\n  .ui-button-wrap.split:hover > .ui-button,\\n  .ui-button:hover:not(.face-never):not(.disabled),\\n  .ui-clickable.selected:not(.disabled),\\n  .ui-button.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n  }\\n\\n  .ui-menuitem.is-open,\\n  .ui-menuitem.is-selected{\\n    background-color: $button-face-selected-bg;\\n    color: $button-face-selected-fg;\\n  }\\n\\n  .ui-menu-overlay,\\n  .ui-suggestions-overlay{\\n    background-color: $window-bg;\\n    color: $window-fg;\\n    border: solid 1px $window-border;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  .ui-separator:after{\\n    background-color: $separator;\\n  }\\n\\n  .ui-color-picker{\\n    font-size: 14px;\\n\\n    input{\\n      border: none;\\n      border-radius: 5px;\\n      background: $text-box-bg;\\n      color: $window-fg;\\n    }\\n  }\\n\\n  .expando {\\n    > .head{\\n      color: #efefef;\\n      background-color: rgba(255, 255, 255, 0.1)\\n    }\\n    > .body{\\n      background-color: rgba(255, 255, 255, 0.05)\\n    }\\n  }\\n\\n  .preview-panel {\\n    &.selected{\\n      background-color: $color-strong;\\n      > .preview{ border-right: solid 1px $color-light; }\\n    }\\n  }\\n\\n  .ui-range{\\n    background: $color-light;\\n    .handle{\\n      background-color: $color-strong;\\n    }\\n  }\\n\\n  .pal-swatch, .palette-preview{\\n    background-color: $color-light;\\n    &.selected,&:hover{\\n      background-color: $color-strong;\\n    }\\n  }\\n\\n  #root-dialog .modal{\\n    background-color: $window-bg;\\n  }\\n\\n  .container-panel{\\n    background-color: $color-light;\\n    > .marker { background-color: $color-light; }\\n  }\\n\\n  .review-studio .corner-grid .corner {\\n    border: solid 1px $window-fg;\\n\\n    &:not(.selected):hover{\\n      background-color: $color-strong;\\n    }\\n\\n    &.selected{\\n      background-color: $cta-bg;\\n    }\\n  }\\n\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export default __webpack_public_path__ + \"images/fa2b951e78320c01827bc9ac3adc3784.svg\";","export default __webpack_public_path__ + \"images/da77af6df38f4fc3ba6088bfec456115.svg\";","export default __webpack_public_path__ + \"images/239d8eac76f04697355baec73b69da5c.svg\";","export default __webpack_public_path__ + \"images/daeb284051c74da3976abab2ac330645.svg\";","export default __webpack_public_path__ + \"images/d85bd057b1c1c6702ee833f0101d756f.svg\";","export default __webpack_public_path__ + \"images/5e3c35a7a81289ff467c2023d7169ca8.svg\";","export default __webpack_public_path__ + \"images/6660616bd1a6093cd5b0f679004ecde9.svg\";","export default __webpack_public_path__ + \"images/1a917ae890e4da4265edd5968c3c8f11.svg\";","export default __webpack_public_path__ + \"images/820f7b8de7fba0ea94526290972b828f.svg\";","export default __webpack_public_path__ + \"images/e4be7fb03d83a3b1e9080745e58b0b79.svg\";","export default __webpack_public_path__ + \"images/7fb165a6ae89527c4ecb5a7448e2eb05.svg\";","export default __webpack_public_path__ + \"images/f1f4e0ab7dab76a3d235e29fc58546c0.svg\";","export default __webpack_public_path__ + \"images/e2babadcd10e3392b642fd95ac5c1157.svg\";","export default __webpack_public_path__ + \"images/ffeb5e9a15a27e92596e816350b5c227.svg\";","export default __webpack_public_path__ + \"images/ebef5026c98408d876668f6784364994.svg\";","export default __webpack_public_path__ + \"images/dafcceff7570d4c8b6eca361206792d1.svg\";","export default __webpack_public_path__ + \"images/04926be5218e648b0dcf64aca5e1ec31.svg\";","export default __webpack_public_path__ + \"images/6d01d668977e0cc06cf9fda924f45c7c.svg\";","export default __webpack_public_path__ + \"images/ab85e08084162fe117ff0164c40335ee.svg\";","export default __webpack_public_path__ + \"images/c26f6f7ceb9e284305725c5c59e3d765.svg\";","export default __webpack_public_path__ + \"images/9477dca6b724b89b305963b9b46cbbc9.svg\";","export default __webpack_public_path__ + \"images/10079e5f3a28bf4164a1495e0e20dc17.svg\";","export default __webpack_public_path__ + \"images/e9da72544a3330cc52ca45e2bbda0411.svg\";","export default __webpack_public_path__ + \"images/b3890d6011ef034907470bd16feada8d.svg\";","export default __webpack_public_path__ + \"images/1234ba77aa491342e808e1cd6ab1c422.svg\";","export default __webpack_public_path__ + \"images/eaa6b0d5c4b755a1c5f442a5b31d3913.svg\";","export default __webpack_public_path__ + \"images/1c7c2677071e811d4aca7f0b4a48fbb3.svg\";","export default __webpack_public_path__ + \"images/ae2087a3922088a93b0f3fde77c0e56f.svg\";","export default __webpack_public_path__ + \"images/bb9f1f8d917fff10d0587496ee1e8cfd.svg\";","export default __webpack_public_path__ + \"images/38aee18e86f51b62ad5e548bd745488d.svg\";","export default __webpack_public_path__ + \"images/384b04f25826b885bb36dbf1d2d847c1.svg\";","export default __webpack_public_path__ + \"images/16d86ed52ad1cc4fa6e0eb00d1794003.svg\";","export default __webpack_public_path__ + \"images/12f0f97012b8956a484acfdd52300568.svg\";","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === 'function') {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./icons.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./styles.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import * as React from \"react\";\nimport {ToolbarView} from \"../hui/layout/ToolbarView\";\nimport {Button} from \"../hui/items/Button\";\nimport {Range} from \"../hui/items/Range\";\nimport {Separator} from \"../hui/items/Separator\";\nimport {DockView} from \"../hui/layout/DockView\";\nimport {CanvasView} from \"./CanvasView\";\nimport {DownloadFormat, IconCanvasController} from \"../model/IconCanvasController\";\nimport {EraserTool} from \"../model/tools/EraserTool\";\nimport {PencilTool} from \"../model/tools/PencilTool\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {PreviewPanel} from \"./PreviewPanel\";\nimport {IconDocument, IconEditorTool} from \"../model/IconEditor\";\nimport {SelectionTool} from \"../model/tools/SelectionTool\";\nimport {IconDirectory, IconService} from \"../model/IconService\";\nimport {MenuItem} from \"../hui/items/MenuItem\";\nimport {compareSize, makeSz, Size} from \"../hui/helpers/Rectangle\";\nimport {InvalidImageError} from \"../model/errors\";\nimport {FloodFillTool} from \"../model/tools/FloodFillTool\";\nimport {darkModeOn} from \"../hui/helpers/Utils\";\nimport {Expando} from \"./Expando\";\nimport {iconSz} from \"../model/Icon\";\nimport {Label} from \"../hui/items/Label\";\nimport {AdjustProperties, AdjustTool} from \"../model/tools/AdjustTool\";\nimport {PaletteManager} from \"./PaletteManager\";\nimport {Palette, PaletteService} from \"../model/PaletteService\";\nimport * as ReactDOM from \"react-dom\";\nimport {ReviewStudio} from \"./ReviewStudio\";\nimport {DocumentService} from \"../model/DocumentService\";\n\nconst DEFAULT_ICON = makeSz(32, 32);\n\nfunction changeFavicon(src: string) {\n    const link = document.createElement('link'),\n        oldLink = document.getElementById('dynamic-favicon');\n    link.id = 'dynamic-favicon';\n    link.rel = 'shortcut icon';\n    link.href = src;\n    if (oldLink) {\n        document.head.removeChild(oldLink);\n    }\n    document.head.appendChild(link);\n}\n\nexport function cue(m: string){\n    const e = document.getElementById('cue');\n\n    if (e){\n        e.innerHTML = m + '<br>' + e.innerHTML;\n    }\n}\n\nexport interface AppProps{}\n\ninterface IconPreview{\n    id: number;\n    data: string;\n}\n\nexport interface AppState{\n    controller: IconCanvasController;\n    controllers: IconCanvasController[];\n    previews: IconPreview[];\n    selectedTool: IconEditorTool | null;\n    undos: number;\n    redos: number;\n    showBackground: boolean;\n    showGrid: boolean;\n    colorA: Color;\n    adjustState?: AdjustProperties;\n}\n\nexport class App extends React.Component<AppProps, AppState>{\n\n    static activeController: IconCanvasController;\n\n    constructor(props: AppProps) {\n        super(props);\n\n        this.state = this.newDocumentState(DEFAULT_ICON);\n        const icon = this.state.controller.editor.document.icon;\n        const id = this.state.controller.id;\n        IconService.asBlobUrl(icon).then(data => this.setState({previews: [{id, data}]}));\n\n        DocumentService.restoreIcons().then(icons => {\n\n            if (icons && icons.length > 0){\n                this.setIcons({icons});\n            }\n\n        });\n\n    }\n\n    private newDocumentState(size: Size): AppState{\n        const icon = IconService.newIcon(size.width, size.height);\n        const controller = this.createController({icon});\n        const selectedTool = new PencilTool(controller);\n\n        return {\n            controller,\n            selectedTool,\n            controllers: [controller],\n            previews: [],\n            undos: 0,\n            redos: 0,\n            showBackground: true,\n            showGrid: true,\n            colorA: darkModeOn() ? Color.white : Color.black,\n        }\n    }\n\n    private newDocument(size: number){\n\n        const icon = IconService.newIcon(size, size)\n        const doc = {icon};\n        const controller = this.createController(doc);\n\n        this.setState({\n            controller,\n            controllers: [controller],\n            previews: [],\n            selectedTool: new SelectionTool(controller)\n        });\n    }\n\n    private async newIconEntry(size: number){\n\n        const blob = await IconService.asBlobWithMime(this.state.controller.editor.document.icon );\n        const icon = await IconService.fromFile(blob, makeSz(size, size), true);\n        const doc = {icon};\n        const controller = this.createController(doc);\n        const selectedTool = new SelectionTool(controller);\n        const controllers = [...this.state.controllers, controller];\n\n        (selectedTool as SelectionTool).selectAll();\n\n        IconService.asBlobUrl(icon).then(data => {\n\n            const previews = [...this.state.previews, {id: controller.id, data, size: iconSz(icon)}];\n            this.setState({\n                controller,\n                controllers,\n                selectedTool,\n                previews\n            });\n\n            this.persist();\n        })\n    }\n\n    private setIcons(dir: IconDirectory){\n\n        console.log(`Set icons`)\n        console.log(dir);\n\n        if (dir.icons.length == 0){\n            throw new InvalidImageError();\n        }\n\n        const controllers = dir.icons.map(icon => this.createController({icon}));\n        const controller = controllers[0];\n        const selectedTool = new SelectionTool(controller);\n\n        Promise.all(\n            controllers.map(async c => {\n                return {\n                    id: c.id,\n                    data: await IconService.asBlobUrl(c.editor.document.icon)\n                }\n            })\n        ).then(previews => this.setState({\n            controller,\n            controllers,\n            selectedTool,\n            previews,\n        }));\n\n    }\n\n    private removeIconEntry(){\n\n        const id = this.state.controller.id;\n        let controllers = this.state.controllers.filter((item) => item.id !== id);\n        let previews = this.state.previews.filter((item, i) => item.id !== id);\n        let controller: IconCanvasController;\n        let currentIcon = 0;\n\n        if (controllers.length == 0){\n            controller =this.createController({icon: IconService.newIcon(DEFAULT_ICON.width, DEFAULT_ICON.height)});\n            controllers = [controller];\n            const selectedTool = new SelectionTool(controller)\n            IconService.asBlobUrl(controller.editor.document.icon)\n                .then(data => {\n                    this.setState({\n                        controllers, controller, selectedTool, previews: [{id: controller.id, data}]\n                    });\n\n                });\n\n        }else{\n\n            controller = controllers[currentIcon];\n\n            this.setState({\n                controllers, controller, previews, selectedTool: controller.tool\n            });\n\n\n        }\n\n        this.persist();\n\n    }\n\n    private appDragOver(e: React.DragEvent<HTMLDivElement>){\n        e.preventDefault();\n    }\n\n    private appDrop(e: React.DragEvent<HTMLDivElement>){\n        e.preventDefault();\n\n        if (e.dataTransfer.items){\n            for (let i = 0; i < e.dataTransfer.items.length; i++){\n                const item = e.dataTransfer.items[i];\n                const file = item.getAsFile();\n\n                if (file){\n                    this.importFile(file);\n                }else{\n                    console.log(`Can't get as file`)\n                }\n\n                break;\n            }\n        }else{\n            console.log(`No transfer items`)\n        }\n\n    }\n\n    private copy(){\n        this.state.controller.copy()\n            .then(() => console.log(\"Copied\"))\n            .catch(e => console.log(`Not copied: ${e}`));\n    }\n\n    private cut(){\n        this.state.controller.cut()\n            .then(() => console.log(\"Did cut\"))\n            .catch(e => console.log(`Didn't cut: ${e}`));\n    }\n\n    private paste(){\n        this.state.controller.paste()\n            .then(r => {\n\n                console.log(`Pasted`);\n\n                if (r.warnings.length > 0){\n                    console.log(` - Warnings: ${r.warnings.length}`);\n                    r.warnings.forEach(w => console.log(`   - ${w}`))\n                }\n\n                if (r.success && r.tool){\n                    this.setState({selectedTool: r.tool});\n                }\n\n            })\n            .catch(e => console.log(`Not pasted: ${e}`));\n    }\n\n    private importFileDialog(){\n        const input: HTMLInputElement = document.createElement('input');\n        input.type = 'file';\n        input.style.display = 'none';\n        input.onchange = e => {\n            if (input.files && input.files.length > 0){\n                this.importFile(input.files[0]);\n            }\n        };\n\n        document.body.appendChild(input);\n\n        setTimeout(() => input.click());\n\n    }\n\n    private importFile(file: File){\n\n        if (file.name.toLowerCase().endsWith('.ico')){\n            IconService.fromIcoBlob(file)\n                .then(dir => this.setIcons(dir))\n                .catch(e => console.log(`Can't open ico file: ${e}`));\n        }else{\n            this.state.controller.importFile(file)\n                .then(selectedTool => this.setState({selectedTool}));\n        }\n    }\n\n    private useAdjustments(){\n        this.useTool(new AdjustTool(this.state.controller));\n    }\n\n    private useEraser(){\n        this.useTool(new EraserTool(this.state.controller));\n    }\n\n    private useFlood(){\n        this.useTool(new FloodFillTool(this.state.controller));\n    }\n\n    private usePen(){\n        this.useTool(new PencilTool(this.state.controller));\n    }\n\n    private useSelection(){\n        this.useTool(new SelectionTool(this.state.controller));\n    }\n\n    private colorPick(color: Color){\n\n        this.state.controllers.forEach(c => {\n            if (c.tool && c.tool.useColor){\n                c.tool.useColor(color);\n            }\n        });\n\n        this.setState({colorA: color});\n    }\n\n    private useTool(tool: IconEditorTool){\n        // if (tool.useColor){\n        //     tool.useColor(this.state.colorA);\n        // }\n        this.setState({selectedTool: tool});\n    }\n\n    private undo(){\n        this.state.controller.editor.undo();\n        const undos = this.state.undos + 1;\n\n        if (this.state.controller.editor.undoPeek?.selectionRegion && !(this.state.selectedTool instanceof SelectionTool)){\n            this.setState({undos, selectedTool: new SelectionTool(this.state.controller)});\n        }else{\n            this.setState({undos});\n        }\n\n    }\n\n    private redo(){\n        this.state.controller.editor.redo();\n        const redos = this.state.redos + 1;\n\n        if (this.state.controller.editor.redoPeek?.selectionRegion && !(this.state.selectedTool instanceof SelectionTool)){\n            this.setState({redos, selectedTool: new SelectionTool(this.state.controller)});\n        }else{\n            this.setState({redos});\n        }\n    }\n\n    private createController(doc: IconDocument): IconCanvasController{\n\n        const controller = new IconCanvasController(doc);\n\n        const docChanged = () => {\n            const icon = this.state.controller.editor.document.icon;\n            const id = this.state.controller.id;\n\n            IconService.asBlobUrl(icon).then(data => this.setPreviewData(id, data));\n\n            this.persist();\n        }\n\n        controller.editor.documentSubmitted = () => docChanged();\n        controller.editor.documentChanged = () => docChanged();\n\n        return controller;\n    }\n\n    private persist(){\n        DocumentService.saveIcons(this.state.controllers.map(c => c.editor.document.icon))\n            .then(() => console.log('Saved'))\n            .catch(() => console.log('Error saving'));\n    }\n\n    private setPreviewData(id: number, data: string){\n        const previews = this.state.previews;\n        const p = previews.find(p => p.id === id);\n\n        if(p){\n            p.data = data;\n            this.setState({previews});\n        }else{\n            const c = this.state.controllers.find(c => c.id === id);\n\n            if(!c){\n                throw new Error();\n            }\n\n            this.setState({previews: [...previews, {id, data}]});\n        }\n    }\n\n    private goToIcon(currentIcon: number){\n\n        const controller = this.state.controllers.find(c => c.id === currentIcon);\n\n        if(!controller){\n            throw new Error();\n        }\n\n        const selectedTool = controller.tool;\n\n        this.setState({controller, selectedTool});\n    }\n\n    private download(format: DownloadFormat){\n        this.state.controller.downloadAs(format, this.state.controllers.map(c => c.editor.document.icon))\n            .then(() => console.log(`Download triggered`));\n    }\n\n    componentDidMount() {\n        document.addEventListener('keydown', e => {\n\n            const focused = document.querySelector(\"*:focus\");\n\n            if (focused && (focused.tagName == 'INPUT' || focused.tagName == 'TEXTAREA')){\n                return;\n            }\n\n            const ctrlMeta = e.ctrlKey || e.metaKey;\n\n            if (e.key == 'z' && ctrlMeta && e.shiftKey){\n                this.redo();\n                e.preventDefault();\n\n            }else if(e.key == 'z' && ctrlMeta){\n                this.undo();\n                e.preventDefault();\n\n            }else if(e.key === 'v' && !ctrlMeta){\n                this.useSelection();\n                e.preventDefault();\n\n            }else if((e.key === 'p' || e.key == 'd') && !ctrlMeta){\n                this.usePen();\n                e.preventDefault();\n\n            }else if((e.key === 'f') && !ctrlMeta){\n                this.useFlood();\n                e.preventDefault();\n\n            }else if(e.key === 'e' && !ctrlMeta){\n                this.useEraser();\n                e.preventDefault();\n\n            }else if(e.key === 'b' && !ctrlMeta){\n                this.setState({showBackground: !this.state.showBackground});\n                e.preventDefault();\n\n            }else if(e.key === 'g' && !ctrlMeta){\n                this.setState({showGrid: !this.state.showGrid});\n                e.preventDefault();\n\n            }else if(e.key === 'c' && ctrlMeta){\n                this.copy();\n                e.preventDefault();\n\n            }else if(e.key === 'v' && ctrlMeta){\n                this.paste();\n                e.preventDefault();\n\n            }else if(e.key === 'x' && ctrlMeta){\n                this.cut();\n                e.preventDefault();\n\n            }else if(e.key === 'a' && ctrlMeta){\n                if (!(this.state.selectedTool instanceof SelectionTool)){\n                    this.useSelection();\n                }\n                setTimeout(() => (this.state.selectedTool as SelectionTool).selectAll());\n                e.preventDefault();\n            }\n        });\n    }\n\n    commandApplyAdjustments(){\n        if (this.state.selectedTool instanceof AdjustTool){\n            (this.state.selectedTool as AdjustTool).apply();\n        }\n    }\n\n    commandContrast(contrast: number){\n        if (this.state.selectedTool instanceof AdjustTool){\n            this.setState({adjustState: {...this.state.adjustState, contrast}});\n            // (this.state.selectedTool as AdjustTool).setContrast(value);\n        }\n    }\n\n    commandBrightness(brightness: number){\n        if (this.state.selectedTool instanceof AdjustTool){\n            this.setState({adjustState: {...this.state.adjustState, brightness}});\n            // (this.state.selectedTool as AdjustTool).setBrightness(value);\n        }\n    }\n\n    commandResetPalette(){\n        if (this.state.selectedTool instanceof AdjustTool){\n            this.setState({adjustState: {...this.state.adjustState, palette: undefined}});\n            // (this.state.selectedTool as AdjustTool).setPalette(null);\n        }\n    }\n\n    commandReview(){\n        ReactDOM.render(\n            <ReviewStudio icon={this.state.controller.editor.document.icon} />,\n            document.getElementById(`root-dialog`)\n        );\n    }\n\n    commandSavePalette(){\n        if (this.state.adjustState?.palette){\n\n            const palette = this.state.adjustState.palette;\n\n            if (!palette){\n                throw new Error();\n            }\n\n            if (palette.unnamed){\n                palette.name = prompt('Name for the palette', palette.name) || 'Unnamed palette';\n            }\n\n            PaletteService.upsert(palette)\n                .then(p => this.commandSetPalette(p))\n                .catch(e => console.log(`Not saved: ${e}`));\n\n        }\n    }\n\n    commandSelectAll(){\n        if (this.state.selectedTool instanceof SelectionTool){\n            (this.state.selectedTool as SelectionTool).selectAll();\n        }\n    }\n\n    commandSetPalette(palette: Palette){\n        if (this.state.selectedTool instanceof AdjustTool){\n            this.setState({adjustState: {...this.state.adjustState, palette}});\n            // (this.state.selectedTool as AdjustTool).setPalette(palette);\n        }\n    }\n\n    commandClearSelection(){\n        if (this.state.selectedTool instanceof SelectionTool){\n            (this.state.selectedTool as SelectionTool).clearSelection();\n        }\n    }\n\n    commandDeleteSelection(){\n        if (this.state.selectedTool instanceof SelectionTool){\n            (this.state.selectedTool as SelectionTool).deleteSelection();\n        }\n    }\n\n    commandCrop(){\n        if (this.state.selectedTool instanceof SelectionTool){\n            (this.state.selectedTool as SelectionTool).cropToSelection();\n        }\n    }\n\n    componentDidUpdate(prevProps: Readonly<AppProps>, prevState: Readonly<AppState>, snapshot?: any) {\n        App.activeController = this.state.controller;\n    }\n\n    toolComponent(): React.ReactNode{\n        const tool = this.state.selectedTool;\n\n        if (!tool){\n            return <></>;\n        }\n\n        const colorable = tool?.useColor;\n        const isEraser = tool instanceof EraserTool;\n        const doc = this.state.controller.editor.document;\n\n        if (tool instanceof SelectionTool){\n\n            const size = doc.selectionRegion ? `${doc.selectionRegion.width} x ${doc.selectionRegion.height}` : `Nothing Selected`;\n\n            return (\n                <Expando title={`Selection`} items={<Label text={size}/>}>\n                    <Button text={`Select All`} iconSize={20} icon={`full-frame`} onClick={() => this.commandSelectAll()}/>\n                    <Button text={`Clear Selection`} iconSize={20} icon={`corners`} onClick={() => this.commandClearSelection()}/>\n                    <Button text={`Delete Selection`}  iconSize={20} icon={`grid-crossed`} onClick={() => this.commandDeleteSelection()}/>\n                    <Button text={`Crop`} iconSize={20} icon={`crop`} onClick={() => this.commandCrop()}/>\n                </Expando>\n            );\n        }else if ( colorable && !isEraser ){\n            return (\n                <Expando title={`Color`}>\n                    <ColorPicker colorPicked={color => this.colorPick(color) } />\n                </Expando>\n            );\n        }else if ( tool instanceof AdjustTool ){\n\n            const props = this.state.adjustState || {};\n            const palette = props?.palette;\n            let paletteItems = <></>;\n\n            tool.updateAdjustments(props);\n\n            if (palette && palette.unsaved){\n                paletteItems = (\n                    <>\n                        <Button icon={'return'} iconSize={50} onClick={() => this.commandResetPalette()}/>\n                        <Button icon={'floppy'} iconSize={50} onClick={() => this.commandSavePalette()}/>\n                    </>\n                );\n            }else if(palette){\n                paletteItems = (\n                    <>\n                        <Button icon={'return'} iconSize={50} onClick={() => this.commandResetPalette()}/>\n                    </>\n                );\n            }\n\n            return (\n                <>\n                    <Expando title={`Adjust`}>\n                        <div className=\"adjusters\">\n                            <Range min={-200} max={200} value={props.brightness || 0} onChange={value => this.commandBrightness(value)} />\n                            <Range min={-128} max={128} value={props.contrast || 0} onChange={value => this.commandContrast(value)} />\n                        </div>\n                    </Expando>\n                    <Expando title={`Palette`} items={paletteItems}>\n                        <PaletteManager palette={palette || undefined} paletteChanged={p => this.commandSetPalette(p)}/>\n                    </Expando>\n                    <Button classNames={`cta`} text={`Apply`} onClick={() => this.commandApplyAdjustments()}/>\n                </>\n            );\n        }\n    }\n\n    render() {\n\n        const controller = this.state.controller;\n        const controllers = this.state.controllers;\n        const currentId = controller.id;\n        const tool = this.state.selectedTool;\n        const mainToolbarItems = <>\n            <Button text={`faviconate`}>\n                <MenuItem text={`New 16x16 Icon`} onActivate={() => this.newDocument(16)}/>\n                <MenuItem text={`New 32x32 Icon`} onActivate={() => this.newDocument(32)}/>\n                <MenuItem text={`New 64x64 Icon`} onActivate={() => this.newDocument(64)}/>\n                <MenuItem text={`New 128x128 Icon`} onActivate={() => this.newDocument(128)}/>\n                <MenuItem text={`New 256x256 Icon`} onActivate={() => this.newDocument(256)}/>\n                <Separator/>\n                <MenuItem text={`Import File`} onActivate={() => this.importFileDialog()}/>\n            </Button>\n            <Separator/>\n            <Button icon={`undo`} iconSize={50} onClick={() => this.undo()} disabled={controller.editor.undoCount == 0}/>\n            <Button icon={`redo`} iconSize={50} onClick={() => this.redo()} disabled={controller.editor.redoCount == 0}/>\n            <Separator/>\n            <Button icon={`cut`} iconSize={50} onClick={() => this.cut()}/>\n            <Button icon={`copy`} iconSize={50} onClick={() => this.copy()}/>\n            <Button icon={`paste`} iconSize={50} onClick={() => this.paste()}/>\n        </>;\n        const toolToolbarItems = <>\n            <Button\n                icon={`select`} iconSize={50}\n                onClick={() => this.useSelection()}\n                selected={tool instanceof SelectionTool}\n            />\n            <Separator/>\n            <Button\n                icon={`pencil`} iconSize={50}\n                onClick={() => this.usePen()}\n                selected={tool instanceof PencilTool && !(tool instanceof EraserTool)}\n            />\n            <Button\n                icon={`bucket`} iconSize={50}\n                onClick={() => this.useFlood()}\n                selected={tool instanceof FloodFillTool}\n            />\n            <Button\n                icon={`eraser`} iconSize={50}\n                onClick={() => this.useEraser()}\n                selected={tool instanceof EraserTool}/>\n            <Separator/>\n            <Button\n                icon={`checker`} iconSize={50}\n                onClick={() => this.setState({showBackground: !this.state.showBackground})}\n                selected={this.state.showBackground}\n            />\n            <Button\n                icon={`grid`} iconSize={50}\n                onClick={() => this.setState({showGrid: !this.state.showGrid})}\n                selected={this.state.showGrid}\n            />\n            <Separator/>\n            <Button\n                icon={`equalizer`} iconSize={50}\n                onClick={() => this.useAdjustments()}\n                selected={tool instanceof AdjustTool}\n            />\n            <Button\n                icon={`eye`} iconSize={50}\n                onClick={() => this.commandReview()}\n            />\n\n        </>;\n\n        const sizeOf = (itemId: number): Size => {\n            const ctl = controllers.find(c => c.id === itemId);\n\n            if (ctl){\n                return ctl.iconSize;\n            }\n            return makeSz(0,0);\n        };\n\n        const sortedPreviews = this.state.previews\n            .sort((a, b) => -compareSize(sizeOf(a.id), sizeOf(b.id)));\n\n        const sideBar = (\n            <div className=\"editor-sidebar\">\n                <Expando title={`Preview`}\n                    items={(\n                        <>\n                            <Button iconSize={50} icon={`plus`}>\n                                <MenuItem text={`16 x 16`} onActivate={() => this.newIconEntry(16)}/>\n                                <MenuItem text={`32 x 32`} onActivate={() => this.newIconEntry(32)}/>\n                                <MenuItem text={`50 x 50`} onActivate={() => this.newIconEntry(50)}/>\n                                <MenuItem text={`64 x 64`} onActivate={() => this.newIconEntry(64)}/>\n                                <MenuItem text={`128 x 128`} onActivate={() => this.newIconEntry(128)}/>\n                                <MenuItem text={`256 x 256`} onActivate={() => this.newIconEntry(256)}/>\n                            </Button>\n                            <Button iconSize={50} icon={`minus`} disabled={this.state.controllers.length === 0} onClick={() => this.removeIconEntry()}/>\n                            <Button iconSize={50} icon={`ellipsis`}/>\n                        </>\n                    )}\n                >\n                    {sortedPreviews\n                        .map((item) => (\n                        <PreviewPanel\n                            key={item.id}\n                            data={item.data}\n                            selected={item.id === currentId}\n                            size={sizeOf(item.id)}\n                            onActivate={() => this.goToIcon(item.id)}/>\n                    ))}\n                </Expando>\n                {this.toolComponent()}\n                <Button text={`PNG`} onClick={() => this.download('png')} icon={`floppy`} iconSize={50}/>\n                <Button text={`ICO`} onClick={() => this.download('ico')} icon={`floppy`} iconSize={50}/>\n                <div id=\"cue\" className=\"cue\">0.1.3</div>\n            </div>\n        );\n\n        const preview = this.state.previews.find(p => p.id === currentId);\n        if (preview){\n            changeFavicon(preview.data);\n        }\n\n        controller.tool = tool;\n        controller.showBackground = this.state.showBackground;\n        controller.showGrid = this.state.showGrid;\n\n        if (controller.tool && controller.tool.useColor){\n            controller.tool.useColor(this.state.colorA);\n        }\n\n        return (\n            <div id={`app`}\n                 onDragOver={e => this.appDragOver(e)}\n                 onDrop={e => this.appDrop(e)}\n            >\n            <ToolbarView sideClassNames={`main-tools`} length={70} items={mainToolbarItems}>\n                <DockView side={`right`} sideView={sideBar}>\n                    <ToolbarView sideClassNames={`main-tools`} length={70} classNames={`canvas-main`} side={`left`} items={toolToolbarItems}>\n                        <CanvasView controller={controller} />\n                    </ToolbarView>\n                </DockView>\n            </ToolbarView>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {RefObject} from \"react\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\n\nexport interface PointingEvent {\n    point: Point;\n    touch: boolean;\n}\n\nexport interface PointingEventResult{\n    cursor?: string;\n}\n\nexport interface KeyEvent{\n    key: string;\n}\n\nexport interface KeyEventResult{\n    preventDefault?: boolean;\n}\n\nexport interface CanvasSensor{\n    pointingGestureMove?     (e: PointingEvent):    PointingEventResult | void;\n    pointingGestureStart?    (e: PointingEvent):    PointingEventResult | void;\n    pointingGestureEnd?      (e: PointingEvent):    PointingEventResult | void;\n    keyDown?                 (e: KeyEvent):         KeyEventResult | void;\n    keyUp?                   (e: KeyEvent):         KeyEventResult | void;\n}\n\nexport interface CanvasViewController extends CanvasSensor{\n    render                   (context: CanvasRenderingContext2D, size: Size): void;\n}\n\nexport interface CanvasViewProps{\n    controller: CanvasViewController;\n}\n\nexport class CanvasView extends React.Component<CanvasViewProps>{\n\n    readonly containerRef: RefObject<HTMLDivElement> = React.createRef();\n    readonly canvasRef: RefObject<HTMLCanvasElement> = React.createRef();\n\n    private canvasSize: Size = makeSz(0,0);\n    private _cursor: string | null = null;\n    private resizer = () => this.updateCanvasSize();\n    private mouseUpCatcher = (e: MouseEvent) => this.mouseUp(e);\n    private keyDownCatcher = (e: KeyboardEvent) => this.keyDown(e);\n    private keyUpCatcher = (e: KeyboardEvent) => this.keyUp(e);\n\n    constructor(props: CanvasViewProps) {\n        super(props);\n\n    }\n\n    private canvasPoint(clientX: number, clientY: number): Point{\n        if(this.canvasRef.current) {\n            const bounds = Rectangle.fromDOMRect(this.canvasRef.current.getBoundingClientRect());\n            return makePt(clientX - bounds.left, clientY - bounds.top);\n        }\n        return makePt(clientX, clientY);\n    }\n\n    private updateCanvasSize(){\n        if(this.containerRef.current) {\n\n            const rect = Rectangle.fromDOMRect(this.containerRef.current.getBoundingClientRect());\n\n            if(this.canvasRef.current) {\n                this.canvasSize = makeSz(rect.width, rect.height);\n                this.canvasRef.current.width = rect.width;\n                this.canvasRef.current.height = rect.height;\n\n            }else{\n                console.log(`Diagram::resize: No canvasRef`);\n            }\n\n        }else{\n            console.log(`Diagram::resize: No containerRef`);\n        }\n\n    }\n\n    private mouseDown(e: React.MouseEvent<HTMLCanvasElement, MouseEvent>){\n\n        if (this.controller.pointingGestureStart){\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureStart({point, touch: false});\n\n            this.adoptCursor(result);\n        }\n\n        document.body.addEventListener('mouseup', this.mouseUpCatcher);\n\n    }\n\n    private mouseUp(e: MouseEvent){\n\n        if(this.canvasRef.current && this.controller.pointingGestureEnd) {\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureEnd({point, touch: false});\n\n            this.adoptCursor(result);\n        }\n\n        document.body.removeEventListener(`mouseup`, this.mouseUpCatcher);\n    }\n\n    private mouseMove(e: React.MouseEvent<HTMLCanvasElement, MouseEvent>){\n\n        if (this.controller.pointingGestureMove){\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureMove({point, touch: false});\n\n            this.adoptCursor(result);\n        }\n    }\n\n    private adoptCursor(result: PointingEventResult | void){\n        if (result && result.cursor){\n            this.cursor = result.cursor;\n        }else{\n            this.cursor = 'default';\n        }\n    }\n\n    private touchEnd(e: React.TouchEvent<HTMLCanvasElement>){\n        if (this.controller.pointingGestureEnd){\n            if(e.touches.length > 0) {\n                const t = e.touches[0];\n                this.controller.pointingGestureEnd({\n                    point: this.canvasPoint(t.clientX, t.clientY),\n                    touch: true,\n                });\n            }else{\n                this.controller.pointingGestureEnd({point: makePt(0,0), touch: true})\n            }\n        }\n    }\n\n    private touchMove(e: React.TouchEvent<HTMLCanvasElement>){\n        if(this.controller.pointingGestureMove && e.touches.length > 0) {\n            const t = e.touches[0];\n            this.controller.pointingGestureMove({\n                point: this.canvasPoint(t.clientX, t.clientY),\n                touch: true\n            });\n        }\n    }\n\n    private touchStart(e: React.TouchEvent<HTMLCanvasElement>){\n        if(this.controller.pointingGestureStart && e.touches.length > 0) {\n            e.preventDefault();\n            e.stopPropagation();\n            const t = e.touches[0];\n            const point = this.canvasPoint(t.clientX, t.clientY);\n            this.controller.pointingGestureStart({point, touch: true});\n        }\n\n    }\n\n    private ignoreKey(): boolean{\n        const focused = document.querySelector(\"*:focus\");\n\n        return !!focused && (focused.tagName === 'INPUT' || focused.tagName === 'TEXTAREA');\n    }\n\n    private keyDown(e: KeyboardEvent){\n\n        if (!this.ignoreKey() && this.controller.keyDown){\n            const result = this.controller.keyDown({key: e.key});\n\n            if (result && result.preventDefault === true){\n                e.preventDefault();\n            }\n        }\n    }\n\n    private keyUp(e: KeyboardEvent){\n        if (!this.ignoreKey() && this.controller.keyUp){\n            const result = this.controller.keyUp({key: e.key});\n\n            if (result && result.preventDefault === true){\n                e.preventDefault();\n            }\n        }\n    }\n\n    componentDidMount() {\n        this.resizer();\n\n        if (this.canvasRef.current){\n            const context = this.canvasRef.current.getContext(\"2d\");\n\n            if (context){\n\n                const draw = () => {\n                    this.controller.render(context, this.canvasSize);\n                    requestAnimationFrame(draw);\n                };\n\n                requestAnimationFrame(() => draw());\n\n            }else{\n                console.log(`No context`);\n            }\n        }else{\n            console.log(`No canvasRef`);\n        }\n\n    }\n\n    componentWillMount(): void {\n        window.addEventListener('resize', this.resizer);\n\n        document.addEventListener('keyup', this.keyUpCatcher);\n        document.addEventListener('keydown', this.keyDownCatcher);\n    }\n\n    componentWillUnmount(): void {\n\n        window.removeEventListener('resize', this.resizer);\n        document.removeEventListener('keyup', this.keyUpCatcher);\n        document.removeEventListener('keydown', this.keyDownCatcher);\n    }\n\n    componentDidUpdate(prevProps: Readonly<CanvasViewProps>, prevState: Readonly<{}>, snapshot?: any) {\n\n    }\n\n    render() {\n        return (\n            <div ref={this.containerRef} className={`canvas-view`}>\n                <canvas\n                    ref={this.canvasRef}\n                    onMouseDown={e => this.mouseDown(e)}\n                    onMouseMove={e => this.mouseMove(e)}\n                    onTouchStart={e => this.touchStart(e)}\n                    onTouchMove={e => this.touchMove(e)}\n                    onTouchEnd={e => this.touchEnd(e)}\n                ></canvas>\n            </div>\n        );\n    }\n\n    get controller(): CanvasViewController{\n        return this.props.controller;\n    }\n\n    get cursor(): string | null{\n        return this._cursor;\n    }\n\n    set cursor(value: string | null){\n\n        const changed = value !== this._cursor;\n\n        if(changed){\n\n            if(this.canvasRef.current) {\n                this.canvasRef.current.style.cursor = value || '';\n            }\n\n            this._cursor = value;\n        }\n    }\n}","import * as React from \"react\";\nimport {ClassNames, cn} from \"../hui/helpers/hui\";\n\nexport interface ContainerPanelProps extends ClassNames{\n    children?: React.ReactNode;\n}\ninterface ContainerPanelState{}\n\nexport class ContainerPanel extends React.Component<ContainerPanelProps, ContainerPanelState>{\n\n    render() {\n        return (\n            <div className={cn(`container-panel`, this.props.classNames)}>\n                <div className=\"marker n\"/>\n                <div className=\"marker s\"/>\n                <div className=\"marker e\"/>\n                <div className=\"marker w\"/>\n                <div className=\"content\">\n                    {this.props.children}\n                </div>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\n\nexport interface ExpandoProps{\n    title: string;\n    children?: React.ReactNode;\n    items?: React.ReactNode;\n}\n\ninterface ExpandoState{\n\n}\n\nexport class Expando extends React.Component<ExpandoProps, ExpandoState>{\n\n    render() {\n        return (\n            <div className=\"expando\">\n                <div className=\"head\">\n                    <div className=\"label\">{this.props.title}</div>\n                    <div className=\"items\">{this.props.items}</div>\n                </div>\n                <div className=\"body\">\n                    <div className=\"children\">\n                        {this.props.children}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {Button} from \"../hui/items/Button\";\nimport {Clickable} from \"../hui/items/Clickable\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {Palette, PaletteService} from \"../model/PaletteService\";\nimport {App} from \"./App\";\n\nexport interface PaletteProps{\n    palette?: Palette;\n    paletteChanged?: (palette: Palette) => void;\n}\n\ninterface PaletteState{\n    addMode?: boolean;\n    colorToAdd?: Color;\n    palettes?: Palette[];\n}\n\nexport class PaletteManager extends React.Component<PaletteProps, PaletteState>{\n\n    static natives: Palette[] = [\n        {\n            name: 'Black & White',\n            native: true,\n            colors: [Color.black.tupleInt8, Color.white.tupleInt8],\n        },\n        {\n            name: 'Grayscale 1',\n            native: true,\n            colors: [Color.black.tupleInt8, Color.fromHex('808080').tupleInt8, Color.white.tupleInt8],\n        },\n        {\n            name: 'Orange Range',\n            native: true,\n            colors: [\n                Color.black.tupleInt8,\n                Color.fromHex('808080').tupleInt8,\n                Color.fromHex('f00').tupleInt8,\n                Color.fromHex('f80').tupleInt8,\n                Color.fromHex('ff0').tupleInt8,\n                Color.white.tupleInt8,\n            ],\n        },\n    ];\n\n    constructor(props: PaletteProps) {\n        super(props);\n\n        this.state = {};\n    }\n\n    private setPalette(p: Palette){\n        if(this.props.paletteChanged) {\n            this.props.paletteChanged(p);\n        }\n    }\n\n    private palettePreview(p: Palette): React.ReactNode{\n        return (\n            <div key={p.id} className=\"palette-preview\" onClick={() => this.setPalette(p)}>\n                <div className=\"palette-label\">{p.name}</div>\n                <div className=\"swatches\">\n                    {p.colors.map(tuple => this.swatch(Color.fromTupleInt8(tuple)))}\n                </div>\n            </div>\n        );\n    }\n\n    private swatch(color: Color): React.ReactNode{\n        const style = {\n            backgroundColor: color.hexRgb,\n        };\n        return <div className=\"swatch\" style={style}/>;\n    }\n\n    private startAddMode(){\n        this.setState({addMode: true});\n    }\n\n    private addColor(color: Color){\n        const palette: Palette = this.props.palette!;\n\n        if (palette.native){\n            palette.native = false;\n            palette.name = '(Unsaved Palette)';\n            palette.unnamed = true;\n        }\n\n        palette.unsaved = true;\n\n        this.setPalette({\n            ...palette,\n            colors: [...palette.colors, color.tupleInt8]\n        });\n\n        this.dismissAddColor();\n    }\n\n    private addSelectedColor(){\n\n        if(!this.state.colorToAdd || !this.props.palette){\n            throw new Error();\n        }\n\n        const color = this.state.colorToAdd;\n\n        this.addColor(color);\n    }\n\n    private dismissAddColor(){\n        this.setState({addMode: false});\n    }\n\n    private refreshPalette(){\n        PaletteService.getAll().then(palettes => {\n\n            if (JSON.stringify(palettes) != JSON.stringify(this.state.palettes)){\n                this.setState({palettes});\n            }\n        });\n    }\n\n    private startEyeDrop(){\n        if (App.activeController){\n            App.activeController.colorPicker(colorToAdd => {\n                console.log(`Got color ${colorToAdd.cssRgba}`)\n                this.setState({colorToAdd})\n            });\n        }\n    }\n\n    componentDidMount() {\n        this.refreshPalette();\n    }\n\n    componentDidUpdate(prevProps: Readonly<PaletteProps>, prevState: Readonly<PaletteState>, snapshot?: any) {\n        this.refreshPalette();\n    }\n\n    render() {\n        const pal = this.props.palette;\n\n        if(this.state.addMode){\n            return (\n                <div className={`ui-palette`}>\n                    <ColorPicker colorPicked={colorToAdd => this.setState({colorToAdd})}/>\n                    <Button icon={'eyedropper'} iconSize={16} onClick={() => this.startEyeDrop()}/>\n                    <Button text={'Cancel'} onClick={() => this.dismissAddColor()}/>\n                    <Button text={'Add Color'} onClick={() => this.addSelectedColor()}/>\n                </div>\n            );\n\n        }else if(pal) {\n            return (\n                <div className=\"ui-palette\">\n                    <div className=\"palette-label\">{pal.name}</div>\n                    <div className=\"swatches\">\n                        {pal.colors.map(tuple => <Clickable classNames=\"pal-swatch\">{this.swatch(Color.fromTupleInt8(tuple))}</Clickable>)}\n                        <Button icon={`plus`} iconSize={20} onClick={() => this.startAddMode()}/>\n                    </div>\n                </div>\n            );\n        }else{\n\n            const palettes: Palette[] = this.state.palettes || [];\n\n            return (\n                <div className=\"ui-palette\">\n                    {palettes.concat(PaletteManager.natives).map(p => this.palettePreview(p))}\n                </div>\n            );\n        }\n    }\n\n}","import * as React from \"react\";\nimport {RefObject} from \"react\";\nimport {Callable} from \"../hui/helpers/hui\";\nimport {Button} from \"../hui/items/Button\";\nimport {Size} from \"../hui/helpers/Rectangle\";\n\nexport interface PreviewPanelProps{\n    data: string;\n    onActivate?: Callable;\n    selected?: boolean;\n    size: Size;\n}\n\nexport class PreviewPanel extends React.Component<PreviewPanelProps>{\n\n    ref: RefObject<HTMLDivElement> = React.createRef();\n\n    private onActivate(){\n        if (this.props.onActivate){\n            this.props.onActivate();\n        }\n    }\n\n    render() {\n\n        const size = this.props.size;\n        const length = Math.max(size.width, size.height);\n        const level = Math.ceil(length/64);\n\n        return (\n            <div\n                ref={this.ref}\n                onClick={() => this.onActivate()}\n                className={`preview-panel ${this.props.selected ? 'selected' : ''} level-${level}`}>\n                <div className=\"preview\"><img src={this.props.data} alt=\"\"/></div>\n                <div className=\"label size-label\">{size.width} x {size.height}</div>\n                <Button classNames={`ellipsis`} icon={`ellipsis`} iconSize={50}/>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {ToolbarView} from \"../hui/layout/ToolbarView\";\nimport {Label} from \"../hui/items/Label\";\nimport {Button} from \"../hui/items/Button\";\nimport {Range} from \"../hui/items/Range\";\nimport {DockView} from \"../hui/layout/DockView\";\nimport {ContainerPanel} from \"./ContainerPanel\";\nimport {cn} from \"../hui/helpers/hui\";\nimport {Icon} from \"../model/Icon\";\nimport {RefObject} from \"react\";\nimport {makePt, makeSz, Rectangle, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\nimport {IconReviewer, StartCorner} from \"../model/IconReviewer\";\nimport {IconService} from \"../model/IconService\";\nimport {MemoryError} from \"../model/errors\";\nimport {GraphicsMemoryError} from \"../hui/helpers/errors\";\nimport {MarchingAnts} from \"../model/MarchingAnts\";\n\nconst MAX_PREVIEW = 200;\nconst DEF_SIZE = 3;\nconst DEF_CORNER = 'nw';\n\nexport interface ReviewStudioProps{\n    icon: Icon;\n}\n\ninterface ReviewStudioState{\n    sampleSize: number;\n    startCorner: StartCorner;\n    mode: 'setup' | 'review';\n}\n\nexport class ReviewStudio extends React.Component<ReviewStudioProps, ReviewStudioState>{\n\n    readonly previewCanvas: RefObject<HTMLCanvasElement> = React.createRef();\n    readonly reviewCanvas: RefObject<HTMLCanvasElement> = React.createRef();\n    readonly previewSize: Size;\n\n    private reviewSize: Size;\n    private reviewer: IconReviewer;\n\n    constructor(props: ReviewStudioProps) {\n        super(props);\n\n        this.state = {\n            sampleSize: DEF_SIZE,\n            startCorner: DEF_CORNER,\n            mode: 'setup',\n        };\n\n        this.previewSize = scaleToContain(makeSz(MAX_PREVIEW, MAX_PREVIEW), makeSz(props.icon.width, props.icon.height));\n        this.reviewer = new IconReviewer(props.icon, makeSz(DEF_SIZE, DEF_SIZE), DEF_CORNER);\n    }\n\n    private setStartCorner(startCorner: StartCorner){\n        this.setState({startCorner});\n\n        const {icon} = this.props;\n        const {sampleSize} = this.state;\n\n        this.reviewer = new IconReviewer(icon, makeSz(sampleSize, sampleSize), startCorner);\n        this.updateCanvasesGraphics();\n    }\n\n    private setSampleSize(sampleSize: number){\n        this.setState({sampleSize});\n\n        const {icon} = this.props;\n        const {startCorner} = this.state;\n\n        this.reviewer = new IconReviewer(icon, makeSz(sampleSize, sampleSize), startCorner);\n        this.updateCanvasesGraphics();\n    }\n\n    private updateCanvasesGraphics(){\n        this.drawPreviewCanvas();\n        this.drawReviewCanvas();\n    }\n\n    private marchingAntsMarker(cx: CanvasRenderingContext2D, contentBounds: Rectangle, focusRegion: Rectangle){\n        // N\n        const na = makePt(contentBounds.left, focusRegion.top);\n        const nb = makePt(contentBounds.right, focusRegion.top);\n\n        // S\n        const sa = makePt(contentBounds.left, focusRegion.bottom);\n        const sb = makePt(contentBounds.right, focusRegion.bottom);\n\n        // W\n        const wa = makePt(focusRegion.left, contentBounds.top);\n        const wb = makePt(focusRegion.left, contentBounds.bottom);\n\n        // E\n        const ea = makePt(focusRegion.right, contentBounds.top);\n        const eb = makePt(focusRegion.right, contentBounds.bottom);\n\n\n        MarchingAnts.line(cx, na, nb);\n        MarchingAnts.line(cx, sa, sb);\n        MarchingAnts.line(cx, wa, wb);\n        MarchingAnts.line(cx, ea, eb);\n    }\n\n    private drawPreviewCanvas(){\n        if (!this.previewCanvas.current){\n            return;\n        }\n\n        const sourceCanvas = IconService.asCanvas(this.reviewer.current);\n\n        const srcW = sourceCanvas.width;\n        const srcH = sourceCanvas.height;\n        const w = this.previewSize.width;\n        const h = this.previewSize.height;\n\n        const destCx = this.previewCanvas.current.getContext('2d');\n\n        if (!destCx){\n            throw new GraphicsMemoryError();\n        }\n\n        destCx.clearRect(0, 0, w, h);\n        destCx.imageSmoothingEnabled = false;\n        destCx.drawImage(sourceCanvas, 0,0, w, h);\n\n        const sampleW = this.reviewer.sample.width;\n        const sampleH = this.reviewer.sample.height;\n        const contentBounds = new Rectangle(0, 0, w, h);\n        const pixelSize = makeSz(w/srcW, h/srcH);\n        const focusSize = makeSz(sampleW * pixelSize.width, sampleH * pixelSize.height);\n        const focusLocation = makePt(pixelSize.width * this.reviewer.currentHotspot.left, pixelSize.height * this.reviewer.currentHotspot.top);\n        const focusRegion = Rectangle.fromPoint(focusLocation).withSize(focusSize);\n\n        this.marchingAntsMarker(destCx, contentBounds, focusRegion);\n\n    }\n\n    private drawReviewCanvas(){\n        if (!this.reviewCanvas.current){\n            return;\n        }\n\n        const reviewSource = this.reviewer.reviewImage();\n        const reviewCx = this.reviewCanvas.current.getContext('2d');\n\n        if (!reviewCx){\n            throw new GraphicsMemoryError();\n        }\n\n        const graphicSize = makeSz(reviewSource.width, reviewSource.height);\n        const contentBounds = Rectangle.fromSize(scaleToContain(this.reviewSize, graphicSize)).centerAt(Rectangle.fromSize(this.reviewSize).center);\n\n\n        reviewCx.clearRect(0,0, this.reviewSize.width, this.reviewSize.height);\n        reviewCx.imageSmoothingEnabled = false;\n        reviewCx.drawImage(reviewSource, ...contentBounds.tuple);\n\n        const pixelSize = makeSz(contentBounds.width / reviewSource.width, contentBounds.height / reviewSource.height);\n        const sample = this.state.sampleSize;\n        const focusRegion = new Rectangle(contentBounds.left + pixelSize.width * sample,\n            contentBounds.top + pixelSize.height * sample, pixelSize.width * sample, pixelSize.height * sample);\n\n        this.marchingAntsMarker(reviewCx, contentBounds, focusRegion);\n\n    }\n\n    componentDidMount() {\n        this.updateCanvasesGraphics();\n\n        window.addEventListener('keydown', e => {\n            if (e.key === 'ArrowLeft'){\n                this.reviewer.move('w');\n                this.updateCanvasesGraphics();\n\n            }else if(e.key == 'ArrowRight'){\n                this.reviewer.move('e');\n                this.updateCanvasesGraphics();\n\n            }else if(e.key == 'ArrowUp'){\n                this.reviewer.move('n');\n                this.updateCanvasesGraphics();\n\n            }else if(e.key == 'ArrowDown'){\n                this.reviewer.move('s');\n                this.updateCanvasesGraphics();\n\n            }\n        });\n    }\n\n    componentDidUpdate(prevProps: Readonly<ReviewStudioProps>, prevState: Readonly<ReviewStudioState>, snapshot?: any) {\n        if (prevState.mode === 'setup' && this.state.mode === 'review' && this.reviewCanvas.current){\n            const r = Rectangle.fromDOMRect(this.reviewCanvas.current.parentElement!.getBoundingClientRect());\n            this.reviewSize = r.size;\n            this.reviewCanvas.current.width = r.width;\n            this.reviewCanvas.current.height = r.height;\n            this.updateCanvasesGraphics();\n        }\n    }\n\n    render() {\n\n        const {mode} = this.state;\n\n        const topItems = (\n            <>\n                <Label text={`Review`}/>\n            </>\n        );\n\n        const topItemsFar = (\n            <>\n                <Button icon={`dismiss`} iconSize={20}/>\n            </>\n        );\n\n        const sideItems = (\n            <div className=\"review-studio-sidebar\">\n                <ContainerPanel classNames=\"preview\">\n                    <canvas\n                        width={this.previewSize.width}\n                        height={this.previewSize.height}\n                        ref={this.previewCanvas}/>\n                </ContainerPanel>\n            </div>\n        );\n\n        const setupItems = (\n            <>\n                <div className={`row sample-size`}>\n                    <div className=\"caption\">Sample Size</div>\n                    <Range\n                        value={this.state.sampleSize} min={1} max={10}\n                        round={true}\n                        onChange={v => this.setSampleSize(v)}\n                    />\n                    <div className=\"value\">{this.state.sampleSize} X {this.state.sampleSize}</div>\n                </div>\n                <div className=\"row corner\">\n                    <div className=\"caption\">Corner to Start</div>\n                    <div className=\"corner-grid\">\n                        <div className=\"row\">\n                            <div\n                                className={cn(\"corner nw\", {selected: this.state.startCorner === 'nw'})}\n                                onClick={() => this.setStartCorner('nw')}\n                            />\n                            <div className={cn(\"corner ne\", {selected: this.state.startCorner === 'ne'})}\n                                 onClick={() => this.setStartCorner('ne')}\n                            />\n                        </div>\n                        <div className=\"row\">\n                            <div\n                                className={cn(\"corner sw\", {selected: this.state.startCorner === 'sw'})}\n                                onClick={() => this.setStartCorner('sw')}\n                            />\n                            <div\n                                className={cn(\"corner se\", {selected: this.state.startCorner === 'se'})}\n                                onClick={() => this.setStartCorner('se')}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row cta\">\n                    <Button classNames={`cta`} text={`Start`} onClick={() => this.setState({mode: 'review'})}/>\n                </div>\n            </>\n        );\n\n        const reviewItems = (\n            <>\n                <canvas ref={this.reviewCanvas}/>\n            </>\n        );\n\n        const mainContent = mode === 'setup' ? setupItems : reviewItems;\n\n        return (\n            <div className={`modal review-studio`}>\n                <ToolbarView items={topItems} itemsFar={topItemsFar}>\n                    <DockView side={`right`} sideView={sideItems}>\n                        <ContainerPanel classNames={`main-panel`}>\n                            {mainContent}\n                        </ContainerPanel>\n                    </DockView>\n                </ToolbarView>\n            </div>\n        );\n    }\n\n}\n","import {Callable} from \"./hui\";\n\nexport class ClickDismiss{\n\n    static mouseup = new ClickDismiss('mouseup');\n\n    private static idReminder = 1;\n\n    private stack: {id: number, call: Callable}[] = [];\n\n    private preventNext = false;\n\n    private constructor(eventName: string){\n        window.addEventListener(eventName, e => {\n            if(this.preventNext) {\n                this.preventNext = false;\n                return;\n            }else{\n                if(this.stack.length > 0) {\n                    e.stopImmediatePropagation();\n                    this.popAndExecute();\n                }\n            }\n        });\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: Callable): number{\n\n        const id = ClickDismiss.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    popAndExecute(){\n        const entry = this.stack.pop();\n\n        if(entry){\n            entry.call();\n            this.unregister(entry.id);\n        }\n    }\n\n    preventNextEvent(){\n        this.preventNext = true;\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n        this.preventNext = false;\n    }\n\n}","\nexport class InvalidColorFormatError extends Error{}\n\nexport class Color{\n\n    static get black(): Color{\n        return new Color(0, 0,0);\n    }\n\n    static hexParsable(hexColor: string): boolean{\n        return hexColor.match(/#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?/) !== null;\n    }\n\n    static fromHex(hexColor: string): Color{\n\n        if (!Color.hexParsable(hexColor)){\n            throw new InvalidColorFormatError(hexColor);\n        }\n\n        hexColor = hexColor.replace('#', '');\n\n        let toDecimal = function(hex: any){ return parseInt(hex, 16) };\n\n        let r = 0;\n        let g = 0;\n        let b = 0;\n        let a = 1;\n\n        // If three digits\n        if(hexColor.length == 3){\n            r = toDecimal(hexColor[0] + hexColor[0]);\n            g = toDecimal(hexColor[1] + hexColor[1]);\n            b = toDecimal(hexColor[2] + hexColor[2]);\n        }else{\n            r = toDecimal(hexColor[0] + hexColor[1]);\n            g = toDecimal(hexColor[2] + hexColor[3]);\n            b = toDecimal(hexColor[4] + hexColor[5]);\n\n            if(hexColor.length == 8) {\n                a = toDecimal(hexColor[6] + hexColor[7]);\n            }\n        }\n\n        return new Color(r, g, b, a);\n\n    }\n\n    /**\n     * HSV to RGB color conversion\n     *\n     * H runs from 0 to 360 degrees\n     * S and V run from 0 to 1\n     *\n     * Ported from the excellent java algorithm by Eugene Vishnevsky at:\n     * http://www.cs.rit.edu/~ncs/color/t_convert.html\n     */\n    static fromHsv(h: number, s: number, v: number): Color{\n        let r, g, b;\n        let i;\n        let f, p, q, t;\n\n        // Make sure our arguments stay in-range\n        h = Math.max(0, Math.min(360, h));\n        s = Math.max(0, Math.min(100, s));\n        v = Math.max(0, Math.min(100, v));\n\n        if(s == 0) {\n            // Achromatic (grey)\n            r = g = b = v;\n            return new Color(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));\n        }\n\n        h /= 60; // sector 0 to 5\n        i = Math.floor(h);\n        f = h - i; // factorial part of h\n        p = v * (1 - s);\n        q = v * (1 - s * f);\n        t = v * (1 - s * (1 - f));\n\n        switch(i) {\n            case 0: r = v; g = t; b = p; break;\n            case 1: r = q; g = v; b = p; break;\n            case 2: r = p; g = v; b = t; break;\n            case 3: r = p; g = q; b = v; break;\n            case 4: r = t; g = p; b = v; break;\n            default: r = v; g = p; b = q;\n        }\n\n        return new Color(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));\n    }\n\n    static fromTupleInt8(t: [number,  number, number, number]): Color{\n        return new Color(t[0], t[1], t[2], t[3]);\n    }\n\n    static get transparent(): Color{\n        return new Color(0, 0, 0, 0);\n    }\n\n    static get white(): Color{\n        return new Color(255, 255, 255);\n    }\n\n    constructor(\n        readonly r: number,     //  0 - 255\n        readonly g: number,     //  0 - 255\n        readonly b: number,     //  0 - 255\n        readonly a: number = 1, //  0 - 1\n    ) {\n        this.r = Math.max(Math.min(Math.round(r), 255), 0);\n        this.g = Math.max(Math.min(Math.round(g), 255), 0);\n        this.b = Math.max(Math.min(Math.round(b), 255), 0);\n        this.a = Math.max(Math.min(a, 1), 0);\n    }\n\n    equals(c: Color): boolean{\n        return c.r === this.r && c.g === this.g && c.b === this.b && c.a === this.a;\n    }\n\n    withAlpha(alpha: number){\n        if (alpha < 0 || alpha > 100){\n            throw new Error(`Invalid alpha: ${alpha}`);\n        }\n        return new Color(this.r, this.g, this.b, alpha);\n    }\n\n    get cssRgb(): string{\n        return `rgb(${this.r}, ${this.g}, ${this.b})`;\n    }\n\n    get cssRgba(): string{\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n    }\n\n    get hexRgb(): string{\n\n        const hex = (n: number) => {\n            const result = n.toString(16);\n            return result.length == 1 ? `0${result}` : result;\n        }\n\n        return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`\n    }\n\n    get hexRgba(): string{\n\n        const hex = (n: number) => {\n            const result = n.toString(16);\n            return result.length == 1 ? `0${result}` : result;\n        }\n\n        return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(Math.round(this.a * 255))}`\n    }\n\n    get hsv(): [number, number, number]{\n        let rr, gg, bb;\n        let r = this.r / 255;\n        let g = this.g / 255;\n        let b = this.b / 255;\n        let h = 0;\n        let s = 0;\n        let v = Math.max(r, g, b);\n        let diff = v - Math.min(r, g, b);\n        let diff_c = (c: number) => { return (v - c) / 6 / diff + 1 / 2 };\n\n        if(diff == 0) {\n            h = s = 0;\n        }else {\n            s = diff / v;\n            rr = diff_c(r);\n            gg = diff_c(g);\n            bb = diff_c(b);\n\n            if(r === v) {\n                h = bb - gg;\n            }else if(g === v) {\n                h = (1 / 3) + rr - bb;\n            }else if(b === v) {\n                h = (2 / 3) + gg - rr;\n            }\n        }\n\n        if(h < 0) {\n            h += 1;\n        }else if(h > 1) {\n            h -= 1;\n        }\n\n        return [\n            Math.round(h * 360),\n            s,\n            v\n        ];\n    }\n\n    get isTransparent(): boolean{\n        return (this.r === 0 &&\n            this.g ===  0 &&\n            this.b ===  0 &&\n            this.a === 0);\n    }\n\n    get tupleInt8(): [number, number, number, number]{\n        return [this.r, this.g, this.b, Math.round(this.a * 255)];\n    }\n\n}","/**\n * Keeps a stack for globally reacting to keys, like Escape and Enter.\n */\nimport {Callable} from \"./hui\";\n\nexport class\nFocusStackHandler{\n\n    private static idReminder = 1;\n\n    static dismiss = new FocusStackHandler('Escape');\n\n    static commit = new FocusStackHandler('Enter');\n\n    private stack: {id: number, call: Callable}[] = [];\n\n    private constructor(key: string){\n\n        window.addEventListener('keydown', e => {\n            if(e.key === key) {\n                if(this.stack.length > 0) {\n                    e.stopImmediatePropagation();\n                    this.popAndExecute();\n                }\n            }\n        });\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: Callable): number{\n\n        const id = FocusStackHandler.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    popAndExecute(){\n        const entry = this.stack.pop();\n\n        if(entry){\n            entry.call();\n            this.unregister(entry.id);\n        }\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n    }\n\n}","export type KeyCaptureEvent = (e: KeyboardEvent) => void;\n\nexport class KeyCaptureStackHandler{\n    private static idReminder = 1;\n\n    static instance = new KeyCaptureStackHandler();\n\n    private stack: {id: number, call: KeyCaptureEvent}[] = [];\n\n    private constructor(){\n        window.addEventListener('keydown', e => {\n            if(this.stack.length > 0) {\n                this.execute(e);\n            }\n        }, true);\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: KeyCaptureEvent): number{\n\n        const id = KeyCaptureStackHandler.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    private execute(e: KeyboardEvent){\n        if(this.stack.length > 0) {\n            const entry = this.stack[this.stack.length - 1];\n            entry.call(e);\n        }\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n    }\n}","\nexport interface Point {\n    x: number;\n    y: number;\n}\n\nexport interface Rect{\n    left: number,\n    top: number,\n    width: number,\n    height: number,\n}\n\nexport interface Size {\n    width: number;\n    height: number;\n}\n\nexport type BasicCardinalPoint = 'n' | 'e' | 's' | 'w';\nexport type CardinalPoint = BasicCardinalPoint | 'ne' | 'se' | 'sw'| 'nw';\n\nexport function makePt(x: number, y: number): Point {\n    return {x, y};\n}\n\nexport function makeSz(width: number, height: number): Size{\n    return {width, height};\n}\n\nexport function roundPt(p: Point): Point{\n    return makePt(Math.round(p.x), Math.round(p.y));\n}\n\nexport function roundSz(size: Size): Size{\n    return makeSz(Math.round(size.width), Math.round(size.height));\n}\n\nexport function compareSize(a: Size, b: Size): number{\n    return (a.width * a.height) - (b.width * b.height);\n}\n\nexport function slope(a: Point, b: Point): number{\n    return (b.y - a.y) / (b.x - a.x);\n}\n\nexport function midPoint(a: Point, b: Point): Point {\n    return {x: (a.x + b.x) / 2, y: (a.y + b.y) / 2};\n}\n\nexport function distance(a: Point, b: Point): number{\n    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n}\n\nexport function scaleToContain(container: Size, scalable: Size): Size{\n\n    const wOriented = makeSz(container.width, container.width * scalable.height / scalable.width);\n    const hOriented = makeSz(container.height * scalable.width / scalable.height, container.height);\n\n    if (wOriented.width <= container.width && wOriented.height <= container.height){\n        return wOriented;\n    }\n\n    return hOriented;\n}\n\nexport class Rectangle{\n\n    static get empty(): Rectangle{\n        return new Rectangle(0, 0, 0, 0);\n    }\n\n    static fromRect(r: Rect): Rectangle{\n        return new Rectangle(r.left, r.top, r.width, r.height);\n    }\n\n    static fromDOMRect(r: DOMRect): Rectangle{\n        return new Rectangle(r.left, r.top, r.width, r.height);\n    }\n\n    static fromLTRB(left: number, top: number, right: number, bottom: number): Rectangle{\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n\n    static fromPoint(p: Point): Rectangle{\n        return new Rectangle(p.x, p.y, 0, 0);\n    }\n\n    static fromSize(s: Size): Rectangle{\n        return new Rectangle(0, 0, s.width, s.height);\n    }\n\n    static unionOf(...rects: Rectangle[]): Rectangle | null{\n\n        if(rects.length == 0) {\n            return null;\n        }\n\n        let current = rects[0];\n\n        for(let i = 1; i < rects.length; i++){\n            current = current.union(rects[i]);\n        }\n\n        return current;\n    }\n\n    constructor(readonly left: number, readonly top:number, readonly width: number, readonly height: number){}\n\n    centerAt(point: Point): Rectangle{\n        return this.withLocation(makePt(\n            point.x - this.width / 2,\n            point.y - this.height / 2\n        ));\n    }\n\n    clone(): Rectangle{\n        return new Rectangle(this.left, this.top, this.width, this.height);\n    }\n\n    contains(p: Point): boolean{\n        return p.x >= this.left && p.x < this.right && p.y >= this.top && p.y < this.bottom;\n    }\n\n    deflate(horizontal: number, vertical: number): Rectangle{\n        return Rectangle.fromLTRB(this.left + horizontal, this.top + vertical, this.right - horizontal, this.bottom - vertical);\n    }\n\n    equals(r: Rectangle): boolean{\n        return r.left === this.left &&\n            r.top === this.top &&\n            r.width === this.width &&\n            r.height === this.height;\n    }\n\n    getCardinalPoint(c: CardinalPoint): Point{\n        switch (c) {\n            case 'n': return this.north;\n            case 'ne': return this.northEast;\n            case 'e': return this.east;\n            case 'se': return this.southEast;\n            case 's': return this.south;\n            case 'sw': return this.southWest;\n            case 'w': return this.west;\n            case 'nw': return this.northWest;\n        }\n    }\n\n    inflate(horizontal: number, vertical: number): Rectangle{\n        return Rectangle.fromLTRB(this.left - horizontal, this.top - vertical, this.right + horizontal, this.bottom + vertical);\n    }\n\n    intersects(rectangle: Rectangle): boolean{\n        let thisX = this.left;\n        let thisY = this.top;\n        let thisW = this.width;\n        let thisH = this.height;\n        let rectX = rectangle.left;\n        let rectY = rectangle.top;\n        let rectW = rectangle.width;\n        let rectH = rectangle.height;\n        return (rectX < thisX + thisW) && (thisX < (rectX + rectW)) && (rectY < thisY + thisH) && (thisY < rectY + rectH);\n    }\n\n    offset(xOffset: number, yOffset: number): Rectangle{\n        return this.withLocation(makePt(this.left + xOffset, this.top + yOffset));\n    }\n\n    round(): Rectangle{\n        return new Rectangle(\n            Math.round(this.left),\n            Math.round(this.top),\n            Math.round(this.width),\n            Math.round(this.height),\n        );\n    }\n\n    toString(){\n        return `(Rect: ${this.left}, ${this.top}, ${this.width}, ${this.height})`;\n    }\n\n    union(r: Rectangle): Rectangle{\n        const x = [this.left, this.right, r.left, r.right];\n        const y = [this.top, this.bottom, r.top, r.bottom];\n        return Rectangle.fromLTRB(\n            Math.min(...x), Math.min(...y),\n            Math.max(...x), Math.max(...y)\n        );\n    }\n\n    withBottom(bottom: number){\n        return new Rectangle(this.left, bottom - this.height, this.width, this.height);\n    }\n\n    withHeight(height: number){\n        return new Rectangle(this.left, this.top, this.width, height);\n    }\n\n    withLeft(left: number){\n        return new Rectangle(left, this.top, this.width, this.height);\n    }\n\n    withLocation(location: Point): Rectangle{\n        return new Rectangle(location.x, location.y, this.width, this.height);\n    }\n\n    withRight(right: number){\n        return new Rectangle(right - this.width, this.top, this.width, this.height);\n    }\n\n    withSize(size: Size): Rectangle{\n        return new Rectangle(this.left, this.top, size.width, size.height);\n    }\n\n    withTop(top: number){\n        return new Rectangle(this.left, top, this.width, this.height);\n    }\n\n    withWidth(width: number){\n        return new Rectangle(this.left, this.top, width, this.height);\n    }\n\n    get center(): Point{\n        return {\n            x: this.left + this.width / 2,\n            y: this.top + this.height / 2\n        };\n    }\n\n    get isEmpty(): boolean{\n        return this.width == 0 && this.height == 0 && this.left == 0 && this.top == 0;\n    }\n\n    get right(): number{\n        return this.left + this.width;\n    }\n\n    get bottom(): number{\n        return this.top + this.height;\n    }\n\n    get location(): Point{\n        return makePt(this.left, this.top);\n    }\n\n    get tuple(): [number, number, number, number]{\n        return [this.left, this.top, this.width, this.height];\n    }\n\n    get tupleLTRB(): [number, number, number, number]{\n        return [this.left, this.top, this.right, this.bottom];\n    }\n\n    get northEast(): Point{\n        return {x: this.right, y: this.top};\n    }\n\n    get southEast(): Point{\n        return {x: this.right, y: this.bottom};\n    }\n\n    get southWest(): Point{\n        return {x: this.left, y: this.bottom};\n    }\n\n    get northWest(): Point{\n        return {x: this.left, y: this.top};\n    }\n\n    get east(): Point{\n        return makePt(this.right, this.center.y);\n    }\n\n    get eastSegment(): [Point, Point]{\n        return [this.northEast, this.southEast];\n    }\n\n    get north(): Point{\n        return makePt(this.center.x, this.top);\n    }\n\n    get northSegment(): [Point, Point]{\n        return [this.northEast, this.northWest];\n    }\n\n    get south(): Point{\n        return makePt(this.center.x, this.bottom);\n    }\n\n    get southSegment(): [Point, Point]{\n        return [this.southEast, this.southWest];\n    }\n\n    get west(): Point{\n        return makePt(this.left, this.center.y);\n    }\n\n    get westSegment(): [Point, Point]{\n        return [this.southWest, this.northWest];\n    }\n\n    get size(): Size{\n        return {width: this.width, height: this.height};\n    }\n}","\nexport function darkModeOn(): boolean | undefined {\n    if (window.matchMedia){\n        return window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n}","export function uuid(): string{\n    return Uuid.random().stringValue;\n}\n\nexport class Uuid{\n\n    static random(): Uuid{\n        return new Uuid(new Uint8ClampedArray([\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n            Math.random() * 255,\n        ]))\n    }\n\n    readonly stringValue: string;\n\n    constructor(readonly value: Uint8ClampedArray){\n        if(value.length != 16){\n            throw new Error();\n        }\n\n        this.stringValue = '';\n\n        for(let i = 0; i < value.length; i++){\n            const hex = value[i].toString(16);\n            this.stringValue += hex.length < 2 ? '0' + hex : hex;\n            if(i % 2 == 1 && i > 1 && i < 10){\n                this.stringValue += '-';\n            }\n        }\n    }\n\n    toString(): string{\n        return this.stringValue;\n    }\n}\n","\nexport class GraphicsMemoryError extends Error{}","export interface Focusable{\n    avoidFocus?: boolean;\n}\nexport interface Disable{\n    disabled?: boolean;\n}\n\nexport interface ClassNames{\n    classNames?: string;\n}\n\n// Behaves like classnames npm module\nexport function cn(...args: any[]): string{\n    const result: string[] = [];\n\n    for(const thing of args){\n        if (typeof thing === \"object\"){\n            for(const prop in thing){\n                const value = thing[prop];\n                if (!!value){\n                    result.push(prop);\n                }\n            }\n        }else if(!!thing){\n            result.push(String(thing));\n        }\n    }\n\n    return result.join(' ');\n}\n\nexport type Callable = () => void;","import * as React from \"react\";\nimport {ClickableProps} from \"./Clickable\";\nimport {Label, LabelProps} from \"./Label\";\nimport {Icon} from \"./Icon\";\nimport {KeyboardEvent, RefObject} from \"react\";\nimport {MenuOverlay} from \"../overlays/MenuOverlay\";\nimport {Callable, Disable} from \"../helpers/hui\";\nimport {FocusStackHandler} from \"../helpers/FocusStackHandler\";\nimport {ClickDismiss} from \"../helpers/ClickDismiss\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface ButtonProps extends ClickableProps, LabelProps, Disable{\n    children?: React.ReactNode;\n    split?: boolean;\n    face?: \"hover\" | \"always\" | \"never\";\n    selected?: boolean;\n    useChevron?: boolean;\n}\n\nexport interface ButtonState {\n    dropDownVisible?: boolean;\n}\n\nexport class Button extends React.Component<ButtonProps, ButtonState>{\n\n    buttonRef: RefObject<HTMLDivElement>;\n\n    private escapeKeyDismissId = 0;\n    private clickDismissId = 0;\n\n    constructor(props: ButtonProps){\n        super(props);\n        this.buttonRef = React.createRef();\n        this.state = {};\n        this.activate = this.activate.bind(this);\n        this.showDropDown = this.showDropDown.bind(this);\n        this.hideDropDown = this.hideDropDown.bind(this);\n        this.keyDownHide = this.keyDownHide.bind(this);\n        this.keyDownShow = this.keyDownShow.bind(this);\n        this.keyDownActivate = this.keyDownActivate.bind(this);\n    }\n\n    activate(){\n        if(this.props.disabled !== true && this.props.onClick) {\n            this.props.onClick();\n        }\n    }\n\n    keyPass(e: KeyboardEvent<HTMLDivElement>, call: Callable){\n        if(e.key === 'Enter' || e.key === ' ') {\n            if(!this.props.disabled) {\n                e.stopPropagation();\n                e.preventDefault();\n                call();\n            }\n        }\n    }\n\n    keyDownHide(e: KeyboardEvent<HTMLDivElement>){\n        this.keyPass(e, () => this.hideDropDown());\n    }\n\n    keyDownShow(e: KeyboardEvent<HTMLDivElement>){\n        if(this.props.disabled) {\n            return;\n        }\n        this.keyPass(e, () => this.showDropDown());\n    }\n\n    keyDownActivate(e: KeyboardEvent<HTMLDivElement>){\n        this.keyPass(e, () => this.activate());\n    }\n\n    hideDropDown(){\n        this.setState({dropDownVisible: false});\n\n        // Unregister for ESC key\n        FocusStackHandler.dismiss.unregister(this.escapeKeyDismissId);\n\n        // Unregister from body click\n        ClickDismiss.mouseup.unregister(this.clickDismissId);\n    }\n\n    showDropDown(){\n        this.setState({dropDownVisible: true});\n\n        // Register for hiding when ESC key is pressed\n        this.escapeKeyDismissId = FocusStackHandler.dismiss.register(() => { this.hideDropDown(); });\n\n        // Register for hiding when body is clicked\n        this.clickDismissId = ClickDismiss.mouseup.register(() => this.hideDropDown());\n    }\n\n    render(){\n        const rect = Rectangle.fromDOMRect(this.buttonRef.current?.getBoundingClientRect() || new DOMRect());\n        const chevron = () => this.props.useChevron ? <Icon name={\"chevron-down\"} size={8}/> : undefined;\n        const label = () => <Label {...this.props} />;\n        const menu = () => (\n            <MenuOverlay\n                top={rect.top + rect.height}\n                left={rect.left}\n                refRect={rect}\n                onDismissSignal={this.hideDropDown}>\n                {this.props.children}\n            </MenuOverlay>\n        );\n\n        const tags = [\n                `face-${this.props.face || 'hover'}`,\n                 this.props.classNames,\n                 this.props.disabled ? 'disabled' : null,\n                 this.props.selected ? 'selected' : null,\n            ]\n            .filter(a => !!a)\n            .join(` `);\n\n        const tabProp = this.props.disabled ? {} : {tabIndex: 0};\n\n        if(this.props.children) {\n            if(this.props.split) {\n                if(this.state.dropDownVisible) {\n                    return (\n                        <div className={`ui-button-wrap split`}>\n                            <div {...tabProp}\n                                 ref={this.buttonRef}\n                                 className={`ui-clickable ui-button is-open ${tags}`}\n                                 onClick={this.activate}>\n                                {label()}\n                            </div>\n                            <div {...tabProp}\n                                 className={`ui-clickable ui-button split-part`}\n                                 onClick={this.showDropDown}\n                                 onKeyDown={this.keyDownShow}>\n                                {chevron()}\n                                {menu()}\n                            </div>\n                        </div>\n                    )\n                }else{\n                    return (\n                        <div className={`ui-button-wrap split ${tags}`}>\n                            <div {...tabProp}\n                                 ref={this.buttonRef}\n                                 className={\"ui-clickable ui-button\"}\n                                 onKeyDown={this.keyDownActivate}\n                                 onClick={this.activate}>\n                                {label()}\n                            </div>\n                            <div {...tabProp}\n                                 className={`ui-clickable ui-button split-part`}\n                                 onClick={this.showDropDown}\n                                 onKeyDown={this.keyDownShow}>\n                                {chevron()}\n                            </div>\n                        </div>\n                    )\n                }\n\n            }else if(this.state.dropDownVisible) {\n                return (\n                    <div className={`ui-button-wrap`}>\n                        <div {...tabProp}\n                             ref={this.buttonRef}\n                             className={`ui-clickable ui-button is-open ${tags}`}\n                             onKeyDown={this.keyDownHide}\n                             onClick={this.showDropDown}>\n                            {label()}\n                            {chevron()}\n                        </div>\n                        {menu()}\n                    </div>\n                )\n            }else{\n                return (\n                    <div className={`ui-button-wrap`}>\n                        <div {...tabProp}\n                             ref={this.buttonRef}\n                             className={`ui-clickable ui-button ${tags}`}\n                             onClick={this.showDropDown}\n                             onKeyDown={this.keyDownShow}>\n                            {label()}\n                            {chevron()}\n                        </div>\n                    </div>\n                )\n            }\n        }else{\n            return (\n                <div {...tabProp}\n                     ref={this.buttonRef}\n                     className={`ui-clickable ui-button ${tags}`}\n                     onClick={this.activate}\n                     onKeyDown={this.keyDownActivate}>\n                    {label()}\n                </div>\n            )\n        }\n    }\n}","import * as React from \"react\";\nimport {Callable, ClassNames, cn} from \"../helpers/hui\";\n\nexport interface ClickableProps extends ClassNames{\n    isSelected?: boolean;\n    avoidHover?: boolean;\n    onClick?: Callable;\n    children?: React.ReactNode;\n}\n\ninterface ClickableState {\n    isHovered?: boolean;\n}\nexport class Clickable extends React.Component<ClickableProps, ClickableState>{\n\n    constructor(props: ClickableProps){\n        super(props);\n        this.state = {};\n        this.mouseEnter = this.mouseEnter.bind(this);\n        this.mouseLeave = this.mouseLeave.bind(this);\n    }\n\n    mouseEnter(){\n        if(this.props.avoidHover !== true) {\n            this.setState({isHovered: true});\n        }\n    }\n\n    mouseLeave(){\n        if(this.props.avoidHover !== true) {\n            this.setState({isHovered: false});\n        }\n    }\n\n    render(){\n        const classTags = cn(\n            `ui-clickable`,\n            {selected: this.props.isSelected || this.state.isHovered},\n            this.props.classNames\n        );\n        return (\n            <div\n                className={classTags}\n                onMouseEnter={this.mouseEnter}\n                onMouseLeave={this.mouseLeave}\n                onClick={this.props.onClick}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}","import * as React from \"react\";\nimport {Color} from \"../helpers/Color\";\nimport {RefObject} from \"react\";\nimport {GraphicsMemoryError} from \"../helpers/errors\";\nimport {Range} from \"./Range\";\nimport {makeSz} from \"../helpers/Rectangle\";\n\nconst BG_SQ_SIZE = 5;\nconst BG_COLOR_A = [0, 0, 0, 0];\nconst BG_COLOR_B = [127, 127, 127, 127];\n\nexport interface ColorPickerProps{\n\n    colorPicked: (color: Color) => any;\n}\n\nexport interface ColorPickerState{\n    currentColor: Color;\n    selectedHue: number;\n}\n\ntype ColorPickerFocus = 'hex' | 'r' | 'g' | 'b' | 'a';\nconst ColorPickerFields: ColorPickerFocus[] = ['hex', 'r', 'g', 'b', 'a'];\n\nfunction dataUrlFrom(data: Uint8ClampedArray, width: number): string{\n    const imageData = new ImageData(data, width);\n    const canvas: HTMLCanvasElement = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = data.length / 4 / width;\n\n    const cx = canvas.getContext('2d');\n\n    if(!cx){\n        throw new GraphicsMemoryError();\n    }\n\n    cx.putImageData(imageData, 0,0);\n\n    return canvas.toDataURL();\n}\n\nfunction createBgPattern(): string{\n    const lineOfA = new Array(BG_SQ_SIZE).fill(BG_COLOR_A);\n    const lineOfB = new Array(BG_SQ_SIZE).fill(BG_COLOR_B);\n    const rowA = [].concat(...lineOfA, ...lineOfB);\n    const rowB = [].concat(...lineOfB, ...lineOfA);\n    const chunkA = new Array(BG_SQ_SIZE).fill(rowA);\n    const chunkB = new Array(BG_SQ_SIZE).fill(rowB);\n    const data = new Uint8ClampedArray([].concat(...chunkA, ...chunkB));\n\n    return dataUrlFrom(data, BG_SQ_SIZE * 2);\n}\n\nfunction createHuePattern(): string{\n    const convert = (foo: number, hue: number) => Color.fromHsv(hue, 1, 1).tupleInt8;\n    const array360 = new Array(360).fill(0);\n    const arrayColors = array360.map(convert);\n    const flatArrayColors: number[] = [].concat(...arrayColors as any);\n    const data = new Uint8ClampedArray(flatArrayColors);\n    return dataUrlFrom(data, 360);\n}\n\nfunction createSaturationPattern(hue = 1, length = 10): string{\n\n    const arr = new Uint8ClampedArray(length * length * 4);\n    let z = 0\n\n    for(let j = length; j >= 0; j--){\n        for(let i = 0; i < length; i++){\n            const hsv = Color.fromHsv(hue, i/length, j/length);\n            let [r, g, b, a] = hsv.tupleInt8;\n            arr[z++] = r;\n            arr[z++] = g;\n            arr[z++] = b;\n            arr[z++] = a;\n        }\n    }\n\n    return dataUrlFrom(arr, length);\n}\n\nexport class ColorPicker extends React.Component<ColorPickerProps, ColorPickerState>{\n\n    static hueBar = createHuePattern();\n    static bgPattern = createBgPattern();\n\n    private focus: ColorPickerFocus | null = null;\n    private txtHex: RefObject<HTMLInputElement> = React.createRef();\n    private txtR: RefObject<HTMLInputElement> = React.createRef();\n    private txtG: RefObject<HTMLInputElement> = React.createRef();\n    private txtB: RefObject<HTMLInputElement> = React.createRef();\n    private txtA: RefObject<HTMLInputElement> = React.createRef();\n\n    constructor(props: ColorPickerProps) {\n        super(props);\n\n        this.state = {\n            currentColor: Color.black,\n            selectedHue: -1,\n        }\n\n    }\n\n    private getInput(type: ColorPickerFocus): HTMLInputElement{\n\n        let ref: RefObject<HTMLInputElement>;\n\n        switch (type){\n            case \"a\": ref = this.txtA; break;\n            case \"r\": ref = this.txtR; break;\n            case \"g\": ref = this.txtG; break;\n            case \"b\": ref = this.txtB; break;\n            case \"hex\": ref = this.txtHex; break;\n        }\n\n        if (ref.current){\n            return ref.current;\n        }\n\n        throw new Error(`No input element for: ${type}`);\n    }\n\n    private getInputValueFor(type: ColorPickerFocus): string{\n\n        const color = this.state.currentColor;\n\n        switch (type){\n            case \"a\": return Math.round(color.a * 100).toString();\n            case \"r\": return color.r.toString();\n            case \"g\": return color.g.toString();\n            case \"b\": return color.b.toString();\n            case \"hex\": return color.hexRgb;\n        }\n\n    }\n\n    private updateColor(color: Color, selectedHue?: number){\n\n        this.setState({currentColor: color, selectedHue: typeof selectedHue === \"number\" ? selectedHue : color.hsv[0]});\n\n        if (this.props.colorPicked){\n            this.props.colorPicked(color);\n        }\n    }\n\n    private updateHue(hue: number){\n        const color = this.state.currentColor;\n        const hsv = color.hsv;\n        this.updateColor(Color.fromHsv(hue, hsv[1], hsv[2]).withAlpha(color.a), hue);\n    }\n\n    private updateAlpha(alpha: number){\n        const color = this.state.currentColor;\n        this.updateColor(color.withAlpha(alpha / 100));\n    }\n\n    private updateSatLight(satValue?: number, keyValue?: number){\n        const current = this.state.currentColor;\n        const hue = this.state.selectedHue;\n        const sat = (satValue || 0) / 100;\n        const key = (keyValue || 0) / 100;\n        this.updateColor(Color.fromHsv(hue >= 0 ? hue : 0, sat, key).withAlpha(current.a), hue);\n    }\n\n    private handleChange(where: ColorPickerFocus){\n        const txt = this.getInput(where);\n        if (where == 'hex'){\n            const value = txt.value;\n            if (Color.hexParsable(value)){\n                this.updateColor(Color.fromHex(value));\n            }\n        }else{\n            const a = parseInt(this.getInput(\"a\").value) || 0;\n            const b = parseInt(this.getInput(\"b\").value) || 0;\n            const g = parseInt(this.getInput(\"g\").value) || 0;\n            const r = parseInt(this.getInput(\"r\").value) || 0;\n            const color = new Color(r, g, b, a);\n            this.updateColor(color);\n        }\n    }\n\n    componentDidMount() {\n        ColorPickerFields.forEach(type => {\n            const txt = this.getInput(type);\n\n            txt.addEventListener('input', () => this.handleChange(type));\n            txt.addEventListener('focus', () => {\n                this.focus = type;\n            });\n            txt.addEventListener('blur', () => {\n                this.focus = null;\n            });\n        });\n    }\n\n    syncInputValues(){\n        for(const type of ColorPickerFields){\n            if (this.focus !== type){\n                this.getInput(type).value = this.getInputValueFor(type);\n            }\n        }\n    }\n\n    render() {\n\n        if (this.txtHex.current){\n            this.syncInputValues(); // Dont update if not rendered yet\n        }\n\n        const color = this.state.currentColor;\n        const hsv = color.hsv;\n        const hue = this.state.selectedHue >= 0 ? this.state.selectedHue : hsv[0];\n        const sat = hsv[1] * 100;\n        const keyValue = hsv[2] * 100;\n        const alpha = color.a * 100;\n\n        const satImg = createSaturationPattern(hue, 10);\n        const hueHandleStyle = {background: Color.fromHsv(hue, 1, 1).hexRgb};\n        const hueContainerStyle = {backgroundImage: `url(${ColorPicker.hueBar})`, backgroundSize: 'contain'};\n        const satContainerStyle = {backgroundImage: `url(${satImg})`};\n        const alphaContainerStyle = {backgroundImage: `url(${ColorPicker.bgPattern})`};\n        const swatchBgStyle = {backgroundImage: `url(${ColorPicker.bgPattern})`};\n        const swatchStyle = {backgroundColor: color.cssRgba};\n\n        return (\n            <div className=\"ui-color-picker\">\n                <div className=\"layer swatch\" style={swatchBgStyle}>\n                    <div className=\"swatch\" style={swatchStyle}/>\n                </div>\n                <div className=\"layer slider-2d\">\n                    <Range\n                        min={makeSz(0,0)}\n                        max={makeSz(100, 100)}\n                        value={makeSz(sat, 100-keyValue)}\n                        direction={'2d'}\n                        containerStyle={satContainerStyle}\n                        onChange={(sat, key) => this.updateSatLight(sat, 100 - (key||0))}\n                    />\n                </div>\n                <div className=\"layer slider-1d\">\n                    <Range\n                        min={0}\n                        max={359}\n                        value={hue}\n                        handleStyle={hueHandleStyle}\n                        containerStyle={hueContainerStyle}\n                        onChange={hue => this.updateHue(hue as number)}\n                    />\n                </div>\n                <div className=\"layer slider-alpha\">\n                    <Range\n                        min={0}\n                        max={100}\n                        value={alpha}\n                        containerStyle={alphaContainerStyle}\n                        onChange={a => this.updateAlpha(a as number)}\n                    />\n                </div>\n                <div className=\"layer inputs\">\n                    <div className=\"item hex\">\n                        <input type=\"text\" ref={this.txtHex}/>\n                        <div className=\"label\">Hex</div>\n                    </div>\n                    <div className=\"item r\">\n                        <input type=\"text\" ref={this.txtR}/>\n                        <div className=\"label\">R</div>\n                    </div>\n                    <div className=\"item g\">\n                        <input type=\"text\" ref={this.txtG}/>\n                        <div className=\"label\">G</div>\n                    </div>\n                    <div className=\"item g\">\n                        <input type=\"text\" ref={this.txtB}/>\n                        <div className=\"label\">B</div>\n                    </div>\n                    <div className=\"item b\">\n                        <input type=\"text\" ref={this.txtA}/>\n                        <div className=\"label\">A</div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\n\nexport type IconSize = 8 | 16 | 20 | 32 | 50;\nexport type IconName = \"empty\" | \"cross\" | \"floppy\" | \"file\" | \"folder\" | \"chevron-up\" | \"chevron-down\" | \"chevron-left\" | \"chevron-right\" | string;\n\nexport interface IconProps{\n    classNames?: string;\n    name: IconName;\n    size?: IconSize;\n}\n\nexport const Icon = (props: IconProps) => {\n    return <div className={`ui-icon size-${props.size || 16} icon-${props.name} ${props.classNames || ''}`} />;\n};","import * as React from \"react\";\nimport {Icon, IconName, IconSize} from \"./Icon\";\nimport {ClassNames, cn} from \"../helpers/hui\";\n\nexport interface LabelProps extends ClassNames{\n    text?: string;\n    icon?: IconName;\n    iconSize?: IconSize;\n    description?: string;\n}\n\nexport const Label = (props: LabelProps) => {\n\n    const classTag = cn(\"ui-label\", props.classNames);\n\n    if(props.icon && !props.text) {\n        return <div className={classTag}>\n            <Icon name={props.icon} size={props.iconSize}/>\n        </div>\n    }else if(!props.icon && !props.description) {\n        return <div className=\"classTag\">{props.text}</div>;\n\n    }else if(!props.icon && props.description) {\n        return <div className=\"classTag\">\n            <div className=\"text\">{props.text}</div>\n            <div className=\"desc\">{props.description}</div>\n        </div>;\n\n    }else if(props.icon){\n        if(props.description) {\n            return <div className={cn(classTag, 'with-icon')}>\n                <Icon name={props.icon} size={props.iconSize} />\n                <div className=\"text-side\">\n                    <div className=\"text\">{props.text}</div>\n                    <div className=\"desc\">{props.description}</div>\n                </div>\n            </div>\n        }else{\n            return <div className={cn(classTag, 'with-icon')}>\n                <Icon name={props.icon} size={props.iconSize} />\n                <div className=\"text\">{props.text}</div>\n            </div>\n        }\n    }else{\n        throw \"Undesired configuration\";\n    }\n};","import * as React from \"react\";\nimport {Label, LabelProps} from \"./Label\";\nimport {Icon} from \"./Icon\";\nimport {MenuOverlay} from \"../overlays/MenuOverlay\";\nimport {RefObject} from \"react\";\nimport {Callable} from \"../helpers/hui\";\nimport {ClickDismiss} from \"../helpers/ClickDismiss\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface MenuItemProps  extends LabelProps{\n    children?: React.ReactNode;\n    isOpen?: boolean;\n    isSelected?: boolean;\n    isActivated?: boolean;\n    onOpen?: Callable;\n    onClose?: Callable;\n    onActivate?: Callable;\n    onDismissSignal?: Callable;\n    onDismissSingleSignal?: Callable;\n    onSelectSignal?: Callable;\n    parent?: MenuOverlay;\n}\n\nexport interface MenuItemState {\n}\n\nexport class MenuItem extends React.Component<MenuItemProps, MenuItemState>{\n\n    ref: RefObject<HTMLDivElement>;\n\n    constructor(props: MenuItemProps){\n        super(props);\n        this.ref = React.createRef();\n        this.showOverlay = this.showOverlay.bind(this);\n        this.hideOverlay = this.hideOverlay.bind(this);\n        this.mouseActivate = this.mouseActivate.bind(this);\n        this.sendDismissSignal = this.sendDismissSignal.bind(this);\n        this.sendDismissSingleSignal = this.sendDismissSingleSignal.bind(this);\n        this.sendSelectSignal = this.sendSelectSignal.bind(this);\n    }\n\n    mouseActivate(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n        e.stopPropagation();\n\n        this.activate();\n    }\n\n    activate(){\n\n        if(this.props.onActivate) {\n            this.props.onActivate();\n        }\n\n        this.sendDismissSignal();\n\n    }\n\n    hideOverlay(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n\n        ClickDismiss.mouseup.preventNextEvent();\n        e.stopPropagation();\n\n        if(this.props.onClose) {\n            this.props.onClose();\n        }\n    }\n\n    showOverlay(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n\n        ClickDismiss.mouseup.preventNextEvent();\n\n        e.stopPropagation();\n\n        if(this.props.onOpen && this.ref && this.ref.current) {\n            this.props.onOpen();\n        }\n    }\n\n\n    render(){\n\n        const selectedClass = this.props.isSelected ? 'is-selected' : '';\n        const propsWithIcon = Object.assign({icon: \"empty\"}, this.props);\n\n        if(this.props.isActivated === true && React.Children.count(this.props.children) === 0) {\n            setTimeout(() => this.activate());\n        }\n\n        if(this.props.children) {\n\n            const rect = Rectangle.fromDOMRect(this.ref.current?.getBoundingClientRect() || new DOMRect());\n\n            if(this.props.isOpen) {\n                return (\n                    <div ref={this.ref} className={`ui-menuitem is-selected is-open`} onMouseDown={this.hideOverlay}>\n                        <Label {...propsWithIcon} />\n                        <Icon name={`chevron-right`} size={8} />\n                        <MenuOverlay\n                            left={rect.right} top={rect.top} refRect={rect} parentMenuItem={this}\n                            onDismissSingleSignal={this.sendDismissSingleSignal}\n                            onDismissSignal={this.sendDismissSignal}>\n                            {this.props.children}\n                        </MenuOverlay>\n                    </div>\n                )\n            }else{\n                return (\n                    <div ref={this.ref}\n                         className={`ui-menuitem ${selectedClass}`}\n                         onMouseEnter={this.sendSelectSignal}\n                         onMouseDown={this.showOverlay}>\n                        <Label {...propsWithIcon} />\n                        <Icon name={`chevron-right`} size={8} />\n                    </div>\n                )\n            }\n        }else{\n            return (\n                <div ref={this.ref}\n                     className={`ui-menuitem ${selectedClass}`}\n                     onMouseEnter={this.sendSelectSignal}\n                     onMouseDown={this.mouseActivate}>\n                    <Label {...propsWithIcon} />\n                </div>\n            )\n        }\n    }\n\n    sendDismissSignal(){\n        if(this.props.onDismissSignal) {\n            this.props.onDismissSignal();\n        }\n    }\n\n    sendDismissSingleSignal(){\n        if(this.props.onDismissSingleSignal) {\n            this.props.onDismissSingleSignal();\n        }\n    }\n\n    sendSelectSignal(){\n        if(this.props.onSelectSignal) {\n            this.props.onSelectSignal();\n        }\n    }\n}","\nimport * as React from \"react\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../helpers/Rectangle\";\nimport {CSSProperties, RefObject} from \"react\";\n\nexport interface SliderProps{\n    min: number | Size;\n    max: number | Size;\n    value?: number | Size;\n    onChange?: (value: number, value2d?: number) => void;\n    containerStyle?: CSSProperties;\n    handleStyle?: CSSProperties;\n    direction?: 'horizontal' | 'vertical' | '2d';\n    round?: boolean;\n}\n\nexport interface SliderState{\n    value: number | Size | 'pristine';\n}\n\ninterface GestureData{\n    clientX: number;\n    clientY: number;\n    target: EventTarget | null;\n}\n\nexport class Range extends React.Component<SliderProps, SliderState>{\n\n    private containerRef: RefObject<HTMLDivElement> = React.createRef();\n    private handleRef: RefObject<HTMLDivElement> = React.createRef();\n    private dragging = false;\n    private handleOffset: Point = makePt(0, 0);\n\n    private mouseMoveHandler = (e: MouseEvent) => this.mouseMove(e);\n    private mouseUpHandler = (e: MouseEvent) => this.mouseUp(e);\n    private touchMoveHandler = (e: TouchEvent) => this.touchMove(e);\n    private touchEndHandler = (e: TouchEvent) => this.touchEnd(e);\n\n    constructor(props: SliderProps) {\n        super(props);\n\n        this.state = {\n            value: 'pristine',\n        };\n    }\n\n    private clearWindowHandlers(){\n        window.removeEventListener('mousemove', this.mouseMoveHandler);\n        window.removeEventListener('mouseup', this.mouseUpHandler);\n        window.removeEventListener('touchmove', this.touchMoveHandler, {capture: true});\n        window.removeEventListener('touchend', this.touchEndHandler);\n    }\n\n    private valueFromRects(): number | Size{\n\n        const {container, handle} = this.boundingRects();\n        const max = this.props.max;\n        const min = this.props.min;\n\n        if(this.props.direction === '2d') {\n\n            if(typeof max == \"number\" || typeof min == \"number\"){\n                throw new Error(`min and max must be Size`)\n            }\n\n            const maxSpace = makeSz(container.width - handle.width, container.height - handle.height);\n            const curSpace = makeSz(handle.left - container.left, handle.top - container.top);\n            return makeSz(\n                curSpace.width * (max.width - min.width) / maxSpace.width + min.width,\n                curSpace.height * (max.height - min.height) / maxSpace.height + min.height\n            );\n\n        }else{\n\n            if(typeof max !== \"number\" || typeof min !== \"number\"){\n                throw new Error(`min and max must be number`);\n            }\n\n            if (this.props.direction !== 'vertical'){\n                const maxSpace = container.width - handle.width;\n                const curSpace = handle.left - container.left;\n                return curSpace * (max - min) / maxSpace + min;\n\n            }else{\n                const maxSpace = container.height - handle.height;\n                const curSpace = handle.top - container.top;\n                return curSpace * (max - min) / maxSpace + min;\n            }\n        }\n    }\n\n    private handleMouseDown(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n        this.pointingGestureStart(e);\n        e.preventDefault();\n\n        window.addEventListener('mousemove', this.mouseMoveHandler);\n        window.addEventListener('mouseup', this.mouseUpHandler);\n    }\n\n    private handleTouchStart(e: React.TouchEvent<HTMLDivElement>){\n\n        if (e.touches.length > 0){\n            this.pointingGestureStart(e.touches[0]);\n        }\n        e.preventDefault();\n        window.addEventListener('touchmove', this.touchMoveHandler, {capture: true, passive: false});\n        window.addEventListener('touchend', this.touchEndHandler);\n\n    }\n\n    private mouseMove(e: MouseEvent){\n        this.pointingGestureMove(e);\n        e.preventDefault();\n    }\n\n    private mouseUp(e: MouseEvent){\n        this.pointingGestureEnd(e);\n        this.clearWindowHandlers();\n    }\n\n    private touchMove(e: TouchEvent){\n        if (e.touches.length > 0){\n            this.pointingGestureMove(e.touches[0]);\n            e.preventDefault();\n        }\n    }\n\n    private boundingRects(): {container: Rectangle; handle: Rectangle}{\n        if(!this.containerRef.current || !this.handleRef.current){\n            throw new Error(`Refs not ready`);\n        }\n        return {\n            container: Rectangle.fromDOMRect(this.containerRef.current.getBoundingClientRect()),\n            handle: Rectangle.fromDOMRect(this.handleRef.current.getBoundingClientRect()),\n        };\n\n    }\n\n    private touchEnd(e: TouchEvent){\n        if (e.touches.length > 0){\n            this.pointingGestureEnd(e.touches[0]);\n            e.preventDefault();\n        }\n        this.clearWindowHandlers();\n\n    }\n\n    private pointingGestureStart(e: GestureData){\n        this.dragging = true;\n\n        // Save handle offset\n        if (this.refsReady){\n            const {handle} = this.boundingRects();\n            if (e.target === this.handleRef.current){\n                this.handleOffset = makePt(e.clientX - handle.left, e.clientY - handle.top);\n            }else{\n                this.handleOffset = makePt(handle.width/2, handle.height/2);\n            }\n        }\n\n        this.pointingGestureMove(e);\n\n    }\n\n    private pointingGestureEnd(e: GestureData){\n        this.dragging = false;\n    }\n\n    private pointingGestureMove(e: GestureData){\n\n        if (this.dragging && this.refsReady){\n\n            const {container, handle} = this.boundingRects();\n\n            let x = e.clientX - container.left - this.handleOffset.x;\n            x = Math.max(0, x);\n            x = Math.min(container.width - handle.width, x);\n\n            let y = e.clientY - container.top - this.handleOffset.y;\n            y = Math.max(0, y);\n            y = Math.min(container.height - handle.height, y);\n\n            this.updateHandleOffset(x, y);\n        }\n    }\n\n    private updateHandleOffset(handleOffsetX: number, handleOffsetY: number){\n\n        if (this.handleRef.current){\n            const {direction} = this.props;\n\n            if(direction !== 'vertical') {\n                this.handleRef.current.style.left = `${handleOffsetX}px`;\n            }\n\n            if(direction === 'vertical' || direction === '2d'){\n                this.handleRef.current.style.top = `${handleOffsetY}px`;\n            }\n        }\n\n        if (this.props.onChange){\n            const value = this.valueFromRects();\n\n            if (this.props.direction === '2d'){\n                const v2d = value as Size;\n                if (this.props.round){\n                    this.props.onChange(Math.round(v2d.width), Math.round(v2d.height));\n                }else{\n                    this.props.onChange(v2d.width, v2d.height);\n                }\n\n            }else{\n\n                if(this.props.round){\n                    this.props.onChange(Math.round(value as number));\n                }else{\n                    this.props.onChange(value as number);\n                }\n\n\n            }\n        }\n    }\n\n    private handleOffsetFromValue(value: number | Size): number | Size{\n\n        const {container, handle} = this.boundingRects();\n\n        if (this.props.direction === '2d'){\n            const max = this.props.max as Size;\n            const min = this.props.min as Size;\n            const v = value as Size;\n            const avail = makeSz(\n                container.width - handle.width,\n                container.height - handle.height\n            );\n            return makeSz(\n                v.width * avail.width / (max.width - min.width),\n                v.height * avail.height / (max.height - min.height),\n            );\n        }else{\n            const max = this.props.max as number;\n            const min = this.props.min as number;\n            const v = value as number;\n            const length = max - min;\n            let avail;\n\n            if(this.props.direction === 'vertical') {\n                avail = container.height - handle.height;\n            }else{\n                avail = container.width - handle.width;\n            }\n\n            const result = (v-min) * avail / (max-min);\n\n            return result;\n\n        }\n    }\n\n    private updateHandleForValue(rawValue: number | Size){\n\n        const value = this.handleOffsetFromValue(rawValue);\n\n\n        if (typeof value === 'number'){\n            if (this.props.direction === 'vertical'){\n                this.handleRef.current!.style.top = value + 'px';\n            }else{\n                this.handleRef.current!.style.left = value + 'px';\n            }\n        }else{\n            const value2d = value as Size;\n            this.handleRef.current!.style.left = value2d.width + 'px';\n            this.handleRef.current!.style.top = value2d.height + 'px';\n        }\n    }\n\n    private get refsReady(): boolean {\n        return !!this.containerRef.current && !!this.handleRef.current;\n    }\n\n    componentDidMount() {\n        if (!this.dragging && this.refsReady && typeof this.props.value !== 'undefined'){\n            this.updateHandleForValue(this.props.value)\n        }\n    }\n\n    componentDidUpdate(prevProps: Readonly<SliderProps>, prevState: Readonly<SliderState>, snapshot?: any) {\n        if (!this.dragging && this.refsReady && typeof this.props.value !== 'undefined'){\n            this.updateHandleForValue(this.props.value);\n        }\n    }\n\n    render() {\n\n        const {containerStyle, handleStyle} = this.props;\n\n        return (\n            <div ref={this.containerRef}\n                 className=\"ui-range\"\n                 tabIndex={0}\n                 style={containerStyle}\n                 onMouseDown={e => this.handleMouseDown(e)}\n                 onTouchStart={e => this.handleTouchStart(e)}>\n                <div\n                    ref={this.handleRef}\n                    className=\"handle\"\n                    style={handleStyle}\n                    onMouseDown={e => this.handleMouseDown(e)}\n                    onTouchStart={e => this.handleTouchStart(e)}\n                />\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\n\nexport interface SeparatorProps{\n\n}\n\nexport class Separator extends React.Component<SeparatorProps>{\n    render(){\n        return (\n            <div className={`ui-separator`}/>\n        );\n    }\n}","import * as React from \"react\";\nimport {CSSProperties, ReactNode} from \"react\";\nimport {ClassNames} from \"../helpers/hui\";\n\nconst DEFAULT_LENGTH = 300;\n\nexport interface DockViewProps extends ClassNames {\n    sideClassNames?: string;\n    containerClassNames?: string;\n    side?: 'left' | 'right' | 'top' | 'bottom';\n    sideView?: ReactNode;\n    length?: number;\n}\n\nexport class DockView extends React.Component<DockViewProps>{\n\n    render(){\n\n        const side = this.props.side || 'left';\n        const len = this.props.length || DEFAULT_LENGTH;\n        let sideCss: CSSProperties = {};\n        let mainCss: CSSProperties = {};\n\n        switch (side) {\n            case \"left\":\n                sideCss.width = len + 'px';\n                mainCss.left = len + 'px';\n                break;\n            case \"right\":\n                sideCss.width = len + 'px';\n                mainCss.right = len + 'px';\n                break;\n            case \"top\":\n                sideCss.height = len + 'px';\n                mainCss.top = len + 'px';\n                break;\n            case \"bottom\":\n                sideCss.height = len + 'px';\n                mainCss.bottom = len + 'px';\n                break;\n        }\n\n        return (\n            <div className={`ui-dock-view side-${side} ${this.props.classNames}`}>\n                <div className={`dock-side ${this.props.sideClassNames || ''}`} style={sideCss}>{this.props.sideView}</div>\n                <div className={`main-side ${this.props.containerClassNames || ''}`} style={mainCss}>{this.props.children}</div>\n            </div>\n        );\n\n    }\n}","import * as React from \"react\";\nimport {ReactNode} from \"react\";\nimport {DockView, DockViewProps} from \"./DockView\";\n\nconst DEFAULT_TOOLBAR_SIZE = 40;\n\nexport interface ToolbarViewProps extends DockViewProps{\n    items?: ReactNode;\n    itemsCenter?: ReactNode;\n    itemsFar?: ReactNode;\n}\n\nexport class ToolbarView extends React.Component<ToolbarViewProps>{\n\n    render(){\n\n        const len = this.props.length || DEFAULT_TOOLBAR_SIZE;\n        const side = this.props.side || 'top';\n\n        return (\n            <DockView\n                {...this.props}\n                length={len}\n                classNames={`ui-toolbar-view ${this.props.classNames || ''}`}\n                side={side}\n                sideClassNames={`toolbar ${this.props.sideClassNames || ''}`}\n                sideView={<>\n                    <div className=\"items near\">{this.props.items}</div>\n                    <div className=\"items center\">{this.props.itemsCenter}</div>\n                    <div className=\"items far\">{this.props.itemsFar}</div>\n                </>}\n            >\n                {this.props.children}\n            </DockView>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {OverlayProps} from \"./Overlay\";\nimport {MenuItem, MenuItemProps} from \"../items/MenuItem\";\nimport {RefObject} from \"react\";\nimport {Separator} from \"../items/Separator\";\nimport {Rectangle} from \"../helpers/Rectangle\";\nimport {Callable} from \"../helpers/hui\";\nimport {KeyCaptureStackHandler} from \"../helpers/KeyCaptureStackHandler\";\n\nexport interface MenuOverlayProps extends OverlayProps{\n    refRect: Rectangle;\n    onDismissSignal: Callable;\n    onDismissSingleSignal?: Callable;\n    parentMenuItem?: MenuItem;\n}\n\nexport interface MenuOverlayState{\n    selectedIndex?: number;\n    openIndex?: number;\n    activatedIndex?: number;\n}\n\nexport class MenuOverlay extends React.Component<MenuOverlayProps, MenuOverlayState>{\n\n    overlayRef: RefObject<HTMLDivElement> | undefined;\n\n    readonly keyCaptureId: number;\n    private childCount: number | undefined;\n    private separators: number[] = [];\n\n    constructor(props: MenuOverlayProps){\n        super(props);\n        this.overlayRef = React.createRef();\n        this.state = {};\n        this.setOpenItem = this.setOpenItem.bind(this);\n        const isActivationKey = (e: KeyboardEvent) => e.key === 'Enter' || e.key === ' ';\n        const cancelAndDo = (e: KeyboardEvent, f: Callable) => {\n            e.stopPropagation();\n            e.preventDefault();\n            f();\n        };\n\n        this.keyCaptureId = KeyCaptureStackHandler.instance.register(e => {\n            if(e.key == 'ArrowDown') {\n                cancelAndDo(e, this.selectNext.bind(this));\n\n            }else if(e.key === 'ArrowUp') {\n                cancelAndDo(e, this.selectPrev.bind(this));\n\n            }else if(e.key === 'ArrowRight' || isActivationKey(e)) {\n                cancelAndDo(e, this.openCurrentIndex.bind(this));\n\n                if(isActivationKey(e)) {\n                    this.setState({activatedIndex: this.state.selectedIndex});\n                }\n\n            }else if(e.key === 'ArrowLeft') {\n                if(\"undefined\" !== typeof this.props.parentMenuItem) {\n                    cancelAndDo(e, () => this.sendDismissSingleSignal());\n                }\n            }\n        });\n    }\n\n    closeOpenedIndex(){\n        if(\"undefined\" !== typeof this.state.openIndex) {\n            this.setState({openIndex: undefined});\n        }\n    }\n\n    componentWillUnmount(): void {\n        KeyCaptureStackHandler.instance.unregister(this.keyCaptureId);\n    }\n\n    selectNext(){\n\n        let current = -1;\n\n        if(\"number\" === typeof this.state.selectedIndex) {\n            current = this.state.selectedIndex;\n        }\n\n        let next = current + 1;\n\n        while(\"undefined\" !== typeof this.separators.find(i => i === next)) {\n            next++;\n        }\n\n        if(\"undefined\" !== typeof this.childCount && next >= this.childCount) {\n            next = 0;\n        }\n\n        this.setState({selectedIndex: next});\n    }\n\n    selectPrev(){\n\n        let current = -1;\n\n        if(\"number\" === typeof this.state.selectedIndex) {\n            current = this.state.selectedIndex;\n        }\n\n        let prev = current - 1;\n\n        while(\"undefined\" !== typeof this.separators.find(i => i === prev)) {\n            prev--;\n        }\n\n        if(prev < 0) {\n            if(\"undefined\" !== typeof this.childCount) {\n                prev = this.childCount - 1;\n            }else{\n                prev = 0;\n            }\n        }\n\n        this.setState({selectedIndex: prev});\n    }\n\n    openCurrentIndex(){\n        if(\"undefined\" !== typeof this.state.selectedIndex) {\n            this.setOpenItem(this.state.selectedIndex);\n        }\n    }\n\n    correctPosition(){\n        if(!(this.overlayRef && this.overlayRef.current)) {\n            return;\n        }\n\n        const rect = Rectangle.fromDOMRect(this.overlayRef.current.getBoundingClientRect());\n        const view = {width: window.innerWidth, height: window.innerHeight};\n        const refRect = this.props.refRect;\n        let newRectangle = rect.clone();\n\n        if(rect.right > view.width) {\n            newRectangle = newRectangle.withRight(refRect.right);\n        }\n\n        if(rect.bottom > view.height) {\n            newRectangle = newRectangle.withBottom(view.height);\n        }\n\n        if(!newRectangle.equals(rect)) {\n            this.overlayRef.current.style.left = newRectangle.left + 'px';\n            this.overlayRef.current.style.top  = newRectangle.top  + 'px';\n        }\n    }\n\n    setNoOpenItem(){\n        this.setState({selectedIndex: undefined});\n    }\n\n    setOpenItem(index: number){\n        this.setState({selectedIndex: index, openIndex: index});\n    }\n\n    setSelectedItem(index: number){\n        this.setState({selectedIndex: index});\n    }\n\n    render(){\n        const st = {\n            top: this.props.top + 'px',\n            left: this.props.left + 'px',\n            width: `auto`,\n            height: `auto`,\n        };\n\n        if(\"number\" === typeof this.props.height) {\n            st.height = this.props.height + 'px';\n        }\n\n        if(\"number\" === typeof this.props.width) {\n            st.width = this.props.width + 'px';\n        }\n\n        setTimeout(() => {\n            this.correctPosition();\n        });\n\n        this.childCount = React.Children.count(this.props.children);\n\n        this.separators = []; // Reset to collect on .map bellow\n\n        return <div ref={this.overlayRef} className={`ui-overlay ui-menu-overlay`} style={st}>\n            {React.Children.map(this.props.children, (menuItem: React.ReactElement<MenuItemProps>, index) => {\n                if(menuItem.type === Separator) {\n                    this.separators.push(index);\n                }\n                return React.cloneElement(menuItem, {\n                    onOpen: () => this.setOpenItem(index),\n                    onClose: () => this.setNoOpenItem(),\n                    onDismissSignal: () => this.sendDismissSignal(),\n                    onDismissSingleSignal: () => this.closeOpenedIndex(),\n                    onSelectSignal: () => this.setSelectedItem(index),\n                    isSelected: index === this.state.selectedIndex,\n                    isOpen: index === this.state.openIndex,\n                    isActivated: index === this.state.activatedIndex,\n                    parent: this,\n                });\n            })}\n        </div>;\n    }\n\n    sendDismissSignal(){\n        if(this.props.onDismissSignal) {\n            this.props.onDismissSignal();\n        }\n    }\n\n    sendDismissSingleSignal(){\n        if(this.props.onDismissSingleSignal) {\n            this.props.onDismissSingleSignal();\n        }\n    }\n}","import './hui/css/styles.css';\nimport './hui/css/index.scss';\nimport './components/icons.css';\nimport './index.scss';\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport {App} from \"./components/App\";\n\nReactDOM.render(\n    <App />,\n    document.getElementById(`root`)\n);","\nexport function readInt16LE(arr: Uint8ClampedArray, offset: number): number{\n    return (arr[offset + 1] << 8) | arr[offset];\n}\n\nexport function readInt32LE(arr: Uint8ClampedArray, offset: number): number{\n    const d = arr[offset + 3];\n    const c = arr[offset + 2];\n    const b = arr[offset + 1];\n    const a = arr[offset];\n    return (d << 24) | (c << 16) | (b << 8) | a;\n}\n\nexport function writeInt32LE(arr: Uint8ClampedArray, offset: number, n: number){\n    arr[offset] = n & 0xff;\n    arr[offset + 1] = (n & 0xff00) >>> 8;\n    arr[offset + 2] = (n & 0xff0000) >>> 16;\n    arr[offset + 3] = (n & 0xff000000) >>> 24;\n}\n\nexport class BlobComposer{\n\n    private data: Uint8ClampedArray = new Uint8ClampedArray(0);\n\n    getBlob(props?: BlobPropertyBag): Blob{\n        return new Blob([this.data.buffer], props);\n    }\n\n    async writeBlob(blob: Blob){\n        this.writeBuffer(await blob.arrayBuffer());\n    }\n\n    writeBuffer(buff: ArrayBuffer){\n        this.writeUint8Clamped(new Uint8ClampedArray(buff));\n    }\n\n    writeUint8Clamped(arr: Uint8ClampedArray){\n        const data = new Uint8ClampedArray(this.data.length + arr.length);\n        data.set(this.data, 0);\n        data.set(arr, this.data.length);\n        this.data = data;\n    }\n\n    writeInt32LE(n: number){\n        this.writeUint8Clamped(new Uint8ClampedArray([\n            (n & 0xff),\n            (n & 0xff00) >>> 8,\n            (n & 0xff0000) >>> 16,\n            (n & 0xff000000) >>> 24,\n        ]));\n    }\n\n    writeInt16LE(n: number){\n        this.writeUint8Clamped(new Uint8ClampedArray([\n            (n & 0xff),\n            (n & 0xff00) >>> 8,\n        ]));\n    }\n\n}","\nconst MIME_PNG = \"image/png\";\n\nexport class ClipboardEmptyError extends Error{}\n\nexport class ClipboardService {\n\n    private static buffer: Blob | null;\n\n    static async copyBlob(blob: Blob, mime: string): Promise<void> {\n\n        try{\n            await this.systemCopyBlob(blob, mime);\n        }catch(e){\n            this.buffer = blob;\n        }\n\n    }\n\n    static async pasteBlob(): Promise<Blob> {\n        try{\n            return await this.systemPasteBlob();\n        }catch(e){\n            if (this.buffer){\n                return this.buffer;\n            }else{\n                return Promise.reject(new ClipboardEmptyError());\n            }\n        }\n    }\n\n    static async systemCopyBlob(blob: Blob, mime: string): Promise<void> {\n\n        const ctorName = 'ClipboardItem';\n\n        if (ctorName in window){\n            const ctor: any = (window as any)[ctorName]; // Workaround: currently not in TS library.\n            const item = new ctor({[mime]: blob});\n            const data = [item];\n\n            try{\n                await (navigator.clipboard as any).write(data);\n            }catch(e){\n                return Promise.reject(`Error writing data to clipboard`);\n            }\n\n        }else{\n            return Promise.reject(`No compatibility for clipboard copying`);\n        }\n\n    }\n\n    static async systemPasteBlob(): Promise<Blob> {\n        const data: any | undefined = await (navigator.clipboard as any).read();\n        let warnings: string[] = [];\n\n        if (data && data.length > 0){\n\n            for(let i = 0; i < data.length; i++){\n\n                const item = data[i];\n                const types: string[] = data[i].types;\n\n                if (types.indexOf(MIME_PNG) >= 0){\n                    const blob: Blob = await item.getType(MIME_PNG);\n\n                    if (blob){\n                        return blob;\n                    }else{\n                        warnings.push(`Can't read ${item.type} from clipboard`);\n                    }\n\n                    break;\n                }else{\n                    warnings.push(`Unsupported MIME: ${item.type}`);\n                }\n            }\n        }else{\n            return Promise.reject(new ClipboardEmptyError());\n        }\n\n        return Promise.reject(warnings);\n    }\n\n\n}","import {Icon, IconColorModel} from \"./Icon\";\nimport {Palette} from \"./PaletteService\";\n\nconst ICONS_STORAGE_KEY = 'icons-v1';\n\ninterface SerializedIcon{\n    width: number;\n    height: number;\n    data: string;\n    model: IconColorModel;\n}\n\nfunction binToString(bin: Uint8ClampedArray): string{\n    let r = '';\n\n    for(let i = 0; i < bin.length; i++){\n        const ch = bin[i].toString(16);\n        r += ch.length == 1 ? '0' + ch : ch;\n    }\n\n    return r;\n}\n\nfunction stringToBin(str: string): Uint8ClampedArray{\n    const r = new Uint8ClampedArray(str.length / 2);\n\n    for(let i = 0; i < r.length; i++){\n        const nmb = str.charAt(i * 2) + str.charAt(i * 2 + 1);\n        r[i] = parseInt(nmb, 16);\n    }\n\n    return r;\n}\n\nfunction serializeIcons(icons: Icon[]): SerializedIcon[]{\n    return icons.map(icon => {\n        return {\n            ...icon,\n            data: binToString(icon.data)\n        }\n    });\n}\n\nfunction deserializeIcons(icons: SerializedIcon[]): Icon[]{\n    return icons.map(icon => { return {\n            ...icon,\n            data: stringToBin(icon.data)\n    }});\n}\n\nexport class DocumentService{\n\n    static async saveIcons(icons: Icon[]){\n\n        try{\n            window.localStorage.setItem(ICONS_STORAGE_KEY, JSON.stringify(serializeIcons(icons)));\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n\n    static async restoreIcons(): Promise<Icon[]>{\n        try{\n            const value = String(window.localStorage.getItem(ICONS_STORAGE_KEY));\n\n            if (value){\n                const obj = JSON.parse(value);\n\n                if(!obj){\n                    return [];\n\n                }else if(!(obj instanceof Array)){\n                    return Promise.reject(new Error());\n                }else{\n                    return deserializeIcons(obj as SerializedIcon[]);\n                }\n\n            }else{\n                return [];\n            }\n\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n\n}","\ninterface EditorTransaction<T>{\n    documentState: T;\n}\n\nexport class NoTransactionError extends Error{}\nexport class TransactionInProgressError extends Error{}\nexport class UnsavedChangesError extends Error{}\n\nexport class Editor<T>{\n\n    private _currentTransaction: EditorTransaction<T> | null = null;\n    private _document: T;\n    private _hasChanges: boolean = false;\n\n    private readonly undoStack: EditorTransaction<T>[] = [];\n    private readonly redoStack: EditorTransaction<T>[] = [];\n\n    public documentChanged: (() => void) | null = null;\n    public documentSubmitted: (() => void) | null = null;\n\n    constructor(document: T) {\n        this._document = document;\n    }\n\n    redo(): boolean{\n\n        if (this.redoStack.length == 0){\n            return false;\n        }\n\n        const top = this.redoStack.pop();\n\n        if (top){\n            this.undoStack.push({documentState: this.document!});\n            this._document = top.documentState;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n        }\n\n        return true;\n\n    }\n\n    undo(): boolean{\n\n        if (this.undoStack.length == 0){\n            return false;\n        }\n\n        const top = this.undoStack.pop();\n\n        if (top){\n            this.redoStack.push({documentState: this.document!});\n            this._document = top.documentState;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n        }\n\n        return true;\n    }\n\n    begin(){\n\n        if (this._currentTransaction){\n            throw new TransactionInProgressError();\n        }else{\n            this._currentTransaction = {documentState: this._document};\n        }\n    }\n\n    setDocument(document: T){\n        if (this._currentTransaction){\n            this._document = document;\n\n            if (this.documentChanged){\n                this.documentChanged();\n            }\n\n        }else{\n            throw new NoTransactionError();\n        }\n\n    }\n\n    commit(document?: T){\n\n        if (!this._currentTransaction){\n            throw new NoTransactionError();\n        }\n\n        if (document){\n            this.setDocument(document);\n        }\n\n        // Push to undo stack\n        this.undoStack.push(this._currentTransaction);\n\n        // Clear transaction\n        this._currentTransaction = null;\n\n        // Empty redo stack\n        while(this.redoStack.length > 0) {this.redoStack.pop()}\n\n        // We have changes\n        this._hasChanges = true;\n\n        if (this.documentSubmitted){\n            this.documentSubmitted();\n        }\n    }\n\n    rollback(){\n\n        if (this._currentTransaction){\n            this._document = this._currentTransaction.documentState;\n            this._currentTransaction = null;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n\n        }else{\n            throw new NoTransactionError();\n        }\n\n    }\n\n    clearChanges(){\n        this._hasChanges = false;\n    }\n\n    transact(document: T){\n        this.begin();\n        this.commit(document);\n    }\n\n    get currentTransaction(): EditorTransaction<T> | null{\n        return this._currentTransaction;\n    }\n\n    get document(): T{\n        return this._document;\n    }\n\n    get hasChanges(): boolean{\n        return this._hasChanges;\n    }\n\n    get redoCount(): number{\n        return this.redoStack.length;\n    }\n\n    get redoPeek(): T | null{\n        if (this.redoStack.length > 0){\n            return this.redoStack[this.redoStack.length - 1].documentState;\n        }\n        return null;\n    }\n\n    get undoCount(): number{\n        return this.undoStack.length;\n    }\n\n    get undoPeek(): T | null{\n        if (this.undoStack.length > 0){\n            return this.undoStack[this.undoStack.length - 1].documentState;\n        }\n        return null;\n    }\n\n}","import {makeSz, Size} from \"../hui/helpers/Rectangle\";\n\nexport type IconColorModel = 'rgb' | 'rgba' | 'palette';\n\nexport interface Icon{\n    width: number;\n    height: number;\n    model: IconColorModel;\n    data: Uint8ClampedArray;\n}\n\nexport function iconSz(icon: Icon): Size{\n    return makeSz(icon.width, icon.height);\n}","import {\n    CanvasViewController,\n    KeyEvent,\n    KeyEventResult,\n    PointingEvent,\n    PointingEventResult\n} from \"../components/CanvasView\";\nimport {IconDocument, IconEditor, IconEditorTool} from \"./IconEditor\";\nimport {PencilTool} from \"./tools/PencilTool\";\nimport {IconService} from \"./IconService\";\nimport {IconDocumentRenderer} from \"./IconDocumentRenderer\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {SelectionTool} from \"./tools/SelectionTool\";\nimport {Icon} from \"./Icon\";\nimport {ClipboardEmptyError, ClipboardService} from \"./ClipboardService\";\nimport {NoSelectionError} from \"./errors\";\nimport {Color} from \"../hui/helpers/Color\";\n\nconst MIME_PNG = \"image/png\";\n\nexport interface PasteResult{\n    tool?: IconEditorTool;\n    success: boolean;\n    warnings: string[];\n}\n\nexport type DownloadFormat = 'png' | 'ico';\n\nfunction id(): number{\n    return Math.round(Math.random() * Number.MAX_SAFE_INTEGER - 10000) + 10000;\n}\n\nexport class IconCanvasController implements CanvasViewController{\n\n    showBackground = false;\n    showGrid = false;\n\n    readonly id = id();\n    readonly editor: IconEditor;\n    private _tool: IconEditorTool | null = new PencilTool(this);\n    private previewBounds: Rectangle = Rectangle.empty;\n    private previewPixelSize: number = 0;\n\n    private _colorPicker?: (color: Color) => void;\n\n    constructor(document?: IconDocument) {\n\n        if (document){\n            this.editor = new IconEditor(document);\n        }else{\n            this.editor = new IconEditor({\n                icon: IconService.newIcon(16, 16)\n            });\n        }\n\n    }\n\n    colorPicker(picker: (color: Color) => void){\n        this._colorPicker = picker;\n    }\n\n    async copy(): Promise<void>{\n\n        if (!this.editor.document.selectionSprite){\n            return Promise.resolve();\n        }\n\n        const blob = await IconService.asBlobWithMime(this.editor.document.selectionSprite, MIME_PNG);\n\n        return ClipboardService.copyBlob(blob, MIME_PNG);\n\n    }\n\n    async cut(): Promise<void>{\n\n        if (!this.editor.document.selectionBuffer){\n            throw new NoSelectionError();\n        }\n\n        try{\n            await this.copy();\n\n            this.editor.transact({\n                ...this.editor.cloneDocument(),\n                icon: this.editor.document.selectionBuffer,\n                selectionRegion: undefined,\n                selectionSprite: undefined,\n                selectionBuffer: undefined,\n            });\n\n        }catch(e){\n            return Promise.reject(e);\n        }\n\n    }\n\n    async paste(): Promise<PasteResult>{\n\n        let success = false;\n        let tool: IconEditorTool | undefined;\n        let warnings: string[] = [];\n\n        try{\n            const blob = await ClipboardService.pasteBlob();\n            tool = await this.importFile(blob);\n            success = true;\n\n        }catch(e){\n            if (e instanceof ClipboardEmptyError){\n              return Promise.reject(e);\n\n            }else if(e instanceof Array){\n                warnings = [...e];\n            }\n        }\n\n\n        return {success, tool, warnings};\n    }\n\n    async downloadAs(format: DownloadFormat, icons: Icon[] | null = null): Promise<void>{\n\n        let blob: Blob;\n        let name: string;\n\n        if (format == 'png'){\n            blob = await IconService.asBlobWithMime(this.editor.document.icon, MIME_PNG);\n            name = `favicon.png`;\n        }else{\n            blob = await IconService.asIcoBlob(icons || [this.editor.document.icon]);\n            name = 'favicon.ico'\n        }\n\n        const a = document.createElement('a');\n\n        a.href = URL.createObjectURL(blob);\n        a.download = name;\n        a.click();\n\n    }\n\n    async importFile(file: Blob): Promise<SelectionTool>{\n        const icon = this.editor.document.icon;\n        const size = makeSz(icon.width, icon.height);\n        const sprite = await IconService.fromFile(file, size);\n\n        this.pasteSprite(sprite);\n\n        if (this.tool instanceof SelectionTool){\n            return this.tool;\n        }\n\n        const tool = new SelectionTool(this);\n        this.tool = tool;\n        return tool;\n    }\n\n    pasteSprite(sprite: Icon){\n\n        const newDoc = this.editor.cloneDocument();\n        const containerRec = new Rectangle(0 ,0, newDoc.icon.width, newDoc.icon.height);\n        const spriteRect = new Rectangle(0, 0, sprite.width, sprite.height)\n            .centerAt(containerRec.center).round();\n\n        newDoc.selectionRegion = spriteRect;\n        newDoc.selectionSprite = sprite;\n        newDoc.selectionBuffer = newDoc.icon;\n        newDoc.icon = IconService.blend(newDoc.selectionBuffer, newDoc.selectionSprite, newDoc.selectionRegion);\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n    }\n\n    pixelToData(pixel: Point): number{\n        const icon = this.editor.document.icon;\n        return icon.width * 4 * pixel.y + pixel.x * 4;\n    }\n\n    pointToPixel(p: Point): Point | null{\n        if (!this.previewBounds.contains(p)){\n            return null;\n        }\n\n        const left = p.x - this.previewBounds.left;\n        const top = p.y - this.previewBounds.top;\n\n        return makePt(\n            Math.floor(left / this.previewPixelSize),\n            Math.floor(top / this.previewPixelSize)\n        );\n    }\n\n    pointToData(p: Point): number{\n\n        // Deflation prevents round-errors\n        if (!this.previewBounds.deflate(1, 1).contains(p)){\n            return - 1;\n        }\n\n        const pixel = this.pointToPixel(p);\n\n        if (pixel){\n            return this.pixelToData(pixel);\n        }\n\n        return -1;\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n\n        if (this._colorPicker){\n            const i = this.pointToData(e.point);\n            const data = this.editor.document.icon.data;\n            const color = Color.fromTupleInt8([data[i], data[i+1], data[i+2], data[i+3] ]);\n            this._colorPicker(color);\n            this._colorPicker = undefined;\n        }\n\n        if (this.tool?.pointingGestureStart){\n            return this.tool.pointingGestureStart(e);\n        }\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n        if (this.tool?.pointingGestureMove){\n            return this.tool.pointingGestureMove(e);\n        }\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n        if (this.tool?.pointingGestureEnd){\n            return this.tool.pointingGestureEnd(e);\n        }\n    }\n\n    keyDown(e: KeyEvent): KeyEventResult | void{\n        if (this.tool?.keyDown){\n            return this.tool.keyDown(e);\n        }\n    }\n\n    keyUp(e: KeyEvent): KeyEventResult | void{\n        if (this.tool?.keyUp){\n            return this.tool.keyUp(e);\n        }\n    }\n\n    render(context: CanvasRenderingContext2D, size: Size){\n\n        const cvBounds = new Rectangle(0, 0, size.width, size.height);\n        const previewArea = cvBounds.deflate(10, 10);\n\n        if (this.editor.document){\n\n            const icon = this.editor.document.icon;\n            const pixelLength = this.previewPixelSize = Math.min(previewArea.size.width, previewArea.size.height) / Math.min(icon.width, icon.height);\n\n            this.previewBounds = new Rectangle(\n                0, 0,\n                icon.width * pixelLength,\n                icon.height *  pixelLength)\n                .centerAt(makePt(cvBounds.center.x, (icon.height * pixelLength)/2));\n\n            const renderer = new IconDocumentRenderer(\n                this.editor.document,\n                context,\n                this.previewBounds,\n                this.showBackground,\n                this.showGrid,\n                );\n\n            renderer.render();\n        }\n    }\n\n    get iconSize(): Size{\n        return makeSz(this.editor.document.icon.width, this.editor.document.icon.height);\n    }\n\n    get tool(): IconEditorTool | null{\n        return this._tool;\n    }\n\n    set tool(value: IconEditorTool | null){\n\n        if(value === this._tool){\n            return;\n        }\n\n        if (this._tool?.deactivate){\n            this._tool.deactivate();\n        }\n\n        this._tool = value;\n\n        if (this._tool?.activate){\n            this._tool.activate();\n        }\n    }\n}","import {IconDocument} from \"./IconEditor\";\nimport {makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {MemoryError} from \"./errors\";\nimport {darkModeOn} from \"../hui/helpers/Utils\";\n\nconst dark = darkModeOn();\nconst GRID_OUT = Color.fromHex(dark ? 'fff' : '000').withAlpha(0.05);\nconst GRID_STRONG = Color.fromHex(dark ? `#4C4A4A` : `#e0e0e0`);\nconst GRID_LIGHT = Color.fromHex(dark ? `fff` : `000`).withAlpha(0.05);\nconst CHECKER_EVEN = Color.transparent;\nconst CHECKER_ODD = Color.fromHex(dark ? 'fff' : '000').withAlpha(0.05);\nconst CHECKER_SIZE = 10;\nconst CORNER_RADIUS = 10;\nconst PLATE_BG = Color.fromHex(dark ? 'fff' : '000').withAlpha(0.05);\n\nconst CLOCK_MOD = 4;\nconst SAFE_CLEAR = 10;\n\ninterface Corners {\n    tl: number;\n    tr: number;\n    br: number;\n    bl: number;\n}\n\nexport class IconDocumentRenderer {\n\n    private static clock = 0;\n    private static clockReminder = 0;\n    private static checkerCanvas: HTMLCanvasElement | null = null;\n    private static pixelsBuffer: HTMLCanvasElement | null = null;\n    private static pixelsContext: CanvasRenderingContext2D | null = null;\n\n    static getPixelsBuffer(canvasSize: Size): {canvas: HTMLCanvasElement; cx: CanvasRenderingContext2D}{\n        if(\n            !this.pixelsBuffer ||\n            this.pixelsBuffer.width !== canvasSize.width ||\n            this.pixelsBuffer.height !== canvasSize.height\n        ) {\n            this.pixelsBuffer = document.createElement('canvas');\n            this.pixelsBuffer.width = canvasSize.width;\n            this.pixelsBuffer.height = canvasSize.height;\n            this.pixelsContext = this.pixelsBuffer.getContext('2d');\n        }\n\n        if(!this.pixelsContext) {\n            throw new MemoryError();\n        }\n\n        return {\n            canvas: this.pixelsBuffer,\n            cx: this.pixelsContext,\n        }\n    }\n\n    static getPattern(context: CanvasRenderingContext2D): CanvasPattern | null{\n\n        if(!IconDocumentRenderer.checkerCanvas){\n            const canvas: HTMLCanvasElement = IconDocumentRenderer.checkerCanvas = document.createElement('canvas');\n            canvas.width = canvas.height = CHECKER_SIZE;\n\n            const localCx = canvas.getContext('2d');\n            const size = CHECKER_SIZE / 2;\n\n            if(!localCx){\n                return null;\n            }\n\n            if (!CHECKER_EVEN.isTransparent){\n                localCx.fillStyle = CHECKER_EVEN.cssRgba;\n                localCx.fillRect(0,0, size, size);\n                localCx.fillRect(size, size, size, size);\n            }\n\n            if (!CHECKER_ODD.isTransparent){\n                localCx.fillStyle = CHECKER_ODD.cssRgba;\n                localCx.fillRect(size, 0, size, size);\n                localCx.fillRect(0, size, size, size);\n            }\n        }\n\n        const canvas = IconDocumentRenderer.checkerCanvas;\n\n        return context.createPattern(canvas, 'repeat');\n\n    }\n\n    readonly bounds: Rectangle;\n\n    constructor(\n        readonly document: IconDocument,\n        readonly context: CanvasRenderingContext2D,\n        readonly plateBounds: Rectangle,\n        readonly drawBackground: boolean,\n        readonly drawGrid: boolean,\n    ) {\n        this.bounds = this.plateBounds.deflate(CORNER_RADIUS, CORNER_RADIUS);\n    }\n\n    private pathRoundRect(bounds: Rectangle, radius: number | Corners = 10) {\n\n        const ctx = this.context;\n        const {x, y} = bounds.location;\n        const {width, height} = bounds.size;\n\n        if (typeof radius === 'number') {\n            radius = {tl: radius, tr: radius, br: radius, bl: radius};\n        }\n\n        ctx.beginPath();\n        ctx.moveTo(x + radius.tl, y);\n        ctx.lineTo(x + width - radius.tr, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);\n        ctx.lineTo(x + width, y + height - radius.br);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);\n        ctx.lineTo(x + radius.bl, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);\n        ctx.lineTo(x, y + radius.tl);\n        ctx.quadraticCurveTo(x, y, x + radius.tl, y);\n        ctx.closePath();\n\n    }\n\n    private pathLines(lines: [Point, Point][]){\n        const c = this.context;\n\n        c.beginPath();\n\n        for(const line of lines){\n            c.moveTo(line[0].x, line[0].y);\n            c.lineTo(line[1].x, line[1].y);\n        }\n    }\n\n    private rectStroke(r: Rectangle, color: Color){\n        this.context.strokeStyle = color.cssRgba;\n        this.context.strokeRect(...r.tuple);\n    }\n\n    private rectFill(r: Rectangle, color: Color){\n        this.context.fillStyle = color.cssRgba;\n        this.context.fillRect(...r.tuple);\n    }\n\n    private renderPixels_Deprecated(pixelSize: Size){\n\n        const data = this.document.icon.data;\n        let x = this.bounds.left;\n        let y = this.bounds.top;\n        let drawn = 0;\n\n\n        for(let i = 0; i < data.length; i += 4){\n            const color = new Color(data[i], data[i + 1], data[i + 2], data[i + 3] / 255);\n            const r = new Rectangle(x, y, pixelSize.width, pixelSize.height);\n            this.rectFill(r, color);\n\n            drawn++;\n            x += pixelSize.width;\n\n            if ((drawn % this.document.icon.width) === 0){\n                y += pixelSize.height;\n                x = this.bounds.left;\n            }\n\n        }\n\n    }\n\n    private renderPixels(pixelSize: Size){\n        const {canvas, cx} = IconDocumentRenderer.getPixelsBuffer(makeSz(this.document.icon.width, this.document.icon.height));\n\n        cx.putImageData(new ImageData(this.document.icon.data, this.document.icon.width), 0, 0);\n\n        this.context.imageSmoothingEnabled = false;\n        this.context.drawImage(canvas, ...this.bounds.tuple);\n        this.context.imageSmoothingEnabled = true;\n    }\n\n    private renderGrid(pixelSize: Size){\n\n        const ctx = this.context;\n        const icon = this.document.icon;\n        const bounds = this.bounds;\n\n        ctx.beginPath();\n\n        let x = this.bounds.left;\n        let y = this.bounds.top;\n\n        for(let i = 0; i < icon.width; i++){\n            ctx.moveTo(x, bounds.top);\n            ctx.lineTo(x, bounds.bottom);\n            x += pixelSize.width;\n        }\n\n        for(let i = 0; i < icon.height; i++){\n            ctx.moveTo(bounds.left, y);\n            ctx.lineTo(bounds.right, y);\n            y += pixelSize.height;\n        }\n\n        ctx.strokeStyle = GRID_LIGHT.cssRgba;\n        ctx.stroke();\n\n    }\n\n    private renderFrame(){\n        const r = CORNER_RADIUS;\n        const p = this.plateBounds;\n        this.pathLines([\n            p.offset(0, r).northSegment,\n            p.offset(-r, 0).eastSegment,\n            p.offset(0, -r).southSegment,\n            p.offset(r, 0).westSegment\n        ]);\n        this.context.strokeStyle = GRID_OUT.cssRgba;\n        this.context.stroke();\n    }\n\n    private renderChecker(){\n        const pattern = IconDocumentRenderer.getPattern(this.context);\n\n        if(!pattern){\n            return;\n        }\n\n        this.context.fillStyle = pattern;\n        this.context.fillRect(...this.bounds.tuple);\n\n    }\n\n    private renderSelection(pixelSize: Size){\n\n        if (!this.document.selectionRegion){\n            return;\n        }\n\n        const selection = this.document.selectionRegion;\n\n        const selBounds = new Rectangle(\n            this.bounds.left + selection.left * pixelSize.width,\n            this.bounds.top + selection.top * pixelSize.height,\n            selection.width * pixelSize.width,\n            selection.height * pixelSize.height\n        ).round();\n\n        IconDocumentRenderer.clock++;\n\n        if(IconDocumentRenderer.clock % CLOCK_MOD === 0){\n            IconDocumentRenderer.clockReminder++;\n\n            if (IconDocumentRenderer.clockReminder === 9){\n                IconDocumentRenderer.clockReminder = 0;\n            }\n        }\n\n        // this.context.strokeStyle = '#000';\n        // this.context.strokeRect(...selBounds.tuple);\n\n        const fives = new Array(Math.round(selBounds.width / 5)).fill(5);\n\n        const segmentedRect = (r: Rectangle) => {\n            // Drawing the rect like this prevents weird behavior\n            // of the segmented pattern\n            this.context.beginPath();\n            this.context.moveTo(r.left, r.top);\n            this.context.lineTo(r.right, r.top);\n            this.context.moveTo(r.right, r.bottom);\n            this.context.lineTo(r.left, r.bottom);\n            this.context.stroke();\n\n            this.context.beginPath();\n            this.context.moveTo(r.right, r.top);\n            this.context.lineTo(r.right, r.bottom);\n            this.context.moveTo(r.left, r.bottom);\n            this.context.lineTo(r.left, r.top);\n            this.context.stroke();\n        }\n\n        // =00000====\n        // ==00000===\n        // ===00000==\n        // ====00000=\n        // =====00000\n\n        const lineWidthBuffer = this.context.lineWidth;\n        this.context.lineWidth = 1.5;\n\n        switch(IconDocumentRenderer.clockReminder){\n            case 0: this.context.setLineDash([1, ...fives]); break;\n            case 1: this.context.setLineDash([2, ...fives]); break;\n            case 2: this.context.setLineDash([3, ...fives]); break;\n            case 3: this.context.setLineDash([4, ...fives]); break;\n            case 4: this.context.setLineDash([5, 5]); break;\n            case 5: this.context.setLineDash([0, 1,...fives]); break;\n            case 6: this.context.setLineDash([0,2,...fives]); break;\n            case 7: this.context.setLineDash([0,3,...fives]); break;\n            case 8: this.context.setLineDash([0,4,...fives]); break;\n        }\n        this.context.strokeStyle = '#fff';\n\n        segmentedRect(selBounds);\n\n        switch(IconDocumentRenderer.clockReminder){\n            case 0: this.context.setLineDash([0, 1, ...fives]); break;\n            case 1: this.context.setLineDash([0, 2, ...fives]); break;\n            case 2: this.context.setLineDash([0, 3, ...fives]); break;\n            case 3: this.context.setLineDash([0, 4, ...fives]); break;\n            case 4: this.context.setLineDash([0, 5, ...fives]); break;\n            case 5: this.context.setLineDash([1,...fives]); break;\n            case 6: this.context.setLineDash([2,...fives]); break;\n            case 7: this.context.setLineDash([3,...fives]); break;\n            case 8: this.context.setLineDash([4,...fives]); break;\n        }\n        this.context.strokeStyle = '#000';\n        segmentedRect(selBounds);\n\n        this.context.setLineDash([]);\n        this.context.lineWidth = lineWidthBuffer;\n\n    }\n\n    private drawPlate(){\n        this.pathRoundRect(this.plateBounds, CORNER_RADIUS);\n        this.context.fillStyle = PLATE_BG.cssRgba;\n        this.context.fill();\n    }\n\n    render(){\n        const pixelSize = makeSz(\n            this.bounds.width / this.document.icon.width,\n            this.bounds.height / this.document.icon.height);\n\n        this.context.clearRect(...this.plateBounds.inflate(SAFE_CLEAR, SAFE_CLEAR).tuple);\n\n        this.drawPlate();\n\n        if (this.drawBackground){\n            this.renderChecker();\n        }\n\n        this.renderPixels(pixelSize);\n\n        if (this.drawGrid){\n            this.renderGrid(pixelSize);\n        }\n\n        this.renderFrame();\n\n        if (this.document.selectionRegion){\n            this.renderSelection(pixelSize);\n        }\n\n    }\n\n}","import {Icon} from \"./Icon\";\nimport {Editor} from \"./Editor\";\nimport {CanvasSensor} from \"../components/CanvasView\";\nimport {Rectangle} from \"../hui/helpers/Rectangle\";\nimport {IconService} from \"./IconService\";\nimport {Color} from \"../hui/helpers/Color\";\n\n\n\ndeclare interface ClipboardItem{\n    ClipboardItem: (data: any) => ClipboardItem;\n}\n\nexport interface IconDocument{\n    icon: Icon;\n    selectionRegion?: Rectangle;\n    selectionBuffer?: Icon;\n    selectionSprite?: Icon;\n}\n\nexport interface IconEditorTool extends CanvasSensor{\n    activate?: () => void;\n    deactivate?: () => void;\n    useColor?: (color: Color) => void;\n}\n\nexport class IconEditor extends Editor<IconDocument>{\n\n    cloneDocument(doc?: IconDocument): IconDocument{\n\n        if (typeof doc === \"undefined\"){\n            doc = this.document;\n        }\n\n        const newDocument = {\n            ...doc,\n            icon: IconService.clone(doc.icon),\n        };\n\n        return newDocument;\n    }\n\n}","import {Icon} from \"./Icon\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {BasicCardinalPoint, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {MemoryError} from \"./errors\";\nimport {GraphicsMemoryError} from \"../hui/helpers/errors\";\n\nexport type StartCorner = 'ne' | 'nw' | 'se' | 'sw';\n\nconst UNVISITED = new Color(0, 0, 0, 0.9);\nconst VISITED = new Color(0, 255, 0, 0.7);\n\nexport class IconReviewer{\n\n    readonly current: Icon;\n\n    private hotspot: Rectangle;\n\n    constructor(\n        readonly original: Icon,\n        readonly sample: Size,\n        readonly startCorner: StartCorner) {\n\n        this.current = {...original, data: new Uint8ClampedArray(original.data)};\n\n        const w = sample.width;\n        const h = sample.height;\n        const wh: [number, number]= [sample.width, sample.height];\n\n        if (startCorner == \"nw\"){\n            this.hotspot = new Rectangle(0, 0, ...wh);\n\n        }else if(startCorner === 'ne'){\n            this.hotspot = new Rectangle(original.width  - w, 0, ...wh);\n\n        }else if(startCorner === 'se'){\n            this.hotspot = new Rectangle(original.width  - w, original.height - h, ...wh);\n\n        }else if(startCorner === 'sw'){\n            this.hotspot = new Rectangle(0, original.height - h, ...wh);\n\n        }\n\n        this.tintRegion(new Rectangle(0,0,original.width, original.height), UNVISITED);\n        this.tintRegion(this.hotspot, Color.transparent);\n    }\n\n    tintRegion(region: Rectangle, color: Color){\n\n        const index = (x: number, y: number) => y * this.original.width * 4 + x * 4;\n\n        for(let y = region.top; y < region.bottom; y++){\n\n            if(y < 0 || y >= this.original.height){\n                continue;\n            }\n\n            for(let x = region.left; x < region.right; x++){\n\n                if(x < 0 || x >= this.original.width){\n                    continue;\n                }\n\n                const sIndex = index(x, y);\n                const dR = this.original.data[sIndex];\n                const dG = this.original.data[sIndex + 1];\n                const dB = this.original.data[sIndex + 2];\n                const dA = this.original.data[sIndex + 3] / 255;\n\n                const [sR, sG, sB] = color.tupleInt8;\n                const sA = color.a;\n\n                const rR = sR * sA + dR * (1 - sA);\n                const rG = sG * sA + dG * (1 - sA);\n                const rB = sB * sA + dB * (1 - sA);\n                const rA = dA + sA * (1 - dA);\n\n                this.current.data[sIndex] = rR;\n                this.current.data[sIndex + 1] = rG;\n                this.current.data[sIndex + 2] = rB;\n                this.current.data[sIndex + 3] = rA * 255;\n            }\n        }\n\n    }\n\n    move(cardinalPoint: BasicCardinalPoint){\n        this.tintRegion(this.hotspot, VISITED);\n\n        if (cardinalPoint === 'n'){\n            this.hotspot = this.hotspot.offset(0, -this.sample.height);\n\n        }else if(cardinalPoint === 's'){\n            this.hotspot = this.hotspot.offset(0, this.sample.height);\n\n        }else if(cardinalPoint === 'e'){\n            this.hotspot = this.hotspot.offset(this.sample.width, 0);\n\n        }else if(cardinalPoint === 'w'){\n            this.hotspot = this.hotspot.offset(-this.sample.width, 0);\n\n        }\n\n        // TODO: Bound checking\n\n        this.tintRegion(this.hotspot, Color.transparent);\n\n    }\n\n    reviewImage(): HTMLCanvasElement{\n\n        const index = (x: number, y: number, w: number) => y * w * 4 + x * 4;\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const superSample = this.hotspot.inflate(this.sample.width, this.sample.height);\n        const current = this.current;\n\n        canvas.width = superSample.width;\n        canvas.height = superSample.height;\n\n        let [imgX, imgY, imgR, imgB] = superSample.tupleLTRB;\n        let offsetX = 0;\n        let offsetY = 0;\n\n        if (imgX < 0){\n            offsetX = Math.abs(imgX);\n            imgX = 0;\n        }\n\n        if(imgY < 0){\n            offsetY = Math.abs(imgY);\n            imgY = 0;\n        }\n\n        if(imgR > current.width){\n            imgR = current.width;\n        }\n\n        if(imgB > current.height){\n            imgB = current.height;\n        }\n\n        const cx = canvas.getContext('2d');\n\n        if(!cx){\n            throw new GraphicsMemoryError();\n        }\n\n        const arr = new Uint8ClampedArray(superSample.width * superSample.height * 4);\n\n        let curImgX = superSample.left;\n        let curImgY = superSample.top;\n\n        for(let y = 0; y < superSample.height; y++){\n\n            if(curImgY < 0 || curImgY >= this.current.height){\n                curImgY++;\n                continue;\n            }\n\n            for(let x = 0; x < superSample.width; x++) {\n\n                if(curImgX < 0 || curImgX >= this.current.width){\n                    curImgX++;\n                    continue;\n                }\n\n                const arrIndex = index(x, y, superSample.width);\n                const curIndex = index(curImgX, curImgY, current.width);\n\n                for(let i = 0; i <=3; i++){\n                    arr[arrIndex + i] = current.data[curIndex + i];\n                }\n\n                curImgX++;\n            }\n\n            curImgX = superSample.left;\n            curImgY++;\n        }\n\n        cx.putImageData(new ImageData(arr, superSample.width), 0,0);\n\n        return canvas;\n    }\n\n    get currentHotspot(): Rectangle{\n        return this.hotspot;\n    }\n\n}","import {Icon, IconColorModel} from \"./Icon\";\nimport {makePt, makeSz, Point, Rectangle, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {InvalidRegionError, MemoryError} from \"./errors\";\nimport {ImageService} from \"./ImageService\";\nimport {BlobComposer, readInt16LE, readInt32LE, writeInt32LE} from \"./BlobComposer\";\n\nconst sizeICONDIR = 6;\nconst sizeICONDIRENTRY = 16;\n\nexport interface IconDirectory{\n    icons: Icon[];\n}\n\nexport class IconService{\n\n    static clone(icon: Icon): Icon{\n        return {...icon, data: new Uint8ClampedArray(icon.data)};\n    }\n\n    static asCanvas(icon: Icon): HTMLCanvasElement{\n\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        canvas.width = icon.width;\n        canvas.height = icon.height;\n\n        const cx = canvas.getContext('2d');\n\n        if (!cx){\n            throw new MemoryError();\n        }\n\n        cx.putImageData(this.asImageData(icon), 0, 0);\n\n        return canvas;\n\n    }\n\n    static asBlobWithMime(icon: Icon, mime: string = 'image/png'): Promise<Blob>{\n        return new Promise<Blob>((resolve, reject) => {\n\n            const canvas = this.asCanvas(icon);\n\n            canvas.toBlob(blob => {\n                if (blob){\n                    resolve(blob);\n                }else{\n                    reject(new MemoryError());\n                }\n            }, mime);\n\n        });\n    }\n\n    static async asBlobUrl(icon: Icon, mime: string = 'image/png'): Promise<string>{\n        const blob = await this.asBlobWithMime(icon, mime);\n        return URL.createObjectURL(blob);\n    }\n\n    static async asIcoBlob(icons: Icon[]): Promise<Blob>{\n\n        const composer = new BlobComposer();\n        const pngBlobs: Blob[] = [];\n        let pngBlobSum = 0;\n\n        // ICONDIR structure\n        composer.writeUint8Clamped(new Uint8ClampedArray([\n            0, 0, // 2B\tReserved. Must always be 0.\n            1, 0, // 2B Specifies image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid.\n        ]));\n\n        composer.writeInt16LE(icons.length); // 2b Specifies number of images in the file.\n\n        for (const icon of icons){\n            const pngBlob = await this.asBlobWithMime(icon, 'image/png');\n            pngBlobs.push(pngBlob);\n\n            // ICONDIRENTRY\n            composer.writeUint8Clamped(new Uint8ClampedArray([\n                icon.width === 256 ? 0 : icon.width,    // 1B Specifies image width in pixels. Can be any number between 0 and 255. Value 0 means image width is 256 pixels.\n                icon.height === 256 ? 0 : icon.height,  // 1B Specifies image height in pixels. Can be any number between 0 and 255. Value 0 means image height is 256 pixels.\n                0,                                      // 1B Specifies number of colors in the color palette. Should be 0 if the image does not use a color palette.\n                0,                                      // 1B Reserved. Should be 0\n                1, 0,                                   // 2B Specifies color planes. Should be 0 or 1\n                8, 0,                                   // 2B Specifies bits per pixel\n            ]));\n\n            const dataOffset = sizeICONDIR + sizeICONDIRENTRY * icons.length + pngBlobSum;\n\n            composer.writeInt32LE(pngBlob.size);    // 4B Specifies the size of the image's data in bytes\n            composer.writeInt32LE(dataOffset);      // 4B Specifies the offset of BMP or PNG data from the beginning of the ICO/CUR file\n\n            pngBlobSum += pngBlob.size;\n        }\n\n        for(const b of pngBlobs){\n            await composer.writeBlob(b);\n        }\n\n        return composer.getBlob();\n    }\n\n    static async fromIcoBlob(blob: Blob): Promise<IconDirectory>{\n\n        const icons: Icon[] = [];\n\n        const buffer = await blob.arrayBuffer();\n        const array = new Uint8ClampedArray(buffer);\n        const iconCount = readInt16LE(array, 4);\n\n        for(let i = 0; i < iconCount; i++){\n\n            const dirEntryStart = sizeICONDIR + sizeICONDIRENTRY * i;\n            const dirEntry = array.slice(dirEntryStart, dirEntryStart + sizeICONDIRENTRY);\n            const dataSize = readInt32LE(dirEntry, 8);\n            const dataOffset = readInt32LE(dirEntry, 12);\n            const data = array.slice(dataOffset, dataOffset + dataSize);\n            const composer = new BlobComposer();\n\n            // ICONDIR structure\n            composer.writeUint8Clamped(new Uint8ClampedArray([\n                0, 0, // 2B\tReserved. Must always be 0.\n                1, 0, // 2B Specifies image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid.\n                1, 0, // 2B Specifies number of images in the file.\n            ]));\n\n            // Update offset\n            writeInt32LE(dirEntry, 12, 22);\n\n            composer.writeUint8Clamped(dirEntry);\n            composer.writeUint8Clamped(data);\n\n            const blob = composer.getBlob({type: \"image/x-icon\"});\n            const image = await ImageService.fromFile(blob);\n\n            icons.push(IconService.fromImage(image));\n\n        }\n\n        return {icons};\n    }\n\n    static asImageData(icon: Icon): ImageData{\n        return new ImageData(icon.data, icon.width);\n    }\n\n    static fromCanvas(canvas: HTMLCanvasElement, cx: CanvasRenderingContext2D | null = null): Icon{\n\n        if (!cx){\n            cx = canvas.getContext('2d');\n        }\n\n        if (!cx) {\n            throw new MemoryError();\n        }\n\n        const model: IconColorModel = 'rgba';\n        const width = canvas.width;\n        const height = canvas.height;\n        const imageData = cx.getImageData(0,0,width, height);\n        const data = imageData.data;\n\n        return {width, height, model, data};\n    }\n\n    static fromIcon(icon: Icon, region: Rectangle): Icon{\n\n        const data = new Uint8ClampedArray(region.width * region.height * 4);\n\n        this.region32(icon, region, (index, current) => {\n            data[current] = icon.data[index];\n            data[current + 1] = icon.data[index + 1];\n            data[current + 2] = icon.data[index + 2];\n            data[current + 3] = icon.data[index + 3];\n        });\n\n        return {\n            width: region.width,\n            height: region.height,\n            data,\n            model: `rgba`\n        }\n    }\n\n    static fromImage(image: HTMLImageElement, newSize?: Size): Icon{\n\n        const model: IconColorModel = 'rgba';\n        const width = newSize? newSize.width : image.naturalWidth;\n        const height = newSize? newSize.height : image.naturalHeight;\n        const data = ImageService.resize(image, makeSz(width, height));\n\n        return {width, height, model, data};\n\n    }\n\n    static async fromFile(file: Blob, contain?: Size, allowScaleUp = false): Promise<Icon>{\n\n        const image = await ImageService.fromFile(file);\n        let width = image.width;\n        let height = image.height;\n\n        if (contain){\n            const actual = makeSz(width, height);\n            const contained = (actual.width > contain.width && actual.height > contain.height) || allowScaleUp ?  scaleToContain(contain, actual) : actual;\n            width = Math.round(contained.width);\n            height = Math.round(contained.height);\n        }\n\n        return this.fromImage(image, makeSz(width, height));\n\n    }\n\n    static newIcon(width: number, height: number, model: IconColorModel = 'rgba'): Icon{\n        const icon = {\n            width, height, model, data: new Uint8ClampedArray(width * height * 4)\n        };\n\n        return icon;\n    }\n\n    static newIconWithBg(width: number, height: number, color: Color): Icon{\n        const model: IconColorModel = 'rgba';\n        const icon = {\n            width, height, model, data: new Uint8ClampedArray(width * height * 4)\n        };\n\n        for (let i = 0; i < icon.data.length; i += 4){\n            icon.data[i] = color.r;\n            icon.data[i + 1] = color.g;\n            icon.data[i + 2] = color.b;\n            icon.data[i + 3] = color.a * 255;\n        }\n\n        return icon;\n    }\n\n    static pixelToData(pixel: Point, icon: Icon): number{\n        return icon.width * 4 * pixel.y + pixel.x * 4;\n    }\n\n    static region32(icon: Icon, region: Rectangle, onPixel: (regionIndex: number, iconIndex: number) => void){\n        let current = 0;\n        for(let y = region.top; y < region.bottom; y++){\n            for(let x = region.left; x < region.right; x++){\n                const index = IconService.pixelToData(makePt(x,y), icon);\n                onPixel(index, current);\n                current += 4;\n            }\n        }\n    }\n\n    static blend(base: Icon, sprite: Icon, region: Rectangle, spriteOffset? : Point): Icon {\n\n        if (region.width > sprite.width || region.height > sprite.height){\n            throw new InvalidRegionError();\n        }\n\n        if (!spriteOffset){\n            spriteOffset = makePt(0, 0)\n        }\n\n        const buffer = this.clone(base);\n        const sourceOver = (s: number, d: number, sA: number) => d + s * (255 - sA);\n        const blend = sourceOver;\n\n        for (let y = 0; y < region.height; y++){\n            for(let x = 0; x < region.width; x++){\n                const baseIndex = this.pixelToData(makePt(region.left + x, region.top + y), base);\n                const spriteIndex = this.pixelToData(makePt(x + spriteOffset.x, y + spriteOffset.y), sprite);\n                const baseR = buffer.data[baseIndex];\n                const baseG = buffer.data[baseIndex + 1];\n                const baseB = buffer.data[baseIndex + 2];\n                const baseA = buffer.data[baseIndex + 3];\n                const spR = sprite.data[spriteIndex];\n                const spG = sprite.data[spriteIndex + 1];\n                const spB = sprite.data[spriteIndex + 2];\n                const spA = sprite.data[spriteIndex + 3];\n\n                buffer.data[baseIndex] = blend(baseR, spR, spA);\n                buffer.data[baseIndex + 1] = blend(baseG, spG, spA);\n                buffer.data[baseIndex + 2] = blend(baseB, spB, spA);\n                buffer.data[baseIndex + 3] = Math.max(baseA, spA);\n\n                // Hack note: this is not good alpha compositing\n                // In the future this should be better.\n            }\n        }\n\n        return buffer;\n    }\n}","import {Color} from \"../hui/helpers/Color\";\n\nexport class ImageAdjustService {\n\n    static brightness(data: Uint8ClampedArray, delta: number){\n        for(let i = 0; i < data.length; i+=4){\n            data[i] = Math.max(Math.min(data[i] + delta, 255), 0);\n            data[i + 1] = Math.max(Math.min(data[i + 1] + delta, 255), 0);\n            data[i + 2] = Math.max(Math.min(data[i + 2] + delta, 255), 0);\n        }\n    }\n\n    static contrast(data: Uint8ClampedArray, delta: number){\n        const factor = (259 * (delta + 255)) / (255 * (259 - delta));\n        const limit = 128;\n\n        for(let i = 0; i < data.length; i+=4){\n            data[i] = Math.max(Math.min(factor * (data[i] - limit) + limit, 255), 0);\n            data[i + 1] = Math.max(Math.min(factor * (data[i + 1] - limit) + limit, 255), 0);\n            data[i + 2] = Math.max(Math.min(factor * (data[i + 2] - limit) + limit, 255), 0);\n        }\n    }\n\n    /**\n     * Dithers the image in place\n     */\n    static dither(data: Uint8ClampedArray, width: number, height: number, palette: Color[], kernelIndex: number = 1, serpentine:boolean = true) {\n        // http://www.tannerhelland.com/4660/dithering-eleven-algorithms-source-code/\n        const kernels: {[name:string]:number[][]} = {\n            FloydSteinberg: [\n                [7 / 16, 1, 0],\n                [3 / 16, -1, 1],\n                [5 / 16, 0, 1],\n                [1 / 16, 1, 1]\n            ],\n            FalseFloydSteinberg: [\n                [3 / 8, 1, 0],\n                [3 / 8, 0, 1],\n                [2 / 8, 1, 1]\n            ],\n            Stucki: [\n                [8 / 42, 1, 0],\n                [4 / 42, 2, 0],\n                [2 / 42, -2, 1],\n                [4 / 42, -1, 1],\n                [8 / 42, 0, 1],\n                [4 / 42, 1, 1],\n                [2 / 42, 2, 1],\n                [1 / 42, -2, 2],\n                [2 / 42, -1, 2],\n                [4 / 42, 0, 2],\n                [2 / 42, 1, 2],\n                [1 / 42, 2, 2]\n            ],\n            Atkinson: [\n                [1 / 8, 1, 0],\n                [1 / 8, 2, 0],\n                [1 / 8, -1, 1],\n                [1 / 8, 0, 1],\n                [1 / 8, 1, 1],\n                [1 / 8, 0, 2]\n            ],\n            Jarvis: [\t\t\t// Jarvis, Judice, and Ninke / JJN?\n                [7 / 48, 1, 0],\n                [5 / 48, 2, 0],\n                [3 / 48, -2, 1],\n                [5 / 48, -1, 1],\n                [7 / 48, 0, 1],\n                [5 / 48, 1, 1],\n                [3 / 48, 2, 1],\n                [1 / 48, -2, 2],\n                [3 / 48, -1, 2],\n                [5 / 48, 0, 2],\n                [3 / 48, 1, 2],\n                [1 / 48, 2, 2]\n            ],\n            Burkes: [\n                [8 / 32, 1, 0],\n                [4 / 32, 2, 0],\n                [2 / 32, -2, 1],\n                [4 / 32, -1, 1],\n                [8 / 32, 0, 1],\n                [4 / 32, 1, 1],\n                [2 / 32, 2, 1],\n            ],\n            Sierra: [\n                [5 / 32, 1, 0],\n                [3 / 32, 2, 0],\n                [2 / 32, -2, 1],\n                [4 / 32, -1, 1],\n                [5 / 32, 0, 1],\n                [4 / 32, 1, 1],\n                [2 / 32, 2, 1],\n                [2 / 32, -1, 2],\n                [3 / 32, 0, 2],\n                [2 / 32, 1, 2],\n            ],\n            TwoSierra: [\n                [4 / 16, 1, 0],\n                [3 / 16, 2, 0],\n                [1 / 16, -2, 1],\n                [2 / 16, -1, 1],\n                [3 / 16, 0, 1],\n                [2 / 16, 1, 1],\n                [1 / 16, 2, 1],\n            ],\n            SierraLite: [\n                [2 / 4, 1, 0],\n                [1 / 4, -1, 1],\n                [1 / 4, 0, 1],\n            ],\n        };\n        const names = [\n            \"FloydSteinberg\",\n            \"FalseFloydSteinberg\",\n            \"Stucki\",\n            \"Atkinson\",\n            \"Jarvis\",\n            \"Burkes\",\n            \"Sierra\",\n            \"TwoSierra\",\n            \"SierraLite\"\n        ];\n\n        if (kernelIndex < 0 || kernelIndex > names.length - 1) {\n            throw 'Unknown dithering kernel: ' + kernelIndex;\n        }\n\n        const nearestBuffer = new Map<number, Color>();\n        const nearest = (r: number, g: number, b: number): Color => {\n\n            const originInt =\n                (255 << 24)\t|\t// alpha\n                (b  << 16)\t|\t// blue\n                (g  <<  8)\t|\t// green\n                r;\n\n            if (nearestBuffer.has(originInt)){\n                return nearestBuffer.get(originInt)!;\n            }\n\n            let min = {\n                distance: Number.MAX_SAFE_INTEGER,\n                color: Color.white\n            };\n\n            for(const color of palette){\n                const distance = Math.sqrt(\n                    Math.pow(r - color.r, 2) +\n                    Math.pow(g - color.g, 2) +\n                    Math.pow(b - color.b, 2)\n                );\n                if (distance < min.distance){\n                    min = {distance, color};\n                }\n            }\n\n            nearestBuffer.set(originInt, min.color);\n\n            return min.color;\n        };\n        const getPixel = (x: number, y: number): [number, number, number] => {\n            const i = width * 4 * y + x * 4;\n            return [data[i], data[i+1], data[i+2]];\n        };\n        const setPixel = (x: number, y: number, r: number, g: number, b: number) => {\n\n            const i = width * 4 * y + x * 4;\n            data[i] = r;\n            data[i + 1] = g;\n            data[i + 2] = b;\n        }\n\n        let kernel: number[][] = kernels[names[kernelIndex]];\n\n        let dir = serpentine ? -1 : 1;\n\n        for (let y = 0; y < height; y++) {\n\n            dir *= serpentine ? -1 : 1;\n\n            for (let x = (dir == 1 ? 0 : width - 1), xEnd = (dir == 1 ? width : -1); x !== xEnd; x += dir) {\n\n                // Image pixel\n                const [r1, g1, b1] = getPixel(x, y);\n\n                // Reduced pixel\n                const [r2, g2, b2] = nearest(r1, g1, b1).tupleInt8;\n\n                setPixel(x, y, r2, g2, b2);\n\n                // Component distance\n                let er = r1 - r2;\n                let eg = g1 - g2;\n                let eb = b1 - b2;\n\n                for (let i = (dir == 1 ? 0 : kernel.length - 1), end = (dir == 1 ? kernel.length : 0); i !== end; i += dir) {\n                    let x1 = x + kernel[i][1] * dir;\n                    let y1 = y + kernel[i][2];\n\n                    if (x1 >= 0 && x1 < width && y1 >= 0 && y1 < height) {\n                        let d = kernel[i][0];\n\n                        const [r3, g3, b3] = getPixel(x1, y1);\n\n                        let r4 = Math.max(0, Math.min(255, r3 + er * d));\n                        let g4 = Math.max(0, Math.min(255, g3 + eg * d));\n                        let b4 = Math.max(0, Math.min(255, b3 + eb * d));\n\n                        setPixel(x1, y1, r4, g4, b4);\n                    }\n                }\n            }\n        }\n\n    }\n\n}","import {FileError, InvalidImageError, MemoryError} from \"./errors\";\nimport {makeSz, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\n\nconst REDUCE_MARGIN = 256;\n\nexport class ImageService{\n\n    static fromFile(file: Blob): Promise<HTMLImageElement>{\n        return new Promise<HTMLImageElement>((resolve, reject) => {\n\n            const reader = new FileReader();\n\n            reader.addEventListener('load', readEvent => {\n\n                if (readEvent.target){\n                    const img = new Image();\n\n                    img.addEventListener('load', () => resolve(img));\n                    img.addEventListener('error', () => reject(new InvalidImageError()));\n\n                    img.src = readEvent.target.result as string;\n                }else{\n                    reject(new MemoryError());\n                }\n\n            });\n\n            reader.addEventListener('error', () => reject(new FileError()));\n\n            reader.readAsDataURL(file);\n\n        });\n\n    }\n\n    static resize(image: HTMLImageElement, size: Size): Uint8ClampedArray{\n\n        const mustReduce = image.width > REDUCE_MARGIN || image.height > REDUCE_MARGIN;\n        const reducedSize = mustReduce ? scaleToContain(makeSz(REDUCE_MARGIN, REDUCE_MARGIN), size) : size;\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const cx = canvas.getContext('2d');\n\n        if (!cx){\n            throw new MemoryError();\n        }\n\n        canvas.width = reducedSize.width;\n        canvas.height = reducedSize.height;\n        cx.drawImage(image, 0, 0, reducedSize.width, reducedSize.height);\n\n        const imageData = cx.getImageData(0,0, reducedSize.width, reducedSize.height);\n\n        if (size.width <= REDUCE_MARGIN || size.height <= REDUCE_MARGIN){\n            return this.resample(imageData, size);\n        }else{\n            return imageData.data;\n        }\n\n    }\n\n    static resample(image: ImageData, size: Size): Uint8ClampedArray{\n        const srcW = image.width;\n        const srcH = image.height;\n        const destW = Math.round(size.width);\n        const destH = Math.round(size.height);\n        let data = image.data;\n        let data2 = new Uint8ClampedArray(size.width * size.height * 4);\n        let ratio_w = srcW / destW;\n        let ratio_h = srcH / destH;\n        let ratio_w_half = Math.ceil(ratio_w/2);\n        let ratio_h_half = Math.ceil(ratio_h/2);\n\n        for(let j = 0; j < destH; j++){\n            for(let i = 0; i < destW; i++){\n                let x2 = (i + j*destW) * 4;\n                let weight = 0;\n                let weights = 0;\n                let weights_alpha = 0;\n                let gx_r = 0, gx_g = 0, gx_b = 0, gx_a = 0;\n                let center_y = (j + 0.5) * ratio_h;\n                for(let yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++){\n                    let dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;\n                    let center_x = (i + 0.5) * ratio_w;\n                    let w0 = dy*dy; //pre-calc part of w\n                    for(let xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++){\n                        let dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;\n                        let w = Math.sqrt(w0 + dx*dx);\n                        if(w >= -1 && w <= 1){\n                            //hermite filter\n                            weight = 2 * w*w*w - 3*w*w + 1;\n                            if(weight > 0){\n                                dx = 4*(xx + yy*srcW);\n                                //alpha\n                                gx_a += weight * data[dx + 3];\n                                weights_alpha += weight;\n                                //colors\n                                if(data[dx + 3] < 255)\n                                    weight = weight * data[dx + 3] / 250;\n                                gx_r += weight * data[dx];\n                                gx_g += weight * data[dx + 1];\n                                gx_b += weight * data[dx + 2];\n                                weights += weight;\n                            }\n                        }\n                    }\n                }\n                data2[x2]     = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        return data2;\n    }\n\n}","import {distance, Point} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\n\nexport class MarchingAnts{\n\n    static line(cx: CanvasRenderingContext2D, a: Point, b: Point, color1 = Color.black, color2  = Color.white, step: number = 0){\n\n        step = step % 8; // step can only go from 0 to 8\n\n        const lineWidthBuffer = cx.lineWidth;\n        cx.lineWidth = 1.5;\n\n        const fives = new Array(Math.round(distance(a, b) / 5)).fill(5);\n\n        switch(step){\n            case 0: cx.setLineDash([1, ...fives]); break;\n            case 1: cx.setLineDash([2, ...fives]); break;\n            case 2: cx.setLineDash([3, ...fives]); break;\n            case 3: cx.setLineDash([4, ...fives]); break;\n            case 4: cx.setLineDash([5, 5]); break;\n            case 5: cx.setLineDash([0, 1,...fives]); break;\n            case 6: cx.setLineDash([0,2,...fives]); break;\n            case 7: cx.setLineDash([0,3,...fives]); break;\n            case 8: cx.setLineDash([0,4,...fives]); break;\n        }\n\n        cx.strokeStyle = color1.cssRgba;\n        cx.beginPath();\n        cx.moveTo(a.x, a.y);\n        cx.lineTo(b.x, b.y);\n        cx.stroke();\n\n        switch(step){\n            case 0: cx.setLineDash([0, 1, ...fives]); break;\n            case 1: cx.setLineDash([0, 2, ...fives]); break;\n            case 2: cx.setLineDash([0, 3, ...fives]); break;\n            case 3: cx.setLineDash([0, 4, ...fives]); break;\n            case 4: cx.setLineDash([0, 5, ...fives]); break;\n            case 5: cx.setLineDash([1,...fives]); break;\n            case 6: cx.setLineDash([2,...fives]); break;\n            case 7: cx.setLineDash([3,...fives]); break;\n            case 8: cx.setLineDash([4,...fives]); break;\n        }\n\n        cx.strokeStyle = color2.cssRgba;\n        cx.beginPath();\n        cx.moveTo(a.x, a.y);\n        cx.lineTo(b.x, b.y);\n        cx.stroke();\n\n        cx.setLineDash([]);\n        cx.lineWidth = lineWidthBuffer;\n    }\n\n}","import {Color} from \"../hui/helpers/Color\";\nimport {uuid} from \"../hui/helpers/Uuid\";\n\nexport interface Palette{\n    id?: string;\n    name: string;\n    native?: boolean;\n    unsaved?: boolean;\n    unnamed?: boolean;\n    colors: [number, number, number, number][];\n}\n\nconst PALETTES_STORAGE_KEY = 'palettes-v1';\n\nexport class PaletteService{\n\n    static async getAll(): Promise<Palette[]>{\n        try{\n            const value = String(window.localStorage.getItem(PALETTES_STORAGE_KEY));\n\n            if (value){\n                const obj = JSON.parse(value);\n\n                if(!obj){\n                    return [];\n\n                }else if(!(obj instanceof Array)){\n                    return Promise.reject(new Error());\n                }else{\n                    return obj as Palette[];\n                }\n\n            }else{\n                return [];\n            }\n\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n\n    static async upsert(palette: Palette): Promise<Palette>{\n\n        if (!palette.id){\n            palette.id = uuid();\n        }\n\n        palette = {...palette, unsaved: false};\n\n        const all = await this.getAll();\n        const index = all.findIndex(p => p.id === palette.id);\n\n        if (index >= 0 ){\n            all[index] = palette;\n        }else{\n            all.push(palette);\n        }\n\n        try{\n            window.localStorage.setItem(PALETTES_STORAGE_KEY, JSON.stringify(all));\n            return palette;\n        }catch(e){\n            return Promise.reject(e);\n        }\n\n    }\n\n}","export class InvalidImageError extends Error{}\nexport class FileError extends Error{}\nexport class InvalidRegionError extends Error{}\nexport class MemoryError extends Error{}\nexport class NoSelectionError extends Error{}\nexport class NoClipboardAccessError extends Error{}","import {IconDocument, IconEditorTool} from \"../IconEditor\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Color} from \"../../hui/helpers/Color\";\nimport {ImageAdjustService} from \"../ImageAdjustService\";\nimport {Palette} from \"../PaletteService\";\nimport {PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\n\nexport interface AdjustProperties{\n    palette?: Palette;\n    brightness?: number;\n    contrast?: number;\n    kernel?: number;\n}\n\nexport class AdjustTool implements IconEditorTool{\n\n    original: IconDocument | null = null;\n\n    private lastProps?: AdjustProperties;\n\n    constructor(readonly controller: IconCanvasController){}\n\n    activate(){\n        this.controller.editor.begin();\n        this.original = this.controller.editor.cloneDocument();\n    }\n\n    deactivate(){\n        this.controller.editor.rollback();\n    }\n\n    apply(){\n        this.controller.editor.commit();\n        this.original = this.controller.editor.cloneDocument();\n        this.controller.editor.begin();\n    }\n\n    updateAdjustments(props: AdjustProperties): boolean{\n\n        if (!this.original){\n            return false;\n        }\n\n        let changed = false;\n\n        if(this.lastProps) {\n            for(let name in props){\n                if((props as any)[name] !== (this.lastProps as any)[name]) {\n                    changed = true;\n                    break;\n                }\n            }\n        }else{\n            changed = true;\n        }\n\n        if(!changed){\n            return false;\n        }\n\n        const doc = this.controller.editor.cloneDocument(this.original);\n        const icon = doc.icon;\n        const data = icon.data;\n        const {palette, contrast, brightness, kernel} = props;\n\n\n        if (typeof brightness === \"number\" && brightness !== 0){\n            ImageAdjustService.brightness(data, brightness);\n        }\n\n        if ( typeof contrast === \"number\" && contrast !== 0){\n            ImageAdjustService.contrast(data, contrast);\n        }\n\n        if (palette){\n            ImageAdjustService.dither(data, icon.width, icon.height, palette.colors.map(tuple => Color.fromTupleInt8(tuple)), kernel || 0);\n        }\n\n        this.controller.editor.setDocument(doc);\n\n        this.lastProps = props;\n\n        return true;\n    }\n\n}","import {PencilTool} from \"./PencilTool\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Color} from \"../../hui/helpers/Color\";\n\nexport class EraserTool extends PencilTool{\n\n    constructor(controller: IconCanvasController) {\n        super(controller);\n        this.color = Color.transparent;\n    }\n\n    useColor(color: Color) {\n        // do nothing, color must be transparent\n    }\n\n}","import {IconEditorTool} from \"../IconEditor\";\nimport {Color} from \"../../hui/helpers/Color\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {Point} from \"../../hui/helpers/Rectangle\";\n\nexport class FloodFillTool implements IconEditorTool{\n\n    color: Color = Color.black;\n\n    constructor(readonly controller: IconCanvasController) {}\n\n    fill(p: Point){\n\n        this.controller.editor.begin();\n\n        const limit = 30000;\n        const tuple = this.color.tupleInt8;\n        const doc = this.controller.editor.cloneDocument();\n        const data = doc.icon.data;\n        const width = doc.icon.width;\n        const index = this.controller.pixelToData(p);\n        const origin = new Color(doc.icon.data[index], doc.icon.data[index + 1], doc.icon.data[index + 2], doc.icon.data[index + 3]);\n        const q: number[] = [];\n        const visited: number[] = [];\n        let counter = 0;\n\n        q.push(index);\n\n        const keep = () => {\n            if (q.length > 0){\n                batch();\n            }\n        }\n\n        const batch = () => {\n            while(q.length > 0){\n                counter++;\n\n                if (counter >= limit){\n                    counter = 0;\n                    this.controller.editor.setDocument(doc);\n                    setTimeout(() => keep());\n                    return;\n                }\n\n                const n = q.pop();\n\n                if (typeof n === 'number'){\n                    const insideArray = (n >=  0) || (n + 3) < data.length;\n                    const matchesColor = origin.equals(new Color(data[n], data[n+1], data[n+2], data[n+3]));\n                    const repeated = visited.indexOf(n) >= 0;\n\n                    if (!repeated && insideArray && matchesColor){\n                        data[n] = tuple[0];\n                        data[n+1] = tuple[1];\n                        data[n+2] = tuple[2];\n                        data[n+3] = tuple[3];\n\n                        q.push(n + 4);\n                        q.push(n - 4);\n                        q.push(n - width * 4);\n                        q.push(n + width * 4);\n\n                        visited.push(n);\n                    }\n                }\n            }\n\n            this.controller.editor.commit(doc);\n        }\n\n        batch();\n\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n            this.fill(p);\n        }\n\n    }\n\n    useColor(color: Color){\n        this.color = color;\n    }\n\n}","import {IconEditorTool} from \"../IconEditor\";\nimport {PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Point} from \"../../hui/helpers/Rectangle\";\nimport {Color} from \"../../hui/helpers/Color\";\n\nexport class PencilTool implements IconEditorTool{\n\n    private drawing = false;\n    color: Color = new Color(0,0,0,);\n\n    constructor(readonly controller: IconCanvasController) {}\n\n    private drawAt(p: Point){\n\n        const index = this.controller.pointToData(p);\n\n        if (index < 0){\n            return;\n        }\n\n\n        const newState = this.controller.editor.cloneDocument();\n        const data = newState.icon.data;\n\n        data[index    ] = this.color.r;\n        data[index + 1] = this.color.g;\n        data[index + 2] = this.color.b;\n        data[index + 3] = Math.round(this.color.a * 255);\n\n        this.controller.editor.setDocument(newState);\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n\n        this.drawing = true;\n\n        if (!this.controller.editor.currentTransaction){\n            this.controller.editor.begin();\n            this.drawAt(e.point);\n        }\n\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        if (this.drawing){\n            this.drawAt(e.point);\n        }\n\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n\n        this.drawing = false;\n        this.controller.editor.commit();\n\n    }\n\n    useColor(color: Color){\n        this.color = color;\n    }\n\n}","import {IconDocument, IconEditor, IconEditorTool} from \"../IconEditor\";\nimport {KeyEvent, KeyEventResult, PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {makePt, makeSz, Point, Rectangle} from \"../../hui/helpers/Rectangle\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Icon} from \"../Icon\";\nimport {IconService} from \"../IconService\";\nimport {NoSelectionError} from \"../errors\";\n\nexport class SelectionTool implements IconEditorTool{\n\n    private selecting = false;\n    private dragging = false;\n    private dragOffset: Point = makePt(0, 0);\n    private startPixel = makePt(0,0);\n\n    readonly editor: IconEditor;\n\n    constructor(readonly controller: IconCanvasController) {\n        this.editor = controller.editor;\n    }\n\n    private clipOutSelection(document?: IconDocument): {buffer: Icon, sprite: Icon}{\n\n        if(!document){\n            document = this.document;\n        }\n\n        if (!document.selectionRegion){\n            throw new Error();\n        }\n\n        const buffer = IconService.clone(document.icon);\n        const sprite = IconService.fromIcon(buffer, document.selectionRegion);\n\n        IconService.region32(buffer, document.selectionRegion,\n            (index, current) => {\n                buffer.data[index] = 0\n                buffer.data[index + 1] = 0\n                buffer.data[index + 2] = 0\n                buffer.data[index + 3] = 0\n        });\n\n        return {buffer, sprite};\n    }\n\n    private updateSelRegion(a: Point, b: Point){\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.selectionRegion = Rectangle.fromLTRB(\n            Math.round(Math.min(a.x, b.x)),\n            Math.round(Math.min(a.y, b.y)),\n            Math.round(Math.max(a.x, b.x)) + 1,\n            Math.round(Math.max(a.y, b.y)) + 1\n        );\n\n        this.editor.setDocument(newDoc);\n    }\n\n    private selectionEnded(){\n\n        if (!this.document.selectionRegion || this.document.selectionRegion.isEmpty){\n            return;\n        }\n\n        const {buffer, sprite} = this.clipOutSelection();\n\n        this.editor.setDocument({\n            ...this.editor.cloneDocument(),\n            selectionBuffer: buffer,\n            selectionSprite: sprite,\n        });\n\n        this.selecting = false;\n    }\n\n    private pixelIsInsideSelection(p: Point | null){\n        return p && this.document.selectionRegion && this.document.selectionRegion.contains(p);\n    }\n\n    private dragEnded(){\n        this.dragging = false;\n        this.dragOffset = makePt(0,0);\n    }\n\n    private updateDrag(p: Point){\n\n        this.moveSelection(p.x - this.dragOffset.x, p.y - this.dragOffset.y);\n\n    }\n\n    private moveSelection(x: number, y: number){\n\n        if(\n            !this.document.selectionRegion ||\n            !this.document.selectionSprite ||\n            !this.document.selectionBuffer\n        ){\n            throw new NoSelectionError();\n        }\n\n        const base = this.document.icon;\n        const buffer: Icon = this.document.selectionBuffer;\n        const sprite: Icon = this.document.selectionSprite;\n\n        x = Math.max(-sprite.width, x);\n        x = Math.min(base.width, x);\n        y = Math.max(-sprite.height, y);\n        y = Math.min(base.height, y);\n\n        const region = new Rectangle(x, y, sprite.width, sprite.height);\n        const offset = makePt(\n            region.left < 0 ? Math.abs(region.left) : 0,\n            region.top < 0 ? Math.abs(region.top) : 0\n        );\n        const selectionRegion = Rectangle.fromLTRB(\n            region.left < 0 ? 0 : region.left,\n            region.top < 0 ? 0 : region.top,\n            region.right > base.width ? base.width : region.right,\n            region.bottom > base.height ? base.height : region.bottom\n        );\n        const icon = IconService.blend(buffer, sprite, selectionRegion, offset);\n        const newDoc: IconDocument = {\n            ...this.editor.cloneDocument(),\n            selectionRegion,\n            icon\n        };\n\n        if (this.editor.currentTransaction){\n            this.editor.setDocument(newDoc);\n        }else{\n            this.editor.transact(newDoc);\n        }\n\n    }\n\n    private offsetSelection(x: number, y: number){\n        if(\n            !this.document.selectionRegion ||\n            !this.document.selectionSprite\n        ){\n            throw new NoSelectionError();\n        }\n\n        const sprite: Icon = this.document.selectionSprite;\n        const current: Rectangle = this.document.selectionRegion;\n\n        let implicitX = current.right - sprite.width;\n        let implicitY = current.bottom - sprite.height;\n\n        implicitX = implicitX < 0 ? implicitX : 0;\n        implicitY = implicitY < 0 ? implicitY : 0;\n\n        this.moveSelection(current.left + x + implicitX, current.top + y + implicitY);\n\n    }\n\n    private saveDragOffset(p: Point){\n\n        if (!this.document.selectionRegion){\n            throw new NoSelectionError();\n        }\n\n        this.dragOffset = makePt(\n            p.x - this.document.selectionRegion.left,\n            p.y - this.document.selectionRegion.top\n        );\n    }\n\n    selectRegion(selectionRegion: Rectangle){\n        const icon = this.document.icon;\n        const doc: IconDocument = {\n            ...this.editor.cloneDocument(),\n            selectionRegion: Rectangle.fromSize(makeSz(icon.width, icon.height))\n        };\n\n        const {buffer, sprite} = this.clipOutSelection(doc);\n\n        this.editor.transact({\n            ...doc,\n            selectionBuffer: buffer,\n            selectionSprite: sprite,\n        });\n    }\n\n    selectAll(){\n        const icon = this.document.icon;\n        this.selectRegion(Rectangle.fromSize(makeSz(icon.width, icon.height)));\n    }\n\n    clearSelection(){\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.selectionRegion = newDoc.selectionSprite = newDoc.selectionBuffer = undefined;\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n\n    }\n\n    cropToSelection(){\n\n        const sprite = this.editor.document.selectionSprite;\n\n        if (sprite){\n            this.editor.transact({icon: sprite});\n        }else{\n            throw new NoSelectionError();\n        }\n    }\n\n    deactivate(){\n        if (this.document.selectionRegion){\n            this.clearSelection();\n        }\n    }\n\n    deleteSelection(){\n\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.icon = newDoc.selectionBuffer!;\n        newDoc.selectionSprite = newDoc.selectionBuffer = newDoc.selectionRegion = undefined;\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void{\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n            this.startPixel = p;\n            this.editor.begin();\n\n            if (this.pixelIsInsideSelection(p)){\n                this.dragging = true;\n                this.saveDragOffset(p);\n\n            }else{\n                this.selecting = true;\n\n            }\n        }\n\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (this.selecting){\n            this.selectionEnded();\n        }\n\n        if (this.dragging){\n            this.dragEnded();\n        }\n\n        if (this.editor.currentTransaction){\n            this.editor.commit();\n        }\n\n        if (this.pixelIsInsideSelection(p)){\n            return {cursor: 'move'};\n        }\n\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n\n            if (this.selecting) {\n                this.updateSelRegion(this.startPixel, p);\n\n            }else if(this.dragging){\n                this.updateDrag(p);\n\n            }else if(this.pixelIsInsideSelection(p)){\n                return {cursor: 'move'};\n            }\n\n        }\n\n        return {cursor: 'crosshair'};\n    }\n\n    keyDown(e: KeyEvent): KeyEventResult | void {\n\n        if (e.key == 'Escape'){\n            this.clearSelection();\n\n        }else if (e.key == 'Delete' || e.key == 'Backspace'){\n            this.deleteSelection();\n\n        }else if (e.key == 'ArrowLeft'){\n            this.offsetSelection(-1, 0);\n\n        }else if (e.key == 'ArrowRight'){\n            this.offsetSelection(1, 0);\n\n        }else if (e.key == 'ArrowUp'){\n            this.offsetSelection(0, -1);\n\n        }else if (e.key == 'ArrowDown'){\n            this.offsetSelection(0, 1);\n\n        }\n\n    }\n\n    get document(): IconDocument{\n        return this.editor.document;\n    }\n\n}","module.exports = React;","module.exports = ReactDOM;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/dist/\";","// startup\n// Load entry module\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(2629);\n"],"sourceRoot":""}