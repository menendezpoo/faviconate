{"version":3,"sources":["webpack://faviconate/./src/components/icons.css","webpack://faviconate/./src/hui/css/index.scss","webpack://faviconate/./src/hui/css/styles.css","webpack://faviconate/./src/index.scss","webpack://faviconate/./src/components/icons/book.svg","webpack://faviconate/./src/components/icons/bucket.svg","webpack://faviconate/./src/components/icons/checker.svg","webpack://faviconate/./src/components/icons/circle-arrow-down.svg","webpack://faviconate/./src/components/icons/circle-arrow-left.svg","webpack://faviconate/./src/components/icons/circle-arrow-right.svg","webpack://faviconate/./src/components/icons/circle-arrow-up.svg","webpack://faviconate/./src/components/icons/circle-back-large-white.svg","webpack://faviconate/./src/components/icons/circle-check.svg","webpack://faviconate/./src/components/icons/code-file.svg","webpack://faviconate/./src/components/icons/copy.svg","webpack://faviconate/./src/components/icons/corners.svg","webpack://faviconate/./src/components/icons/crop.svg","webpack://faviconate/./src/components/icons/cut.svg","webpack://faviconate/./src/components/icons/dismiss.svg","webpack://faviconate/./src/components/icons/ellipsis.svg","webpack://faviconate/./src/components/icons/equalizer.svg","webpack://faviconate/./src/components/icons/eraser.svg","webpack://faviconate/./src/components/icons/eye.svg","webpack://faviconate/./src/components/icons/eyedropper.svg","webpack://faviconate/./src/components/icons/floppy.svg","webpack://faviconate/./src/components/icons/full-frame.svg","webpack://faviconate/./src/components/icons/gradient.svg","webpack://faviconate/./src/components/icons/grid-crossed.svg","webpack://faviconate/./src/components/icons/grid.svg","webpack://faviconate/./src/components/icons/image.svg","webpack://faviconate/./src/components/icons/minus.svg","webpack://faviconate/./src/components/icons/palette.svg","webpack://faviconate/./src/components/icons/paste.svg","webpack://faviconate/./src/components/icons/pencil.svg","webpack://faviconate/./src/components/icons/plus.svg","webpack://faviconate/./src/components/icons/redo.svg","webpack://faviconate/./src/components/icons/return.svg","webpack://faviconate/./src/components/icons/select.svg","webpack://faviconate/./src/components/icons/undo.svg","webpack://faviconate/./src/hui/css/icons/0175-floppy-disk.svg","webpack://faviconate/./src/hui/css/icons/0180-file-empty.svg","webpack://faviconate/./src/hui/css/icons/0187-folder.svg","webpack://faviconate/./src/hui/css/icons/0822-cross2.svg","webpack://faviconate/./src/hui/css/icons/0826-chevron-up.svg","webpack://faviconate/./src/hui/css/icons/0827-chevron-down.svg","webpack://faviconate/./src/hui/css/icons/0828-chevron-left.svg","webpack://faviconate/./src/hui/css/icons/0829-chevron-right.svg","webpack://faviconate/./node_modules/css-loader/dist/runtime/api.js","webpack://faviconate/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://faviconate/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://faviconate/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://faviconate/./src/components/icons.css?f097","webpack://faviconate/./src/hui/css/index.scss?80b8","webpack://faviconate/./src/hui/css/styles.css?787b","webpack://faviconate/./src/index.scss?7223","webpack://faviconate/./src/Version.tsx","webpack://faviconate/./src/components/App.tsx","webpack://faviconate/./src/components/BackstageView.tsx","webpack://faviconate/./src/components/BookCommands.tsx","webpack://faviconate/./src/components/BookEditor.tsx","webpack://faviconate/./src/components/BookPreviews.tsx","webpack://faviconate/./src/components/CanvasView.tsx","webpack://faviconate/./src/components/ColorReplacer.tsx","webpack://faviconate/./src/components/ColorUsageReport.tsx","webpack://faviconate/./src/components/ContainerPanel.tsx","webpack://faviconate/./src/components/EditorControls.tsx","webpack://faviconate/./src/components/EditorControlsDither.tsx","webpack://faviconate/./src/components/EditorControlsEraser.tsx","webpack://faviconate/./src/components/EditorControlsFlood.tsx","webpack://faviconate/./src/components/EditorControlsPalette.tsx","webpack://faviconate/./src/components/EditorControlsPencil.tsx","webpack://faviconate/./src/components/EditorControlsSelection.tsx","webpack://faviconate/./src/components/EditorMainToolbar.tsx","webpack://faviconate/./src/components/Expando.tsx","webpack://faviconate/./src/components/IconEditor.tsx","webpack://faviconate/./src/components/PaletteExpando.tsx","webpack://faviconate/./src/components/PaletteManager.tsx","webpack://faviconate/./src/components/PreviewPanel.tsx","webpack://faviconate/./src/components/ReviewStudio.tsx","webpack://faviconate/./src/hui/helpers/ClickDismiss.tsx","webpack://faviconate/./src/hui/helpers/Color.ts","webpack://faviconate/./src/hui/helpers/FocusStackHandler.tsx","webpack://faviconate/./src/hui/helpers/KeyCaptureStackHandler.tsx","webpack://faviconate/./src/hui/helpers/Rectangle.ts","webpack://faviconate/./src/hui/helpers/Utils.ts","webpack://faviconate/./src/hui/helpers/Uuid.ts","webpack://faviconate/./src/hui/helpers/errors.ts","webpack://faviconate/./src/hui/helpers/hui.ts","webpack://faviconate/./src/hui/items/Button.tsx","webpack://faviconate/./src/hui/items/Clickable.tsx","webpack://faviconate/./src/hui/items/ColorPicker.tsx","webpack://faviconate/./src/hui/items/Icon.tsx","webpack://faviconate/./src/hui/items/ItemGroup.tsx","webpack://faviconate/./src/hui/items/Label.tsx","webpack://faviconate/./src/hui/items/MenuItem.tsx","webpack://faviconate/./src/hui/items/Range.tsx","webpack://faviconate/./src/hui/items/Separator.tsx","webpack://faviconate/./src/hui/layout/DockView.tsx","webpack://faviconate/./src/hui/layout/ToolbarView.tsx","webpack://faviconate/./src/hui/overlays/MenuOverlay.tsx","webpack://faviconate/./src/index.tsx","webpack://faviconate/./src/model/BlobComposer.ts","webpack://faviconate/./src/model/BookController.ts","webpack://faviconate/./src/model/BookService.ts","webpack://faviconate/./src/model/ClipboardService.ts","webpack://faviconate/./src/model/DocumentService.ts","webpack://faviconate/./src/model/Editor.ts","webpack://faviconate/./src/model/IconCanvasController.ts","webpack://faviconate/./src/model/IconEditor.ts","webpack://faviconate/./src/model/IconReviewer.ts","webpack://faviconate/./src/model/IconService.ts","webpack://faviconate/./src/model/ImageAdjustService.ts","webpack://faviconate/./src/model/ImageService.ts","webpack://faviconate/./src/model/PaletteService.ts","webpack://faviconate/./src/model/errors.ts","webpack://faviconate/./src/model/tools/AdjustTool.ts","webpack://faviconate/./src/model/tools/EraserTool.ts","webpack://faviconate/./src/model/tools/FloodFillTool.ts","webpack://faviconate/./src/model/tools/PaletteComposerTool.ts","webpack://faviconate/./src/model/tools/PencilTool.ts","webpack://faviconate/./src/model/tools/SelectionTool.ts","webpack://faviconate/./src/rendering/IconDocumentRenderer.ts","webpack://faviconate/./src/rendering/MarchingAnts.ts","webpack://faviconate/./src/rendering/ReviewRenderer.ts","webpack://faviconate/external \"React\"","webpack://faviconate/external \"ReactDOM\"","webpack://faviconate/webpack/bootstrap","webpack://faviconate/webpack/runtime/compat get default export","webpack://faviconate/webpack/runtime/define property getters","webpack://faviconate/webpack/runtime/hasOwnProperty shorthand","webpack://faviconate/webpack/runtime/make namespace object","webpack://faviconate/webpack/runtime/publicPath","webpack://faviconate/webpack/startup"],"names":["___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","___CSS_LOADER_URL_REPLACEMENT_8___","___CSS_LOADER_URL_REPLACEMENT_9___","___CSS_LOADER_URL_REPLACEMENT_10___","___CSS_LOADER_URL_REPLACEMENT_11___","___CSS_LOADER_URL_REPLACEMENT_12___","___CSS_LOADER_URL_REPLACEMENT_13___","___CSS_LOADER_URL_REPLACEMENT_14___","___CSS_LOADER_URL_REPLACEMENT_15___","___CSS_LOADER_URL_REPLACEMENT_16___","___CSS_LOADER_URL_REPLACEMENT_17___","___CSS_LOADER_URL_REPLACEMENT_18___","___CSS_LOADER_URL_REPLACEMENT_19___","___CSS_LOADER_URL_REPLACEMENT_20___","___CSS_LOADER_URL_REPLACEMENT_21___","___CSS_LOADER_URL_REPLACEMENT_22___","___CSS_LOADER_URL_REPLACEMENT_23___","___CSS_LOADER_URL_REPLACEMENT_24___","___CSS_LOADER_URL_REPLACEMENT_25___","___CSS_LOADER_URL_REPLACEMENT_26___","___CSS_LOADER_URL_REPLACEMENT_27___","___CSS_LOADER_URL_REPLACEMENT_28___","___CSS_LOADER_URL_REPLACEMENT_29___","___CSS_LOADER_URL_REPLACEMENT_30___","___CSS_LOADER_URL_REPLACEMENT_31___","___CSS_LOADER_URL_REPLACEMENT_32___","___CSS_LOADER_URL_REPLACEMENT_33___","___CSS_LOADER_URL_REPLACEMENT_34___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_arrayLikeToArray","arr","len","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","next","done","value","err","_iterableToArrayLimit","o","minLen","n","prototype","call","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","url","options","__esModule","default","hash","needQuotes","replace","memo","getTarget","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","key","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","Version","React","Component","DEFAULT_ICON","makeSz","App","props","super","state","commands","setState","backstageMode","sz","book","BookService","newBook","bookController","BookController","DocumentService","restoreIcons","then","icons","fromIcons","Label","text","BackstageView","onNewBook","handleNewBook","onExit","goBookMode","BookEditor","onBackstageMode","goBackstageMode","windowKeyHandler","onWindowKey","commandImportFileDialog","addEventListener","removeEventListener","className","tabIndex","onClick","href","Button","icon","description","iconSize","importImage","MAPPINGS","command","c","commandRedo","shift","commandUndo","commandPaste","commandCopy","commandCut","commandSelectAll","commandUsePen","flat","commandUseSelection","commandUseFlood","commandUseEraser","commandSwapBg","commandSwapGrid","setter","tool","file","toLowerCase","endsWith","curId","iconController","pristine","editor","importIcoFile","iconControllers","ctl","showBackground","showGrid","removeIcon","commandGoToIcon","importFile","persist","copy","console","log","catch","cut","paste","r","warnings","w","success","input","type","display","onchange","files","body","setTimeout","click","useTool","AdjustTool","EraserTool","FloodFillTool","PaletteComposerTool","PencilTool","SelectionTool","selectAll","ReactDOM","render","ReviewStudio","onCloseRequested","unmountComponentAtNode","getElementById","undo","undos","undoPeek","selectionRegion","redo","redos","redoPeek","getIconController","keyboardHandler","handleKeyboard","initBookController","onUpdated","iconPreviews","initController","IconService","asBlobUrl","src","changeFavicon","size","addIcon","getCommands","BookCommands","preventDefault","dataTransfer","items","getAsFile","focused","tagName","ctrlMeta","ctrlKey","metaKey","shiftKey","prevProps","prevState","snapshot","activeController","mainToolbarItems","EditorMainToolbar","sideBar","EditorControls","onAddIcon","s","onRemoveIcon","onGoToIcon","onDragOver","handleDragOver","onDrop","handleDrop","ToolbarView","sideClassNames","DockView","side","sideView","IconEditor","controller","BookPreviews","onIconSelected","onIconDelete","controllers","previews","currentController","sizeOf","itemId","find","sortedPreviews","sort","a","b","compareSize","PreviewPanel","selected","onActivate","handleSelected","onDelete","CanvasView","containerRef","createRef","canvasRef","canvasSize","_cursor","resizer","updateCanvasSize","mouseUpCatcher","mouseUp","keyDownCatcher","keyDown","keyUpCatcher","keyUp","clientX","clientY","current","bounds","Rectangle","fromDOMRect","getBoundingClientRect","makePt","left","top","rect","width","height","pointingGestureStart","point","canvasPoint","touch","adoptCursor","pointingGestureEnd","pointingGestureMove","cursor","touches","t","stopPropagation","ignoreKey","context","getContext","draw","requestAnimationFrame","ref","onMouseDown","mouseDown","onMouseMove","mouseMove","onTouchStart","touchStart","onTouchMove","touchMove","onTouchEnd","touchEnd","ColorReplacer","colorPicker","colorToReplace","colorHovering","onCancel","selectedColor","onColorPreview","lastSelected","equals","onColorSelected","lastHover","onOldColorPicked","Color","black","onStart","fromInt8Array","backgroundColor","cssRgba","Separator","ColorPicker","color","colorPicked","colorFromColorPicker","cancelColorPicker","confirmChange","toUpperCase","useOf","startColorPicker","ColorUsageReport","report","buildReport","palette","colors","fromTupleInt8","hexRgba","message","fromHex","palMatch","tuple","hex","entry","getTextReport","ClipboardService","systemCopyText","showAll","fullCount","swapShowAll","copyReportToClipboard","ContainerPanel","cn","classNames","children","format","downloadAs","EditorControlsSelection","EditorControlsEraser","EditorControlsPencil","EditorControlsFlood","EditorControlsPalette","EditorControlsDither","currentId","Expando","title","MenuItem","toolComponent","download","adjust","apply","contrast","brightness","kernel","serpentine","updateAdjustments","Range","min","max","onChange","commandBrightness","commandContrast","PaletteExpando","onPaletteChanged","p","commandSetPalette","onPaletteReset","commandResetPalette","round","commandDitheringKernel","commandDitheringSerpentine","commandApplyAdjustments","colorReplaceStart","colorReplaceCancel","colorReplaceSelectOld","colorReplaceSelectNew","colorReplaceConfirm","composingPalette","selectionMove","dragMode","clearSelection","deleteSelection","cropToSelection","doc","ItemGroup","selectedIndex","commandSelectionMove","commandClearSelection","commandDeleteSelection","commandCrop","cmd","undoCount","redoCount","face","disabled","commandReview","commandUsePaletteComposer","commandUseDither","getItems","itemsCenter","unnamed","prompt","PaletteService","upsert","setPalette","paletteItems","btnReturn","resetPalette","unsaved","savePalette","PaletteManager","paletteChanged","palColor","swatch","hexRgb","addMode","native","dismissAddColor","colorToAdd","colorToAddName","addColor","getAll","palettes","pal","alert","codeMode","paletteCode","save","parse","String","addSelectedColor","refreshPalette","startEyedropper","paletteContent","endCodeMode","Clickable","startAddMode","startEyedropperAdd","startCodeMode","natives","palettePreview","white","Math","level","ceil","alt","previewCanvas","reviewCanvas","sampleSize","startCorner","mode","previewSize","scaleToContain","reviewer","IconReviewer","updateCanvasesGraphics","renderer","ReviewRenderer","drawPreviewCanvas","drawReviewCanvas","destCx","GraphicsMemoryError","renderPreview","renderReview","reviewSize","move","forceUpdate","loadPalettes","navigate","dismiss","parentElement","topItems","topItemsFar","sideItems","selectPalette","sampleSprite","setupItems","v","setSampleSize","setStartCorner","reviewItems","mainContent","itemsFar","ClickDismiss","eventName","stack","preventNext","stopImmediatePropagation","popAndExecute","m","idReminder","pop","unregister","mouseup","InvalidColorFormatError","g","hexColor","match","hexParsable","toDecimal","parseInt","h","f","q","floor","offset","array","tupleInt8","alpha","rr","gg","bb","diff","diff_c","FocusStackHandler","commit","KeyCaptureStackHandler","execute","instance","x","y","sqrt","pow","container","scalable","wOriented","hOriented","right","bottom","rects","union","withLocation","horizontal","vertical","fromLTRB","north","northEast","east","southEast","south","southWest","west","northWest","rectangle","thisX","thisY","thisW","thisH","rectX","rectY","rectW","rectH","xOffset","yOffset","location","center","matchMedia","matches","Uuid","random","stringValue","crypto","getRandomValues","Uint8ClampedArray","_","args","thing","prop","escapeKeyDismissId","clickDismissId","buttonRef","activate","showDropDown","hideDropDown","keyDownHide","keyDownShow","keyDownActivate","keyPass","dropDownVisible","register","DOMRect","chevron","useChevron","Icon","label","menu","MenuOverlay","refRect","onDismissSignal","tags","tabProp","split","onKeyDown","mouseEnter","mouseLeave","avoidHover","isHovered","classTags","isSelected","onMouseEnter","onMouseLeave","BG_COLOR_A","BG_COLOR_B","ColorPickerFields","dataUrlFrom","imageData","ImageData","canvas","cx","putImageData","toDataURL","focus","txtHex","txtR","txtG","txtB","txtA","currentColor","selectedHue","hsv","hue","updateColor","fromHsv","withAlpha","satValue","keyValue","sat","where","txt","getInput","handleChange","prev","cur","getInputValueFor","syncInputValues","satImg","z","j","createSaturationPattern","hueHandleStyle","background","hueContainerStyle","backgroundImage","hueBar","backgroundSize","satContainerStyle","alphaContainerStyle","bgPattern","swatchBgStyle","swatchStyle","direction","containerStyle","updateSatLight","handleStyle","updateHue","updateAlpha","arrayColors","fill","foo","flatArrayColors","createHuePattern","lineOfA","lineOfB","rowA","rowB","chunkA","chunkB","BG_SQ_SIZE","createBgPattern","Children","cloneElement","classTag","showOverlay","hideOverlay","mouseActivate","sendDismissSignal","sendDismissSingleSignal","sendSelectSignal","preventNextEvent","onClose","onOpen","selectedClass","propsWithIcon","assign","isActivated","isOpen","parentMenuItem","onDismissSingleSignal","onSelectSignal","handleRef","dragging","handleOffset","mouseMoveHandler","mouseUpHandler","touchMoveHandler","touchEndHandler","capture","handle","boundingRects","maxSpace","curSpace","passive","clearWindowHandlers","refsReady","updateHandleOffset","handleOffsetX","handleOffsetY","valueFromRects","v2d","avail","rawValue","handleOffsetFromValue","value2d","updateHandleForValue","handleMouseDown","handleTouchStart","sideCss","mainCss","containerClassNames","separators","overlayRef","setOpenItem","isActivationKey","cancelAndDo","keyCaptureId","selectNext","selectPrev","openCurrentIndex","activatedIndex","openIndex","childCount","view","innerWidth","innerHeight","newRectangle","clone","withRight","withBottom","st","correctPosition","menuItem","setNoOpenItem","closeOpenedIndex","setSelectedItem","parent","Blob","buffer","blob","writeBuffer","arrayBuffer","buff","writeUint8Clamped","set","oldLink","link","rel","createIconController","updatePreviews","IconCanvasController","docChanged","updatePreview","documentSubmitted","documentChanged","preview","getPreview","skipUpdate","newIcon","icoFile","dir","fromIcoBlob","addIcons","saveIcons","Promise","uuid","MIME_PNG","ClipboardEmptyError","mime","systemCopyBlob","systemPasteBlob","reject","ctorName","ctor","navigator","clipboard","write","writeText","read","types","indexOf","getType","ICONS_STORAGE_KEY","binToString","bin","ch","stringToBin","str","nmb","charAt","localStorage","setItem","serializeIcons","getItem","NoTransactionError","TransactionInProgressError","UnsavedChangesError","_currentTransaction","_hasChanges","_pristine","undoStack","redoStack","_document","documentState","setDocument","begin","_tool","previewBounds","empty","previewPixelSize","pointToData","picker","_colorPicker","selectionSprite","resolve","asBlobWithMime","copyBlob","selectionBuffer","NoSelectionError","transact","cloneDocument","pasteBlob","asIcoBlob","URL","createObjectURL","sprite","fromFile","pasteSprite","newDoc","containerRec","spriteRect","centerAt","blend","pixel","contains","deflate","pointToPixel","pixelToData","colorFromPoint","cvBounds","previewArea","clearRect","pixelLength","IconDocumentRenderer","deactivate","Editor","UNVISITED","VISITED","original","sample","wh","hotspot","tintRegion","transparent","updateSampleSprite","imgX","imgY","sampleIndex","imgIndex","region","sIndex","originalColor","compositeColor","copyToUint8","cardinalPoint","superSample","inflate","curImgX","curImgY","arrIndex","curIndex","foreground","dR","dG","dB","dA","sR","sG","sB","sA","rR","rG","rB","rA","MemoryError","asImageData","asCanvas","toBlob","composer","BlobComposer","pngBlobs","pngBlobSum","writeInt16LE","pngBlob","dataOffset","writeInt32LE","writeBlob","getBlob","iconCount","readInt16LE","dirEntryStart","dirEntry","dataSize","readInt32LE","image","ImageService","fromImage","model","getImageData","region32","newSize","naturalWidth","naturalHeight","resize","contain","allowScaleUp","actual","contained","onPixel","spriteOffset","InvalidRegionError","bufferIndex","spriteIndex","delta","factor","limit","kernelIndex","names","nearestBuffer","Map","nearest","originInt","has","get","distance","Number","MAX_SAFE_INTEGER","getPixel","setPixel","FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite","xEnd","r1","g1","b1","r2","g2","b2","er","eg","eb","end","x1","y1","d","r3","g3","b3","REDUCE_MARGIN","reader","FileReader","readEvent","img","Image","InvalidImageError","FileError","readAsDataURL","reducedSize","drawImage","resample","srcW","srcH","destW","destH","data2","ratio_w","ratio_h","ratio_w_half","ratio_h_half","x2","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","center_y","yy","dy","abs","center_x","w0","xx","dx","PALETTES_STORAGE_KEY","version","validateVersion","findIndex","NoClipboardAccessError","rollback","changed","lastProps","ImageAdjustService","dither","origin","visited","counter","batch","insideArray","matchesColor","currentTransaction","oldColor","newColor","old","drawing","newState","drawAt","selecting","dragOffset","startPixel","_dragMode","fromIcon","selectRegion","moveSelection","spriteW","spriteH","implicitX","implicitY","clipOutSelection","fromSize","pixelIsInsideSelection","saveDragOffset","selectionDragEnded","dragEnded","updateSelRegion","updateDrag","offsetSelection","dark","darkModeOn","GRID_OUT","GRID_LIGHT","CHECKER_EVEN","CHECKER_ODD","PLATE_BG","plateBounds","drawBackground","drawGrid","pixelsBuffer","pixelsContext","checkerCanvas","localCx","CHECKER_SIZE","isTransparent","fillStyle","fillRect","createPattern","radius","ctx","tl","tr","br","bl","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","lines","line","pixelSize","getPixelsBuffer","imageSmoothingEnabled","strokeStyle","stroke","pathLines","northSegment","eastSegment","southSegment","westSegment","pattern","getPattern","selection","selBounds","clock","clockReminder","MarchingAnts","pathRoundRect","renderChecker","renderPixels","renderGrid","renderSelection","color1","color2","step","lineWidthBuffer","lineWidth","fives","setLineDash","marchingAntsMarker","contentBounds","focusRegion","na","nb","sa","sb","wa","wb","ea","colorName","measure","measureText","txtSize","actualBoundingBoxDescent","txtBounds","relativeLuminance","font","fillText","row","col","pixelBounds","drawCode","sourceCanvas","sampleW","sampleH","focusSize","focusLocation","currentHotspot","fromPoint","withSize","reviewImage","graphicSize","drawColorCodes","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","definition","defineProperty","enumerable","hasOwnProperty","toStringTag"],"mappings":"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","file":"main.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./icons/book.svg\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./icons/bucket.svg\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"./icons/circle-back-large-white.svg\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"./icons/circle-check.svg\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"./icons/circle-arrow-up.svg\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"./icons/circle-arrow-down.svg\";\nimport ___CSS_LOADER_URL_IMPORT_6___ from \"./icons/circle-arrow-left.svg\";\nimport ___CSS_LOADER_URL_IMPORT_7___ from \"./icons/circle-arrow-right.svg\";\nimport ___CSS_LOADER_URL_IMPORT_8___ from \"./icons/checker.svg\";\nimport ___CSS_LOADER_URL_IMPORT_9___ from \"./icons/code-file.svg\";\nimport ___CSS_LOADER_URL_IMPORT_10___ from \"./icons/copy.svg\";\nimport ___CSS_LOADER_URL_IMPORT_11___ from \"./icons/cut.svg\";\nimport ___CSS_LOADER_URL_IMPORT_12___ from \"./icons/dismiss.svg\";\nimport ___CSS_LOADER_URL_IMPORT_13___ from \"./icons/ellipsis.svg\";\nimport ___CSS_LOADER_URL_IMPORT_14___ from \"./icons/eraser.svg\";\nimport ___CSS_LOADER_URL_IMPORT_15___ from \"./icons/eye.svg\";\nimport ___CSS_LOADER_URL_IMPORT_16___ from \"./icons/eyedropper.svg\";\nimport ___CSS_LOADER_URL_IMPORT_17___ from \"./icons/equalizer.svg\";\nimport ___CSS_LOADER_URL_IMPORT_18___ from \"./icons/floppy.svg\";\nimport ___CSS_LOADER_URL_IMPORT_19___ from \"./icons/grid.svg\";\nimport ___CSS_LOADER_URL_IMPORT_20___ from \"./icons/gradient.svg\";\nimport ___CSS_LOADER_URL_IMPORT_21___ from \"./icons/minus.svg\";\nimport ___CSS_LOADER_URL_IMPORT_22___ from \"./icons/paste.svg\";\nimport ___CSS_LOADER_URL_IMPORT_23___ from \"./icons/palette.svg\";\nimport ___CSS_LOADER_URL_IMPORT_24___ from \"./icons/pencil.svg\";\nimport ___CSS_LOADER_URL_IMPORT_25___ from \"./icons/plus.svg\";\nimport ___CSS_LOADER_URL_IMPORT_26___ from \"./icons/redo.svg\";\nimport ___CSS_LOADER_URL_IMPORT_27___ from \"./icons/return.svg\";\nimport ___CSS_LOADER_URL_IMPORT_28___ from \"./icons/select.svg\";\nimport ___CSS_LOADER_URL_IMPORT_29___ from \"./icons/undo.svg\";\nimport ___CSS_LOADER_URL_IMPORT_30___ from \"./icons/corners.svg\";\nimport ___CSS_LOADER_URL_IMPORT_31___ from \"./icons/crop.svg\";\nimport ___CSS_LOADER_URL_IMPORT_32___ from \"./icons/full-frame.svg\";\nimport ___CSS_LOADER_URL_IMPORT_33___ from \"./icons/grid-crossed.svg\";\nimport ___CSS_LOADER_URL_IMPORT_34___ from \"./icons/image.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\nvar ___CSS_LOADER_URL_REPLACEMENT_9___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_9___);\nvar ___CSS_LOADER_URL_REPLACEMENT_10___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_10___);\nvar ___CSS_LOADER_URL_REPLACEMENT_11___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_11___);\nvar ___CSS_LOADER_URL_REPLACEMENT_12___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_12___);\nvar ___CSS_LOADER_URL_REPLACEMENT_13___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_13___);\nvar ___CSS_LOADER_URL_REPLACEMENT_14___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_14___);\nvar ___CSS_LOADER_URL_REPLACEMENT_15___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_15___);\nvar ___CSS_LOADER_URL_REPLACEMENT_16___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_16___);\nvar ___CSS_LOADER_URL_REPLACEMENT_17___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_17___);\nvar ___CSS_LOADER_URL_REPLACEMENT_18___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_18___);\nvar ___CSS_LOADER_URL_REPLACEMENT_19___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_19___);\nvar ___CSS_LOADER_URL_REPLACEMENT_20___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_20___);\nvar ___CSS_LOADER_URL_REPLACEMENT_21___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_21___);\nvar ___CSS_LOADER_URL_REPLACEMENT_22___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_22___);\nvar ___CSS_LOADER_URL_REPLACEMENT_23___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_23___);\nvar ___CSS_LOADER_URL_REPLACEMENT_24___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_24___);\nvar ___CSS_LOADER_URL_REPLACEMENT_25___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_25___);\nvar ___CSS_LOADER_URL_REPLACEMENT_26___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_26___);\nvar ___CSS_LOADER_URL_REPLACEMENT_27___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_27___);\nvar ___CSS_LOADER_URL_REPLACEMENT_28___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_28___);\nvar ___CSS_LOADER_URL_REPLACEMENT_29___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_29___);\nvar ___CSS_LOADER_URL_REPLACEMENT_30___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_30___);\nvar ___CSS_LOADER_URL_REPLACEMENT_31___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_31___);\nvar ___CSS_LOADER_URL_REPLACEMENT_32___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_32___);\nvar ___CSS_LOADER_URL_REPLACEMENT_33___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_33___);\nvar ___CSS_LOADER_URL_REPLACEMENT_34___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_34___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-icon.icon-book{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-icon.icon-bucket{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.ui-icon.icon-circle-back-large-white{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.ui-icon.icon-circle-check{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.ui-icon.icon-circle-arrow-up{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.ui-icon.icon-circle-arrow-down{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.ui-icon.icon-circle-arrow-left{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.ui-icon.icon-circle-arrow-right{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}.ui-icon.icon-checker{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \")}.ui-icon.icon-code-file{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \")}.ui-icon.icon-copy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_10___ + \")}.ui-icon.icon-cut{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_11___ + \")}.ui-icon.icon-dismiss{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_12___ + \")}.ui-icon.icon-ellipsis{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_13___ + \")}.ui-icon.icon-eraser{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_14___ + \")}.ui-icon.icon-eye{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_15___ + \")}.ui-icon.icon-eyedropper{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_16___ + \")}.ui-icon.icon-equalizer{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_17___ + \")}.ui-icon.icon-floppy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_18___ + \")}.ui-icon.icon-grid{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_19___ + \")}.ui-icon.icon-gradient{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_20___ + \")}.ui-icon.icon-minus{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_21___ + \")}.ui-icon.icon-paste{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_22___ + \")}.ui-icon.icon-palette{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_23___ + \")}.ui-icon.icon-pencil{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_24___ + \")}.ui-icon.icon-plus{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_25___ + \")}.ui-icon.icon-redo{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_26___ + \")}.ui-icon.icon-return{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_27___ + \")}.ui-icon.icon-select{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_28___ + \")}.ui-icon.icon-undo{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_29___ + \")}.ui-icon.icon-select{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_28___ + \")}.ui-icon.icon-corners{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_30___ + \")}.ui-icon.icon-crop{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_31___ + \")}.ui-icon.icon-full-frame{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_32___ + \")}.ui-icon.icon-grid-crossed{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_33___ + \")}.ui-icon.icon-image{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_34___ + \")}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/icons.css\"],\"names\":[],\"mappings\":\"AAAA,mBAAqB,wDAAuC,CAAI,qBACzC,wDAAyC,CAAI,sCAC5B,wDAA0D,CAAI,2BACzE,wDAA+C,CAAI,8BAChD,wDAAkD,CAAI,gCACpD,wDAAoD,CAAI,gCACxD,wDAAoD,CAAI,iCACvD,wDAAqD,CAAI,sBACpE,wDAA0C,CAAI,wBAC5C,wDAA4C,CAAI,mBACrD,yDAAuC,CAAI,kBAC5C,yDAAsC,CAAI,sBACtC,yDAA0C,CAAI,uBAC7C,yDAA2C,CAAI,qBACjD,yDAAyC,CAAI,kBAChD,yDAAsC,CAAI,yBACnC,yDAA6C,CAAI,wBAClD,yDAA4C,CAAI,qBACnD,yDAAyC,CAAI,mBAC/C,yDAAuC,CAAI,uBACvC,yDAA2C,CAAI,oBAClD,yDAAwC,CAAI,oBAC5C,yDAAwC,CAAI,sBAC1C,yDAA0C,CAAI,qBAC/C,yDAAyC,CAAI,mBAC/C,yDAAuC,CAAI,mBAC3C,yDAAuC,CAAI,qBACzC,yDAAyC,CAAI,qBAC7C,yDAAyC,CAAI,mBAC/C,yDAAuC,CAAI,qBACzC,yDAAyC,CAAI,sBAC5C,yDAA0C,CAAI,mBACjD,yDAAuC,CAAI,yBACrC,yDAA6C,CAAI,2BAC/C,yDAA+C,CAAI,oBAC1D,yDAAwC\",\"sourcesContent\":[\".ui-icon.icon-book { background-image: url(\\\"icons/book.svg\\\"); }\\n.ui-icon.icon-bucket { background-image: url(\\\"icons/bucket.svg\\\"); }\\n.ui-icon.icon-circle-back-large-white { background-image: url(\\\"icons/circle-back-large-white.svg\\\"); }\\n.ui-icon.icon-circle-check { background-image: url(\\\"icons/circle-check.svg\\\"); }\\n.ui-icon.icon-circle-arrow-up { background-image: url(\\\"icons/circle-arrow-up.svg\\\"); }\\n.ui-icon.icon-circle-arrow-down { background-image: url(\\\"icons/circle-arrow-down.svg\\\"); }\\n.ui-icon.icon-circle-arrow-left { background-image: url(\\\"icons/circle-arrow-left.svg\\\"); }\\n.ui-icon.icon-circle-arrow-right { background-image: url(\\\"icons/circle-arrow-right.svg\\\"); }\\n.ui-icon.icon-checker { background-image: url(\\\"icons/checker.svg\\\"); }\\n.ui-icon.icon-code-file { background-image: url(\\\"icons/code-file.svg\\\"); }\\n.ui-icon.icon-copy { background-image: url(\\\"icons/copy.svg\\\"); }\\n.ui-icon.icon-cut { background-image: url(\\\"icons/cut.svg\\\"); }\\n.ui-icon.icon-dismiss { background-image: url(\\\"icons/dismiss.svg\\\"); }\\n.ui-icon.icon-ellipsis { background-image: url(\\\"icons/ellipsis.svg\\\"); }\\n.ui-icon.icon-eraser { background-image: url(\\\"icons/eraser.svg\\\"); }\\n.ui-icon.icon-eye { background-image: url(\\\"icons/eye.svg\\\"); }\\n.ui-icon.icon-eyedropper { background-image: url(\\\"icons/eyedropper.svg\\\"); }\\n.ui-icon.icon-equalizer { background-image: url(\\\"icons/equalizer.svg\\\"); }\\n.ui-icon.icon-floppy { background-image: url(\\\"icons/floppy.svg\\\"); }\\n.ui-icon.icon-grid { background-image: url(\\\"icons/grid.svg\\\"); }\\n.ui-icon.icon-gradient { background-image: url(\\\"icons/gradient.svg\\\"); }\\n.ui-icon.icon-minus { background-image: url(\\\"icons/minus.svg\\\"); }\\n.ui-icon.icon-paste { background-image: url(\\\"icons/paste.svg\\\"); }\\n.ui-icon.icon-palette { background-image: url(\\\"icons/palette.svg\\\"); }\\n.ui-icon.icon-pencil { background-image: url(\\\"icons/pencil.svg\\\"); }\\n.ui-icon.icon-plus { background-image: url(\\\"icons/plus.svg\\\"); }\\n.ui-icon.icon-redo { background-image: url(\\\"icons/redo.svg\\\"); }\\n.ui-icon.icon-return { background-image: url(\\\"icons/return.svg\\\"); }\\n.ui-icon.icon-select { background-image: url(\\\"icons/select.svg\\\"); }\\n.ui-icon.icon-undo { background-image: url(\\\"icons/undo.svg\\\"); }\\n.ui-icon.icon-select { background-image: url(\\\"icons/select.svg\\\"); }\\n.ui-icon.icon-corners { background-image: url(\\\"icons/corners.svg\\\"); }\\n.ui-icon.icon-crop { background-image: url(\\\"icons/crop.svg\\\"); }\\n.ui-icon.icon-full-frame { background-image: url(\\\"icons/full-frame.svg\\\"); }\\n.ui-icon.icon-grid-crossed { background-image: url(\\\"icons/grid-crossed.svg\\\"); }\\n.ui-icon.icon-image { background-image: url(\\\"icons/image.svg\\\"); }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-button-wrap{display:inline-flex;align-items:stretch}.ui-button-wrap.split>.split-part>.ui-icon.size-8{margin-left:0}.ui-button{display:inline-flex;align-items:center;padding:0.6em}.ui-button>.ui-icon.size-8{margin-left:0.6em}.ui-color-picker>.layer.slider-2d .ui-range .handle,.ui-color-picker>.layer.slider-1d .ui-range .handle,.ui-color-picker>.layer.slider-alpha .ui-range .handle{width:8px;height:8px;border:solid 1px silver;background:white}.ui-color-picker>.layer.slider-2d .ui-range .handle:before,.ui-color-picker>.layer.slider-1d .ui-range .handle:before,.ui-color-picker>.layer.slider-alpha .ui-range .handle:after{content:'.';color:transparent;width:40px;height:40px;background:rgba(127,127,127,0.2);position:absolute;border-radius:100%;top:-16px;left:-16px}.ui-color-picker .swatch{display:block;height:20px}.ui-color-picker>.layer{margin:10px 0}.ui-color-picker>.layer:first-child{margin-top:0}.ui-color-picker>.layer:last-child{margin-bottom:0}.ui-color-picker>.layer.swatch{border-radius:5px;overflow:hidden;border:none;height:40px}.ui-color-picker>.layer.swatch .swatch{height:40px}.ui-color-picker>.layer.slider-2d .ui-range{height:100px;background-size:100% 100px;background-repeat:no-repeat;border-radius:5px;border:none}.ui-color-picker>.layer.slider-1d .ui-range{border:none;border-radius:5px;height:10px;margin:30px 0}.ui-color-picker>.layer.slider-alpha .ui-range{border:none;height:10px;margin:30px 0;background-color:transparent;background-size:contain;background-repeat:repeat}.ui-color-picker>.layer.slider-alpha .ui-range:before{content:'.';color:transparent;position:absolute;left:0;top:0;right:0;bottom:0;background:linear-gradient(90deg, rgba(255,255,255,0) 0%, #fff 100%);border-radius:5px}.ui-color-picker>.layer.inputs{display:flex}.ui-color-picker>.layer.inputs .item{flex-shrink:3;text-align:center}.ui-color-picker>.layer.inputs .item.hex{flex-shrink:1}.ui-color-picker>.layer.inputs .item .label{margin:10px 0}.ui-color-picker>.layer.inputs .item input{width:70%;text-align:center}.ui-clickable:not(.disabled){cursor:pointer}.ui-clickable.disabled{opacity:0.3}.ui-icon{background:center center no-repeat;background-size:100% 100%}.ui-icon.size-8{width:8px;height:8px}.ui-icon.size-16{width:16px;height:16px}.ui-icon.size-20{width:20px;height:20px}.ui-icon.size-32{width:32px;height:32px}.ui-icon.size-50{width:50px;height:50px}.ui-item-group{display:inline-flex;overflow:hidden;align-items:stretch}.ui-label.with-icon{display:flex}.ui-label.with-icon .ui-icon{margin-right:0.5em;margin-top:0.2em}.ui-label .desc{opacity:50%}.ui-separator{position:relative;height:1em}.ui-separator::after{display:block;position:absolute;content:'.';color:transparent;left:0;right:0;top:50%;height:1px}.ui-textbox{display:inline-flex;position:relative;border:solid 1px WindowFrame;background-color:white}.ui-textbox input{border:none;background-color:white}.ui-textbox input:focus{outline:none}.ui-menuitem{position:relative;display:flex;align-items:center;padding:0.6em;cursor:pointer}.ui-menuitem .ui-icon.icon-chevron-right{position:absolute;right:0.6em}.ui-menuitem .ui-label{padding-right:25px}.ui-tree-item{display:flex;padding:0.6em;align-items:center;cursor:pointer}.ui-tree-item>.collapse-glyph{margin-right:0.6em}.ui-range{height:40px;border-radius:20px;background:#f0f0f0;background-size:contain;position:relative}.ui-range .handle{position:absolute;width:40px;height:40px;border-radius:100%;background:Highlight}.ui-dock-view,.ui-dock-view>.dock-side,.ui-dock-view>.main-side{position:absolute;top:0;left:0;right:0;bottom:0}.ui-dock-view .dock-side,.ui-dock-view>.main-side{overflow:auto}.ui-dock-view.side-left>.dock-side{right:auto}.ui-dock-view.side-top>.dock-side{bottom:auto}.ui-dock-view.side-right>.dock-side{left:auto}.ui-dock-view.side-bottom>.dock-side{top:auto}.ui-split-view.side-left>.dock-side{border-right-style:solid;border-right-width:1px}.ui-split-view.side-top>.dock-side{border-bottom-style:solid;border-bottom-width:1px}.ui-split-view.side-right>.dock-side{border-left-style:solid;border-left-width:1px}.ui-split-view.side-bottom>.dock-side{border-top-style:solid;border-top-width:1px}.ui-tab-view>.tabs>.items>.tab{padding-left:2em;padding-right:2em}.ui-tree-view{position:absolute;top:0;left:0;right:0;bottom:0}.ui-toolbar-view>.toolbar{display:flex;justify-content:space-between}.ui-toolbar-view>.toolbar>.items{display:flex;align-items:stretch}.ui-toolbar-view>.content{flex-grow:1;overflow:auto}.ui-toolbar-view.side-left>.toolbar,.ui-toolbar-view.side-right>.toolbar{flex-direction:column}.ui-toolbar-view.side-left>.toolbar>.items,.ui-toolbar-view.side-right>.toolbar>.items{flex-direction:column}.ui-menu-overlay{min-width:100px;box-shadow:3px 3px 3px rgba(0,0,0,0.3);z-index:10000}.ui-suggestions-overlay{background-color:Menu}.ui-suggestions-overlay .ui-clickable,.ui-suggestions-overlay .ui-loader{padding:0.6em}.ui-overlay{position:fixed;z-index:10000}.ui-clickable.is-open{background-color:Highlight;color:HighlightText}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:Highlight;color:HighlightText}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:Highlight;color:HighlightText}.ui-menu-overlay,.ui-suggestions-overlay{background-color:Window;color:WindowText;border:solid 1px #ddd;box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.ui-separator:after{background-color:rgba(0,0,0,0.13)}.ui-item-group{border:solid 1px #ddd;border-radius:0.5em}.ui-item-group>.ui-clickable.selected:not(.disabled){background-color:#ddd}.ui-split-view>.dock-side{border-color:#ddd}.ui-tab-view>.tabs{background-color:#ddd}.ui-tab-view>.tabs>.items>.tab{margin-top:0.6em}.ui-tab-view>.tabs>.items>.selected{background-color:white}.ui-tree-view:focus .ui-tree-item.selected{background-color:Highlight;color:HighlightText}.ui-tree-item.selected{background-color:#f0f0f0;color:HighlightText}.ui-tree-item:not(.selected):hover{background-color:#E3EFFE}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/items/Button.scss\",\"webpack://./src/hui/items/ColorPicker.scss\",\"webpack://./src/hui/items/Clickable.scss\",\"webpack://./src/hui/items/Icon.scss\",\"webpack://./src/hui/items/ItemGroup.scss\",\"webpack://./src/hui/items/Label.scss\",\"webpack://./src/hui/items/Separator.scss\",\"webpack://./src/hui/items/TextBox.scss\",\"webpack://./src/hui/items/MenuItem.scss\",\"webpack://./src/hui/items/TreeItem.scss\",\"webpack://./src/hui/items/Range.scss\",\"webpack://./src/hui/layout/DockView.scss\",\"webpack://./src/hui/layout/SplitView.scss\",\"webpack://./src/hui/layout/TabView.scss\",\"webpack://./src/hui/layout/TreeView.scss\",\"webpack://./src/hui/layout/ToolbarView.scss\",\"webpack://./src/hui/overlays/MenuOverlay.scss\",\"webpack://./src/hui/overlays/SuggestionsOverlay.scss\",\"webpack://./src/hui/overlays/Overlay.scss\",\"webpack://./src/hui/css/theme.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".ui-button-wrap{\\n  display: inline-flex;\\n  align-items: stretch;\\n\\n  &.split {\\n    > .split-part {\\n      > .ui-icon.size-8 {\\n        margin-left: 0;\\n      }\\n    }\\n  }\\n}\\n\\n.ui-button{\\n  display: inline-flex;\\n  align-items: center;\\n  padding: 0.6em;\\n\\n  > .ui-icon.size-8{\\n    margin-left: 0.6em;\\n  }\\n}\",\".ui-color-picker{\\n\\n  $slider-height: 10px;\\n  $slider-margin: 30px 0;\\n  $handle-margin-top: -14px;\\n  $layer-border: none; //solid 1px #808080;\\n  $layer-border-radius: 5px;\\n  $swatch-height: 40px;\\n\\n  %handle{\\n    width: 8px;\\n    height: 8px;\\n    border: solid 1px silver;\\n    background: white;\\n  }\\n\\n  %handleAura{\\n    content: '.';\\n    color: transparent;\\n    width: 40px;\\n    height: 40px;\\n    background: rgba(127, 127, 127, 0.2);\\n    position: absolute;\\n    border-radius: 100%;\\n    top: -16px;\\n    left: -16px;\\n  }\\n\\n  .swatch{\\n    display: block;\\n    height: 20px;\\n  }\\n\\n  > .layer{\\n    margin: 10px 0;\\n\\n    &:first-child{ margin-top: 0; }\\n    &:last-child{ margin-bottom: 0; }\\n\\n    &.swatch{\\n\\n      border-radius: $layer-border-radius;\\n      overflow: hidden;\\n      border: $layer-border;\\n      height: $swatch-height;\\n      .swatch{\\n        height: $swatch-height;\\n      }\\n    }\\n\\n    &.slider-2d{\\n      .ui-range{\\n        height: 100px;\\n        background-size: 100% 100px;\\n        background-repeat: no-repeat;\\n        border-radius: $layer-border-radius;\\n        border: $layer-border;\\n        .handle{\\n          @extend %handle;\\n          &:before{ @extend %handleAura; }\\n        }\\n      }\\n    }\\n\\n    &.slider-1d{\\n      .ui-range{\\n        border: $layer-border;\\n        border-radius: $layer-border-radius;\\n        height: $slider-height;\\n        margin: $slider-margin;\\n        .handle{\\n          @extend %handle;\\n          &:before{ @extend %handleAura; }\\n        }\\n      }\\n    }\\n\\n    &.slider-alpha{\\n      .ui-range{\\n        border: $layer-border;\\n        height: $slider-height;\\n        margin: $slider-margin;\\n        background-color: transparent;\\n        background-size: contain;\\n        background-repeat: repeat;\\n        .handle{\\n          @extend %handle;\\n          &:after{ @extend %handleAura; }\\n        }\\n        &:before{\\n          content: '.'; color: transparent;\\n          position: absolute;\\n          left: 0; top: 0; right: 0; bottom: 0;\\n          background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);\\n          border-radius: $layer-border-radius;\\n        }\\n      }\\n    }\\n    &.inputs{\\n      display: flex;\\n      .item{\\n        flex-shrink: 3;\\n        text-align: center;\\n\\n        &.hex{\\n          flex-shrink: 1;\\n        }\\n        .label{\\n          margin: 10px 0;\\n        }\\n\\n        input{\\n          width: 70%;\\n          text-align: center;\\n        }\\n      }\\n    }\\n  }\\n\\n}\",\".ui-clickable{\\n\\n  &:not(.disabled){\\n    cursor: pointer;\\n  }\\n\\n  &.disabled{\\n    opacity: 0.3;\\n  }\\n\\n  &.is-open,&:hover{\\n\\n  }\\n}\",\".ui-icon {\\n  background: center center no-repeat;\\n  background-size: 100% 100%;\\n\\n  &.size-8 { width: 8px;  height: 8px;  }\\n  &.size-16{ width: 16px; height: 16px; }\\n  &.size-20{ width: 20px; height: 20px; }\\n  &.size-32{ width: 32px; height: 32px; }\\n  &.size-50{ width: 50px; height: 50px; }\\n\\n}\\n\",\".ui-item-group{\\n  display: inline-flex;\\n  overflow: hidden;\\n  align-items: stretch;\\n}\",\".ui-label{\\n\\n  &.with-icon{\\n    display: flex;\\n    //align-items: center;\\n\\n    .ui-icon{\\n      margin-right: 0.5em;\\n      margin-top: 0.2em;\\n    }\\n  }\\n\\n  .desc{\\n    opacity: 50%;\\n  }\\n}\\n\",\".ui-separator{\\n  position: relative;\\n  height: 1em;\\n\\n  &::after{\\n    display: block;\\n    position: absolute;\\n    content: '.';\\n    color: transparent;\\n    left: 0;\\n    right: 0;\\n    top: 50%;\\n    height: 1px;\\n  }\\n}\",\".ui-textbox {\\n  display: inline-flex;\\n  position: relative;\\n  border: solid 1px WindowFrame;\\n  background-color: white;\\n\\n  input{\\n    border: none;\\n    background-color: white;\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n}\",\".ui-menuitem{\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 0.6em;\\n  cursor: pointer;\\n\\n\\n  &.is-open,&:hover{\\n    /* Colors */\\n  }\\n\\n  .ui-icon.icon-chevron-right{\\n    position: absolute;\\n    right: 0.6em;\\n  }\\n\\n  .ui-label{\\n    padding-right: 25px; // Based on a 16px icon to be positioned as chevron to the right\\n  }\\n}\",\".ui-tree-item{\\n  display: flex;\\n  padding: 0.6em;\\n  align-items: center;\\n  cursor: pointer;\\n\\n  > .collapse-glyph {\\n    margin-right: 0.6em;\\n  }\\n}\\n\\n.tree-item-children{\\n}\",\".ui-range{\\n\\n  height: 40px;\\n  border-radius: 20px;\\n  background: #f0f0f0;\\n  background-size: contain;\\n  position: relative;\\n\\n  .handle{\\n    position: absolute;\\n    width: 40px;\\n    height: 40px;\\n    border-radius: 100%;\\n    background: Highlight;\\n  }\\n\\n}\",\".ui-dock-view{\\n\\n  &, > .dock-side, > .main-side{\\n    position: absolute;\\n    top:0;\\n    left:0;\\n    right: 0;\\n    bottom:0;\\n  }\\n\\n  .dock-side, > .main-side {\\n    overflow: auto;\\n  }\\n\\n  &.side-left   > .dock-side{ right:  auto; }\\n  &.side-top    > .dock-side{ bottom: auto; }\\n  &.side-right  > .dock-side{ left:   auto; }\\n  &.side-bottom > .dock-side{ top:    auto; }\\n}\",\".ui-split-view{\\n\\n  &.side-left > .dock-side{   border-right-style: solid; border-right-width: 1px; }\\n  &.side-top > .dock-side{    border-bottom-style: solid; border-bottom-width: 1px; }\\n  &.side-right > .dock-side{  border-left-style: solid; border-left-width: 1px; }\\n  &.side-bottom > .dock-side{ border-top-style: solid; border-top-width: 1px; }\\n}\",\".ui-tab-view{\\n  > .tabs{\\n    > .items > .tab{\\n      padding-left: 2em;\\n      padding-right: 2em;\\n    }\\n  }\\n\\n}\",\".ui-tree-view{\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\",\".ui-toolbar-view{\\n\\n  > .toolbar{\\n    display: flex;\\n    justify-content: space-between;\\n\\n    > .items{\\n      display: flex;\\n      align-items: stretch;\\n    }\\n  }\\n\\n  > .content{\\n    flex-grow: 1;\\n    overflow: auto;\\n  }\\n\\n  &.side-left, &.side-right{\\n    > .toolbar{\\n      flex-direction: column;\\n\\n      > .items{\\n        flex-direction: column;\\n      }\\n    }\\n  }\\n\\n}\",\".ui-menu-overlay {\\n  min-width: 100px;\\n  box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.3);\\n  z-index: 10000;\\n}\",\".ui-suggestions-overlay{\\n  background-color: Menu;\\n\\n  .ui-clickable, .ui-loader{\\n    padding: 0.6em;\\n  }\\n}\",\".ui-overlay{\\n  position: fixed;\\n  z-index: 10000;\\n}\",\"\\n$button-face-hover-bg: Highlight !default;\\n$button-face-hover-fg: HighlightText !default;\\n$button-face-selected-bg: Highlight !default;\\n$button-face-selected-fg: HighlightText !default;\\n$window-bg: Window !default;\\n$window-fg: WindowText !default;\\n$window-border: #ddd !default;\\n$separator: rgba(0, 0, 0, 0.13) !default;\\n\\n.ui-clickable.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n}\\n\\n.ui-button-wrap.split:hover > .ui-button-split-part,\\n.ui-button-wrap.split:hover > .ui-button,\\n.ui-button:hover:not(.face-never):not(.disabled),\\n.ui-clickable.selected:not(.disabled),\\n.ui-button.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n}\\n\\n.ui-menuitem.is-open,\\n.ui-menuitem.is-selected{\\n    background-color: $button-face-selected-bg;\\n    color: $button-face-selected-fg;\\n}\\n\\n.ui-menu-overlay,\\n.ui-suggestions-overlay{\\n    background-color: $window-bg;\\n    color: $window-fg;\\n    border: solid 1px $window-border;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\\n.ui-separator:after{\\n    background-color: $separator;\\n}\\n.ui-item-group{\\n    border: solid 1px $window-border;\\n    border-radius: 0.5em;\\n}\\n\\n.ui-item-group > .ui-clickable.selected:not(.disabled){\\n    background-color: #ddd;\\n}\\n\\n.ui-split-view > .dock-side{ border-color: $window-border;  }\\n\\n.ui-tab-view > .tabs { background-color: #ddd;}\\n.ui-tab-view > .tabs  > .items > .tab {margin-top: 0.6em;}\\n.ui-tab-view > .tabs  > .items > .selected{ background-color: white; }\\n\\n.ui-tree-view:focus .ui-tree-item.selected{\\n    background-color: Highlight;\\n    color: HighlightText;\\n}\\n\\n.ui-tree-item.selected{\\n    background-color: #f0f0f0;\\n    color: HighlightText;\\n}\\n\\n.ui-tree-item:not(.selected):hover{\\n    background-color: #E3EFFE;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./icons/0822-cross2.svg\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./icons/0175-floppy-disk.svg\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"./icons/0180-file-empty.svg\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"./icons/0187-folder.svg\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"./icons/0826-chevron-up.svg\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"./icons/0827-chevron-down.svg\";\nimport ___CSS_LOADER_URL_IMPORT_6___ from \"./icons/0828-chevron-left.svg\";\nimport ___CSS_LOADER_URL_IMPORT_7___ from \"./icons/0829-chevron-right.svg\";\nimport ___CSS_LOADER_URL_IMPORT_8___ from \"../../components/icons/select.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"body{font:caption}.ui-panel>div{margin:50px}.ui-icon.icon-cross{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-icon.icon-floppy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.ui-icon.icon-file{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.ui-icon.icon-folder{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.ui-icon.icon-chevron-up{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.ui-icon.icon-chevron-down{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.ui-icon.icon-chevron-left{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.ui-icon.icon-chevron-right{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}.ui-icon.icon-select{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \")}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/css/styles.css\"],\"names\":[],\"mappings\":\"AAAA,KACI,YAAa,CAChB,cAGG,WAAY,CAEf,oBAEqB,wDAA8C,CAAI,qBACjD,wDAAmD,CAAI,mBACzD,wDAAkD,CAAI,qBACpD,wDAA8C,CAAI,yBAC9C,wDAAkD,CAAI,2BACpD,wDAAoD,CAAI,2BACxD,wDAAoD,CAAI,4BACvD,wDAAqD,CAAI,qBAChE,wDAA0D\",\"sourcesContent\":[\"body{\\n    font: caption;\\n}\\n\\n.ui-panel > div {\\n    margin: 50px;\\n    /*box-shadow: 0 0 0 3px blue;*/\\n}\\n\\n.ui-icon.icon-cross { background-image: url(\\\"icons/0822-cross2.svg\\\"); }\\n.ui-icon.icon-floppy { background-image: url(\\\"icons/0175-floppy-disk.svg\\\"); }\\n.ui-icon.icon-file { background-image: url(\\\"icons/0180-file-empty.svg\\\"); }\\n.ui-icon.icon-folder { background-image: url(\\\"icons/0187-folder.svg\\\"); }\\n.ui-icon.icon-chevron-up { background-image: url(\\\"icons/0826-chevron-up.svg\\\"); }\\n.ui-icon.icon-chevron-down { background-image: url(\\\"icons/0827-chevron-down.svg\\\"); }\\n.ui-icon.icon-chevron-left { background-image: url(\\\"icons/0828-chevron-left.svg\\\"); }\\n.ui-icon.icon-chevron-right { background-image: url(\\\"icons/0829-chevron-right.svg\\\"); }\\n.ui-icon.icon-select { background-image: url(\\\"../../components/icons/select.svg\\\"); }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".backstage-view{position:fixed;top:0;left:0;right:0;bottom:0}.backstage-view>.head{height:150px;display:flex;justify-content:space-between}.backstage-view>.head>.near{display:flex}.backstage-view>.head>.near>.back-button{cursor:pointer;opacity:0.5;width:90px;background-position:center center;background-size:50px 50px;height:100%}.backstage-view>.head>.near>.back-button:hover,.backstage-view>.head>.near>.back-button:focus{opacity:1}.backstage-view>.head>.near>.logo-and-tag-line{margin-top:50px}.backstage-view>.head>.near>.logo-and-tag-line>.logo{font-size:30px}.backstage-view>.head>.near>.logo-and-tag-line>.logo span{opacity:0.8}.backstage-view>.head>.near>.logo-and-tag-line>.tag-line{opacity:0.4;margin-top:-15px}.backstage-view>.head .far{height:100%;display:flex;flex-direction:column;justify-content:center}.backstage-view>.head .far a.about{padding:15px 30px;border-radius:40px;display:inline-block;margin-right:40px;text-decoration:none}.backstage-view>.body{display:flex;height:calc(100% - 150px)}.backstage-view>.body>.commands{width:300px;border-right:solid 1px rgba(255,255,255,0.1)}.backstage-view>.body>.commands>.ui-button,.backstage-view>.body>.commands .ui-button:hover:not(.face-never):not(.disabled){display:block;padding-bottom:20px;border-radius:0}div.canvas-view{position:absolute;top:0;left:0;right:0;bottom:0;overscroll-behavior:none;height:100%;overflow:hidden}div.canvas-view canvas:focus{outline:none}.color-usage-report .entry{display:flex;margin-bottom:5px}.color-usage-report .entry .swatch{width:16px;height:16px;border-radius:100%;margin-right:10px;margin-top:5px}.color-usage-report .entry .lighter{opacity:0.5;margin-right:10px;background:white;color:black;border-radius:5px;padding:0 7px;text-transform:uppercase}.color-replacer>.swatch{height:40px;border-radius:5px}.container-panel{border-radius:10px}.container-panel>.marker{position:absolute}.container-panel>.marker.n,.container-panel>.marker.s{height:1px;left:0;right:0}.container-panel>.marker.e,.container-panel>.marker.w{width:1px;top:0;bottom:0}.container-panel>.marker.n{top:10px}.container-panel>.marker.s{bottom:10px}.container-panel>.marker.w{left:10px}.container-panel>.marker.e{right:10px}.container-panel>.content{position:absolute;top:10px;left:10px;right:10px;bottom:10px}.expando{margin-bottom:10px}.expando>.head{display:flex;align-items:center;justify-content:space-between;height:50px;border-top-left-radius:10px;border-top-right-radius:10px}.expando>.head>.label{margin-left:10px}.expando>.head>.items{display:flex}.expando>.head>.items>.ui-label{margin-right:10px;opacity:0.3}.expando>.body{min-height:20px;border-radius:10px;padding:10px}.expando>.body>.children>.ui-button{display:block}.expando>.body>.children>.ui-item-group{display:flex}.expando>.body>.children>.ui-item-group>.ui-button{flex:1 1 0;border-radius:0 !important}.preview-panel{position:relative;display:flex;align-items:center;border-radius:7px}.preview-panel:not(:last-child){margin-bottom:10px}.preview-panel.level-1,.preview-panel.level-2{justify-content:space-between}.preview-panel.level-1>.preview,.preview-panel.level-2>.preview{margin-right:10px}.preview-panel.level-3,.preview-panel.level-4{flex-direction:column}.preview-panel.level-3>.preview,.preview-panel.level-4>.preview{margin-bottom:10px}.preview-panel.level-3 .size-label,.preview-panel.level-4 .size-label{margin:10px 0}.preview-panel.level-3 .ui-button.ellipsis,.preview-panel.level-4 .ui-button.ellipsis{position:absolute;right:0;bottom:0;padding:0}.preview-panel.level-1>.preview{width:64px;height:64px}.preview-panel.level-2>.preview{width:128px;height:128px}.preview-panel.level-3>.preview{width:192px;height:192px}.preview-panel.level-4>.preview{width:256px;height:256px}.preview-panel>.preview{display:flex;justify-content:center;align-items:center;overflow:hidden}.preview-panel.selected>.preview{border-right:solid 1px transparent}.ui-palette .palette-label{opacity:0.5}.ui-palette>.palette-label{margin-bottom:10px}.ui-palette .palette-preview{cursor:pointer;font-size:0.8em;padding:10px;border-radius:4px;margin-bottom:3px}.ui-palette .palette-preview:not(:last-child){margin-bottom:10px}.ui-palette .palette-preview .swatches{display:flex;overflow:hidden}.ui-palette .palette-preview .swatch{width:15px;height:15px;border-radius:7px;flex-shrink:0}.ui-palette .palette-preview .swatch:not(:last-child){margin-right:10px}.ui-palette .swatches>div:not(.label){display:inline-block}.ui-palette .swatches .ui-clickable{padding:10px;margin-right:10px;margin-bottom:10px}.ui-palette .swatches .pal-swatch{border-radius:4px}.ui-palette .swatches .pal-swatch>div{border-radius:10px;width:20px;height:20px}div.ui-palette textarea{width:100%;min-height:300px;border:none}.review-studio>.ui-dock-view{margin:10px}.review-studio .container-panel.main-panel{position:absolute;top:0;left:0;right:0;bottom:0}.review-studio .container-panel.main-panel>.content{display:flex;align-items:center;flex-direction:column;justify-content:center}.review-studio .container-panel.main-panel>.content>.row{width:270px;text-align:center}.review-studio .container-panel.main-panel>.content>.row:not(:last-child){margin-bottom:50px}.review-studio .container-panel.main-panel>.content>.row>.caption{font-size:20px;margin:10px 0}.review-studio .container-panel.main-panel>.content>.row .corner-grid>.row{display:flex;justify-content:center}.review-studio .container-panel.main-panel>.content>.row .corner-grid>.row:not(:last-child){margin-bottom:10px}.review-studio .container-panel.main-panel>.content>.row .corner-grid .corner{width:70px;height:70px;border-radius:10px;cursor:pointer}.review-studio .container-panel.main-panel>.content>.row .corner-grid .corner:not(:last-child){margin-right:10px}.review-studio .container-panel.main-panel>.content>.row .ui-button.cta{font-size:20px;padding:15px 60px;border-radius:50px}.review-studio .review-studio-sidebar{position:relative;margin-left:10px}.review-studio .review-studio-sidebar .container-panel.preview{height:220px;position:relative}.review-studio .review-studio-sidebar .container-panel.preview .content{display:flex;justify-content:center}.review-studio .review-studio-sidebar .key-navigation .row{display:flex;justify-content:center}.review-studio .review-studio-sidebar .key-navigation .row>div{width:50px;height:50px}.review-studio .review-studio-sidebar .key-navigation .row>div.ui-button{padding:0;border-radius:100%}html{height:100%;overflow:hidden;position:relative}body{margin:0;height:100%;overflow:auto;position:relative;overscroll-behavior:none;font-family:'Mukta Mahee', 'San Francisco', 'Helvetica', sans-serif}#app{user-select:none;height:100%;overflow:hidden;position:absolute;top:0;left:0;right:0;bottom:0}#app .ui-button{border-radius:5px}#app .toolbar .ui-button,#app .expando>.head>.items .ui-button{padding:0}#app .toolbar .ui-button:focus,#app .expando>.head>.items .ui-button:focus{outline:none}#app .adjusters>.ui-range:first-child{margin-bottom:10px}#app .editor-sidebar{margin:0 10px}#app .canvas-main.main-side{overflow:hidden;height:100%;overscroll-behavior:none}#app .side-top>.toolbar.main-tools>.items.near{margin:10px}#app .side-top>.toolbar.main-tools>.items.near .ui-button{margin-right:5px}#app .side-left>.toolbar.main-tools>.items.near,#app .side-left>.toolbar.main-tools>.items.center,#app .side-left>.toolbar.main-tools>.items.far{margin:0 10px}#app .side-left>.toolbar.main-tools>.items.near .ui-button,#app .side-left>.toolbar.main-tools>.items.center .ui-button,#app .side-left>.toolbar.main-tools>.items.far .ui-button{margin-bottom:5px}#app .ui-button:focus{outline:none}#app .cue{text-align:right;font-size:0.7em;opacity:0.5;font-family:monospace}#app .cta.ui-button{border-radius:30px;display:block;background-color:#3175ef;color:white;text-align:center}#root-dialog .modal{position:fixed;top:0;left:0;right:0;bottom:0}#version{text-align:right;opacity:0.2}.ui-clickable.is-open{background-color:rgba(0,0,0,0.0392157)}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:rgba(0,0,0,0.0392157)}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:rgba(0,0,0,0.0392157)}.ui-button:focus{box-shadow:0 0 10px 0 rgba(5,148,255,0.51)}.ui-button.cta{background-color:#0052A8;color:#fff}.ui-button.cta:hover{background-color:#2780de !important;color:#fff !important}.expando>.head{color:#101010}.expando>.body{background-color:rgba(0,0,0,0.05)}.expando>.body>.children>.ui-item-group{border:solid 1px rgba(0,0,0,0.784314)}.expando>.body>.children>.ui-item-group .ui-button.selected:not(.disabled){background-color:rgba(0,0,0,0.784314)}.preview-panel.selected{background-color:rgba(0,0,0,0.0392157)}.preview-panel.selected>.preview{border-right:solid 1px rgba(0,0,0,0.784314)}.ui-range{background:rgba(0,0,0,0.784314)}.ui-range .handle{background-color:rgba(0,0,0,0.0392157)}.pal-swatch,.palette-preview{background-color:rgba(0,0,0,0.784314)}.pal-swatch.selected,.pal-swatch:hover,.palette-preview.selected,.palette-preview:hover{background-color:rgba(0,0,0,0.0392157)}#root-dialog .modal{background-color:#fff}.container-panel{background-color:rgba(0,0,0,0.784314)}.container-panel>.marker{background-color:rgba(0,0,0,0.784314)}.review-studio .corner-grid .corner{border:solid 1px #555}.review-studio .corner-grid .corner:not(.selected):hover{background-color:rgba(0,0,0,0.0392157)}.review-studio .corner-grid .corner.selected{background-color:#0052A8}.ui-button.start-button{background-color:#FF3B3B;color:#fff;border-radius:40px !important;padding:0 30px !important;box-shadow:0 3px 3px 2px #000}.ui-button.start-button:hover{background-color:#FF5757 !important;color:#fff !important}@media (prefers-color-scheme: dark){body{background:#25252B;color:#828282}.ui-clickable.is-open{background-color:rgba(255,255,255,0.0980392);color:#828282}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:rgba(255,255,255,0.0980392);color:#828282}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:rgba(255,255,255,0.0980392);color:#828282}.ui-menu-overlay,.ui-suggestions-overlay{background-color:#25252B;color:#828282;border:solid 1px rgba(255,255,255,0.0509804);box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.ui-separator:after{background-color:rgba(255,255,255,0.0980392)}input,textarea{background:rgba(255,255,255,0.0509804);color:#828282}.ui-color-picker{font-size:14px}.ui-color-picker input{border:none;border-radius:5px}.expando>.head{color:#efefef}.expando>.body{background-color:rgba(255,255,255,0.05)}.expando>.body>.children>.ui-item-group{border:solid 1px rgba(255,255,255,0.0509804)}.expando>.body>.children>.ui-item-group .ui-button.selected:not(.disabled){background-color:rgba(255,255,255,0.0509804)}.preview-panel.selected{background-color:rgba(255,255,255,0.0980392)}.preview-panel.selected>.preview{border-right:solid 1px rgba(255,255,255,0.0509804)}.ui-range{background:rgba(255,255,255,0.0509804)}.ui-range .handle{background-color:rgba(255,255,255,0.0980392)}.pal-swatch,.palette-preview{background-color:rgba(255,255,255,0.0509804)}.pal-swatch.selected,.pal-swatch:hover,.palette-preview.selected,.palette-preview:hover{background-color:rgba(255,255,255,0.0980392)}#root-dialog .modal{background-color:#25252B}.container-panel{background-color:rgba(255,255,255,0.0509804)}.container-panel>.marker{background-color:rgba(255,255,255,0.0509804)}.review-studio .corner-grid .corner{border:solid 1px #828282}.review-studio .corner-grid .corner:not(.selected):hover{background-color:rgba(255,255,255,0.0980392)}.review-studio .corner-grid .corner.selected{background-color:#0052A8}.backstage-view{background-color:#25252B;color:#828282}.backstage-view>.head{background-color:#FF3B3B;color:#fff}.backstage-view>.head>.far a.about{background:rgba(255,255,255,0.1);color:#fff}.backstage-view>.head>.far a.about:hover,.backstage-view>.head>.far a.about:focus{background:rgba(255,255,255,0.2)}.backstage-view>.body>.commands{color:#fff}}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/BackstageView.scss\",\"webpack://./src/components/CanvasView.scss\",\"webpack://./src/components/ColorUsageReport.scss\",\"webpack://./src/components/ColorReplacer.scss\",\"webpack://./src/components/ContainerPanel.scss\",\"webpack://./src/components/Expando.scss\",\"webpack://./src/components/PreviewPanel.scss\",\"webpack://./src/components/Palette.scss\",\"webpack://./src/components/PaletteManager.scss\",\"webpack://./src/components/ReviewStudio.scss\",\"webpack://./src/components/App.scss\",\"webpack://./src/theme.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".backstage-view{\\n\\n  $height: 150px;\\n\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n\\n  > .head{\\n    height: $height;\\n    display: flex;\\n    justify-content: space-between;\\n\\n    > .near{\\n      display: flex;\\n\\n       > .back-button{\\n        cursor: pointer;\\n        opacity: 0.5;\\n        width: 90px;\\n        background-position: center center;\\n         background-size: 50px 50px;\\n        height: 100%;\\n\\n        &:hover,&:focus{\\n          opacity: 1;\\n        }\\n      }\\n\\n      > .logo-and-tag-line{\\n        margin-top: 50px;\\n\\n        > .logo{\\n          font-size: 30px;\\n\\n          span{ opacity: 0.8; }\\n        }\\n\\n        > .tag-line {\\n          opacity: 0.4;\\n          margin-top: -15px;\\n        }\\n      }\\n    }\\n\\n    .far{\\n      height: 100%;\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: center;\\n\\n      a.about{\\n        padding: 15px 30px;\\n        border-radius: 40px;\\n        display: inline-block;\\n        margin-right: 40px;\\n        text-decoration: none;\\n\\n      }\\n    }\\n  }\\n\\n  > .body{\\n    display: flex;\\n    height: calc(100% - #{$height});\\n\\n    > .commands{\\n      width: 300px;\\n      border-right: solid 1px rgba(255, 255, 255, 0.1);\\n\\n      > .ui-button, .ui-button:hover:not(.face-never):not(.disabled){\\n        display: block;\\n        padding-bottom: 20px;\\n        border-radius: 0;\\n      }\\n    }\\n  }\\n\\n}\",\"div.canvas-view{\\n\\n  position: absolute;\\n  top: 0; left: 0; right: 0; bottom:0;\\n  overscroll-behavior: none;\\n  height  : 100%;\\n  overflow: hidden;\\n\\n  canvas:focus{\\n    outline: none;\\n  }\\n\\n}\",\".color-usage-report{\\n\\n  .entry{\\n    display: flex;\\n    margin-bottom: 5px;\\n\\n    .swatch{\\n      width: 16px;\\n      height: 16px;\\n      border-radius: 100%;\\n      margin-right: 10px;\\n      margin-top: 5px;\\n    }\\n\\n    .lighter{\\n      opacity: 0.5;\\n      margin-right: 10px;\\n      background: white;\\n      color: black;\\n      border-radius: 5px;\\n      padding: 0 7px;\\n      text-transform: uppercase;\\n    }\\n\\n  }\\n\\n}\",\".color-replacer{\\n\\n  > .swatch{\\n    height: 40px;\\n    border-radius: 5px;\\n  }\\n\\n\\n}\",\"$radius: 10px;\\n\\n.container-panel{\\n  border-radius: $radius;\\n\\n  > .marker { position: absolute; }\\n  > .marker.n, > .marker.s { height: 1px; left:0; right: 0; }\\n  > .marker.e, > .marker.w { width: 1px; top:0; bottom:0; }\\n  > .marker.n { top: $radius }\\n  > .marker.s { bottom: $radius }\\n  > .marker.w { left: $radius }\\n  > .marker.e { right: $radius }\\n  > .content {\\n    position: absolute;\\n    top: $radius;\\n    left: $radius;\\n    right: $radius;\\n    bottom: $radius;\\n  }\\n\\n}\",\".expando{\\n\\n  $b-rad: 10px;\\n  $space: 10px;\\n\\n  margin-bottom: $space;\\n\\n  > .head{\\n\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n\\n    height: 50px;\\n    border-top-left-radius: $b-rad;\\n    border-top-right-radius: $b-rad;\\n\\n    > .label{\\n      margin-left: $space;\\n    }\\n\\n    > .items{\\n      display: flex;\\n\\n      > .ui-label{\\n        margin-right: $space;\\n        opacity: 0.3;\\n      }\\n\\n    }\\n  }\\n\\n  > .body{\\n    min-height: 20px;\\n    border-radius: $b-rad;\\n    padding: $space;\\n\\n    > .children{\\n      > .ui-button{\\n        display: block;\\n      }\\n\\n      > .ui-item-group{\\n        display: flex;\\n        > .ui-button {\\n          flex: 1 1 0;\\n          border-radius: 0 !important;\\n        }\\n      }\\n    }\\n\\n  }\\n\\n}\",\".preview-panel{\\n\\n  $space: 10px;\\n\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  border-radius: 7px;\\n\\n  &:not(:last-child){\\n    margin-bottom: $space;\\n  }\\n\\n  &.level-1, &.level-2{\\n    justify-content: space-between;\\n    > .preview {\\n      margin-right: $space;\\n    }\\n  }\\n\\n  &.level-3, &.level-4{\\n    flex-direction: column;\\n\\n    > .preview{\\n      margin-bottom: $space;\\n    }\\n\\n    .size-label{\\n      margin: $space 0;\\n    }\\n\\n    .ui-button.ellipsis{\\n      position: absolute;\\n      right: 0;\\n      bottom: 0;\\n      padding:0;\\n    }\\n  }\\n\\n  &.level-1{\\n    > .preview { width: 64px; height: 64px; }\\n  }\\n\\n  &.level-2{\\n    > .preview { width: 128px; height: 128px;}\\n  }\\n\\n  &.level-3{\\n    > .preview { width: 192px; height: 192px;}\\n  }\\n\\n  &.level-4{\\n    > .preview { width: 256px; height: 256px;}\\n  }\\n\\n  > .preview {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    overflow: hidden;\\n  }\\n\\n  &.selected{\\n    > .preview {\\n      border-right: solid 1px transparent;\\n    }\\n  }\\n\\n}\",\".ui-palette{\\n  $space:10px;\\n\\n  .palette-label{\\n    opacity: 0.5;\\n  }\\n\\n  > .palette-label{\\n    margin-bottom: $space;\\n  }\\n\\n  .palette-preview{\\n\\n    cursor: pointer;\\n    font-size: 0.8em;\\n    padding:$space;\\n    border-radius: 4px;\\n    margin-bottom: 3px;\\n\\n    &:not(:last-child){\\n      margin-bottom: $space;\\n    }\\n\\n    .swatches{\\n      display: flex;\\n      overflow: hidden;\\n    }\\n\\n    .swatch{\\n      width: 15px;\\n      height: 15px;\\n      border-radius: 7px;\\n      flex-shrink: 0;\\n\\n      &:not(:last-child){\\n        margin-right: $space;\\n      }\\n    }\\n  }\\n\\n  .swatches{\\n    > div:not(.label) {\\n      display: inline-block;\\n    }\\n\\n    .ui-clickable{\\n      padding: $space;\\n      margin-right: $space;\\n      margin-bottom: $space;\\n    }\\n\\n    .pal-swatch{\\n\\n      border-radius: 4px;\\n\\n      > div {\\n        border-radius: 10px;\\n        width: 20px;\\n        height: 20px;\\n      }\\n    }\\n  }\\n}\",\"div.ui-palette{\\n\\n  textarea{\\n    width: 100%;\\n    min-height: 300px;\\n    border: none;\\n  }\\n\\n}\",\"\\n$spacing: 10px;\\n$large-font: 20px;\\n\\n.review-studio{\\n\\n  > .ui-dock-view{\\n    margin: 10px;\\n  }\\n\\n  .container-panel.main-panel{\\n    position: absolute;\\n    top: 0; left: 0;\\n    right: 0; bottom: 0;\\n\\n    > .content {\\n\\n      display: flex;\\n      align-items: center;\\n      flex-direction: column;\\n      justify-content: center;\\n\\n      > .row {\\n        width: 270px;\\n        text-align: center;\\n\\n        &:not(:last-child){\\n          margin-bottom: 50px;\\n        }\\n\\n        > .caption {\\n          font-size: $large-font;\\n          margin: 10px 0;\\n        }\\n\\n        .corner-grid{\\n          > .row{\\n            display: flex;\\n            justify-content: center;\\n\\n            &:not(:last-child){\\n              margin-bottom: $spacing;\\n            }\\n          }\\n          .corner{\\n            width: 70px;\\n            height: 70px;\\n            border-radius: 10px;\\n            cursor: pointer;\\n\\n            &:not(:last-child){\\n              margin-right: $spacing;\\n            }\\n          }\\n        }\\n\\n        .ui-button.cta{\\n          font-size: $large-font;\\n          padding: 15px 60px;\\n          border-radius: 50px;\\n        }\\n      }\\n    }\\n  }\\n\\n  .review-studio-sidebar{\\n    position: relative;\\n    margin-left: 10px;\\n\\n    .container-panel.preview{\\n      height: 220px;\\n      position: relative;\\n\\n      .content{\\n        display: flex;\\n        justify-content: center;\\n      }\\n    }\\n\\n    .key-navigation{\\n      .row{\\n        display: flex;\\n        justify-content: center;\\n\\n        > div{\\n          width: 50px;\\n          height: 50px;\\n\\n          &.ui-button{\\n            padding: 0;\\n            border-radius: 100%;\\n          }\\n        }\\n      }\\n    }\\n\\n  }\\n}\",\"\\nhtml {\\n  height  : 100%;\\n  overflow: hidden;\\n  position: relative;\\n}\\nbody {\\n  margin: 0;\\n  height  : 100%;\\n  overflow: auto;\\n  position: relative;\\n  overscroll-behavior: none;\\n  font-family: 'Mukta Mahee', 'San Francisco', 'Helvetica', sans-serif;\\n}\\n\\n#app{\\n  $space: 10px;\\n  user-select: none;\\n  height  : 100%;\\n  overflow: hidden;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n\\n\\n  .ui-button{\\n    border-radius: 5px;\\n  }\\n\\n  .toolbar .ui-button,\\n  .expando > .head > .items .ui-button{\\n    padding: 0;\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n\\n  .adjusters > .ui-range{\\n    &:first-child{\\n      margin-bottom: $space;\\n    }\\n  }\\n\\n  .editor-sidebar{\\n    margin: 0 10px;\\n  }\\n\\n  .canvas-main.main-side{\\n    overflow: hidden;\\n    height: 100%;\\n    overscroll-behavior: none;\\n  }\\n\\n  .side-top > .toolbar.main-tools {\\n     > .items.near{\\n        margin: 10px;\\n       .ui-button{ margin-right: 5px; }\\n    }\\n  }\\n  .side-left > .toolbar.main-tools {\\n     > .items.near, >.items.center, >.items.far{\\n        margin: 0 10px;\\n       .ui-button{ margin-bottom: 5px; }\\n    }\\n  }\\n\\n  .ui-button{\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n\\n  .cue {\\n    text-align: right;\\n    font-size: 0.7em;\\n    opacity: 0.5;\\n    font-family: monospace;\\n  }\\n  .cta.ui-button{\\n    border-radius: 30px;\\n    display: block;\\n    background-color: #3175ef;\\n    color: white;\\n    text-align: center;\\n  }\\n\\n}\\n\\n#root-dialog .modal{\\n  position: fixed;\\n  top: 0; left: 0;\\n  right: 0; bottom: 0;\\n}\",\"$color-strong: #0000000a;\\n$color-light: #000000c8;\\n$color-lighter: #000000e2;\\n$color-accent: #FF3B3B;\\n$color-accent-hover: #FF5757;\\n$color-accent-light: rgba(255, 255, 255, 0.2);\\n$color-accent-lighter: rgba(255, 255, 255, 0.1);\\n$color-accent-fg: white;\\n$button-face-hover-bg: $color-strong;\\n$button-face-selected-bg: $color-strong;\\n$window-bg: #fff;\\n$window-fg: #555;\\n$cta-bg: #0052A8;\\n$cta-bg-hot: #2780de;\\n$cta-fg: #fff;\\n$window-fg-contrast: black;\\n\\n#version{\\n  text-align: right;\\n  opacity: 0.2;\\n}\\n\\n.ui-clickable.is-open{\\n  background-color: $button-face-hover-bg;\\n}\\n\\n.ui-button-wrap.split:hover > .ui-button-split-part,\\n.ui-button-wrap.split:hover > .ui-button,\\n.ui-button:hover:not(.face-never):not(.disabled),\\n.ui-clickable.selected:not(.disabled),\\n.ui-button.is-open{\\n  background-color: $button-face-hover-bg;\\n}\\n\\n.ui-menuitem.is-open,\\n.ui-menuitem.is-selected{\\n  background-color: $button-face-selected-bg;\\n}\\n\\n.ui-button{\\n  &:focus{\\n    box-shadow: 0 0 10px 0 rgba(5,148,255,0.51);\\n  }\\n\\n  &.cta{\\n    background-color: $cta-bg;\\n    color: $cta-fg;\\n\\n    &:hover{\\n      background-color: $cta-bg-hot !important;\\n      color: $cta-fg !important;\\n    }\\n  }\\n}\\n\\n.expando {\\n  > .head{\\n    color: #101010;\\n  }\\n  > .body{\\n    background-color: rgba(0, 0, 0, 0.05);\\n\\n    > .children{\\n      > .ui-item-group{\\n        border: solid 1px $color-light;\\n        .ui-button{\\n          &.selected:not(.disabled){\\n            background-color: $color-light;\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n\\n.preview-panel {\\n  &.selected{\\n    background-color: $color-strong;\\n    > .preview{ border-right: solid 1px $color-light; }\\n  }\\n}\\n\\n.ui-range{\\n  background: $color-light;\\n  .handle{\\n    background-color: $color-strong;\\n  }\\n}\\n\\n.pal-swatch, .palette-preview{\\n  background-color: $color-light;\\n  &.selected,&:hover{\\n    background-color: $color-strong;\\n  }\\n}\\n\\n#root-dialog .modal{\\n  background-color: $window-bg;\\n}\\n\\n.container-panel{\\n  background-color: $color-light;\\n\\n  > .marker { background-color: $color-light; }\\n}\\n\\n.review-studio .corner-grid .corner {\\n  border: solid 1px $window-fg;\\n\\n  &:not(.selected):hover{\\n    background-color: $color-strong;\\n  }\\n\\n  &.selected{\\n    background-color: $cta-bg;\\n  }\\n}\\n\\n.ui-button.start-button{\\n  background-color: $color-accent;\\n  color: $color-accent-fg;\\n  border-radius: 40px !important;\\n  padding: 0 30px !important;\\n  box-shadow: 0 3px 3px 2px rgba(0, 0, 0, 50%);\\n\\n  &:hover{\\n    background-color: $color-accent-hover !important;\\n    color: $color-accent-fg !important;\\n  }\\n}\\n\\n\\n/* Dark mode */\\n@media (prefers-color-scheme: dark) {\\n  $color-strong: #ffffff19;\\n  $color-light: #ffffff0d;\\n  $button-face-hover-bg: $color-strong;\\n  $button-face-hover-fg: #828282;\\n  $button-face-selected-bg: $color-strong;\\n  $button-face-selected-fg: #828282;\\n  $window-bg: #25252B;\\n  $window-fg: #828282;\\n  $window-border: $color-light;\\n  $separator: $color-strong;\\n  $text-box-bg: $color-light;\\n  $window-fg-contrast: white;\\n\\n  body{\\n    background: $window-bg;\\n    color: $window-fg;\\n  }\\n\\n  .ui-clickable.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n  }\\n\\n  .ui-button-wrap.split:hover > .ui-button-split-part,\\n  .ui-button-wrap.split:hover > .ui-button,\\n  .ui-button:hover:not(.face-never):not(.disabled),\\n  .ui-clickable.selected:not(.disabled),\\n  .ui-button.is-open{\\n    background-color: $button-face-hover-bg;\\n    color: $button-face-hover-fg;\\n  }\\n\\n  .ui-menuitem.is-open,\\n  .ui-menuitem.is-selected{\\n    background-color: $button-face-selected-bg;\\n    color: $button-face-selected-fg;\\n  }\\n\\n  .ui-menu-overlay,\\n  .ui-suggestions-overlay{\\n    background-color: $window-bg;\\n    color: $window-fg;\\n    border: solid 1px $window-border;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n  }\\n\\n  .ui-separator:after{\\n    background-color: $separator;\\n  }\\n\\n  input, textarea{\\n    background: $text-box-bg;\\n    color: $window-fg;\\n  }\\n\\n  .ui-color-picker{\\n    font-size: 14px;\\n\\n    input{\\n      border: none;\\n      border-radius: 5px;\\n    }\\n  }\\n\\n  .expando {\\n    > .head{\\n      color: #efefef;\\n    }\\n    > .body{\\n      background-color: rgba(255, 255, 255, 0.05);\\n\\n      > .children{\\n        > .ui-item-group{\\n          border: solid 1px $color-light;\\n          .ui-button{\\n            &.selected:not(.disabled){\\n              background-color: $color-light;\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n  .preview-panel {\\n    &.selected{\\n      background-color: $color-strong;\\n      > .preview{ border-right: solid 1px $color-light; }\\n    }\\n  }\\n\\n  .ui-range{\\n    background: $color-light;\\n    .handle{\\n      background-color: $color-strong;\\n    }\\n  }\\n\\n  .pal-swatch, .palette-preview{\\n    background-color: $color-light;\\n    &.selected,&:hover{\\n      background-color: $color-strong;\\n    }\\n  }\\n\\n  #root-dialog .modal{\\n    background-color: $window-bg;\\n  }\\n\\n  .container-panel{\\n    background-color: $color-light;\\n    > .marker { background-color: $color-light; }\\n  }\\n\\n  .review-studio .corner-grid .corner {\\n    border: solid 1px $window-fg;\\n\\n    &:not(.selected):hover{\\n      background-color: $color-strong;\\n    }\\n\\n    &.selected{\\n      background-color: $cta-bg;\\n    }\\n  }\\n\\n  .backstage-view{\\n    background-color: $window-bg;\\n    color: $window-fg;\\n\\n    > .head{\\n      background-color: $color-accent;\\n      color: $color-accent-fg;\\n\\n      > .far {\\n        a.about{\\n          background: $color-accent-lighter;\\n          color: $color-accent-fg;\\n\\n          &:hover,&:focus{\\n            background: $color-accent-light;\\n          }\\n        }\\n      }\\n    }\\n\\n    > .body{\\n      > .commands{\\n        color: $window-fg-contrast;\\n      }\\n    }\\n  }\\n\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export default __webpack_public_path__ + \"images/510b0d6283acb4af7d07c57c76647b12.svg\";","export default __webpack_public_path__ + \"images/fa2b951e78320c01827bc9ac3adc3784.svg\";","export default __webpack_public_path__ + \"images/da77af6df38f4fc3ba6088bfec456115.svg\";","export default __webpack_public_path__ + \"images/45dc825bf29037e37a1f3ad9f8d36698.svg\";","export default __webpack_public_path__ + \"images/ba5f78e580afd7e5c3947889b753da33.svg\";","export default __webpack_public_path__ + \"images/388f69ce8ecac97eedec7ea08e3579f9.svg\";","export default __webpack_public_path__ + \"images/82681b8396865c2b9f0cca73f199e54b.svg\";","export default __webpack_public_path__ + \"images/8c9b0577ec243c53737f7a98a650fa89.svg\";","export default __webpack_public_path__ + \"images/239d8eac76f04697355baec73b69da5c.svg\";","export default __webpack_public_path__ + \"images/b7ace863c734f5fed4df1a20899085cc.svg\";","export default __webpack_public_path__ + \"images/daeb284051c74da3976abab2ac330645.svg\";","export default __webpack_public_path__ + \"images/d85bd057b1c1c6702ee833f0101d756f.svg\";","export default __webpack_public_path__ + \"images/5e3c35a7a81289ff467c2023d7169ca8.svg\";","export default __webpack_public_path__ + \"images/6660616bd1a6093cd5b0f679004ecde9.svg\";","export default __webpack_public_path__ + \"images/1a917ae890e4da4265edd5968c3c8f11.svg\";","export default __webpack_public_path__ + \"images/820f7b8de7fba0ea94526290972b828f.svg\";","export default __webpack_public_path__ + \"images/e4be7fb03d83a3b1e9080745e58b0b79.svg\";","export default __webpack_public_path__ + \"images/7fb165a6ae89527c4ecb5a7448e2eb05.svg\";","export default __webpack_public_path__ + \"images/f1f4e0ab7dab76a3d235e29fc58546c0.svg\";","export default __webpack_public_path__ + \"images/e2babadcd10e3392b642fd95ac5c1157.svg\";","export default __webpack_public_path__ + \"images/ffeb5e9a15a27e92596e816350b5c227.svg\";","export default __webpack_public_path__ + \"images/ebef5026c98408d876668f6784364994.svg\";","export default __webpack_public_path__ + \"images/26fe8b4dde77818a368138c236d9dd59.svg\";","export default __webpack_public_path__ + \"images/dafcceff7570d4c8b6eca361206792d1.svg\";","export default __webpack_public_path__ + \"images/04926be5218e648b0dcf64aca5e1ec31.svg\";","export default __webpack_public_path__ + \"images/a5ccd09f26f149cf2a4edacd590de383.svg\";","export default __webpack_public_path__ + \"images/6d01d668977e0cc06cf9fda924f45c7c.svg\";","export default __webpack_public_path__ + \"images/1900c4b5c135af417bf79814428d1639.svg\";","export default __webpack_public_path__ + \"images/ab85e08084162fe117ff0164c40335ee.svg\";","export default __webpack_public_path__ + \"images/c26f6f7ceb9e284305725c5c59e3d765.svg\";","export default __webpack_public_path__ + \"images/9477dca6b724b89b305963b9b46cbbc9.svg\";","export default __webpack_public_path__ + \"images/10079e5f3a28bf4164a1495e0e20dc17.svg\";","export default __webpack_public_path__ + \"images/e9da72544a3330cc52ca45e2bbda0411.svg\";","export default __webpack_public_path__ + \"images/b3890d6011ef034907470bd16feada8d.svg\";","export default __webpack_public_path__ + \"images/1234ba77aa491342e808e1cd6ab1c422.svg\";","export default __webpack_public_path__ + \"images/eaa6b0d5c4b755a1c5f442a5b31d3913.svg\";","export default __webpack_public_path__ + \"images/1c7c2677071e811d4aca7f0b4a48fbb3.svg\";","export default __webpack_public_path__ + \"images/ae2087a3922088a93b0f3fde77c0e56f.svg\";","export default __webpack_public_path__ + \"images/bb9f1f8d917fff10d0587496ee1e8cfd.svg\";","export default __webpack_public_path__ + \"images/38aee18e86f51b62ad5e548bd745488d.svg\";","export default __webpack_public_path__ + \"images/384b04f25826b885bb36dbf1d2d847c1.svg\";","export default __webpack_public_path__ + \"images/16d86ed52ad1cc4fa6e0eb00d1794003.svg\";","export default __webpack_public_path__ + \"images/12f0f97012b8956a484acfdd52300568.svg\";","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === 'function') {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./icons.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./styles.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import * as React from \"react\";\n\nexport class Version extends React.Component<any, any>{\n    render() {\n        return <div id=\"version\">0.1.4</div>;\n    }\n}","import * as React from \"react\";\nimport {IconCanvasController} from \"../model/IconCanvasController\";\nimport {makeSz, Size} from \"../hui/helpers/Rectangle\";\nimport {BookController} from \"../model/BookController\";\nimport {Label} from \"../hui/items/Label\";\nimport {BookEditor} from \"./BookEditor\";\nimport {BookService} from \"../model/BookService\";\nimport {DocumentService} from \"../model/DocumentService\";\nimport {BackstageView} from \"./BackstageView\";\nimport {BookCommands} from \"./BookCommands\";\n\nconst DEFAULT_ICON = makeSz(32, 32);\n\nexport interface AppProps{}\n\nexport interface AppState{\n    bookController?: BookController;\n    backstageMode?: boolean;\n    commands?: BookCommands;\n}\n\nexport class App extends React.Component<AppProps, AppState>{\n\n    static activeController: IconCanvasController;\n\n    constructor(props: AppProps) {\n        super(props);\n\n        this.state = {};\n    }\n\n    private goBackstageMode(commands: BookCommands){\n        this.setState({backstageMode: true, commands});\n    }\n\n    private goBookMode(){\n        this.setState({backstageMode: false});\n    }\n\n    private handleNewBook(sz?: Size){\n        const book = BookService.newBook(sz || DEFAULT_ICON);\n        const bookController: BookController = new BookController(book);\n        this.setState({bookController});\n    }\n\n    componentDidMount() {\n\n        DocumentService.restoreIcons().then(icons => {\n\n            let book = BookService.newBook(DEFAULT_ICON);\n\n            if (icons && icons.length > 0){\n                book = BookService.fromIcons(icons);\n            }\n\n            const bookController: BookController = new BookController(book);\n            this.setState({bookController});\n        });\n\n    }\n\n    render() {\n\n        let {backstageMode, bookController, commands} = this.state;\n\n        let content = <Label text={'Loading...'}/>;\n\n        if (backstageMode && commands){\n            content = <BackstageView\n                        commands={commands}\n                        onNewBook={() => this.handleNewBook()}\n                        onExit={() => this.goBookMode()}\n                      />;\n        }else if (bookController){\n            content = <BookEditor\n                        bookController={bookController}\n                        onNewBook={sz => this.handleNewBook(sz)}\n                        onBackstageMode={commands => this.goBackstageMode(commands)}\n                      />;\n        }\n\n        return (\n            <div id={`app`}>\n                {content}\n            </div>\n        );\n    }\n\n}","import * as React from 'react';\nimport {Callable} from \"../hui/helpers/hui\";\nimport {Button} from \"../hui/items/Button\";\nimport {BookCommands} from \"./BookCommands\";\n\nexport interface BackstageViewProps{\n    commands: BookCommands;\n    onExit?: Callable;\n    onNewBook: () => void;\n}\n\ninterface BackstageViewState{}\n\nexport class BackstageView extends React.Component<BackstageViewProps, BackstageViewState>{\n\n    private windowKeyHandler = (e: KeyboardEvent) => this.onWindowKey(e);\n\n    constructor(props: BackstageViewProps){\n        super(props);\n    }\n\n    private onWindowKey(e: KeyboardEvent){\n        if (e.key === 'Escape'){\n            this.onExit();\n        }\n    }\n\n    private onExit(){\n        if (this.props.onExit){\n            this.props.onExit();\n        }\n    }\n\n    private newBook(){\n        this.onExit();\n        this.props.onNewBook();\n    }\n\n    private importImage(){\n        this.onExit();\n        this.props.commands.commandImportFileDialog();\n    }\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.windowKeyHandler);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('keydown', this.windowKeyHandler);\n    }\n\n    render() {\n        return (\n            <div className=\"backstage-view\">\n                <div className=\"head\">\n                    <div className=\"near\">\n                        <div className=\"back-button ui-icon icon-circle-back-large-white size-50\"\n                             tabIndex={0}\n                             onClick={() => this.onExit()}\n                        />\n                        <div className=\"logo-and-tag-line\">\n                            <div className=\"logo\"><span>fav</span><strong>icon</strong><span>ate</span></div>\n                            <div className=\"tag-line\">for pixel lovers</div>\n                        </div>\n                    </div>\n                    <div className=\"far\">\n                        <a className=\"about\" href=\"/about\" target=\"_blank\">About</a>\n                    </div>\n                </div>\n                <div className=\"body\">\n                    <div className=\"commands\">\n                        <Button\n                            icon=\"book\"\n                            description=\"Start from a blank template\"\n                            text=\"New Icon File\"\n                            iconSize={20}\n                            onClick={() => this.newBook()}\n                        />\n\n                        <Button\n                            icon=\"image\"\n                            description=\"Select an image on your computer to convert to an icon\"\n                            text=\"Import an Image...\"\n                            iconSize={20}\n                            onClick={() => this.importImage()}\n                        />\n                    </div>\n                    <div className=\"tiles\">\n\n                    </div>\n                </div>\n            </div>\n        );\n    };\n}","import * as React from 'react';\nimport * as ReactDOM from \"react-dom\";\nimport {IconEditorTool} from \"../model/IconEditor\";\nimport {AdjustTool} from \"../model/tools/AdjustTool\";\nimport {EraserTool} from \"../model/tools/EraserTool\";\nimport {FloodFillTool} from \"../model/tools/FloodFillTool\";\nimport {PaletteComposerTool} from \"../model/tools/PaletteComposerTool\";\nimport {PencilTool} from \"../model/tools/PencilTool\";\nimport {SelectionTool} from \"../model/tools/SelectionTool\";\nimport {BookEditorState} from \"./BookEditor\";\nimport {ReviewStudio} from \"./ReviewStudio\";\nimport {BookController} from \"../model/BookController\";\n\nexport type BookEditorStateSetter = <K extends keyof BookEditorState>(state: Pick<BookEditorState, K>) => void;\n\nexport interface KeyMapping{\n    command: (commands: BookCommands) => void;\n    key: string;\n    flat?: boolean;\n    shift?: boolean;\n}\n\nexport const MAPPINGS: KeyMapping[] = [\n    {key: 'z', command: c => c.commandRedo(), shift: true},\n    {key: 'z', command: c => c.commandUndo()},\n    {key: 'v', command: c => c.commandPaste()},\n    {key: 'c', command: c => c.commandCopy()},\n    {key: 'x', command: c => c.commandCut()},\n    {key: 'a', command: c => c.commandSelectAll()},\n\n    {key: 'd', command: c => c.commandUsePen(), flat: true},\n    {key: 'v', command: c => c.commandUseSelection(), flat: true},\n    {key: 'f', command: c => c.commandUseFlood(), flat: true},\n    {key: 'e', command: c => c.commandUseEraser(), flat: true},\n    {key: 'b', command: c => c.commandSwapBg(), flat: true},\n    {key: 'g', command: c => c.commandSwapGrid(), flat: true},\n];\n\nexport class BookCommands{\n\n    constructor(\n        readonly bookController: BookController,\n        readonly state: BookEditorState,\n        readonly setter: BookEditorStateSetter,\n    ) {}\n\n    private setState<K extends keyof BookEditorState>(state: Pick<BookEditorState, K>){\n        this.setter(state);\n    }\n\n    private useTool(tool: IconEditorTool){\n        this.setState({tool});\n    }\n\n    importFile(file: File){\n\n        if (file.name.toLowerCase().endsWith('.ico')){\n            const curId = this.state.iconController.id;\n            const pristine = this.state.iconController.editor.pristine;\n            this.bookController.importIcoFile(file)\n                .then(iconControllers => {\n                    iconControllers.forEach(ctl => {\n                        ctl.showBackground = this.state.showBackground;\n                        ctl.showGrid = this.state.showGrid;\n                    });\n                    if(pristine){\n                        this.bookController.removeIcon(curId);\n                    }\n                    this.commandGoToIcon(iconControllers[0].id);\n                });\n\n        }else{\n            this.state.iconController.importFile(file)\n                .then(tool => {\n                    this.setState({tool});\n                    this.bookController.persist();\n                });\n        }\n    }\n\n    commandCopy(){\n        this.state.iconController.copy()\n            .then(() => console.log(\"Copied\"))\n            .catch(e => console.log(`Not copied: ${e}`));\n    }\n\n    commandCut(){\n        this.state.iconController.cut()\n            .then(() => console.log(\"Did cut\"))\n            .catch(e => console.log(`Didn't cut: ${e}`));\n    }\n\n    commandPaste(){\n        this.state.iconController.paste()\n            .then(r => {\n\n                if (r.warnings.length > 0){\n                    console.log(` - Warnings: ${r.warnings.length}`);\n                    r.warnings.forEach(w => console.log(`   - ${w}`))\n                }\n\n                if (r.success && r.tool){\n                    this.setState({tool: r.tool});\n                }\n\n            })\n            .catch(e => console.log(`Not pasted: ${e}`));\n    }\n\n    commandImportFileDialog(){\n        const input: HTMLInputElement = document.createElement('input');\n        input.type = 'file';\n        input.style.display = 'none';\n        input.onchange = e => {\n            if (input.files && input.files.length > 0){\n                this.importFile(input.files[0]);\n            }\n        };\n\n        document.body.appendChild(input);\n\n        setTimeout(() => input.click());\n\n    }\n\n    commandUseDither(){\n        this.useTool(new AdjustTool(this.state.iconController));\n    }\n\n    commandUseEraser(){\n        this.useTool(new EraserTool(this.state.iconController));\n    }\n\n    commandUseFlood(){\n        this.useTool(new FloodFillTool(this.state.iconController));\n    }\n\n    commandUsePaletteComposer(){\n        this.useTool(new PaletteComposerTool(this.state.iconController));\n    }\n\n    commandUsePen(){\n        this.useTool(new PencilTool(this.state.iconController));\n    }\n\n    commandUseSelection(){\n        this.useTool(new SelectionTool(this.state.iconController));\n    }\n\n    commandSwapBg(){\n        const showBackground = !this.state.showBackground;\n        this.state.iconController.showBackground = showBackground;\n        this.setState({showBackground});\n    }\n\n    commandSwapGrid(){\n        const showGrid = !this.state.showGrid;\n        this.state.iconController.showGrid = showGrid;\n        this.setState({showGrid});\n    }\n\n    commandSelectAll(){\n\n        const {tool} = this.state;\n\n        if (!(tool instanceof SelectionTool)){\n            this.commandUseSelection();\n        }\n        setTimeout(() => (tool as SelectionTool).selectAll());\n    }\n\n    commandReview(){\n\n        const {iconController} = this.state;\n\n        const dismiss = () => {\n            ReactDOM.unmountComponentAtNode(document.getElementById(`root-dialog`)!);\n        };\n\n        ReactDOM.render(\n            <ReviewStudio icon={iconController.editor.document.icon} onCloseRequested={dismiss}/>,\n            document.getElementById(`root-dialog`)\n        );\n    }\n\n    commandUndo(){\n        const {iconController, tool} = this.state;\n\n        iconController.editor.undo();\n        const undos = this.state.undos + 1;\n\n        if (iconController.editor.undoPeek?.selectionRegion && !(tool instanceof SelectionTool)){\n            this.setState({undos, tool: new SelectionTool(iconController)});\n        }else{\n            this.setState({undos});\n        }\n\n    }\n\n    commandRedo(){\n\n        const {iconController, tool} = this.state;\n\n        iconController.editor.redo();\n        const redos = this.state.redos + 1;\n\n        if (iconController.editor.redoPeek?.selectionRegion && !(tool instanceof SelectionTool)){\n            this.setState({redos, tool: new SelectionTool(iconController)});\n        }else{\n            this.setState({redos});\n        }\n    }\n\n    commandGoToIcon(id: string){\n\n        const iconController = this.bookController.getIconController(id);\n\n        if(!iconController){\n            throw new Error();\n        }\n\n        const tool = iconController.tool;\n        const showGrid = iconController.showGrid;\n        const showBackground = iconController.showBackground;\n\n        this.setState({tool, iconController, showGrid, showBackground});\n    }\n}","import * as React from 'react';\nimport {DockView} from \"../hui/layout/DockView\";\nimport {IconEditor} from \"./IconEditor\";\nimport {ToolbarView} from \"../hui/layout/ToolbarView\";\nimport {EditorMainToolbar} from \"./EditorMainToolbar\";\nimport {EditorControls} from \"./EditorControls\";\nimport {BookController, changeFavicon} from \"../model/BookController\";\nimport {IconEditorTool} from \"../model/IconEditor\";\nimport {IconCanvasController} from \"../model/IconCanvasController\";\nimport {App} from \"./App\";\nimport {Size} from \"../hui/helpers/Rectangle\";\nimport {SelectionTool} from \"../model/tools/SelectionTool\";\nimport {IconPreview} from \"./BookPreviews\";\nimport {BookCommands, MAPPINGS} from \"./BookCommands\";\nimport {IconService} from \"../model/IconService\";\n\nexport interface BookEditorProps{\n    bookController: BookController;\n    onNewBook?: (size: Size) => void;\n    onBackstageMode?: (commands: BookCommands) => void;\n}\n\nexport interface BookEditorState{\n    iconController: IconCanvasController;\n    iconControllers: IconCanvasController[];\n    iconPreviews: IconPreview[];\n    tool: IconEditorTool | null;\n    undos: number;\n    redos: number;\n    showBackground: boolean;\n    showGrid: boolean;\n}\n\nexport class BookEditor extends React.Component<BookEditorProps, BookEditorState>{\n\n    private keyboardHandler = (e: KeyboardEvent) => this.handleKeyboard(e);\n\n    constructor(props: BookEditorProps){\n        super(props);\n\n        this.state = this.initBookController(props.bookController);\n\n    }\n\n    private initBookController(bookController: BookController): BookEditorState{\n\n        bookController.onUpdated = () => {\n            if (bookController === this.props.bookController){\n                const iconControllers = bookController.iconControllers;\n                const iconPreviews = bookController.iconPreviews;\n                this.setState({iconControllers, iconPreviews});\n            }\n        };\n\n        const iconController = bookController.iconControllers[0];\n        const iconControllers = bookController.iconControllers;\n        const iconPreviews = bookController.iconPreviews;\n        const tool = new SelectionTool(iconController);\n\n        iconControllers.forEach(ctl => this.initController(ctl));\n\n        IconService.asBlobUrl(iconController.editor.document.icon)\n            .then(src => changeFavicon(src));\n\n        return {\n            iconController,\n            iconControllers,\n            iconPreviews,\n            tool,\n            undos: 0,\n            redos: 0,\n            showBackground: true,\n            showGrid: true,\n        };\n\n    }\n\n    private initController(iconController: IconCanvasController){\n        if(this.state){\n            iconController.showBackground = this.state.showBackground;\n            iconController.showGrid = this.state.showBackground;\n        }else{\n            iconController.showBackground = true;\n            iconController.showGrid = true;\n        }\n    }\n\n    private newBook(size: Size){\n        if (this.props.onNewBook){\n            this.props.onNewBook(size);\n        }\n    }\n\n    private addIcon(size: Size){\n        const iconController = this.props.bookController.addIcon(size);\n        const tool = new SelectionTool(iconController);\n\n        this.initController(iconController);\n\n        this.setState({tool, iconController});\n    }\n\n    private removeIcon(id: string){\n\n        const ctl = this.props.bookController.removeIcon(id);\n\n        if (ctl){\n            this.initController(ctl);\n            this.getCommands().commandGoToIcon(ctl.id);\n        }else{\n            this.getCommands().commandGoToIcon(this.props.bookController.iconControllers[0].id);\n        }\n\n    }\n\n    private getCommands(): BookCommands{\n        return new BookCommands(this.props.bookController, this.state, state => this.setState(state));\n    }\n\n    private handleDragOver(e: React.DragEvent<HTMLDivElement>){\n        e.preventDefault();\n    }\n\n    private handleDrop(e: React.DragEvent<HTMLDivElement>){\n        e.preventDefault();\n\n        if (e.dataTransfer?.items && e.dataTransfer.items.length > 0){\n            const item = e.dataTransfer.items[0];\n            const file = item.getAsFile();\n\n            if (file){\n                this.getCommands().importFile(file);\n            }else{\n                console.log(`Can't get as file`)\n            }\n        }\n    }\n\n    private handleKeyboard(e: KeyboardEvent){\n        const focused = document.querySelector(\"*:focus\");\n\n        if (focused && (focused.tagName == 'INPUT' || focused.tagName == 'TEXTAREA')){\n            return;\n        }\n\n        const ctrlMeta = e.ctrlKey || e.metaKey;\n\n        MAPPINGS\n            .filter(map => map.key === e.key)\n            .forEach(map => {\n                if(\n                    (map.flat && !e.shiftKey && !ctrlMeta) ||\n                    (!map.flat && !!map.shift && e.shiftKey) ||\n                    (!map.flat && ctrlMeta)\n                ){\n                    map.command(this.getCommands());\n                    e.preventDefault();\n                }\n            });\n    }\n\n    private onBackstageMode(){\n        if (this.props.onBackstageMode){\n            this.props.onBackstageMode(this.getCommands());\n        }\n    }\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.keyboardHandler);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.keyboardHandler);\n    }\n\n    componentDidUpdate(prevProps: Readonly<BookEditorProps>, prevState: Readonly<BookEditorState>, snapshot?: any) {\n        App.activeController = this.state.iconController;\n\n        if (prevProps.bookController !== this.props.bookController){\n            this.setState(this.initBookController(this.props.bookController));\n            this.props.bookController.persist();\n        }\n\n        if (prevState.tool !== this.state.tool){\n            this.state.iconController.tool = this.state.tool;\n        }\n    }\n\n    render() {\n\n        const {bookController} = this.props;\n        const {tool, iconController, iconControllers, iconPreviews} = this.state;\n        const commands = this.getCommands();\n\n        iconController.tool = tool;\n        iconController.showBackground = this.state.showBackground;\n        iconController.showGrid = this.state.showGrid;\n\n        const mainToolbarItems = <EditorMainToolbar\n            iconController={iconController}\n            showBackground={this.state.showBackground}\n            showGrid={this.state.showGrid}\n            commands={commands}\n            onNewBook={size => this.newBook(size)}\n            onBackstageMode={() => this.onBackstageMode()}\n        />;\n\n        const sideBar = <EditorControls\n            tool={tool}\n            bookController={bookController}\n            iconController={iconController}\n            iconControllers={iconControllers}\n            iconPreviews={iconPreviews}\n            onAddIcon={s => this.addIcon(s)}\n            onRemoveIcon={id => this.removeIcon(id)}\n            onGoToIcon={id => commands.commandGoToIcon(id)}\n        />;\n\n        return (\n            <div className=\"drag-wrap\" onDragOver={e => this.handleDragOver(e)} onDrop={e => this.handleDrop(e)}>\n                <ToolbarView sideClassNames={`main-tools`} length={70} items={mainToolbarItems}>\n                    <DockView side={`right`} sideView={sideBar}>\n                        <IconEditor\n                            controller={iconController}\n                            tool={tool}\n                            commands={commands}\n                        />\n                    </DockView>\n                </ToolbarView>\n            </div>\n        );\n    };\n}","import * as React from \"react\";\nimport {compareSize, makeSz, Size} from \"../hui/helpers/Rectangle\";\nimport {PreviewPanel} from \"./PreviewPanel\";\nimport {IconCanvasController} from \"../model/IconCanvasController\";\n\nexport interface IconPreview{\n    id: string;\n    data: string;\n}\n\nexport interface BookPreviewsProps{\n    currentController: string;\n    controllers: IconCanvasController[];\n    previews: IconPreview[];\n    onIconSelected?: (id: string) => void;\n    onIconDelete?: (id: string) => void;\n}\n\ninterface BookPreviewsState{}\n\nexport class BookPreviews extends React.Component<BookPreviewsProps, BookPreviewsState>{\n\n\n    private handleSelected(id: string){\n        if (this.props.onIconSelected){\n            this.props.onIconSelected(id);\n        }\n    }\n\n    private onIconDelete(id: string){\n        if (this.props.onIconDelete){\n            this.props.onIconDelete(id);\n        }\n    }\n\n    render() {\n\n        const {controllers, previews, currentController} = this.props;\n\n        const sizeOf = (itemId: string): Size => {\n            const ctl = controllers.find(c => c.id === itemId);\n\n            if (ctl){\n                return ctl.iconSize;\n            }\n            return makeSz(0,0);\n        };\n\n        const sortedPreviews = previews\n            .sort((a, b) => -compareSize(sizeOf(a.id), sizeOf(b.id)));\n\n        return (\n            <>\n                {sortedPreviews\n                    .map((item) => (\n                        <PreviewPanel\n                            key={item.id}\n                            data={item.data}\n                            selected={item.id === currentController}\n                            size={sizeOf(item.id)}\n                            onActivate={() => this.handleSelected(item.id)}\n                            onDelete={() => this.onIconDelete(item.id)}\n                        />\n                    ))}\n            </>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {RefObject} from \"react\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\n\nexport interface PointingEvent {\n    point: Point;\n    touch: boolean;\n}\n\nexport interface PointingEventResult{\n    cursor?: string;\n}\n\nexport interface KeyEvent{\n    key: string;\n}\n\nexport interface KeyEventResult{\n    preventDefault?: boolean;\n}\n\nexport interface CanvasSensor{\n    pointingGestureMove?     (e: PointingEvent):    PointingEventResult | void;\n    pointingGestureStart?    (e: PointingEvent):    PointingEventResult | void;\n    pointingGestureEnd?      (e: PointingEvent):    PointingEventResult | void;\n    keyDown?                 (e: KeyEvent):         KeyEventResult | void;\n    keyUp?                   (e: KeyEvent):         KeyEventResult | void;\n}\n\nexport interface CanvasViewController extends CanvasSensor{\n    render                   (context: CanvasRenderingContext2D, size: Size): void;\n}\n\nexport interface CanvasViewProps{\n    controller: CanvasViewController;\n}\n\nexport class CanvasView extends React.Component<CanvasViewProps>{\n\n    readonly containerRef: RefObject<HTMLDivElement> = React.createRef();\n    readonly canvasRef: RefObject<HTMLCanvasElement> = React.createRef();\n\n    private canvasSize: Size = makeSz(0,0);\n    private _cursor: string | null = null;\n    private resizer = () => this.updateCanvasSize();\n    private mouseUpCatcher = (e: MouseEvent) => this.mouseUp(e);\n    private keyDownCatcher = (e: KeyboardEvent) => this.keyDown(e);\n    private keyUpCatcher = (e: KeyboardEvent) => this.keyUp(e);\n\n    constructor(props: CanvasViewProps) {\n        super(props);\n\n    }\n\n    private canvasPoint(clientX: number, clientY: number): Point{\n        if(this.canvasRef.current) {\n            const bounds = Rectangle.fromDOMRect(this.canvasRef.current.getBoundingClientRect());\n            return makePt(clientX - bounds.left, clientY - bounds.top);\n        }\n        return makePt(clientX, clientY);\n    }\n\n    private updateCanvasSize(){\n        if(this.containerRef.current) {\n\n            const rect = Rectangle.fromDOMRect(this.containerRef.current.getBoundingClientRect());\n\n            if(this.canvasRef.current) {\n                this.canvasSize = makeSz(rect.width, rect.height);\n                this.canvasRef.current.width = rect.width;\n                this.canvasRef.current.height = rect.height;\n\n            }else{\n                console.log(`Diagram::resize: No canvasRef`);\n            }\n\n        }else{\n            console.log(`Diagram::resize: No containerRef`);\n        }\n\n    }\n\n    private mouseDown(e: React.MouseEvent<HTMLCanvasElement, MouseEvent>){\n\n        if (this.controller.pointingGestureStart){\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureStart({point, touch: false});\n\n            this.adoptCursor(result);\n        }\n\n        document.body.addEventListener('mouseup', this.mouseUpCatcher);\n\n    }\n\n    private mouseUp(e: MouseEvent){\n\n        if(this.canvasRef.current && this.controller.pointingGestureEnd) {\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureEnd({point, touch: false});\n\n            this.adoptCursor(result);\n        }\n\n        document.body.removeEventListener(`mouseup`, this.mouseUpCatcher);\n    }\n\n    private mouseMove(e: React.MouseEvent<HTMLCanvasElement, MouseEvent>){\n\n        if (this.controller.pointingGestureMove){\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureMove({point, touch: false});\n\n            this.adoptCursor(result);\n        }\n    }\n\n    private adoptCursor(result: PointingEventResult | void){\n        if (result && result.cursor){\n            this.cursor = result.cursor;\n        }else{\n            this.cursor = 'default';\n        }\n    }\n\n    private touchEnd(e: React.TouchEvent<HTMLCanvasElement>){\n        if (this.controller.pointingGestureEnd){\n            if(e.touches.length > 0) {\n                const t = e.touches[0];\n                this.controller.pointingGestureEnd({\n                    point: this.canvasPoint(t.clientX, t.clientY),\n                    touch: true,\n                });\n            }else{\n                this.controller.pointingGestureEnd({point: makePt(0,0), touch: true})\n            }\n        }\n    }\n\n    private touchMove(e: React.TouchEvent<HTMLCanvasElement>){\n        if(this.controller.pointingGestureMove && e.touches.length > 0) {\n            const t = e.touches[0];\n            this.controller.pointingGestureMove({\n                point: this.canvasPoint(t.clientX, t.clientY),\n                touch: true\n            });\n        }\n    }\n\n    private touchStart(e: React.TouchEvent<HTMLCanvasElement>){\n        if(this.controller.pointingGestureStart && e.touches.length > 0) {\n            e.preventDefault();\n            e.stopPropagation();\n            const t = e.touches[0];\n            const point = this.canvasPoint(t.clientX, t.clientY);\n            this.controller.pointingGestureStart({point, touch: true});\n        }\n\n    }\n\n    private ignoreKey(): boolean{\n        const focused = document.querySelector(\"*:focus\");\n\n        return !!focused && (focused.tagName === 'INPUT' || focused.tagName === 'TEXTAREA');\n    }\n\n    private keyDown(e: KeyboardEvent){\n\n        if (!this.ignoreKey() && this.controller.keyDown){\n            const result = this.controller.keyDown({key: e.key});\n\n            if (result && result.preventDefault === true){\n                e.preventDefault();\n            }\n        }\n    }\n\n    private keyUp(e: KeyboardEvent){\n        if (!this.ignoreKey() && this.controller.keyUp){\n            const result = this.controller.keyUp({key: e.key});\n\n            if (result && result.preventDefault === true){\n                e.preventDefault();\n            }\n        }\n    }\n\n    componentDidMount() {\n        this.resizer();\n\n        if (this.canvasRef.current){\n            const context = this.canvasRef.current.getContext(\"2d\");\n\n            if (context){\n\n                const draw = () => {\n                    this.controller.render(context, this.canvasSize);\n                    requestAnimationFrame(draw);\n                };\n\n                requestAnimationFrame(() => draw());\n\n            }else{\n                console.log(`No context`);\n            }\n        }else{\n            console.log(`No canvasRef`);\n        }\n\n    }\n\n    componentWillMount(): void {\n        window.addEventListener('resize', this.resizer);\n\n        document.addEventListener('keyup', this.keyUpCatcher);\n        document.addEventListener('keydown', this.keyDownCatcher);\n    }\n\n    componentWillUnmount(): void {\n\n        window.removeEventListener('resize', this.resizer);\n        document.removeEventListener('keyup', this.keyUpCatcher);\n        document.removeEventListener('keydown', this.keyDownCatcher);\n    }\n\n    componentDidUpdate(prevProps: Readonly<CanvasViewProps>, prevState: Readonly<{}>, snapshot?: any) {\n\n    }\n\n    render() {\n        return (\n            <div ref={this.containerRef} className={`canvas-view`}>\n                <canvas\n                    ref={this.canvasRef}\n                    onMouseDown={e => this.mouseDown(e)}\n                    onMouseMove={e => this.mouseMove(e)}\n                    onTouchStart={e => this.touchStart(e)}\n                    onTouchMove={e => this.touchMove(e)}\n                    onTouchEnd={e => this.touchEnd(e)}\n                ></canvas>\n            </div>\n        );\n    }\n\n    get controller(): CanvasViewController{\n        return this.props.controller;\n    }\n\n    get cursor(): string | null{\n        return this._cursor;\n    }\n\n    set cursor(value: string | null){\n\n        const changed = value !== this._cursor;\n\n        if(changed){\n\n            if(this.canvasRef.current) {\n                this.canvasRef.current.style.cursor = value || '';\n            }\n\n            this._cursor = value;\n        }\n    }\n}","import * as React from \"react\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {Button} from \"../hui/items/Button\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {Separator} from \"../hui/items/Separator\";\nimport {App} from \"./App\";\nimport {Label} from \"../hui/items/Label\";\n\n/**\n * 1. Pick a color\n * 2. Adjust it\n * 3a. Confirm change\n * 3b. Cancel\n */\n\nexport interface ColorReplacerProps{\n    onStart?: () => void;\n    onCancel?: () => void;\n    onOldColorPicked?: (color: Color) => void;\n    onColorPreview?: (color: Color) => void;\n    onColorSelected?: (color: Color) => void;\n}\n\ninterface ColorReplacerState{\n    colorToReplace?: Color;\n    colorHovering?: Color;\n    selectedColor?: Color;\n}\n\nexport class ColorReplacer extends React.Component<ColorReplacerProps, ColorReplacerState>{\n\n    private lastSelected: Color | null;\n    private lastHover: Color | null;\n\n    constructor(props: ColorReplacerProps) {\n        super(props);\n\n        this.state = {};\n    }\n\n    private cancelColorPicker(){\n        App.activeController.colorPicker(undefined);\n        this.setState({colorToReplace: undefined, colorHovering: undefined});\n\n        if (this.props.onCancel){\n            this.props.onCancel();\n        }\n    }\n\n    private colorFromColorPicker(selectedColor: Color){\n\n        this.setState({selectedColor});\n\n        if (this.props.onColorPreview){\n            if(!(this.lastSelected && selectedColor.equals(this.lastSelected))){\n                this.props.onColorPreview(selectedColor);\n            }\n        }\n\n        this.lastSelected = selectedColor;\n    }\n\n    private confirmChange(){\n\n        if(!this.state.selectedColor){\n            throw new Error(`No selected color`);\n        }\n\n        if (this.props.onColorSelected){\n            this.props.onColorSelected(this.state.selectedColor);\n        }\n\n        this.setState({colorToReplace: undefined, colorHovering: undefined});\n    }\n\n    private startColorPicker(){\n\n        App.activeController.colorPicker((colorToReplace, colorHovering) => {\n\n            if (colorHovering){\n\n                if (this.lastHover && !colorHovering.equals(this.lastHover)){\n                    this.setState({colorHovering});\n                }\n\n                this.lastHover = colorHovering;\n\n            }else if(colorToReplace){\n                this.setState({colorToReplace, colorHovering: undefined});\n\n                if (this.props.onOldColorPicked){\n                    this.props.onOldColorPicked(colorToReplace);\n                }\n\n            }else{\n                this.setState({colorToReplace: undefined, colorHovering: undefined});\n            }\n\n        });\n\n        this.setState({colorHovering: Color.black});\n\n        if (this.props.onStart){\n            this.props.onStart();\n        }\n    }\n\n    private useOf(colorHovering: Color): number{\n        const data = App.activeController.editor.document.icon.data;\n        let count = 0;\n\n        for(let i = 0; i < data.length; i+=4){\n            const color = Color.fromInt8Array(data, i);\n            if (color.equals(colorHovering)){\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    render(){\n\n        const {colorToReplace, colorHovering} = this.state;\n\n        if (colorToReplace) {\n            return (\n                <div className=\"color-replacer\">\n                    <div className=\"swatch\" style={{backgroundColor: colorToReplace.cssRgba}}/>\n                    <Separator/>\n                    <ColorPicker color={colorToReplace} colorPicked={c => this.colorFromColorPicker(c)}/>\n                    <Button text={`Cancel`} onClick={() => this.cancelColorPicker()}/>\n                    <Button text={`Confirm`} onClick={() => this.confirmChange()}/>\n                </div>\n            );\n        }else if(colorHovering){\n            return (\n                <div className=\"color-replacer\">\n                    <div className=\"swatch\" style={{backgroundColor: colorHovering.cssRgba}}/>\n                    <Label text={`${colorHovering.toString().toUpperCase()}: ${this.useOf(colorHovering)}`}/>\n                    <Separator/>\n                    <Button text={`Cancel`} onClick={() => this.cancelColorPicker()}/>\n                </div>\n            );\n        }else{\n            return (\n                <div className=\"color-replacer\">\n                    <Button\n                        icon={`eyedropper`}\n                        text={`Pick Color to Replace`}\n                        onClick={() => this.startColorPicker()}/>\n                </div>\n            );\n        }\n    }\n\n}","import * as React from \"react\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {Palette} from \"../model/PaletteService\";\nimport {Button} from \"../hui/items/Button\";\nimport {ClipboardService} from \"../model/ClipboardService\";\nimport {Separator} from \"../hui/items/Separator\";\n\nconst MAX_SWATCHES = 100;\nconst DEFAULT_VISIBLE_ITEMS = 10;\n\nexport interface ColorUsageExpandoProps{\n    data: Uint8ClampedArray;\n    palette?: Palette;\n}\n\ninterface ColorUsageExpandoState{\n    showAll?: boolean;\n}\n\ntype UsageEntry = UsageEntryColor | UsageEntryMessage;\n\ninterface UsageEntryColor{\n    name: string;\n    color: Color;\n    count: number;\n}\n\ninterface UsageEntryMessage{\n    message: string;\n}\n\nexport class ColorUsageReport extends React.Component<ColorUsageExpandoProps, ColorUsageExpandoState>{\n\n    private report: UsageEntry[] = [];\n\n    constructor(props: ColorUsageExpandoProps) {\n        super(props);\n        this.state = {};\n        this.buildReport();\n    }\n\n    private buildReport(){\n\n        const data = this.props.data;\n        const palette: Palette = this.props.palette || {name: '', colors:[]};\n        const map: {[color: string]: number} = {};\n        const report: UsageEntry[] = [];\n        const warnings: UsageEntryMessage[] = [];\n        let count = 0;\n\n        for(let i = 0; i < data.length; i += 4 ){\n            const color = Color.fromTupleInt8([data[i], data[i+1], data[i+2], data[i+3]]);\n            const key = color.hexRgba;\n\n            if (key in map){\n                map[key]++;\n\n            }else{\n                map[key] = 1;\n                if(count++ > MAX_SWATCHES){\n                    warnings.push({message: `Limit of color count reached: ${MAX_SWATCHES}`});\n                    break;\n                }\n            }\n        }\n\n        // Pass map to report\n        for( let key in map){\n            const color = Color.fromHex(key);\n            const count = map[key];\n            const palMatch = palette.colors.find(tuple => tuple.hex === color.toString());\n            const name = palMatch ? palMatch.name : color.toString();\n            report.push({color, count, name});\n        }\n\n        report.sort((a, b) => {\n            if ('count' in a && 'count' in b){\n                return b.count - a.count;\n            }\n            return 0;\n        });\n\n        warnings.forEach(w => report.push(w));\n\n        this.report = report;\n\n    }\n\n    private getTextReport(): string{\n        return this.report.map(entry => {\n            if ('message' in entry){\n                return entry.message;\n            }else{\n                const {color, count, name} = entry;\n                return `${color}, ${name}, ${count}`\n            }\n        }).join('\\n');\n    }\n\n    private copyReportToClipboard(){\n        const text = this.getTextReport();\n        console.log(JSON.stringify(this.report));\n        ClipboardService.systemCopyText(text).then(() => console.log(`Copied to clipboard.`));\n    }\n\n    private swapShowAll(){\n\n        const {showAll} = this.state;\n\n        this.setState({showAll: !showAll});\n\n    }\n\n    render() {\n        this.buildReport();\n\n        const {showAll} = this.state;\n        const fullCount = this.report.length;\n        const report = showAll ? this.report : this.report.slice(0, DEFAULT_VISIBLE_ITEMS);\n\n        return (\n            <div className=\"color-usage-report\">\n                {report.map(entry => {\n\n                    if ('message' in entry){\n                        return (\n                            <div className=\"entry message\">{entry.message}</div>\n                        );\n                    }else{\n                        return (\n                            <div className=\"entry color\">\n                                <div className=\"swatch\" style={{backgroundColor: entry.color.cssRgba}}/>\n                                <div><span className=\"lighter\">{entry.name}</span> {entry.count}</div>\n                            </div>\n                        );\n                    }\n                    })}\n\n                {(() => {\n                    if (fullCount > DEFAULT_VISIBLE_ITEMS){\n                        return (\n                            <>\n                                <Separator/>\n                                <Button\n                                    text={showAll ? `Show Less` : `Show all (${this.report.length})`}\n                                    onClick={() => this.swapShowAll()}/>\n                            </>\n                        );\n                    }\n                })() }\n                <Separator/>\n                <Button\n                    icon={`copy`}\n                    iconSize={50}\n                    onClick={() => this.copyReportToClipboard()}/>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {ClassNames, cn} from \"../hui/helpers/hui\";\n\nexport interface ContainerPanelProps extends ClassNames{\n    children?: React.ReactNode;\n}\ninterface ContainerPanelState{}\n\nexport class ContainerPanel extends React.Component<ContainerPanelProps, ContainerPanelState>{\n\n    render() {\n        return (\n            <div className={cn(`container-panel`, this.props.classNames)}>\n                <div className=\"marker n\"/>\n                <div className=\"marker s\"/>\n                <div className=\"marker e\"/>\n                <div className=\"marker w\"/>\n                <div className=\"content\">\n                    {this.props.children}\n                </div>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {Expando} from \"./Expando\";\nimport {Button} from \"../hui/items/Button\";\nimport {MenuItem} from \"../hui/items/MenuItem\";\nimport {BookPreviews, IconPreview} from \"./BookPreviews\";\nimport {DownloadFormat, IconCanvasController} from \"../model/IconCanvasController\";\nimport {IconEditorTool} from \"../model/IconEditor\";\nimport {SelectionTool} from \"../model/tools/SelectionTool\";\nimport {EditorControlsSelection} from \"./EditorControlsSelection\";\nimport {EraserTool} from \"../model/tools/EraserTool\";\nimport {EditorControlsEraser} from \"./EditorControlsEraser\";\nimport {PencilTool} from \"../model/tools/PencilTool\";\nimport {EditorControlsPencil} from \"./EditorControlsPencil\";\nimport {FloodFillTool} from \"../model/tools/FloodFillTool\";\nimport {EditorControlsFlood} from \"./EditorControlsFlood\";\nimport {PaletteComposerTool} from \"../model/tools/PaletteComposerTool\";\nimport {EditorControlsPalette} from \"./EditorControlsPalette\";\nimport {AdjustTool} from \"../model/tools/AdjustTool\";\nimport {EditorControlsDither} from \"./EditorControlsDither\";\nimport {BookController} from \"../model/BookController\";\nimport {makeSz, Size} from \"../hui/helpers/Rectangle\";\nimport {Version} from \"../Version\";\n\nexport interface EditorControlsProps{\n    tool: IconEditorTool | null;\n    bookController: BookController;\n    iconController: IconCanvasController;\n    iconControllers: IconCanvasController[];\n    iconPreviews: IconPreview[];\n    onAddIcon: (size: Size) => void;\n    onRemoveIcon: (id: string) => void;\n    onGoToIcon: (id: string) => void;\n}\n\ninterface EditorControlsState{}\n\nexport class EditorControls extends React.Component<EditorControlsProps, EditorControlsState>{\n\n    private download(format: DownloadFormat){\n\n        const {iconController, bookController} = this.props;\n\n        iconController.downloadAs(format, bookController.iconControllers.map(c => c.editor.document.icon))\n            .then(() => console.log(`Download triggered`));\n    }\n\n    toolComponent(): React.ReactNode{\n        const tool = this.props.tool;\n\n        if (!tool){\n            return <></>;\n        }\n\n        if (tool instanceof SelectionTool) {\n            return <EditorControlsSelection tool={tool}/>;\n\n        }else if(tool instanceof EraserTool) {\n            return <EditorControlsEraser/>;\n\n        }else if(tool instanceof PencilTool) {\n            return <EditorControlsPencil tool={tool}/>\n\n        }else if(tool instanceof FloodFillTool){\n            return <EditorControlsFlood tool={tool}/>\n\n        }else if ( tool instanceof PaletteComposerTool){\n            return <EditorControlsPalette tool={tool}/>;\n\n        }else if ( tool instanceof AdjustTool ){\n            return <EditorControlsDither tool={tool}/>\n        }\n    }\n\n    render() {\n        const {iconController, bookController, iconControllers, iconPreviews} = this.props;\n        const currentId = iconController.id;\n        const sizes = [16, 32, 48, 64, 128, 256];\n\n        return (\n            <div className=\"editor-sidebar\">\n                <Expando\n                    title={`Preview`}\n                    items={\n                        <Button iconSize={50} icon={`plus`}>\n                            {sizes.map(size =>\n                                <MenuItem\n                                    text={`${size}x${size}`}\n                                    onActivate={() => this.props.onAddIcon(makeSz(size, size))}\n                                />)}\n                        </Button>}\n                >\n                    <BookPreviews\n                        controllers={iconControllers}\n                        currentController={currentId}\n                        previews={iconPreviews}\n                        onIconSelected={id => this.props.onGoToIcon(id)}\n                        onIconDelete={id => this.props.onRemoveIcon(id)}\n                    />\n                </Expando>\n                {this.toolComponent()}\n                <Button text={`PNG`} onClick={() => this.download('png')} icon={`floppy`} iconSize={50}/>\n                <Button text={`ICO`} onClick={() => this.download('ico')} icon={`floppy`} iconSize={50}/>\n                <Version/>\n            </div>\n        );\n    }\n}","import * as React from 'react';\nimport {Expando} from \"./Expando\";\nimport {Range} from \"../hui/items/Range\";\nimport {PaletteExpando} from \"./PaletteExpando\";\nimport {Button} from \"../hui/items/Button\";\nimport {AdjustProperties, AdjustTool} from \"../model/tools/AdjustTool\";\nimport {Palette} from \"../model/PaletteService\";\n\nexport interface EditorControlsDitherProps{\n    tool: AdjustTool;\n}\n\ninterface EditorControlsDitherState{\n    adjust: AdjustProperties;\n}\n\nexport class EditorControlsDither extends React.Component<EditorControlsDitherProps, EditorControlsDitherState>{\n\n    constructor(props: EditorControlsDitherProps){\n        super(props);\n        this.state = {adjust: {}};\n    }\n\n    private commandApplyAdjustments(){\n        this.props.tool.apply();\n    }\n\n    private commandContrast(contrast: number){\n        const adjust = this.state.adjust;\n        this.setState({adjust: {...adjust, contrast}});\n    }\n\n    private commandBrightness(brightness: number){\n        const adjust = this.state.adjust;\n        this.setState({adjust: {...adjust, brightness}});\n    }\n\n    private commandDitheringKernel(kernel: number){\n        const adjust = this.state.adjust;\n        this.setState({adjust: {...adjust, kernel}});\n    }\n\n    private commandDitheringSerpentine(serpentine: boolean){\n        const adjust = this.state.adjust;\n        this.setState({adjust: {...adjust, serpentine}});\n    }\n\n    private commandResetPalette(){\n        const adjust = this.state.adjust;\n        this.setState({adjust: {...adjust, palette: undefined}});\n    }\n\n    private commandSetPalette(palette: Palette){\n        const adjust = this.state.adjust;\n        this.setState({adjust: {...adjust, palette}});\n    }\n\n    componentDidUpdate(prevProps: Readonly<EditorControlsDitherProps>, prevState: Readonly<EditorControlsDitherState>, snapshot?: any) {\n        this.props.tool.updateAdjustments(this.state.adjust);\n    }\n\n    render() {\n\n        const props = this.state.adjust;\n\n        return (\n            <>\n                <Expando title={`Adjust`}>\n                    <div className=\"adjusters\">\n                        <Range min={-200} max={200} value={props.brightness || 0} onChange={value => this.commandBrightness(value)} />\n                        <Range min={-128} max={128} value={props.contrast || 0} onChange={value => this.commandContrast(value)} />\n                    </div>\n                </Expando>\n                <PaletteExpando\n                    title={props.palette ? `Palette` : `Apply Palette`}\n                    onPaletteChanged={p => this.commandSetPalette(p)}\n                    onPaletteReset={() => this.commandResetPalette()}\n                />\n                <Expando title={`Dithering`}>\n                    <Range min={0} max={8} round={true} value={props.kernel || 0} onChange={value => this.commandDitheringKernel(value)} />\n                    <Button selected={!!props.serpentine} text={`Serpentine: ` + (props.serpentine ? 'yes' : 'no')} onClick={() => this.commandDitheringSerpentine(!props.serpentine)} />\n                </Expando>\n                <Button classNames={`cta`} text={`Apply`} onClick={() => this.commandApplyAdjustments()}/>\n            </>\n        );\n    };\n}","import * as React from 'react';\n\nexport interface EditorControlsEraserProps{\n\n}\n\ninterface EditorControlsEraserState{}\n\nexport class EditorControlsEraser extends React.Component<EditorControlsEraserProps, EditorControlsEraserState>{\n\n    constructor(props: EditorControlsEraserProps){\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>Eraser</div>\n        );\n    };\n}","import * as React from 'react';\nimport {FloodFillTool} from \"../model/tools/FloodFillTool\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {Expando} from \"./Expando\";\n\nexport interface EditorControlsFloodProps{\n    tool: FloodFillTool;\n}\n\ninterface EditorControlsFloodState{}\n\nexport class EditorControlsFlood extends React.Component<EditorControlsFloodProps, EditorControlsFloodState>{\n\n    constructor(props: EditorControlsFloodProps){\n        super(props);\n    }\n\n    private colorPicked(c: Color){\n        this.props.tool.color = c;\n    }\n\n    render() {\n        return (\n            <Expando title={`Fill Color`}>\n                <ColorPicker colorPicked={color => this.colorPicked(color)}/>\n            </Expando>\n        );\n    };\n}","import * as React from 'react';\nimport {PaletteComposerTool} from \"../model/tools/PaletteComposerTool\";\nimport {Expando} from \"./Expando\";\nimport {ColorReplacer} from \"./ColorReplacer\";\nimport {PaletteExpando} from \"./PaletteExpando\";\nimport {ColorUsageReport} from \"./ColorUsageReport\";\nimport {Palette} from \"../model/PaletteService\";\n\nexport interface EditorControlsPaletteProps{\n    tool: PaletteComposerTool;\n}\n\ninterface EditorControlsPaletteState{\n    composingPalette?: Palette;\n}\n\nexport class EditorControlsPalette extends React.Component<EditorControlsPaletteProps, EditorControlsPaletteState>{\n\n    constructor(props: EditorControlsPaletteProps){\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n\n        const {tool} = this.props;\n        const icon = tool.controller.editor.document.icon;\n\n        return (\n            <>\n                <Expando title={`Color Replace`}>\n                    <ColorReplacer\n                        onStart={() => tool.colorReplaceStart()}\n                        onCancel={() => tool.colorReplaceCancel()}\n                        onOldColorPicked={c => tool.colorReplaceSelectOld(c)}\n                        onColorPreview={c => tool.colorReplaceSelectNew(c)}\n                        onColorSelected={c => tool.colorReplaceConfirm(c)}\n                    />\n                </Expando>\n                <PaletteExpando onPaletteChanged={composingPalette => this.setState({composingPalette})} title={`Palette Library`}/>\n                <Expando title={`Color Usage`}>\n                    <ColorUsageReport\n                        palette={this.state.composingPalette}\n                        data={icon.data}/>\n                </Expando>\n\n            </>\n        );\n    };\n}","import * as React from 'react';\nimport {PencilTool} from \"../model/tools/PencilTool\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {Expando} from \"./Expando\";\n\nexport interface EditorControlsPencilProps{\n    tool: PencilTool;\n}\n\ninterface EditorControlsPencilState{}\n\nexport class EditorControlsPencil extends React.Component<EditorControlsPencilProps, EditorControlsPencilState>{\n\n    constructor(props: EditorControlsPencilProps){\n        super(props);\n    }\n\n    private colorPicked(c: Color){\n        this.props.tool.color = c;\n    }\n\n    render() {\n        return (\n            <Expando title={`Pencil Color`}>\n                <ColorPicker colorPicked={color => this.colorPicked(color)}/>\n            </Expando>\n        );\n    };\n}","import * as React from \"react\";\nimport {Expando} from \"./Expando\";\nimport {Label} from \"../hui/items/Label\";\nimport {ItemGroup} from \"../hui/items/ItemGroup\";\nimport {Button} from \"../hui/items/Button\";\nimport {SelectionDragMode, SelectionTool} from \"../model/tools/SelectionTool\";\n\nexport interface EditorControlsSelectionProps{\n    tool: SelectionTool;\n}\n\ninterface EditorControlsSelectionState{\n    selectionMove: SelectionDragMode;\n}\n\nexport class EditorControlsSelection extends React.Component<EditorControlsSelectionProps, EditorControlsSelectionState>{\n\n    constructor(props: EditorControlsSelectionProps) {\n        super(props);\n\n        this.state = {selectionMove: 'sprite'}\n    }\n\n    private commandSelectAll(){\n        this.props.tool.selectAll();\n    }\n\n    private commandSelectionMove(selectionMove: SelectionDragMode){\n        this.props.tool.dragMode= selectionMove;\n        this.setState({selectionMove});\n    }\n\n    private commandClearSelection(){\n        this.props.tool.clearSelection();\n    }\n\n    private commandDeleteSelection(){\n        this.props.tool.deleteSelection();\n    }\n\n    private commandCrop(){\n        this.props.tool.cropToSelection();\n    }\n\n    render() {\n\n        const {tool} = this.props;\n        const {selectionMove} = this.state;\n        const doc = tool.controller.editor.document;\n        const size = doc.selectionRegion ? `${doc.selectionRegion.width} x ${doc.selectionRegion.height}` : `Nothing Selected`;\n\n        return (\n            <Expando title={`Selection`} items={<Label text={size}/>}>\n                <ItemGroup selectedIndex={selectionMove === 'area' ? 1 : 0}>\n                    <Button text={`Move Sprite`} onClick={() => this.commandSelectionMove('sprite')}/>\n                    <Button text={`Move Selection`} onClick={() => this.commandSelectionMove('area')}/>\n                </ItemGroup>\n                <Button text={`Select All`} iconSize={20} icon={`full-frame`} onClick={() => this.commandSelectAll()}/>\n                <Button text={`Clear Selection`} iconSize={20} icon={`corners`} onClick={() => this.commandClearSelection()}/>\n                <Button text={`Delete Selection`}  iconSize={20} icon={`grid-crossed`} onClick={() => this.commandDeleteSelection()}/>\n                <Button text={`Crop`} iconSize={20} icon={`crop`} onClick={() => this.commandCrop()}/>\n            </Expando>\n        );\n    }\n}","import * as React from 'react';\nimport {Button} from \"../hui/items/Button\";\nimport {Separator} from \"../hui/items/Separator\";\nimport {IconCanvasController} from \"../model/IconCanvasController\";\nimport {makeSz, Size} from \"../hui/helpers/Rectangle\";\nimport {BookCommands} from \"./BookCommands\";\nimport {Callable} from \"../hui/helpers/hui\";\n\nexport interface EditorMainToolbarProps{\n    iconController: IconCanvasController;\n    showBackground: boolean;\n    showGrid: boolean;\n    commands: BookCommands;\n    onNewBook: (size: Size) => void;\n    onBackstageMode?: Callable;\n}\n\ninterface EditorMainToolbarState{}\n\nexport class EditorMainToolbar extends React.Component<EditorMainToolbarProps, EditorMainToolbarState>{\n\n    constructor(props: EditorMainToolbarProps){\n        super(props);\n    }\n\n    private onBackstageMode(){\n        if (this.props.onBackstageMode){\n            this.props.onBackstageMode();\n        }\n    }\n\n    render() {\n        const controller = this.props.iconController;\n\n        const newBook = (size: number) => {\n           return () => this.props.onNewBook(makeSz(size, size));\n        };\n\n        const cmd = this.props.commands;\n        const undos = controller.editor.undoCount === 0;\n        const redos = controller.editor.redoCount === 0;\n\n        return (\n            <>\n                <Button\n                    classNames=\"start-button\"\n                    text={`faviconate`}\n                    face=\"always\"\n                    onClick={() => this.onBackstageMode()}>\n                    {/*<MenuItem text={`New Project: 16x16`} onActivate={newBook(16)}/>*/}\n                    {/*<MenuItem text={`New Project: 32x32`} onActivate={newBook(32)}/>*/}\n                    {/*<MenuItem text={`New Project: 64x64`} onActivate={newBook(64)}/>*/}\n                    {/*<MenuItem text={`New Project: 128x128`} onActivate={() => newBook(128)}/>*/}\n                    {/*<MenuItem text={`New Project: 256x256`} onActivate={() => newBook(256)}/>*/}\n                    {/*<Separator/>*/}\n                    {/*<MenuItem text={`Import File`} onActivate={() => cmd.commandImportFileDialog()}/>*/}\n                </Button>\n                <Separator/>\n                <Button icon={`undo`} iconSize={50} onClick={() => cmd.commandUndo()} disabled={undos}/>\n                <Button icon={`redo`} iconSize={50} onClick={() => cmd.commandRedo()} disabled={redos}/>\n                <Separator/>\n                <Button icon={`cut`} iconSize={50} onClick={() => cmd.commandCut()}/>\n                <Button icon={`copy`} iconSize={50} onClick={() => cmd.commandCopy()}/>\n                <Button icon={`paste`} iconSize={50} onClick={() => cmd.commandPaste()}/>\n                <Separator/>\n                <Button\n                    icon={`checker`} iconSize={50}\n                    onClick={() => cmd.commandSwapBg()}\n                    selected={this.props.showBackground}\n                />\n                <Button\n                    icon={`grid`} iconSize={50}\n                    onClick={() => cmd.commandSwapGrid()}\n                    selected={this.props.showGrid}\n                />\n                <Separator/>\n                <Button icon={`eye`} iconSize={50} onClick={() => cmd.commandReview()} />\n\n            </>);\n    };\n}","import * as React from \"react\";\n\nexport interface ExpandoProps{\n    title: string;\n    children?: React.ReactNode;\n    items?: React.ReactNode;\n}\n\ninterface ExpandoState{\n\n}\n\nexport class Expando extends React.Component<ExpandoProps, ExpandoState>{\n\n    render() {\n        return (\n            <div className=\"expando\">\n                <div className=\"head\">\n                    <div className=\"label\">{this.props.title}</div>\n                    <div className=\"items\">{this.props.items}</div>\n                </div>\n                <div className=\"body\">\n                    <div className=\"children\">\n                        {this.props.children}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {CanvasView} from \"./CanvasView\";\nimport {Button} from \"../hui/items/Button\";\nimport {SelectionTool} from \"../model/tools/SelectionTool\";\nimport {Separator} from \"../hui/items/Separator\";\nimport {PencilTool} from \"../model/tools/PencilTool\";\nimport {EraserTool} from \"../model/tools/EraserTool\";\nimport {FloodFillTool} from \"../model/tools/FloodFillTool\";\nimport {PaletteComposerTool} from \"../model/tools/PaletteComposerTool\";\nimport {AdjustTool} from \"../model/tools/AdjustTool\";\nimport {IconEditorTool} from \"../model/IconEditor\";\nimport {IconCanvasController} from \"../model/IconCanvasController\";\nimport {BookCommands} from \"./BookCommands\";\nimport {ToolbarView} from \"../hui/layout/ToolbarView\";\n\nexport interface CanvasEditorProps{\n    controller: IconCanvasController;\n    tool: IconEditorTool | null;\n    commands: BookCommands;\n}\n\ninterface CanvasEditorState{}\n\nexport class IconEditor extends React.Component<CanvasEditorProps, CanvasEditorState>{\n\n    private getItems(){\n\n        const tool = this.props.tool;\n        const cmd = this.props.commands;\n\n        return (\n            <>\n                <Button\n                    icon={`select`} iconSize={50}\n                    onClick={() => cmd.commandUseSelection()}\n                    selected={tool instanceof SelectionTool}\n                />\n                <Separator/>\n                <Button\n                    icon={`pencil`} iconSize={50}\n                    onClick={() => cmd.commandUsePen()}\n                    selected={tool instanceof PencilTool && !(tool instanceof EraserTool)}\n                />\n                <Button\n                    icon={`bucket`} iconSize={50}\n                    onClick={() => cmd.commandUseFlood()}\n                    selected={tool instanceof FloodFillTool}\n                />\n                <Button\n                    icon={`eraser`} iconSize={50}\n                    onClick={() => cmd.commandUseEraser()}\n                    selected={tool instanceof EraserTool}/>\n                <Separator/>\n                <Button\n                    icon={`palette`} iconSize={50}\n                    onClick={() => cmd.commandUsePaletteComposer()}\n                    selected={tool instanceof PaletteComposerTool}\n                />\n                <Button\n                    icon={`gradient`} iconSize={50}\n                    onClick={() => cmd.commandUseDither()}\n                    selected={tool instanceof AdjustTool}\n                />\n            </>\n        );\n    }\n\n    render() {\n\n        const items = this.getItems();\n\n        return (\n            <ToolbarView\n                sideClassNames={`main-tools`}\n                length={70}\n                classNames={`canvas-main`}\n                side={`left`}\n                itemsCenter={items}\n            >\n                <CanvasView controller={this.props.controller} />\n            </ToolbarView>\n        );\n    }\n}","import * as React from \"react\";\nimport {Button} from \"../hui/items/Button\";\nimport {Expando} from \"./Expando\";\nimport {PaletteManager} from \"./PaletteManager\";\nimport {Palette, PaletteService} from \"../model/PaletteService\";\nimport {Callable} from \"../hui/helpers/hui\";\n\nexport interface PaletteExpandoProps{\n    title?: string;\n    onPaletteChanged?: (p: Palette) => void;\n    onPaletteReset?: Callable;\n}\n\ninterface PaletteExpandoState{\n    palette?: Palette;\n}\n\nexport class PaletteExpando extends React.Component<PaletteExpandoProps, PaletteExpandoState>{\n\n    constructor(props: PaletteExpandoProps) {\n        super(props);\n        this.state = {};\n    }\n\n    private resetPalette(){\n        this.setState({palette: undefined});\n\n        if(this.props.onPaletteReset){\n            this.props.onPaletteReset();\n        }\n    }\n\n    private setPalette(palette: Palette){\n        this.setState({palette});\n\n        if (this.props.onPaletteChanged){\n            this.props.onPaletteChanged(palette);\n        }\n    }\n\n    private savePalette(){\n        const palette = this.state.palette;\n\n        if (!palette){\n            throw new Error();\n        }\n\n        if (palette.unnamed){\n            palette.name = prompt('Name for the palette', palette.name) || 'Unnamed palette';\n        }\n\n        PaletteService.upsert(palette)\n            .then(p => this.setPalette(p))\n            .catch(e => console.log(`Not saved: ${e}`));\n    }\n\n    render() {\n\n        const palette = this.state.palette;\n        let paletteItems = <></>;\n\n        const btnReturn = <Button icon={'return'} iconSize={50} onClick={() => this.resetPalette()}/>;\n\n        if (palette && palette.unsaved){\n            paletteItems = (\n                <>\n                    {btnReturn}\n                    <Button icon={'floppy'} iconSize={50} onClick={() => this.savePalette()}/>\n                </>\n            );\n        }else if(palette){\n            paletteItems = (\n                <>\n                    {btnReturn}\n                </>\n            );\n        }\n\n        return (\n            <Expando title={this.props.title || `Palette`} items={paletteItems}>\n                <PaletteManager palette={palette || undefined} paletteChanged={p => this.setPalette(p)}/>\n            </Expando>\n        );\n    }\n}","import * as React from \"react\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {Button} from \"../hui/items/Button\";\nimport {Clickable} from \"../hui/items/Clickable\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {Palette, PaletteColor, PaletteService} from \"../model/PaletteService\";\nimport {App} from \"./App\";\nimport {ClipboardService} from \"../model/ClipboardService\";\nimport {Separator} from \"../hui/items/Separator\";\n\nexport interface PaletteProps{\n    palette?: Palette;\n    paletteChanged?: (palette: Palette) => void;\n}\n\ninterface PaletteState{\n    addMode?: boolean;\n    colorToAdd?: Color;\n    colorToAddName?: string;\n    palettes?: Palette[];\n    paletteCode?: string;\n    codeMode?: boolean;\n}\n\nexport class PaletteManager extends React.Component<PaletteProps, PaletteState>{\n\n    static natives: Palette[] = [\n        {\n            name: 'Black & White',\n            native: true,\n            colors: [{name: \"Black\", hex: Color.black.toString()}, {name: \"White\", hex: Color.white.toString()}],\n        },\n\n    ];\n\n    constructor(props: PaletteProps) {\n        super(props);\n\n        this.state = {};\n    }\n\n    private setPalette(p: Palette){\n        if(this.props.paletteChanged) {\n            this.props.paletteChanged(p);\n        }\n    }\n\n    private palettePreview(p: Palette): React.ReactNode{\n        return (\n            <div key={p.id} className=\"palette-preview\" onClick={() => this.setPalette(p)}>\n                <div className=\"palette-label\">{p.name}</div>\n                <div className=\"swatches\">\n                    {p.colors.map(palColor => this.swatch(palColor))}\n                </div>\n            </div>\n        );\n    }\n\n    private swatch(palColor: PaletteColor): React.ReactNode{\n\n        const {name, hex} = palColor;\n        const color = Color.fromHex(hex);\n\n        const style = {\n            backgroundColor: color.hexRgb,\n        };\n        return <div className=\"swatch\" title={name} style={style}/>;\n    }\n\n    private startAddMode(){\n        this.setState({addMode: true});\n    }\n\n    private addColor(color: Color, name: string){\n        const palette: Palette = this.props.palette!;\n\n        if (palette.native){\n            palette.native = false;\n            palette.name = '(Unsaved Palette)';\n            palette.unnamed = true;\n        }\n\n        palette.unsaved = true;\n\n        const hex = color.toString();\n\n        this.setPalette({\n            ...palette,\n            colors: [...palette.colors,  {name, hex}]\n        });\n\n        this.dismissAddColor();\n    }\n\n    private addSelectedColor(){\n\n        if(!this.state.colorToAdd || !this.props.palette){\n            throw new Error();\n        }\n\n        const color = this.state.colorToAdd;\n        const name = this.state.colorToAddName || color.toString();\n\n        this.addColor(color, name);\n    }\n\n    private dismissAddColor(){\n        this.setState({addMode: false});\n    }\n\n    private refreshPalette(){\n        PaletteService.getAll().then(palettes => {\n\n            if (JSON.stringify(palettes) != JSON.stringify(this.state.palettes)){\n                this.setState({palettes});\n            }\n        });\n    }\n\n    private copyCode(pal: Palette){\n        ClipboardService.systemCopyText(JSON.stringify(pal)).then(() => alert('Copied'));\n    }\n\n    private startCodeMode(pal: Palette){\n        this.setState({codeMode: true, paletteCode: JSON.stringify(pal)});\n    }\n\n    private endCodeMode(save = false){\n\n        if (save){\n            try{\n                const p: Palette = JSON.parse(this.state.paletteCode || '');\n                p.unsaved = true;\n                this.setPalette(p);\n            }catch(e){\n                alert(`Can't format palette`);\n                return;\n            }\n        }\n\n        this.setState({codeMode: false});\n    }\n\n    private startEyedropper(){\n        App.activeController.colorPicker(colorToAdd => {\n\n            if(colorToAdd){\n\n                const colorToAddName = prompt(`Pick a name for the color`, String(colorToAdd)) || String(colorToAdd);\n\n                this.setState({colorToAdd, colorToAddName});\n            }\n\n        });\n    }\n\n    private startEyedropperAdd(){\n        App.activeController.colorPicker(colorToAdd => {\n\n            if(colorToAdd){\n\n                const colorToAddName = prompt(`Pick a name for the color`, String(colorToAdd)) || String(colorToAdd);\n\n                this.setState({colorToAdd, colorToAddName});\n\n                setTimeout(() => this.addSelectedColor());\n            }\n\n        });\n    }\n\n    componentDidMount() {\n        this.refreshPalette();\n    }\n\n    componentDidUpdate(prevProps: Readonly<PaletteProps>, prevState: Readonly<PaletteState>, snapshot?: any) {\n        this.refreshPalette();\n    }\n\n    render() {\n        const pal = this.props.palette;\n        const {codeMode} = this.state;\n\n        if(this.state.addMode){\n            return (\n                <div className={`ui-palette`}>\n                    <ColorPicker color={this.state.colorToAdd} colorPicked={colorToAdd => this.setState({colorToAdd})}/>\n                    <Button icon={'eyedropper'} onClick={() => this.startEyedropper()}/>\n                    <Button text={'Cancel'} onClick={() => this.dismissAddColor()}/>\n                    <Button text={'Add Color'} onClick={() => this.addSelectedColor()}/>\n                </div>\n            );\n\n        }else if(pal) {\n\n            let paletteContent = <></>;\n\n            if (codeMode === true){\n\n                paletteContent = (\n                    <div>\n                        <textarea onChange={e => this.setState({paletteCode: e.target.value})}>{JSON.stringify(pal, null, 2)}</textarea>\n                        <Separator/>\n                        <Button text={`Cancel`} onClick={() => this.endCodeMode()}/>\n                        <Button text={`OK`} onClick={() => this.endCodeMode(true)}/>\n                    </div>\n                );\n\n            }else{\n                paletteContent = (\n                    <div className=\"swatches\">\n                        {pal.colors.map(tuple => <Clickable classNames=\"pal-swatch\">{this.swatch(tuple)}</Clickable>)}\n                        <Button icon={`plus`} iconSize={20} onClick={() => this.startAddMode()}/>\n                        <Button icon={'eyedropper'} onClick={() => this.startEyedropperAdd()}/>\n                        {/*<Button icon={'copy'} onClick={() => this.copyCode(pal)}/>*/}\n                        <Button icon={'code-file'} onClick={() => this.startCodeMode(pal)}/>\n                    </div>\n                );\n            }\n\n            return (\n                <div className=\"ui-palette\">\n                    <div className=\"palette-label\">{pal.name}</div>\n                    {paletteContent}\n                </div>\n            );\n        }else{\n\n            const palettes: Palette[] = this.state.palettes || [];\n\n            return (\n                <div className=\"ui-palette\">\n                    {palettes.concat(PaletteManager.natives).map(p => this.palettePreview(p))}\n                </div>\n            );\n        }\n    }\n\n}","import * as React from \"react\";\nimport {RefObject} from \"react\";\nimport {Callable} from \"../hui/helpers/hui\";\nimport {Button} from \"../hui/items/Button\";\nimport {Size} from \"../hui/helpers/Rectangle\";\nimport {MenuItem} from \"../hui/items/MenuItem\";\n\nexport interface PreviewPanelProps{\n    data: string;\n    onActivate?: Callable;\n    onDelete?: Callable;\n    selected?: boolean;\n    size: Size;\n}\n\nexport class PreviewPanel extends React.Component<PreviewPanelProps>{\n\n    ref: RefObject<HTMLDivElement> = React.createRef();\n\n    private onActivate(){\n        if (this.props.onActivate){\n            this.props.onActivate();\n        }\n    }\n\n    private onDelete(){\n        if (this.props.onDelete){\n            this.props.onDelete();\n        }\n    }\n\n    render() {\n\n        const size = this.props.size;\n        const length = Math.max(size.width, size.height);\n        const level = Math.ceil(length/64);\n\n        return (\n            <div\n                ref={this.ref}\n                onClick={() => this.onActivate()}\n                className={`preview-panel ${this.props.selected ? 'selected' : ''} level-${level}`}>\n                <div className=\"preview\"><img src={this.props.data} alt=\"\"/></div>\n                <div className=\"label size-label\">{size.width} x {size.height}</div>\n                <Button classNames={`ellipsis`} icon={`ellipsis`} iconSize={50}>\n                    <MenuItem text={'Delete'} onActivate={() => this.onDelete()}/>\n                </Button>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {ToolbarView} from \"../hui/layout/ToolbarView\";\nimport {Label} from \"../hui/items/Label\";\nimport {Button} from \"../hui/items/Button\";\nimport {Range} from \"../hui/items/Range\";\nimport {DockView} from \"../hui/layout/DockView\";\nimport {ContainerPanel} from \"./ContainerPanel\";\nimport {Callable, cn} from \"../hui/helpers/hui\";\nimport {Icon} from \"../model/Icon\";\nimport {RefObject} from \"react\";\nimport {BasicCardinalPoint, makeSz, Rectangle, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\nimport {IconReviewer, StartCorner} from \"../model/IconReviewer\";\nimport {GraphicsMemoryError} from \"../hui/helpers/errors\";\nimport {ColorUsageReport} from \"./ColorUsageReport\";\nimport {ReviewRenderer} from \"../rendering/ReviewRenderer\";\nimport {Expando} from \"./Expando\";\nimport {Palette, PaletteService} from \"../model/PaletteService\";\nimport {Separator} from \"../hui/items/Separator\";\n\nconst MAX_PREVIEW = 200;\nconst MIN_SIZE = 1;\nconst MAX_SIZE = 20;\nconst DEF_SIZE = 3;\nconst DEF_CORNER = 'nw';\n\nexport interface ReviewStudioProps{\n    icon: Icon;\n    onCloseRequested?: Callable;\n}\n\ninterface ReviewStudioState{\n    sampleSize: number;\n    startCorner: StartCorner;\n    mode: 'setup' | 'review';\n    palette?: Palette;\n    palettes: Palette[];\n}\n\nexport class ReviewStudio extends React.Component<ReviewStudioProps, ReviewStudioState>{\n\n    readonly previewCanvas: RefObject<HTMLCanvasElement> = React.createRef();\n    readonly reviewCanvas: RefObject<HTMLCanvasElement> = React.createRef();\n    readonly previewSize: Size;\n\n    private reviewSize: Size;\n    private reviewer: IconReviewer;\n\n    constructor(props: ReviewStudioProps) {\n        super(props);\n\n        this.state = {\n            sampleSize: DEF_SIZE,\n            startCorner: DEF_CORNER,\n            mode: 'setup',\n            palettes: [],\n        };\n\n        this.previewSize = scaleToContain(makeSz(MAX_PREVIEW, MAX_PREVIEW), makeSz(props.icon.width, props.icon.height));\n        this.reviewer = new IconReviewer(props.icon, makeSz(DEF_SIZE, DEF_SIZE), DEF_CORNER);\n    }\n\n    private dismiss(){\n        if (this.props.onCloseRequested){\n            this.props.onCloseRequested();\n        }\n    }\n\n    private setStartCorner(startCorner: StartCorner){\n        this.setState({startCorner});\n\n        const {icon} = this.props;\n        const {sampleSize} = this.state;\n\n        this.reviewer = new IconReviewer(icon, makeSz(sampleSize, sampleSize), startCorner);\n        this.updateCanvasesGraphics();\n    }\n\n    private setSampleSize(sampleSize: number){\n        this.setState({sampleSize});\n\n        const {icon} = this.props;\n        const {startCorner} = this.state;\n\n        this.reviewer = new IconReviewer(icon, makeSz(sampleSize, sampleSize), startCorner);\n        this.updateCanvasesGraphics();\n    }\n\n    private updateCanvasesGraphics(){\n        const renderer = new ReviewRenderer(this.reviewer, this.state.palette);\n        this.drawPreviewCanvas(renderer);\n        this.drawReviewCanvas(renderer);\n    }\n\n    private drawPreviewCanvas(renderer: ReviewRenderer){\n        if (!this.previewCanvas.current){\n            return;\n        }\n\n        const destCx = this.previewCanvas.current.getContext('2d');\n\n        if (!destCx){\n            throw new GraphicsMemoryError();\n        }\n\n        renderer.renderPreview(destCx, this.previewSize);\n\n    }\n\n    private drawReviewCanvas(renderer: ReviewRenderer){\n\n        if (!this.reviewCanvas.current){\n            return;\n        }\n\n        const context = this.reviewCanvas.current.getContext('2d');\n\n        if (!context){\n            throw new GraphicsMemoryError();\n        }\n\n        renderer.renderReview(context, this.reviewSize);\n\n    }\n\n    private navigate(p: BasicCardinalPoint){\n        this.reviewer.move(p);\n        this.updateCanvasesGraphics();\n        this.forceUpdate();\n    }\n\n    private loadPalettes(){\n        PaletteService.getAll().then(palettes => this.setState({palettes}));\n    }\n\n    private selectPalette(palette: Palette){\n        this.setState({palette});\n        setTimeout(() => this.updateCanvasesGraphics());\n    }\n\n    private resetPalette(){\n        this.setState({palette: undefined});\n\n        setTimeout(() => this.updateCanvasesGraphics());\n\n    }\n\n    componentDidMount() {\n\n        this.loadPalettes();\n\n        this.updateCanvasesGraphics();\n\n        window.addEventListener('keydown', e => {\n            if (e.key === 'ArrowLeft'){\n                this.navigate('w');\n                e.stopPropagation();\n\n            }else if(e.key == 'ArrowRight'){\n                this.navigate('e');\n                e.stopPropagation();\n\n            }else if(e.key == 'ArrowUp'){\n                this.navigate('n');\n                e.stopPropagation();\n\n            }else if(e.key == 'ArrowDown'){\n                this.navigate('s');\n                e.stopPropagation();\n\n            }else if(e.key == 'Escape'){\n                this.dismiss();\n                e.stopPropagation();\n\n            }\n        }, true);\n    }\n\n    componentDidUpdate(prevProps: Readonly<ReviewStudioProps>, prevState: Readonly<ReviewStudioState>, snapshot?: any) {\n        if (prevState.mode === 'setup' && this.state.mode === 'review' && this.reviewCanvas.current){\n            const r = Rectangle.fromDOMRect(this.reviewCanvas.current.parentElement!.getBoundingClientRect());\n            this.reviewSize = r.size;\n            this.reviewCanvas.current.width = r.width;\n            this.reviewCanvas.current.height = r.height;\n            this.updateCanvasesGraphics();\n        }\n    }\n\n    render() {\n\n        const {mode, palette, palettes} = this.state;\n\n        const topItems = (\n            <>\n                <Label text={`Review`}/>\n            </>\n        );\n\n        const topItemsFar = (\n            <>\n                <Button icon={`dismiss`} iconSize={20} onClick={() => this.dismiss()}/>\n            </>\n        );\n\n        const sideItems = (\n            <div className=\"review-studio-sidebar\">\n                <ContainerPanel classNames=\"preview\">\n                    <canvas\n                        width={this.previewSize.width}\n                        height={this.previewSize.height}\n                        ref={this.previewCanvas}/>\n                </ContainerPanel>\n                <Expando title={`Navigate`}>\n                    <div className=\"key-navigation\">\n                        <div className=\"row\">\n                            <div className={`nothing`}/>\n                            <Button icon={`circle-arrow-up`} iconSize={50} onClick={() => this.navigate('n')}/>\n                            <div className={`nothing`}/>\n                        </div>\n                        <div className=\"row\">\n                            <Button icon={`circle-arrow-left`} iconSize={50} onClick={() => this.navigate('w')}/>\n                            <div className={`nothing`}/>\n                            <Button icon={`circle-arrow-right`} iconSize={50} onClick={() => this.navigate('e')}/>\n                        </div>\n                        <div className=\"row\">\n                            <div className={`nothing`}/>\n                            <Button icon={`circle-arrow-down`} iconSize={50} onClick={() => this.navigate('s')}/>\n                            <div className={`nothing`}/>\n                        </div>\n                    </div>\n                </Expando>\n                <Expando title={`Colors`}>\n                    {(()=>{\n                        if (palette){\n                            return (\n                                <Button\n                                    icon={`dismiss`}\n                                    text={palette.name}\n                                    iconSize={20}\n                                    onClick={() => this.resetPalette()}/>\n                            );\n                        }else{\n                            return (\n                                <div className=\"palettes\">\n                                    {palettes.map(p => (\n                                        <Button text={p.name} onClick={()=>this.selectPalette(p)}/>\n                                    ))}\n                                </div>\n                            );\n                        }\n                    })()}\n                    <Separator/>\n                    <ColorUsageReport data={this.reviewer.sampleSprite} palette={palette}/>\n                </Expando>\n\n            </div>\n        );\n\n        const setupItems = (\n            <>\n                <div className={`row sample-size`}>\n                    <div className=\"caption\">Sample Size</div>\n                    <Range\n                        value={this.state.sampleSize} min={MIN_SIZE} max={MAX_SIZE}\n                        round={true}\n                        onChange={v => this.setSampleSize(v)}\n                    />\n                    <div className=\"value\">{this.state.sampleSize} X {this.state.sampleSize}</div>\n                </div>\n                <div className=\"row corner\">\n                    <div className=\"caption\">Corner to Start</div>\n                    <div className=\"corner-grid\">\n                        <div className=\"row\">\n                            <div\n                                className={cn(\"corner nw\", {selected: this.state.startCorner === 'nw'})}\n                                onClick={() => this.setStartCorner('nw')}\n                            />\n                            <div className={cn(\"corner ne\", {selected: this.state.startCorner === 'ne'})}\n                                 onClick={() => this.setStartCorner('ne')}\n                            />\n                        </div>\n                        <div className=\"row\">\n                            <div\n                                className={cn(\"corner sw\", {selected: this.state.startCorner === 'sw'})}\n                                onClick={() => this.setStartCorner('sw')}\n                            />\n                            <div\n                                className={cn(\"corner se\", {selected: this.state.startCorner === 'se'})}\n                                onClick={() => this.setStartCorner('se')}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"row cta\">\n                    <Button classNames={`cta`} text={`Start`} onClick={() => this.setState({mode: 'review'})}/>\n                </div>\n            </>\n        );\n\n        const reviewItems = (\n            <>\n                <canvas ref={this.reviewCanvas}/>\n            </>\n        );\n\n        const mainContent = mode === 'setup' ? setupItems : reviewItems;\n\n        return (\n            <div className={`modal review-studio`}>\n                <ToolbarView items={topItems} itemsFar={topItemsFar}>\n                    <DockView side={`right`} sideView={sideItems}>\n                        <ContainerPanel classNames={`main-panel`}>\n                            {mainContent}\n                        </ContainerPanel>\n                    </DockView>\n                </ToolbarView>\n            </div>\n        );\n    }\n\n}\n","import {Callable} from \"./hui\";\n\nexport class ClickDismiss{\n\n    static mouseup = new ClickDismiss('mouseup');\n\n    private static idReminder = 1;\n\n    private stack: {id: number, call: Callable}[] = [];\n\n    private preventNext = false;\n\n    private constructor(eventName: string){\n        window.addEventListener(eventName, e => {\n            if(this.preventNext) {\n                this.preventNext = false;\n                return;\n            }else{\n                if(this.stack.length > 0) {\n                    e.stopImmediatePropagation();\n                    this.popAndExecute();\n                }\n            }\n        });\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: Callable): number{\n\n        const id = ClickDismiss.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    popAndExecute(){\n        const entry = this.stack.pop();\n\n        if(entry){\n            entry.call();\n            this.unregister(entry.id);\n        }\n    }\n\n    preventNextEvent(){\n        this.preventNext = true;\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n        this.preventNext = false;\n    }\n\n}","\nexport class InvalidColorFormatError extends Error{}\n\nexport class Color{\n\n    static get black(): Color{\n        return new Color(0, 0,0);\n    }\n\n    static hexParsable(hexColor: string): boolean{\n        return hexColor.match(/#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?/) !== null;\n    }\n\n    static fromHex(hexColor: string): Color{\n\n        if (!Color.hexParsable(hexColor)){\n            throw new InvalidColorFormatError(hexColor);\n        }\n\n        hexColor = hexColor.replace('#', '');\n\n        let toDecimal = function(hex: any){ return parseInt(hex, 16) };\n\n        let r = 0;\n        let g = 0;\n        let b = 0;\n        let a = 1;\n\n        // If three digits\n        if(hexColor.length == 3){\n            r = toDecimal(hexColor[0] + hexColor[0]);\n            g = toDecimal(hexColor[1] + hexColor[1]);\n            b = toDecimal(hexColor[2] + hexColor[2]);\n        }else{\n            r = toDecimal(hexColor[0] + hexColor[1]);\n            g = toDecimal(hexColor[2] + hexColor[3]);\n            b = toDecimal(hexColor[4] + hexColor[5]);\n\n            if(hexColor.length == 8) {\n                a = toDecimal(hexColor[6] + hexColor[7]);\n            }\n        }\n\n        return new Color(r, g, b, a);\n\n    }\n\n    /**\n     * HSV to RGB color conversion\n     *\n     * H runs from 0 to 360 degrees\n     * S and V run from 0 to 1\n     *\n     * Ported from the excellent java algorithm by Eugene Vishnevsky at:\n     * http://www.cs.rit.edu/~ncs/color/t_convert.html\n     */\n    static fromHsv(h: number, s: number, v: number): Color{\n        let r, g, b;\n        let i;\n        let f, p, q, t;\n\n        // Make sure our arguments stay in-range\n        h = Math.max(0, Math.min(360, h));\n        s = Math.max(0, Math.min(100, s));\n        v = Math.max(0, Math.min(100, v));\n\n        if(s == 0) {\n            // Achromatic (grey)\n            r = g = b = v;\n            return new Color(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));\n        }\n\n        h /= 60; // sector 0 to 5\n        i = Math.floor(h);\n        f = h - i; // factorial part of h\n        p = v * (1 - s);\n        q = v * (1 - s * f);\n        t = v * (1 - s * (1 - f));\n\n        switch(i) {\n            case 0: r = v; g = t; b = p; break;\n            case 1: r = q; g = v; b = p; break;\n            case 2: r = p; g = v; b = t; break;\n            case 3: r = p; g = q; b = v; break;\n            case 4: r = t; g = p; b = v; break;\n            default: r = v; g = p; b = q;\n        }\n\n        return new Color(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));\n    }\n\n    static fromTupleInt8(t: [number,  number, number, number]): Color{\n        return new Color(t[0], t[1], t[2], t[3]/255);\n    }\n\n    static fromInt8Array(data: Uint8ClampedArray, offset: number = 0): Color{\n        return this.fromTupleInt8([ data[offset], data[offset + 1], data[offset + 2], data[offset + 3] ]);\n    }\n\n    static get transparent(): Color{\n        return new Color(0, 0, 0, 0);\n    }\n\n    static get white(): Color{\n        return new Color(255, 255, 255);\n    }\n\n    constructor(\n        readonly r: number,     //  0 - 255\n        readonly g: number,     //  0 - 255\n        readonly b: number,     //  0 - 255\n        readonly a: number = 1, //  0 - 1\n    ) {\n        this.r = Math.max(Math.min(Math.round(r), 255), 0);\n        this.g = Math.max(Math.min(Math.round(g), 255), 0);\n        this.b = Math.max(Math.min(Math.round(b), 255), 0);\n        this.a = Math.max(Math.min(a, 1), 0);\n    }\n\n    equals(c: Color): boolean{\n        return c.r === this.r && c.g === this.g && c.b === this.b && c.a === this.a;\n    }\n\n    copyToUint8(array: Uint8ClampedArray, offset: number){\n        const [r, g, b, a] = this.tupleInt8;\n        array[offset] = r;\n        array[offset + 1] = g;\n        array[offset + 2] = b;\n        array[offset + 3] = a;\n    }\n\n    toString(): string{\n        if (this.a != 1){\n            return this.hexRgba;\n        }\n\n        return this.hexRgb;\n    }\n\n    withAlpha(alpha: number){\n        if (alpha < 0 || alpha > 100){\n            throw new Error(`Invalid alpha: ${alpha}`);\n        }\n        return new Color(this.r, this.g, this.b, alpha);\n    }\n\n    get cssRgb(): string{\n        return `rgb(${this.r}, ${this.g}, ${this.b})`;\n    }\n\n    get cssRgba(): string{\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n    }\n\n    get hexRgb(): string{\n\n        const hex = (n: number) => {\n            const result = n.toString(16);\n            return result.length == 1 ? `0${result}` : result;\n        }\n\n        return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`\n    }\n\n    get hexRgba(): string{\n\n        const hex = (n: number) => {\n            const result = n.toString(16);\n            return result.length == 1 ? `0${result}` : result;\n        }\n\n        return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(Math.round(this.a * 255))}`\n    }\n\n    get hsv(): [number, number, number]{\n        let rr, gg, bb;\n        let r = this.r / 255;\n        let g = this.g / 255;\n        let b = this.b / 255;\n        let h = 0;\n        let s = 0;\n        let v = Math.max(r, g, b);\n        let diff = v - Math.min(r, g, b);\n        let diff_c = (c: number) => { return (v - c) / 6 / diff + 1 / 2 };\n\n        if(diff == 0) {\n            h = s = 0;\n        }else {\n            s = diff / v;\n            rr = diff_c(r);\n            gg = diff_c(g);\n            bb = diff_c(b);\n\n            if(r === v) {\n                h = bb - gg;\n            }else if(g === v) {\n                h = (1 / 3) + rr - bb;\n            }else if(b === v) {\n                h = (2 / 3) + gg - rr;\n            }\n        }\n\n        if(h < 0) {\n            h += 1;\n        }else if(h > 1) {\n            h -= 1;\n        }\n\n        return [\n            Math.round(h * 360),\n            s,\n            v\n        ];\n    }\n\n    get isTransparent(): boolean{\n        return (this.r === 0 &&\n            this.g ===  0 &&\n            this.b ===  0 &&\n            this.a === 0);\n    }\n\n    get relativeLuminance(): number{\n        return 0.2126 * (this.r / 255) + 0.7152 * (this.g / 255) + 0.0722 * (this.b / 255);\n    }\n\n    get tupleInt8(): [number, number, number, number]{\n        return [this.r, this.g, this.b, Math.round(this.a * 255)];\n    }\n\n}","/**\n * Keeps a stack for globally reacting to keys, like Escape and Enter.\n */\nimport {Callable} from \"./hui\";\n\nexport class\nFocusStackHandler{\n\n    private static idReminder = 1;\n\n    static dismiss = new FocusStackHandler('Escape');\n\n    static commit = new FocusStackHandler('Enter');\n\n    private stack: {id: number, call: Callable}[] = [];\n\n    private constructor(key: string){\n\n        window.addEventListener('keydown', e => {\n            if(e.key === key) {\n                if(this.stack.length > 0) {\n                    e.stopImmediatePropagation();\n                    this.popAndExecute();\n                }\n            }\n        });\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: Callable): number{\n\n        const id = FocusStackHandler.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    popAndExecute(){\n        const entry = this.stack.pop();\n\n        if(entry){\n            entry.call();\n            this.unregister(entry.id);\n        }\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n    }\n\n}","export type KeyCaptureEvent = (e: KeyboardEvent) => void;\n\nexport class KeyCaptureStackHandler{\n    private static idReminder = 1;\n\n    static instance = new KeyCaptureStackHandler();\n\n    private stack: {id: number, call: KeyCaptureEvent}[] = [];\n\n    private constructor(){\n        window.addEventListener('keydown', e => {\n            if(this.stack.length > 0) {\n                this.execute(e);\n            }\n        }, true);\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: KeyCaptureEvent): number{\n\n        const id = KeyCaptureStackHandler.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    private execute(e: KeyboardEvent){\n        if(this.stack.length > 0) {\n            const entry = this.stack[this.stack.length - 1];\n            entry.call(e);\n        }\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n    }\n}","\nexport interface Point {\n    x: number;\n    y: number;\n}\n\nexport interface Rect{\n    left: number,\n    top: number,\n    width: number,\n    height: number,\n}\n\nexport interface Size {\n    width: number;\n    height: number;\n}\n\nexport type BasicCardinalPoint = 'n' | 'e' | 's' | 'w';\nexport type CardinalPoint = BasicCardinalPoint | 'ne' | 'se' | 'sw'| 'nw';\n\nexport function makePt(x: number, y: number): Point {\n    return {x, y};\n}\n\nexport function makeSz(width: number, height: number): Size{\n    return {width, height};\n}\n\nexport function roundPt(p: Point): Point{\n    return makePt(Math.round(p.x), Math.round(p.y));\n}\n\nexport function roundSz(size: Size): Size{\n    return makeSz(Math.round(size.width), Math.round(size.height));\n}\n\nexport function compareSize(a: Size, b: Size): number{\n    return (a.width * a.height) - (b.width * b.height);\n}\n\nexport function slope(a: Point, b: Point): number{\n    return (b.y - a.y) / (b.x - a.x);\n}\n\nexport function midPoint(a: Point, b: Point): Point {\n    return {x: (a.x + b.x) / 2, y: (a.y + b.y) / 2};\n}\n\nexport function distance(a: Point, b: Point): number{\n    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n}\n\nexport function scaleToContain(container: Size, scalable: Size): Size{\n\n    const wOriented = makeSz(container.width, container.width * scalable.height / scalable.width);\n    const hOriented = makeSz(container.height * scalable.width / scalable.height, container.height);\n\n    if (wOriented.width <= container.width && wOriented.height <= container.height){\n        return wOriented;\n    }\n\n    return hOriented;\n}\n\nexport class Rectangle{\n\n    static get empty(): Rectangle{\n        return new Rectangle(0, 0, 0, 0);\n    }\n\n    static fromRect(r: Rect): Rectangle{\n        return new Rectangle(r.left, r.top, r.width, r.height);\n    }\n\n    static fromDOMRect(r: DOMRect): Rectangle{\n        return new Rectangle(r.left, r.top, r.width, r.height);\n    }\n\n    static fromLTRB(left: number, top: number, right: number, bottom: number): Rectangle{\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n\n    static fromPoint(p: Point): Rectangle{\n        return new Rectangle(p.x, p.y, 0, 0);\n    }\n\n    static fromSize(s: Size): Rectangle{\n        return new Rectangle(0, 0, s.width, s.height);\n    }\n\n    static unionOf(...rects: Rectangle[]): Rectangle | null{\n\n        if(rects.length == 0) {\n            return null;\n        }\n\n        let current = rects[0];\n\n        for(let i = 1; i < rects.length; i++){\n            current = current.union(rects[i]);\n        }\n\n        return current;\n    }\n\n    constructor(readonly left: number, readonly top:number, readonly width: number, readonly height: number){}\n\n    centerAt(point: Point): Rectangle{\n        return this.withLocation(makePt(\n            point.x - this.width / 2,\n            point.y - this.height / 2\n        ));\n    }\n\n    clone(): Rectangle{\n        return new Rectangle(this.left, this.top, this.width, this.height);\n    }\n\n    contains(p: Point): boolean{\n        return p.x >= this.left && p.x < this.right && p.y >= this.top && p.y < this.bottom;\n    }\n\n    deflate(horizontal: number, vertical: number): Rectangle{\n        return Rectangle.fromLTRB(this.left + horizontal, this.top + vertical, this.right - horizontal, this.bottom - vertical);\n    }\n\n    equals(r: Rectangle): boolean{\n        return r.left === this.left &&\n            r.top === this.top &&\n            r.width === this.width &&\n            r.height === this.height;\n    }\n\n    getCardinalPoint(c: CardinalPoint): Point{\n        switch (c) {\n            case 'n': return this.north;\n            case 'ne': return this.northEast;\n            case 'e': return this.east;\n            case 'se': return this.southEast;\n            case 's': return this.south;\n            case 'sw': return this.southWest;\n            case 'w': return this.west;\n            case 'nw': return this.northWest;\n        }\n    }\n\n    inflate(horizontal: number, vertical: number): Rectangle{\n        return Rectangle.fromLTRB(this.left - horizontal, this.top - vertical, this.right + horizontal, this.bottom + vertical);\n    }\n\n    intersects(rectangle: Rectangle): boolean{\n        let thisX = this.left;\n        let thisY = this.top;\n        let thisW = this.width;\n        let thisH = this.height;\n        let rectX = rectangle.left;\n        let rectY = rectangle.top;\n        let rectW = rectangle.width;\n        let rectH = rectangle.height;\n        return (rectX < thisX + thisW) && (thisX < (rectX + rectW)) && (rectY < thisY + thisH) && (thisY < rectY + rectH);\n    }\n\n    offset(xOffset: number, yOffset: number): Rectangle{\n        return this.withLocation(makePt(this.left + xOffset, this.top + yOffset));\n    }\n\n    round(): Rectangle{\n        return new Rectangle(\n            Math.round(this.left),\n            Math.round(this.top),\n            Math.round(this.width),\n            Math.round(this.height),\n        );\n    }\n\n    toString(){\n        return `(Rect: ${this.left}, ${this.top}, ${this.width}, ${this.height})`;\n    }\n\n    union(r: Rectangle): Rectangle{\n        const x = [this.left, this.right, r.left, r.right];\n        const y = [this.top, this.bottom, r.top, r.bottom];\n        return Rectangle.fromLTRB(\n            Math.min(...x), Math.min(...y),\n            Math.max(...x), Math.max(...y)\n        );\n    }\n\n    withBottom(bottom: number){\n        return new Rectangle(this.left, bottom - this.height, this.width, this.height);\n    }\n\n    withHeight(height: number){\n        return new Rectangle(this.left, this.top, this.width, height);\n    }\n\n    withLeft(left: number){\n        return new Rectangle(left, this.top, this.width, this.height);\n    }\n\n    withLocation(location: Point): Rectangle{\n        return new Rectangle(location.x, location.y, this.width, this.height);\n    }\n\n    withRight(right: number){\n        return new Rectangle(right - this.width, this.top, this.width, this.height);\n    }\n\n    withSize(size: Size): Rectangle{\n        return new Rectangle(this.left, this.top, size.width, size.height);\n    }\n\n    withTop(top: number){\n        return new Rectangle(this.left, top, this.width, this.height);\n    }\n\n    withWidth(width: number){\n        return new Rectangle(this.left, this.top, width, this.height);\n    }\n\n    get center(): Point{\n        return {\n            x: this.left + this.width / 2,\n            y: this.top + this.height / 2\n        };\n    }\n\n    get isEmpty(): boolean{\n        return this.width == 0 && this.height == 0 && this.left == 0 && this.top == 0;\n    }\n\n    get right(): number{\n        return this.left + this.width;\n    }\n\n    get bottom(): number{\n        return this.top + this.height;\n    }\n\n    get location(): Point{\n        return makePt(this.left, this.top);\n    }\n\n    get tuple(): [number, number, number, number]{\n        return [this.left, this.top, this.width, this.height];\n    }\n\n    get tupleLTRB(): [number, number, number, number]{\n        return [this.left, this.top, this.right, this.bottom];\n    }\n\n    get northEast(): Point{\n        return {x: this.right, y: this.top};\n    }\n\n    get southEast(): Point{\n        return {x: this.right, y: this.bottom};\n    }\n\n    get southWest(): Point{\n        return {x: this.left, y: this.bottom};\n    }\n\n    get northWest(): Point{\n        return {x: this.left, y: this.top};\n    }\n\n    get east(): Point{\n        return makePt(this.right, this.center.y);\n    }\n\n    get eastSegment(): [Point, Point]{\n        return [this.northEast, this.southEast];\n    }\n\n    get north(): Point{\n        return makePt(this.center.x, this.top);\n    }\n\n    get northSegment(): [Point, Point]{\n        return [this.northEast, this.northWest];\n    }\n\n    get south(): Point{\n        return makePt(this.center.x, this.bottom);\n    }\n\n    get southSegment(): [Point, Point]{\n        return [this.southEast, this.southWest];\n    }\n\n    get west(): Point{\n        return makePt(this.left, this.center.y);\n    }\n\n    get westSegment(): [Point, Point]{\n        return [this.southWest, this.northWest];\n    }\n\n    get size(): Size{\n        return {width: this.width, height: this.height};\n    }\n}","\nexport function darkModeOn(): boolean | undefined {\n    if (window.matchMedia){\n        return window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n}","export function uuid(): string{\n    return Uuid.random().stringValue;\n}\n\nexport class Uuid{\n\n    static random(): Uuid{\n        if(window.crypto){\n            return new Uuid(window.crypto.getRandomValues(new Uint8ClampedArray(16)));\n        }else{\n            return new Uuid(new Uint8ClampedArray(16).map(_ => Math.random()));\n        }\n    }\n\n    readonly stringValue: string;\n\n    constructor(readonly value: Uint8ClampedArray){\n        if(value.length != 16){\n            throw new Error();\n        }\n\n        this.stringValue = '';\n\n        for(let i = 0; i < value.length; i++){\n            const hex = value[i].toString(16);\n            this.stringValue += hex.length < 2 ? '0' + hex : hex;\n            if(i % 2 == 1 && i > 1 && i < 10){\n                this.stringValue += '-';\n            }\n        }\n    }\n\n    toString(): string{\n        return this.stringValue;\n    }\n}\n","\nexport class GraphicsMemoryError extends Error{}","export interface Focusable{\n    avoidFocus?: boolean;\n}\nexport interface Disable{\n    disabled?: boolean;\n}\n\nexport interface ClassNames{\n    classNames?: string;\n}\n\n// Behaves like classnames npm module\nexport function cn(...args: any[]): string{\n    const result: string[] = [];\n\n    for(const thing of args){\n        if (typeof thing === \"object\"){\n            for(const prop in thing){\n                const value = thing[prop];\n                if (!!value){\n                    result.push(prop);\n                }\n            }\n        }else if(!!thing){\n            result.push(String(thing));\n        }\n    }\n\n    return result.join(' ');\n}\n\nexport type Callable = () => void;","import * as React from \"react\";\nimport {ClickableProps} from \"./Clickable\";\nimport {Label, LabelProps} from \"./Label\";\nimport {Icon} from \"./Icon\";\nimport {KeyboardEvent, RefObject} from \"react\";\nimport {MenuOverlay} from \"../overlays/MenuOverlay\";\nimport {Callable, Disable} from \"../helpers/hui\";\nimport {FocusStackHandler} from \"../helpers/FocusStackHandler\";\nimport {ClickDismiss} from \"../helpers/ClickDismiss\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface ButtonProps extends ClickableProps, LabelProps, Disable{\n    children?: React.ReactNode;\n    split?: boolean;\n    face?: \"hover\" | \"always\" | \"never\";\n    selected?: boolean;\n    useChevron?: boolean;\n}\n\nexport interface ButtonState {\n    dropDownVisible?: boolean;\n}\n\nexport class Button extends React.Component<ButtonProps, ButtonState>{\n\n    buttonRef: RefObject<HTMLDivElement>;\n\n    private escapeKeyDismissId = 0;\n    private clickDismissId = 0;\n\n    constructor(props: ButtonProps){\n        super(props);\n        this.buttonRef = React.createRef();\n        this.state = {};\n        this.activate = this.activate.bind(this);\n        this.showDropDown = this.showDropDown.bind(this);\n        this.hideDropDown = this.hideDropDown.bind(this);\n        this.keyDownHide = this.keyDownHide.bind(this);\n        this.keyDownShow = this.keyDownShow.bind(this);\n        this.keyDownActivate = this.keyDownActivate.bind(this);\n    }\n\n    activate(){\n        if(this.props.disabled !== true && this.props.onClick) {\n            this.props.onClick();\n        }\n    }\n\n    keyPass(e: KeyboardEvent<HTMLDivElement>, call: Callable){\n        if(e.key === 'Enter' || e.key === ' ') {\n            if(!this.props.disabled) {\n                e.stopPropagation();\n                e.preventDefault();\n                call();\n            }\n        }\n    }\n\n    keyDownHide(e: KeyboardEvent<HTMLDivElement>){\n        this.keyPass(e, () => this.hideDropDown());\n    }\n\n    keyDownShow(e: KeyboardEvent<HTMLDivElement>){\n        if(this.props.disabled) {\n            return;\n        }\n        this.keyPass(e, () => this.showDropDown());\n    }\n\n    keyDownActivate(e: KeyboardEvent<HTMLDivElement>){\n        this.keyPass(e, () => this.activate());\n    }\n\n    hideDropDown(){\n        this.setState({dropDownVisible: false});\n\n        // Unregister for ESC key\n        FocusStackHandler.dismiss.unregister(this.escapeKeyDismissId);\n\n        // Unregister from body click\n        ClickDismiss.mouseup.unregister(this.clickDismissId);\n    }\n\n    showDropDown(){\n        this.setState({dropDownVisible: true});\n\n        // Register for hiding when ESC key is pressed\n        this.escapeKeyDismissId = FocusStackHandler.dismiss.register(() => { this.hideDropDown(); });\n\n        // Register for hiding when body is clicked\n        this.clickDismissId = ClickDismiss.mouseup.register(() => this.hideDropDown());\n    }\n\n    render(){\n        const rect = Rectangle.fromDOMRect(this.buttonRef.current?.getBoundingClientRect() || new DOMRect());\n        const chevron = () => this.props.useChevron ? <Icon name={\"chevron-down\"} size={8}/> : undefined;\n        const label = () => <Label {...this.props} />;\n        const menu = () => (\n            <MenuOverlay\n                top={rect.top + rect.height}\n                left={rect.left}\n                refRect={rect}\n                onDismissSignal={this.hideDropDown}>\n                {this.props.children}\n            </MenuOverlay>\n        );\n\n        const tags = [\n                `face-${this.props.face || 'hover'}`,\n                 this.props.classNames,\n                 this.props.disabled ? 'disabled' : null,\n                 this.props.selected ? 'selected' : null,\n            ]\n            .filter(a => !!a)\n            .join(` `);\n\n        const tabProp = this.props.disabled ? {} : {tabIndex: 0};\n\n        if(this.props.children) {\n            if(this.props.split) {\n                if(this.state.dropDownVisible) {\n                    return (\n                        <div className={`ui-button-wrap split`}>\n                            <div {...tabProp}\n                                 ref={this.buttonRef}\n                                 className={`ui-clickable ui-button is-open ${tags}`}\n                                 onClick={this.activate}>\n                                {label()}\n                            </div>\n                            <div {...tabProp}\n                                 className={`ui-clickable ui-button split-part`}\n                                 onClick={this.showDropDown}\n                                 onKeyDown={this.keyDownShow}>\n                                {chevron()}\n                                {menu()}\n                            </div>\n                        </div>\n                    )\n                }else{\n                    return (\n                        <div className={`ui-button-wrap split ${tags}`}>\n                            <div {...tabProp}\n                                 ref={this.buttonRef}\n                                 className={\"ui-clickable ui-button\"}\n                                 onKeyDown={this.keyDownActivate}\n                                 onClick={this.activate}>\n                                {label()}\n                            </div>\n                            <div {...tabProp}\n                                 className={`ui-clickable ui-button split-part`}\n                                 onClick={this.showDropDown}\n                                 onKeyDown={this.keyDownShow}>\n                                {chevron()}\n                            </div>\n                        </div>\n                    )\n                }\n\n            }else if(this.state.dropDownVisible) {\n                return (\n                    <div className={`ui-button-wrap`}>\n                        <div {...tabProp}\n                             ref={this.buttonRef}\n                             className={`ui-clickable ui-button is-open ${tags}`}\n                             onKeyDown={this.keyDownHide}\n                             onClick={this.showDropDown}>\n                            {label()}\n                            {chevron()}\n                        </div>\n                        {menu()}\n                    </div>\n                )\n            }else{\n                return (\n                    <div className={`ui-button-wrap`}>\n                        <div {...tabProp}\n                             ref={this.buttonRef}\n                             className={`ui-clickable ui-button ${tags}`}\n                             onClick={this.showDropDown}\n                             onKeyDown={this.keyDownShow}>\n                            {label()}\n                            {chevron()}\n                        </div>\n                    </div>\n                )\n            }\n        }else{\n            return (\n                <div {...tabProp}\n                     ref={this.buttonRef}\n                     className={`ui-clickable ui-button ${tags}`}\n                     onClick={this.activate}\n                     onKeyDown={this.keyDownActivate}>\n                    {label()}\n                </div>\n            )\n        }\n    }\n}","import * as React from \"react\";\nimport {Callable, ClassNames, cn} from \"../helpers/hui\";\n\nexport interface ClickableProps extends ClassNames{\n    isSelected?: boolean;\n    avoidHover?: boolean;\n    onClick?: Callable;\n    children?: React.ReactNode;\n}\n\ninterface ClickableState {\n    isHovered?: boolean;\n}\nexport class Clickable extends React.Component<ClickableProps, ClickableState>{\n\n    constructor(props: ClickableProps){\n        super(props);\n        this.state = {};\n        this.mouseEnter = this.mouseEnter.bind(this);\n        this.mouseLeave = this.mouseLeave.bind(this);\n    }\n\n    mouseEnter(){\n        if(this.props.avoidHover !== true) {\n            this.setState({isHovered: true});\n        }\n    }\n\n    mouseLeave(){\n        if(this.props.avoidHover !== true) {\n            this.setState({isHovered: false});\n        }\n    }\n\n    render(){\n        const classTags = cn(\n            `ui-clickable`,\n            {selected: this.props.isSelected || this.state.isHovered},\n            this.props.classNames\n        );\n        return (\n            <div\n                className={classTags}\n                onMouseEnter={this.mouseEnter}\n                onMouseLeave={this.mouseLeave}\n                onClick={this.props.onClick}\n            >\n                {this.props.children}\n            </div>\n        );\n    }\n}","import * as React from \"react\";\nimport {Color} from \"../helpers/Color\";\nimport {RefObject} from \"react\";\nimport {GraphicsMemoryError} from \"../helpers/errors\";\nimport {Range} from \"./Range\";\nimport {makeSz} from \"../helpers/Rectangle\";\n\nconst BG_SQ_SIZE = 5;\nconst BG_COLOR_A = [0, 0, 0, 0];\nconst BG_COLOR_B = [127, 127, 127, 127];\n\nexport interface ColorPickerProps{\n    color?: Color;\n    colorPicked: (color: Color) => any;\n}\n\nexport interface ColorPickerState{\n    currentColor: Color;\n    selectedHue: number;\n}\n\ntype ColorPickerFocus = 'hex' | 'r' | 'g' | 'b' | 'a';\nconst ColorPickerFields: ColorPickerFocus[] = ['hex', 'r', 'g', 'b', 'a'];\n\nfunction dataUrlFrom(data: Uint8ClampedArray, width: number): string{\n    const imageData = new ImageData(data, width);\n    const canvas: HTMLCanvasElement = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = data.length / 4 / width;\n\n    const cx = canvas.getContext('2d');\n\n    if(!cx){\n        throw new GraphicsMemoryError();\n    }\n\n    cx.putImageData(imageData, 0,0);\n\n    return canvas.toDataURL();\n}\n\nfunction createBgPattern(): string{\n    const lineOfA = new Array(BG_SQ_SIZE).fill(BG_COLOR_A);\n    const lineOfB = new Array(BG_SQ_SIZE).fill(BG_COLOR_B);\n    const rowA = [].concat(...lineOfA, ...lineOfB);\n    const rowB = [].concat(...lineOfB, ...lineOfA);\n    const chunkA = new Array(BG_SQ_SIZE).fill(rowA);\n    const chunkB = new Array(BG_SQ_SIZE).fill(rowB);\n    const data = new Uint8ClampedArray([].concat(...chunkA, ...chunkB));\n\n    return dataUrlFrom(data, BG_SQ_SIZE * 2);\n}\n\nfunction createHuePattern(): string{\n    const convert = (foo: number, hue: number) => Color.fromHsv(hue, 1, 1).tupleInt8;\n    const array360 = new Array(360).fill(0);\n    const arrayColors = array360.map(convert);\n    const flatArrayColors: number[] = [].concat(...arrayColors as any);\n    const data = new Uint8ClampedArray(flatArrayColors);\n    return dataUrlFrom(data, 360);\n}\n\nfunction createSaturationPattern(hue = 1, length = 10): string{\n\n    const arr = new Uint8ClampedArray(length * length * 4);\n    let z = 0\n\n    for(let j = length; j >= 0; j--){\n        for(let i = 0; i < length; i++){\n            const hsv = Color.fromHsv(hue, i/length, j/length);\n            let [r, g, b, a] = hsv.tupleInt8;\n            arr[z++] = r;\n            arr[z++] = g;\n            arr[z++] = b;\n            arr[z++] = a;\n        }\n    }\n\n    return dataUrlFrom(arr, length);\n}\n\nexport class ColorPicker extends React.Component<ColorPickerProps, ColorPickerState>{\n\n    static hueBar = createHuePattern();\n    static bgPattern = createBgPattern();\n\n    private focus: ColorPickerFocus | null = null;\n    private txtHex: RefObject<HTMLInputElement> = React.createRef();\n    private txtR: RefObject<HTMLInputElement> = React.createRef();\n    private txtG: RefObject<HTMLInputElement> = React.createRef();\n    private txtB: RefObject<HTMLInputElement> = React.createRef();\n    private txtA: RefObject<HTMLInputElement> = React.createRef();\n\n    constructor(props: ColorPickerProps) {\n        super(props);\n\n        const color = props.color || Color.black;\n\n        this.state = {\n            currentColor: color,\n            selectedHue: color.hsv[0],\n        }\n\n    }\n\n    private getInput(type: ColorPickerFocus): HTMLInputElement{\n\n        let ref: RefObject<HTMLInputElement>;\n\n        switch (type){\n            case \"a\": ref = this.txtA; break;\n            case \"r\": ref = this.txtR; break;\n            case \"g\": ref = this.txtG; break;\n            case \"b\": ref = this.txtB; break;\n            case \"hex\": ref = this.txtHex; break;\n        }\n\n        if (ref.current){\n            return ref.current;\n        }\n\n        throw new Error(`No input element for: ${type}`);\n    }\n\n    private getInputValueFor(type: ColorPickerFocus): string{\n\n        const color = this.state.currentColor;\n\n        switch (type){\n            case \"a\": return Math.round(color.a * 100).toString();\n            case \"r\": return color.r.toString();\n            case \"g\": return color.g.toString();\n            case \"b\": return color.b.toString();\n            case \"hex\": return color.hexRgb;\n        }\n\n    }\n\n    private updateColor(color: Color, selectedHue?: number){\n\n        this.setState({\n            currentColor: color,\n            selectedHue: typeof selectedHue === \"number\" ? selectedHue : color.hsv[0]\n        });\n\n        if (this.props.colorPicked){\n            this.props.colorPicked(color);\n        }\n    }\n\n    private updateHue(hue: number){\n        const color = this.state.currentColor;\n        const hsv = color.hsv;\n        this.updateColor(Color.fromHsv(hue, hsv[1], hsv[2]).withAlpha(color.a), hue);\n    }\n\n    private updateAlpha(alpha: number){\n        const color = this.state.currentColor;\n        this.updateColor(color.withAlpha(alpha / 100));\n    }\n\n    private updateSatLight(satValue?: number, keyValue?: number){\n        const current = this.state.currentColor;\n        const hue = this.state.selectedHue;\n        const sat = (satValue || 0) / 100;\n        const key = (keyValue || 0) / 100;\n        this.updateColor(Color.fromHsv(hue >= 0 ? hue : 0, sat, key).withAlpha(current.a), hue);\n    }\n\n    private handleChange(where: ColorPickerFocus){\n        const txt = this.getInput(where);\n        if (where == 'hex'){\n            const value = txt.value;\n            if (Color.hexParsable(value)){\n                this.updateColor(Color.fromHex(value));\n            }\n        }else{\n            const a = parseInt(this.getInput(\"a\").value) || 0;\n            const b = parseInt(this.getInput(\"b\").value) || 0;\n            const g = parseInt(this.getInput(\"g\").value) || 0;\n            const r = parseInt(this.getInput(\"r\").value) || 0;\n            const color = new Color(r, g, b, a);\n            this.updateColor(color);\n        }\n    }\n\n    componentDidMount() {\n        ColorPickerFields.forEach(type => {\n            const txt = this.getInput(type);\n\n            txt.addEventListener('input', () => this.handleChange(type));\n            txt.addEventListener('focus', () => {\n                this.focus = type;\n            });\n            txt.addEventListener('blur', () => {\n                this.focus = null;\n            });\n        });\n    }\n\n    componentDidUpdate(prevProps: Readonly<ColorPickerProps>, prevState: Readonly<ColorPickerState>, snapshot?: any) {\n        const prev = prevProps.color;\n        const cur = this.props.color;\n        if (\n            (cur && !prev) ||\n            (cur && prev && !cur.equals(prev))\n        ){\n            // Selected color was updated from outside\n            this.setState({\n                selectedHue: cur.hsv[0],\n                currentColor: cur,\n            });\n        }\n    }\n\n    syncInputValues(){\n        for(const type of ColorPickerFields){\n            if (this.focus !== type){\n                this.getInput(type).value = this.getInputValueFor(type);\n            }\n        }\n    }\n\n    render() {\n\n        if (this.txtHex.current){\n            this.syncInputValues(); // Dont update if not rendered yet\n        }\n\n        const color = this.state.currentColor;\n        const hsv = color.hsv;\n        const hue = this.state.selectedHue >= 0 ? this.state.selectedHue : hsv[0];\n        const sat = hsv[1] * 100;\n        const keyValue = hsv[2] * 100;\n        const alpha = color.a * 100;\n\n        const satImg = createSaturationPattern(hue, 10);\n        const hueHandleStyle = {background: Color.fromHsv(hue, 1, 1).hexRgb};\n        const hueContainerStyle = {backgroundImage: `url(${ColorPicker.hueBar})`, backgroundSize: 'contain'};\n        const satContainerStyle = {backgroundImage: `url(${satImg})`};\n        const alphaContainerStyle = {backgroundImage: `url(${ColorPicker.bgPattern})`};\n        const swatchBgStyle = {backgroundImage: `url(${ColorPicker.bgPattern})`};\n        const swatchStyle = {backgroundColor: color.cssRgba};\n\n        return (\n            <div className=\"ui-color-picker\">\n                <div className=\"layer swatch\" style={swatchBgStyle}>\n                    <div className=\"swatch\" style={swatchStyle}/>\n                </div>\n                <div className=\"layer slider-2d\">\n                    <Range\n                        min={makeSz(0,0)}\n                        max={makeSz(100, 100)}\n                        value={makeSz(sat, 100-keyValue)}\n                        direction={'2d'}\n                        containerStyle={satContainerStyle}\n                        onChange={(sat, key) => this.updateSatLight(sat, 100 - (key||0))}\n                    />\n                </div>\n                <div className=\"layer slider-1d\">\n                    <Range\n                        min={0}\n                        max={359}\n                        value={hue}\n                        handleStyle={hueHandleStyle}\n                        containerStyle={hueContainerStyle}\n                        onChange={hue => this.updateHue(hue as number)}\n                    />\n                </div>\n                <div className=\"layer slider-alpha\">\n                    <Range\n                        min={0}\n                        max={100}\n                        value={alpha}\n                        containerStyle={alphaContainerStyle}\n                        onChange={a => this.updateAlpha(a as number)}\n                    />\n                </div>\n                <div className=\"layer inputs\">\n                    <div className=\"item hex\">\n                        <input type=\"text\" ref={this.txtHex}/>\n                        <div className=\"label\">Hex</div>\n                    </div>\n                    <div className=\"item r\">\n                        <input type=\"text\" ref={this.txtR}/>\n                        <div className=\"label\">R</div>\n                    </div>\n                    <div className=\"item g\">\n                        <input type=\"text\" ref={this.txtG}/>\n                        <div className=\"label\">G</div>\n                    </div>\n                    <div className=\"item g\">\n                        <input type=\"text\" ref={this.txtB}/>\n                        <div className=\"label\">B</div>\n                    </div>\n                    <div className=\"item b\">\n                        <input type=\"text\" ref={this.txtA}/>\n                        <div className=\"label\">A</div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\n\nexport type IconSize = 8 | 16 | 20 | 32 | 50;\nexport type IconName = \"empty\" | \"cross\" | \"floppy\" | \"file\" | \"folder\" | \"chevron-up\" | \"chevron-down\" | \"chevron-left\" | \"chevron-right\" | string;\n\nexport interface IconProps{\n    classNames?: string;\n    name: IconName;\n    size?: IconSize;\n}\n\nexport const Icon = (props: IconProps) => {\n    return <div className={`ui-icon size-${props.size || 16} icon-${props.name} ${props.classNames || ''}`} />;\n};","import * as React from \"react\";\nimport {ReactElement} from \"react\";\nimport {ButtonProps} from \"./Button\";\n\nexport interface ItemGroupProps {\n    selectedIndex?: number;\n}\n\ninterface ItemGroupState{\n}\n\nexport class ItemGroup extends React.Component<ItemGroupProps, ItemGroupState>{\n\n    constructor(props: ItemGroupProps){\n        super(props);\n        this.state = {};\n    }\n\n    render(){\n        return (\n            <div className={`ui-item-group`}>\n                {React.Children.map(this.props.children, (item: ReactElement<ButtonProps>, index) =>\n                    React.cloneElement(item, {\n                        selected: index === this.props.selectedIndex\n                    })\n                )}\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {Icon, IconName, IconSize} from \"./Icon\";\nimport {ClassNames, cn} from \"../helpers/hui\";\n\nexport interface LabelProps extends ClassNames{\n    text?: string;\n    icon?: IconName;\n    iconSize?: IconSize;\n    description?: string;\n}\n\nexport const Label = (props: LabelProps) => {\n\n    const classTag = cn(\"ui-label\", props.classNames);\n\n    if(props.icon && !props.text) {\n        return <div className={classTag}>\n            <Icon name={props.icon} size={props.iconSize}/>\n        </div>\n    }else if(!props.icon && !props.description) {\n        return <div className={classTag}>{props.text}</div>;\n\n    }else if(!props.icon && props.description) {\n        return <div className={classTag}>\n            <div className=\"text\">{props.text}</div>\n            <div className=\"desc\">{props.description}</div>\n        </div>;\n\n    }else if(props.icon){\n        if(props.description) {\n            return <div className={cn(classTag, 'with-icon')}>\n                <Icon name={props.icon} size={props.iconSize} />\n                <div className=\"text-side\">\n                    <div className=\"text\">{props.text}</div>\n                    <div className=\"desc\">{props.description}</div>\n                </div>\n            </div>\n        }else{\n            return <div className={cn(classTag, 'with-icon')}>\n                <Icon name={props.icon} size={props.iconSize} />\n                <div className=\"text\">{props.text}</div>\n            </div>\n        }\n    }else{\n        throw \"Undesired configuration\";\n    }\n};","import * as React from \"react\";\nimport {Label, LabelProps} from \"./Label\";\nimport {Icon} from \"./Icon\";\nimport {MenuOverlay} from \"../overlays/MenuOverlay\";\nimport {RefObject} from \"react\";\nimport {Callable} from \"../helpers/hui\";\nimport {ClickDismiss} from \"../helpers/ClickDismiss\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface MenuItemProps  extends LabelProps{\n    children?: React.ReactNode;\n    isOpen?: boolean;\n    isSelected?: boolean;\n    isActivated?: boolean;\n    onOpen?: Callable;\n    onClose?: Callable;\n    onActivate?: Callable;\n    onDismissSignal?: Callable;\n    onDismissSingleSignal?: Callable;\n    onSelectSignal?: Callable;\n    parent?: MenuOverlay;\n}\n\nexport interface MenuItemState {\n}\n\nexport class MenuItem extends React.Component<MenuItemProps, MenuItemState>{\n\n    ref: RefObject<HTMLDivElement>;\n\n    constructor(props: MenuItemProps){\n        super(props);\n        this.ref = React.createRef();\n        this.showOverlay = this.showOverlay.bind(this);\n        this.hideOverlay = this.hideOverlay.bind(this);\n        this.mouseActivate = this.mouseActivate.bind(this);\n        this.sendDismissSignal = this.sendDismissSignal.bind(this);\n        this.sendDismissSingleSignal = this.sendDismissSingleSignal.bind(this);\n        this.sendSelectSignal = this.sendSelectSignal.bind(this);\n    }\n\n    mouseActivate(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n        e.stopPropagation();\n\n        this.activate();\n    }\n\n    activate(){\n\n        if(this.props.onActivate) {\n            this.props.onActivate();\n        }\n\n        this.sendDismissSignal();\n\n    }\n\n    hideOverlay(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n\n        ClickDismiss.mouseup.preventNextEvent();\n        e.stopPropagation();\n\n        if(this.props.onClose) {\n            this.props.onClose();\n        }\n    }\n\n    showOverlay(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n\n        ClickDismiss.mouseup.preventNextEvent();\n\n        e.stopPropagation();\n\n        if(this.props.onOpen && this.ref && this.ref.current) {\n            this.props.onOpen();\n        }\n    }\n\n\n    render(){\n\n        const selectedClass = this.props.isSelected ? 'is-selected' : '';\n        const propsWithIcon = Object.assign({icon: \"empty\"}, this.props);\n\n        if(this.props.isActivated === true && React.Children.count(this.props.children) === 0) {\n            setTimeout(() => this.activate());\n        }\n\n        if(this.props.children) {\n\n            const rect = Rectangle.fromDOMRect(this.ref.current?.getBoundingClientRect() || new DOMRect());\n\n            if(this.props.isOpen) {\n                return (\n                    <div ref={this.ref} className={`ui-menuitem is-selected is-open`} onMouseDown={this.hideOverlay}>\n                        <Label {...propsWithIcon} />\n                        <Icon name={`chevron-right`} size={8} />\n                        <MenuOverlay\n                            left={rect.right} top={rect.top} refRect={rect} parentMenuItem={this}\n                            onDismissSingleSignal={this.sendDismissSingleSignal}\n                            onDismissSignal={this.sendDismissSignal}>\n                            {this.props.children}\n                        </MenuOverlay>\n                    </div>\n                )\n            }else{\n                return (\n                    <div ref={this.ref}\n                         className={`ui-menuitem ${selectedClass}`}\n                         onMouseEnter={this.sendSelectSignal}\n                         onMouseDown={this.showOverlay}>\n                        <Label {...propsWithIcon} />\n                        <Icon name={`chevron-right`} size={8} />\n                    </div>\n                )\n            }\n        }else{\n            return (\n                <div ref={this.ref}\n                     className={`ui-menuitem ${selectedClass}`}\n                     onMouseEnter={this.sendSelectSignal}\n                     onMouseDown={this.mouseActivate}>\n                    <Label {...propsWithIcon} />\n                </div>\n            )\n        }\n    }\n\n    sendDismissSignal(){\n        if(this.props.onDismissSignal) {\n            this.props.onDismissSignal();\n        }\n    }\n\n    sendDismissSingleSignal(){\n        if(this.props.onDismissSingleSignal) {\n            this.props.onDismissSingleSignal();\n        }\n    }\n\n    sendSelectSignal(){\n        if(this.props.onSelectSignal) {\n            this.props.onSelectSignal();\n        }\n    }\n}","\nimport * as React from \"react\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../helpers/Rectangle\";\nimport {CSSProperties, RefObject} from \"react\";\n\nexport interface SliderProps{\n    min: number | Size;\n    max: number | Size;\n    value?: number | Size;\n    onChange?: (value: number, value2d?: number) => void;\n    containerStyle?: CSSProperties;\n    handleStyle?: CSSProperties;\n    direction?: 'horizontal' | 'vertical' | '2d';\n    round?: boolean;\n}\n\nexport interface SliderState{\n    value: number | Size | 'pristine';\n}\n\ninterface GestureData{\n    clientX: number;\n    clientY: number;\n    target: EventTarget | null;\n}\n\nexport class Range extends React.Component<SliderProps, SliderState>{\n\n    private containerRef: RefObject<HTMLDivElement> = React.createRef();\n    private handleRef: RefObject<HTMLDivElement> = React.createRef();\n    private dragging = false;\n    private handleOffset: Point = makePt(0, 0);\n\n    private mouseMoveHandler = (e: MouseEvent) => this.mouseMove(e);\n    private mouseUpHandler = (e: MouseEvent) => this.mouseUp(e);\n    private touchMoveHandler = (e: TouchEvent) => this.touchMove(e);\n    private touchEndHandler = (e: TouchEvent) => this.touchEnd(e);\n\n    constructor(props: SliderProps) {\n        super(props);\n\n        this.state = {\n            value: 'pristine',\n        };\n    }\n\n    private clearWindowHandlers(){\n        window.removeEventListener('mousemove', this.mouseMoveHandler);\n        window.removeEventListener('mouseup', this.mouseUpHandler);\n        window.removeEventListener('touchmove', this.touchMoveHandler, {capture: true});\n        window.removeEventListener('touchend', this.touchEndHandler);\n    }\n\n    private valueFromRects(): number | Size{\n\n        const {container, handle} = this.boundingRects();\n        const max = this.props.max;\n        const min = this.props.min;\n\n        if(this.props.direction === '2d') {\n\n            if(typeof max == \"number\" || typeof min == \"number\"){\n                throw new Error(`min and max must be Size`)\n            }\n\n            const maxSpace = makeSz(container.width - handle.width, container.height - handle.height);\n            const curSpace = makeSz(handle.left - container.left, handle.top - container.top);\n            return makeSz(\n                curSpace.width * (max.width - min.width) / maxSpace.width + min.width,\n                curSpace.height * (max.height - min.height) / maxSpace.height + min.height\n            );\n\n        }else{\n\n            if(typeof max !== \"number\" || typeof min !== \"number\"){\n                throw new Error(`min and max must be number`);\n            }\n\n            if (this.props.direction !== 'vertical'){\n                const maxSpace = container.width - handle.width;\n                const curSpace = handle.left - container.left;\n                return curSpace * (max - min) / maxSpace + min;\n\n            }else{\n                const maxSpace = container.height - handle.height;\n                const curSpace = handle.top - container.top;\n                return curSpace * (max - min) / maxSpace + min;\n            }\n        }\n    }\n\n    private handleMouseDown(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n        this.pointingGestureStart(e);\n        e.preventDefault();\n\n        window.addEventListener('mousemove', this.mouseMoveHandler);\n        window.addEventListener('mouseup', this.mouseUpHandler);\n    }\n\n    private handleTouchStart(e: React.TouchEvent<HTMLDivElement>){\n\n        if (e.touches.length > 0){\n            this.pointingGestureStart(e.touches[0]);\n        }\n        e.preventDefault();\n        window.addEventListener('touchmove', this.touchMoveHandler, {capture: true, passive: false});\n        window.addEventListener('touchend', this.touchEndHandler);\n\n    }\n\n    private mouseMove(e: MouseEvent){\n        this.pointingGestureMove(e);\n        e.preventDefault();\n    }\n\n    private mouseUp(e: MouseEvent){\n        this.pointingGestureEnd(e);\n        this.clearWindowHandlers();\n    }\n\n    private touchMove(e: TouchEvent){\n        if (e.touches.length > 0){\n            this.pointingGestureMove(e.touches[0]);\n            e.preventDefault();\n        }\n    }\n\n    private boundingRects(): {container: Rectangle; handle: Rectangle}{\n        if(!this.containerRef.current || !this.handleRef.current){\n            throw new Error(`Refs not ready`);\n        }\n        return {\n            container: Rectangle.fromDOMRect(this.containerRef.current.getBoundingClientRect()),\n            handle: Rectangle.fromDOMRect(this.handleRef.current.getBoundingClientRect()),\n        };\n\n    }\n\n    private touchEnd(e: TouchEvent){\n        if (e.touches.length > 0){\n            this.pointingGestureEnd(e.touches[0]);\n            e.preventDefault();\n        }\n        this.clearWindowHandlers();\n\n    }\n\n    private pointingGestureStart(e: GestureData){\n        this.dragging = true;\n\n        // Save handle offset\n        if (this.refsReady){\n            const {handle} = this.boundingRects();\n            if (e.target === this.handleRef.current){\n                this.handleOffset = makePt(e.clientX - handle.left, e.clientY - handle.top);\n            }else{\n                this.handleOffset = makePt(handle.width/2, handle.height/2);\n            }\n        }\n\n        this.pointingGestureMove(e);\n\n    }\n\n    private pointingGestureEnd(e: GestureData){\n        this.dragging = false;\n    }\n\n    private pointingGestureMove(e: GestureData){\n\n        if (this.dragging && this.refsReady){\n\n            const {container, handle} = this.boundingRects();\n\n            let x = e.clientX - container.left - this.handleOffset.x;\n            x = Math.max(0, x);\n            x = Math.min(container.width - handle.width, x);\n\n            let y = e.clientY - container.top - this.handleOffset.y;\n            y = Math.max(0, y);\n            y = Math.min(container.height - handle.height, y);\n\n            this.updateHandleOffset(x, y);\n        }\n    }\n\n    private updateHandleOffset(handleOffsetX: number, handleOffsetY: number){\n\n        if (this.handleRef.current){\n            const {direction} = this.props;\n\n            if(direction !== 'vertical') {\n                this.handleRef.current.style.left = `${handleOffsetX}px`;\n            }\n\n            if(direction === 'vertical' || direction === '2d'){\n                this.handleRef.current.style.top = `${handleOffsetY}px`;\n            }\n        }\n\n        if (this.props.onChange){\n            const value = this.valueFromRects();\n\n            if (this.props.direction === '2d'){\n                const v2d = value as Size;\n                if (this.props.round){\n                    this.props.onChange(Math.round(v2d.width), Math.round(v2d.height));\n                }else{\n                    this.props.onChange(v2d.width, v2d.height);\n                }\n\n            }else{\n\n                if(this.props.round){\n                    this.props.onChange(Math.round(value as number));\n                }else{\n                    this.props.onChange(value as number);\n                }\n\n\n            }\n        }\n    }\n\n    private handleOffsetFromValue(value: number | Size): number | Size{\n\n        const {container, handle} = this.boundingRects();\n\n        if (this.props.direction === '2d'){\n            const max = this.props.max as Size;\n            const min = this.props.min as Size;\n            const v = value as Size;\n            const avail = makeSz(\n                container.width - handle.width,\n                container.height - handle.height\n            );\n            return makeSz(\n                v.width * avail.width / (max.width - min.width),\n                v.height * avail.height / (max.height - min.height),\n            );\n        }else{\n            const max = this.props.max as number;\n            const min = this.props.min as number;\n            const v = value as number;\n            const length = max - min;\n            let avail;\n\n            if(this.props.direction === 'vertical') {\n                avail = container.height - handle.height;\n            }else{\n                avail = container.width - handle.width;\n            }\n\n            const result = (v-min) * avail / (max-min);\n\n            return result;\n\n        }\n    }\n\n    private updateHandleForValue(rawValue: number | Size){\n\n        const value = this.handleOffsetFromValue(rawValue);\n\n\n        if (typeof value === 'number'){\n            if (this.props.direction === 'vertical'){\n                this.handleRef.current!.style.top = value + 'px';\n            }else{\n                this.handleRef.current!.style.left = value + 'px';\n            }\n        }else{\n            const value2d = value as Size;\n            this.handleRef.current!.style.left = value2d.width + 'px';\n            this.handleRef.current!.style.top = value2d.height + 'px';\n        }\n    }\n\n    private get refsReady(): boolean {\n        return !!this.containerRef.current && !!this.handleRef.current;\n    }\n\n    componentDidMount() {\n        if (!this.dragging && this.refsReady && typeof this.props.value !== 'undefined'){\n            this.updateHandleForValue(this.props.value)\n        }\n    }\n\n    componentDidUpdate(prevProps: Readonly<SliderProps>, prevState: Readonly<SliderState>, snapshot?: any) {\n        if (!this.dragging && this.refsReady && typeof this.props.value !== 'undefined'){\n            this.updateHandleForValue(this.props.value);\n        }\n    }\n\n    render() {\n\n        const {containerStyle, handleStyle} = this.props;\n\n        return (\n            <div ref={this.containerRef}\n                 className=\"ui-range\"\n                 tabIndex={0}\n                 style={containerStyle}\n                 onMouseDown={e => this.handleMouseDown(e)}\n                 onTouchStart={e => this.handleTouchStart(e)}>\n                <div\n                    ref={this.handleRef}\n                    className=\"handle\"\n                    style={handleStyle}\n                    onMouseDown={e => this.handleMouseDown(e)}\n                    onTouchStart={e => this.handleTouchStart(e)}\n                />\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\n\nexport interface SeparatorProps{\n\n}\n\nexport class Separator extends React.Component<SeparatorProps>{\n    render(){\n        return (\n            <div className={`ui-separator`}/>\n        );\n    }\n}","import * as React from \"react\";\nimport {CSSProperties, ReactNode} from \"react\";\nimport {ClassNames} from \"../helpers/hui\";\n\nconst DEFAULT_LENGTH = 300;\n\nexport interface DockViewProps extends ClassNames {\n    sideClassNames?: string;\n    containerClassNames?: string;\n    side?: 'left' | 'right' | 'top' | 'bottom';\n    sideView?: ReactNode;\n    length?: number;\n}\n\nexport class DockView extends React.Component<DockViewProps>{\n\n    render(){\n\n        const side = this.props.side || 'left';\n        const len = this.props.length || DEFAULT_LENGTH;\n        let sideCss: CSSProperties = {};\n        let mainCss: CSSProperties = {};\n\n        switch (side) {\n            case \"left\":\n                sideCss.width = len + 'px';\n                mainCss.left = len + 'px';\n                break;\n            case \"right\":\n                sideCss.width = len + 'px';\n                mainCss.right = len + 'px';\n                break;\n            case \"top\":\n                sideCss.height = len + 'px';\n                mainCss.top = len + 'px';\n                break;\n            case \"bottom\":\n                sideCss.height = len + 'px';\n                mainCss.bottom = len + 'px';\n                break;\n        }\n\n        return (\n            <div className={`ui-dock-view side-${side} ${this.props.classNames}`}>\n                <div className={`dock-side ${this.props.sideClassNames || ''}`} style={sideCss}>{this.props.sideView}</div>\n                <div className={`main-side ${this.props.containerClassNames || ''}`} style={mainCss}>{this.props.children}</div>\n            </div>\n        );\n\n    }\n}","import * as React from \"react\";\nimport {ReactNode} from \"react\";\nimport {DockView, DockViewProps} from \"./DockView\";\n\nconst DEFAULT_TOOLBAR_SIZE = 40;\n\nexport interface ToolbarViewProps extends DockViewProps{\n    items?: ReactNode;\n    itemsCenter?: ReactNode;\n    itemsFar?: ReactNode;\n}\n\nexport class ToolbarView extends React.Component<ToolbarViewProps>{\n\n    render(){\n\n        const len = this.props.length || DEFAULT_TOOLBAR_SIZE;\n        const side = this.props.side || 'top';\n\n        return (\n            <DockView\n                {...this.props}\n                length={len}\n                classNames={`ui-toolbar-view ${this.props.classNames || ''}`}\n                side={side}\n                sideClassNames={`toolbar ${this.props.sideClassNames || ''}`}\n                sideView={<>\n                    <div className=\"items near\">{this.props.items}</div>\n                    <div className=\"items center\">{this.props.itemsCenter}</div>\n                    <div className=\"items far\">{this.props.itemsFar}</div>\n                </>}\n            >\n                {this.props.children}\n            </DockView>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {OverlayProps} from \"./Overlay\";\nimport {MenuItem, MenuItemProps} from \"../items/MenuItem\";\nimport {RefObject} from \"react\";\nimport {Separator} from \"../items/Separator\";\nimport {Rectangle} from \"../helpers/Rectangle\";\nimport {Callable} from \"../helpers/hui\";\nimport {KeyCaptureStackHandler} from \"../helpers/KeyCaptureStackHandler\";\n\nexport interface MenuOverlayProps extends OverlayProps{\n    refRect: Rectangle;\n    onDismissSignal: Callable;\n    onDismissSingleSignal?: Callable;\n    parentMenuItem?: MenuItem;\n}\n\nexport interface MenuOverlayState{\n    selectedIndex?: number;\n    openIndex?: number;\n    activatedIndex?: number;\n}\n\nexport class MenuOverlay extends React.Component<MenuOverlayProps, MenuOverlayState>{\n\n    overlayRef: RefObject<HTMLDivElement> | undefined;\n\n    readonly keyCaptureId: number;\n    private childCount: number | undefined;\n    private separators: number[] = [];\n\n    constructor(props: MenuOverlayProps){\n        super(props);\n        this.overlayRef = React.createRef();\n        this.state = {};\n        this.setOpenItem = this.setOpenItem.bind(this);\n        const isActivationKey = (e: KeyboardEvent) => e.key === 'Enter' || e.key === ' ';\n        const cancelAndDo = (e: KeyboardEvent, f: Callable) => {\n            e.stopPropagation();\n            e.preventDefault();\n            f();\n        };\n\n        this.keyCaptureId = KeyCaptureStackHandler.instance.register(e => {\n            if(e.key == 'ArrowDown') {\n                cancelAndDo(e, this.selectNext.bind(this));\n\n            }else if(e.key === 'ArrowUp') {\n                cancelAndDo(e, this.selectPrev.bind(this));\n\n            }else if(e.key === 'ArrowRight' || isActivationKey(e)) {\n                cancelAndDo(e, this.openCurrentIndex.bind(this));\n\n                if(isActivationKey(e)) {\n                    this.setState({activatedIndex: this.state.selectedIndex});\n                }\n\n            }else if(e.key === 'ArrowLeft') {\n                if(\"undefined\" !== typeof this.props.parentMenuItem) {\n                    cancelAndDo(e, () => this.sendDismissSingleSignal());\n                }\n            }\n        });\n    }\n\n    closeOpenedIndex(){\n        if(\"undefined\" !== typeof this.state.openIndex) {\n            this.setState({openIndex: undefined});\n        }\n    }\n\n    componentWillUnmount(): void {\n        KeyCaptureStackHandler.instance.unregister(this.keyCaptureId);\n    }\n\n    selectNext(){\n\n        let current = -1;\n\n        if(\"number\" === typeof this.state.selectedIndex) {\n            current = this.state.selectedIndex;\n        }\n\n        let next = current + 1;\n\n        while(\"undefined\" !== typeof this.separators.find(i => i === next)) {\n            next++;\n        }\n\n        if(\"undefined\" !== typeof this.childCount && next >= this.childCount) {\n            next = 0;\n        }\n\n        this.setState({selectedIndex: next});\n    }\n\n    selectPrev(){\n\n        let current = -1;\n\n        if(\"number\" === typeof this.state.selectedIndex) {\n            current = this.state.selectedIndex;\n        }\n\n        let prev = current - 1;\n\n        while(\"undefined\" !== typeof this.separators.find(i => i === prev)) {\n            prev--;\n        }\n\n        if(prev < 0) {\n            if(\"undefined\" !== typeof this.childCount) {\n                prev = this.childCount - 1;\n            }else{\n                prev = 0;\n            }\n        }\n\n        this.setState({selectedIndex: prev});\n    }\n\n    openCurrentIndex(){\n        if(\"undefined\" !== typeof this.state.selectedIndex) {\n            this.setOpenItem(this.state.selectedIndex);\n        }\n    }\n\n    correctPosition(){\n        if(!(this.overlayRef && this.overlayRef.current)) {\n            return;\n        }\n\n        const rect = Rectangle.fromDOMRect(this.overlayRef.current.getBoundingClientRect());\n        const view = {width: window.innerWidth, height: window.innerHeight};\n        const refRect = this.props.refRect;\n        let newRectangle = rect.clone();\n\n        if(rect.right > view.width) {\n            newRectangle = newRectangle.withRight(refRect.right);\n        }\n\n        if(rect.bottom > view.height) {\n            newRectangle = newRectangle.withBottom(view.height);\n        }\n\n        if(!newRectangle.equals(rect)) {\n            this.overlayRef.current.style.left = newRectangle.left + 'px';\n            this.overlayRef.current.style.top  = newRectangle.top  + 'px';\n        }\n    }\n\n    setNoOpenItem(){\n        this.setState({selectedIndex: undefined});\n    }\n\n    setOpenItem(index: number){\n        this.setState({selectedIndex: index, openIndex: index});\n    }\n\n    setSelectedItem(index: number){\n        this.setState({selectedIndex: index});\n    }\n\n    render(){\n        const st = {\n            top: this.props.top + 'px',\n            left: this.props.left + 'px',\n            width: `auto`,\n            height: `auto`,\n        };\n\n        if(\"number\" === typeof this.props.height) {\n            st.height = this.props.height + 'px';\n        }\n\n        if(\"number\" === typeof this.props.width) {\n            st.width = this.props.width + 'px';\n        }\n\n        setTimeout(() => {\n            this.correctPosition();\n        });\n\n        this.childCount = React.Children.count(this.props.children);\n\n        this.separators = []; // Reset to collect on .map bellow\n\n        return <div ref={this.overlayRef} className={`ui-overlay ui-menu-overlay`} style={st}>\n            {React.Children.map(this.props.children, (menuItem: React.ReactElement<MenuItemProps>, index) => {\n                if(menuItem.type === Separator) {\n                    this.separators.push(index);\n                }\n                return React.cloneElement(menuItem, {\n                    onOpen: () => this.setOpenItem(index),\n                    onClose: () => this.setNoOpenItem(),\n                    onDismissSignal: () => this.sendDismissSignal(),\n                    onDismissSingleSignal: () => this.closeOpenedIndex(),\n                    onSelectSignal: () => this.setSelectedItem(index),\n                    isSelected: index === this.state.selectedIndex,\n                    isOpen: index === this.state.openIndex,\n                    isActivated: index === this.state.activatedIndex,\n                    parent: this,\n                });\n            })}\n        </div>;\n    }\n\n    sendDismissSignal(){\n        if(this.props.onDismissSignal) {\n            this.props.onDismissSignal();\n        }\n    }\n\n    sendDismissSingleSignal(){\n        if(this.props.onDismissSingleSignal) {\n            this.props.onDismissSingleSignal();\n        }\n    }\n}","import './hui/css/styles.css';\nimport './hui/css/index.scss';\nimport './components/icons.css';\nimport './index.scss';\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport {App} from \"./components/App\";\n\nReactDOM.render(\n    <App />,\n    document.getElementById(`root`)\n);","\nexport function readInt16LE(arr: Uint8ClampedArray, offset: number): number{\n    return (arr[offset + 1] << 8) | arr[offset];\n}\n\nexport function readInt32LE(arr: Uint8ClampedArray, offset: number): number{\n    const d = arr[offset + 3];\n    const c = arr[offset + 2];\n    const b = arr[offset + 1];\n    const a = arr[offset];\n    return (d << 24) | (c << 16) | (b << 8) | a;\n}\n\nexport function writeInt32LE(arr: Uint8ClampedArray, offset: number, n: number){\n    arr[offset] = n & 0xff;\n    arr[offset + 1] = (n & 0xff00) >>> 8;\n    arr[offset + 2] = (n & 0xff0000) >>> 16;\n    arr[offset + 3] = (n & 0xff000000) >>> 24;\n}\n\nexport class BlobComposer{\n\n    private data: Uint8ClampedArray = new Uint8ClampedArray(0);\n\n    getBlob(props?: BlobPropertyBag): Blob{\n        return new Blob([this.data.buffer], props);\n    }\n\n    async writeBlob(blob: Blob){\n        this.writeBuffer(await blob.arrayBuffer());\n    }\n\n    writeBuffer(buff: ArrayBuffer){\n        this.writeUint8Clamped(new Uint8ClampedArray(buff));\n    }\n\n    writeUint8Clamped(arr: Uint8ClampedArray){\n        const data = new Uint8ClampedArray(this.data.length + arr.length);\n        data.set(this.data, 0);\n        data.set(arr, this.data.length);\n        this.data = data;\n    }\n\n    writeInt32LE(n: number){\n        this.writeUint8Clamped(new Uint8ClampedArray([\n            (n & 0xff),\n            (n & 0xff00) >>> 8,\n            (n & 0xff0000) >>> 16,\n            (n & 0xff000000) >>> 24,\n        ]));\n    }\n\n    writeInt16LE(n: number){\n        this.writeUint8Clamped(new Uint8ClampedArray([\n            (n & 0xff),\n            (n & 0xff00) >>> 8,\n        ]));\n    }\n\n}","import {Book} from \"./Book\";\nimport {IconCanvasController} from \"./IconCanvasController\";\nimport {IconPreview} from \"../components/BookPreviews\";\nimport {makeSz, Size} from \"../hui/helpers/Rectangle\";\nimport {IconService} from \"./IconService\";\nimport {Icon} from \"./Icon\";\nimport {DocumentService} from \"./DocumentService\";\n\nconst DEFAULT_ICON = makeSz(32, 32);\n\nexport function changeFavicon(src: string) {\n    const id = 'dyna-favicon';\n\n    const oldLink = document.getElementById(id);\n    if (oldLink) { document.head.removeChild(oldLink) }\n\n    const link = document.createElement('link');\n    link.id = id;\n    link.rel = 'shortcut icon';\n    link.href = src;\n    document.head.appendChild(link);\n}\n\nexport class BookController{\n\n    private controllers: IconCanvasController[] = [];\n    private previews: IconPreview[] = [];\n\n    onUpdated: (m?:string) => void = () => void(0);\n\n    constructor(private readonly book: Book) {\n\n        book.icons.forEach(icon => this.createIconController(icon));\n\n        if (book.icons.length > 0){\n            this.updatePreviews().then(() => this.onUpdated('init load'));\n        }\n    }\n\n    private createIconController(icon: Icon): IconCanvasController{\n\n        const controller = new IconCanvasController({icon});\n\n        const docChanged = () => {\n            this.updatePreview(controller.id).then(() => this.onUpdated());\n        }\n\n        controller.editor.documentSubmitted = () => {\n            docChanged();\n            IconService.asBlobUrl(controller.editor.document.icon)\n                .then(src => changeFavicon(src));\n            this.persist();\n        };\n\n        controller.editor.documentChanged = () => docChanged();\n\n        this.controllers.push(controller);\n\n        return controller;\n    }\n\n    private async updatePreview(id: string){\n\n        const controller = this.getIconController(id);\n\n        if (controller){\n\n            const data = await IconService.asBlobUrl(controller.editor.document.icon);\n            const preview = this.getPreview(id);\n\n            if (preview){\n                preview.data = data;\n            }else{\n                this.previews.push({id, data});\n            }\n        }\n    }\n\n    getBook(): Book{\n        return {...this.book, icons: this.controllers.map(c => c.editor.document.icon)};\n    }\n\n    getIconController(id: string): IconCanvasController | null{\n        return this.controllers.find(c => c.id === id) || null;\n    }\n\n    getPreview(id: string): IconPreview | null{\n        return this.previews.find(p => p.id === id) || null;\n    }\n\n    addIcon(size: Size, skipUpdate = false): IconCanvasController{\n        const icon = IconService.newIcon(size.width, size.height);\n        const controller = this.createIconController(icon);\n\n        this.updatePreview(controller.id)\n            .then(() => {\n                if (!skipUpdate){\n                    this.onUpdated('addIcon');\n                }\n            });\n\n        this.persist();\n\n        return controller;\n    }\n\n    addIcons(icons: Icon[], skipUpdate = false): IconCanvasController[]{\n        const controllers: IconCanvasController[] = [];\n\n        for(const icon of icons){\n            controllers.push(this.createIconController(icon));\n        }\n\n        this.updatePreviews().then(() => {\n            if (!skipUpdate){\n                this.onUpdated('addIcons');\n            }\n        });\n\n        this.persist();\n\n        return controllers;\n    }\n\n    async importIcoFile(icoFile: Blob): Promise<IconCanvasController[]>{\n        const dir = await IconService.fromIcoBlob(icoFile);\n        return this.addIcons(dir.icons);\n    }\n\n    persist(){\n        DocumentService.saveIcons(this.controllers.map(c => c.editor.document.icon))\n            .then(() => console.log('Saved'))\n            .catch(() => console.log('Error saving'));\n    }\n\n    removeIcon(id: string, skipUpdate = false): IconCanvasController | undefined{\n\n        let ctl: IconCanvasController | undefined;\n\n        // remove from controllers\n        this.controllers = this.controllers.filter(c => c.id !== id);\n\n        // remove from previews\n        this.previews = this.previews.filter(p => p.id !== id);\n\n        // remove from book\n        this.book.icons = this.controllers.map(c => c.editor.document.icon);\n\n        if (this.controllers.length === 0){\n            ctl = this.addIcon(DEFAULT_ICON, false);\n        }\n\n        if (!skipUpdate){\n            this.onUpdated('removeIcon');\n        }\n\n        this.persist();\n\n        return ctl;\n    }\n\n    async updatePreviews(){\n        return await Promise.all(this.controllers.map(c => this.updatePreview(c.id)));\n    }\n\n    get iconControllers(): IconCanvasController[]{\n        return this.controllers;\n    }\n\n    get iconPreviews(): IconPreview[]{\n        return this.previews;\n    }\n\n}","import {Size} from \"../hui/helpers/Rectangle\";\nimport {Book} from \"./Book\";\nimport {uuid} from \"../hui/helpers/Uuid\";\nimport {IconService} from \"./IconService\";\nimport {Icon} from \"./Icon\";\n\nexport class BookService{\n\n    static newBook(iconSize: Size): Book{\n        return {\n            id: uuid(),\n            icons: [IconService.newIcon(iconSize.width, iconSize.height)]\n        }\n    }\n\n    static fromIcons(icons: Icon[]): Book{\n        return {\n            id: uuid(),\n            icons\n        }\n    }\n\n}","\nconst MIME_PNG = \"image/png\";\n\nexport class ClipboardEmptyError extends Error{}\n\nexport class ClipboardService {\n\n    private static buffer: Blob | null;\n\n    static async copyBlob(blob: Blob, mime: string): Promise<void> {\n\n        try{\n            await this.systemCopyBlob(blob, mime);\n        }catch(e){\n            this.buffer = blob;\n        }\n\n    }\n\n    static async pasteBlob(): Promise<Blob> {\n        try{\n            return await this.systemPasteBlob();\n        }catch(e){\n            if (this.buffer){\n                return this.buffer;\n            }else{\n                return Promise.reject(new ClipboardEmptyError());\n            }\n        }\n    }\n\n    static async systemCopyBlob(blob: Blob, mime: string): Promise<void> {\n\n        const ctorName = 'ClipboardItem';\n\n        if (ctorName in window){\n            const ctor: any = (window as any)[ctorName]; // Workaround: currently not in TS library.\n            const item = new ctor({[mime]: blob});\n            const data = [item];\n\n            try{\n                await (navigator.clipboard as any).write(data);\n            }catch(e){\n                return Promise.reject(`Error writing data to clipboard`);\n            }\n\n        }else{\n            return Promise.reject(`No compatibility for clipboard copying`);\n        }\n\n    }\n\n    static async systemCopyText(text: string): Promise<void>{\n\n        if (navigator?.clipboard){\n            try{\n                await navigator.clipboard.writeText(text);\n            }catch(e){\n                return Promise.reject(`Error writing data to clipboard`);\n            }\n\n        }else{\n            return Promise.reject(`No compatibility for clipboard copying`);\n        }\n    }\n\n    static async systemPasteBlob(): Promise<Blob> {\n        const data: any | undefined = await (navigator.clipboard as any).read();\n        let warnings: string[] = [];\n\n        if (data && data.length > 0){\n\n            for(let i = 0; i < data.length; i++){\n\n                const item = data[i];\n                const types: string[] = data[i].types;\n\n                if (types.indexOf(MIME_PNG) >= 0){\n                    const blob: Blob = await item.getType(MIME_PNG);\n\n                    if (blob){\n                        return blob;\n                    }else{\n                        warnings.push(`Can't read ${item.type} from clipboard`);\n                    }\n\n                    break;\n                }else{\n                    warnings.push(`Unsupported MIME: ${item.type}`);\n                }\n            }\n        }else{\n            return Promise.reject(new ClipboardEmptyError());\n        }\n\n        return Promise.reject(warnings);\n    }\n\n\n}","import {Icon, IconColorModel} from \"./Icon\";\nimport {Palette} from \"./PaletteService\";\n\nconst ICONS_STORAGE_KEY = 'icons-v1';\n\ninterface SerializedIcon{\n    width: number;\n    height: number;\n    data: string;\n    model: IconColorModel;\n}\n\nfunction binToString(bin: Uint8ClampedArray): string{\n    let r = '';\n\n    for(let i = 0; i < bin.length; i++){\n        const ch = bin[i].toString(16);\n        r += ch.length == 1 ? '0' + ch : ch;\n    }\n\n    return r;\n}\n\nfunction stringToBin(str: string): Uint8ClampedArray{\n    const r = new Uint8ClampedArray(str.length / 2);\n\n    for(let i = 0; i < r.length; i++){\n        const nmb = str.charAt(i * 2) + str.charAt(i * 2 + 1);\n        r[i] = parseInt(nmb, 16);\n    }\n\n    return r;\n}\n\nfunction serializeIcons(icons: Icon[]): SerializedIcon[]{\n    return icons.map(icon => {\n        return {\n            ...icon,\n            data: binToString(icon.data)\n        }\n    });\n}\n\nfunction deserializeIcons(icons: SerializedIcon[]): Icon[]{\n    return icons.map(icon => { return {\n            ...icon,\n            data: stringToBin(icon.data)\n    }});\n}\n\nexport class DocumentService{\n\n    static async saveIcons(icons: Icon[]){\n\n        try{\n            window.localStorage.setItem(ICONS_STORAGE_KEY, JSON.stringify(serializeIcons(icons)));\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n\n    static async restoreIcons(): Promise<Icon[]>{\n        try{\n            const value = String(window.localStorage.getItem(ICONS_STORAGE_KEY));\n\n            if (value){\n                const obj = JSON.parse(value);\n\n                if(!obj){\n                    return [];\n\n                }else if(!(obj instanceof Array)){\n                    return Promise.reject(new Error());\n                }else{\n                    return deserializeIcons(obj as SerializedIcon[]);\n                }\n\n            }else{\n                return [];\n            }\n\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n\n}","\ninterface EditorTransaction<T>{\n    documentState: T;\n}\n\nexport class NoTransactionError extends Error{}\nexport class TransactionInProgressError extends Error{}\nexport class UnsavedChangesError extends Error{}\n\nexport class Editor<T>{\n\n    private _currentTransaction: EditorTransaction<T> | null = null;\n    private _document: T;\n    private _hasChanges: boolean = false;\n    private _pristine: boolean = true;\n\n    private readonly undoStack: EditorTransaction<T>[] = [];\n    private readonly redoStack: EditorTransaction<T>[] = [];\n\n    public documentChanged: (() => void) | null = null;\n    public documentSubmitted: (() => void) | null = null;\n\n    constructor(document: T) {\n        this._document = document;\n    }\n\n    redo(): boolean{\n\n        if (this.redoStack.length == 0){\n            return false;\n        }\n\n        const top = this.redoStack.pop();\n\n        if (top){\n            this.undoStack.push({documentState: this.document!});\n            this._document = top.documentState;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n        }\n\n        return true;\n\n    }\n\n    undo(): boolean{\n\n        if (this.undoStack.length == 0){\n            return false;\n        }\n\n        const top = this.undoStack.pop();\n\n        if (top){\n            this.redoStack.push({documentState: this.document!});\n            this._document = top.documentState;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n        }\n\n        return true;\n    }\n\n    begin(){\n\n        if (this._currentTransaction){\n            throw new TransactionInProgressError();\n        }else{\n            this._currentTransaction = {documentState: this._document};\n        }\n    }\n\n    setDocument(document: T){\n        if (this._currentTransaction){\n            this._document = document;\n\n            if (this.documentChanged){\n                this.documentChanged();\n            }\n\n        }else{\n            throw new NoTransactionError();\n        }\n\n    }\n\n    commit(document?: T){\n\n        if (!this._currentTransaction){\n            throw new NoTransactionError();\n        }\n\n        if (document){\n            this.setDocument(document);\n        }\n\n        // Push to undo stack\n        this.undoStack.push(this._currentTransaction);\n\n        // Clear transaction\n        this._currentTransaction = null;\n\n        // Empty redo stack\n        while(this.redoStack.length > 0) {this.redoStack.pop()}\n\n        // We have changes\n        this._hasChanges = true;\n\n        this._pristine = false;\n\n        if (this.documentSubmitted){\n            this.documentSubmitted();\n        }\n    }\n\n    rollback(){\n\n        if (this._currentTransaction){\n            this._document = this._currentTransaction.documentState;\n            this._currentTransaction = null;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n\n        }else{\n            throw new NoTransactionError();\n        }\n\n    }\n\n    clearChanges(){\n        this._hasChanges = false;\n    }\n\n    transact(document: T){\n        this.begin();\n        this.commit(document);\n    }\n\n    get currentTransaction(): EditorTransaction<T> | null{\n        return this._currentTransaction;\n    }\n\n    get document(): T{\n        return this._document;\n    }\n\n    get hasChanges(): boolean{\n        return this._hasChanges;\n    }\n\n    get pristine(): boolean{\n        return this._pristine;\n    }\n\n    get redoCount(): number{\n        return this.redoStack.length;\n    }\n\n    get redoPeek(): T | null{\n        if (this.redoStack.length > 0){\n            return this.redoStack[this.redoStack.length - 1].documentState;\n        }\n        return null;\n    }\n\n    get undoCount(): number{\n        return this.undoStack.length;\n    }\n\n    get undoPeek(): T | null{\n        if (this.undoStack.length > 0){\n            return this.undoStack[this.undoStack.length - 1].documentState;\n        }\n        return null;\n    }\n\n}","import {\n    CanvasViewController,\n    KeyEvent,\n    KeyEventResult,\n    PointingEvent,\n    PointingEventResult\n} from \"../components/CanvasView\";\nimport {IconDocument, IconEditor, IconEditorTool} from \"./IconEditor\";\nimport {PencilTool} from \"./tools/PencilTool\";\nimport {IconService} from \"./IconService\";\nimport {IconDocumentRenderer} from \"../rendering/IconDocumentRenderer\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {SelectionTool} from \"./tools/SelectionTool\";\nimport {Icon} from \"./Icon\";\nimport {ClipboardEmptyError, ClipboardService} from \"./ClipboardService\";\nimport {NoSelectionError} from \"./errors\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {uuid} from \"../hui/helpers/Uuid\";\n\nconst MIME_PNG = \"image/png\";\n\nexport interface PasteResult{\n    tool?: IconEditorTool;\n    success: boolean;\n    warnings: string[];\n}\n\nexport type DownloadFormat = 'png' | 'ico';\n\nexport type ColorPickCallback = (color: Color | null, colorHover?: Color) => void;\n\nexport class IconCanvasController implements CanvasViewController{\n\n    showBackground = false;\n    showGrid = false;\n\n    readonly id = uuid();\n    readonly editor: IconEditor;\n    private _tool: IconEditorTool | null = new PencilTool(this);\n    private previewBounds: Rectangle = Rectangle.empty;\n    private previewPixelSize: number = 0;\n\n    private _colorPicker?: ColorPickCallback;\n\n    constructor(document?: IconDocument) {\n\n        if (document){\n            this.editor = new IconEditor(document);\n        }else{\n            this.editor = new IconEditor({\n                icon: IconService.newIcon(16, 16)\n            });\n        }\n\n    }\n\n    colorFromPoint(p: Point): Color | null{\n        const i = this.pointToData(p);\n\n        if (i < 0 ){\n            return null;\n        }\n\n        const data = this.editor.document.icon.data;\n        return Color.fromTupleInt8([data[i], data[i+1], data[i+2], data[i+3] ]);\n    }\n\n    colorPicker(picker: ColorPickCallback | undefined){\n        this._colorPicker = picker;\n    }\n\n    async copy(): Promise<void>{\n\n        if (!this.editor.document.selectionSprite){\n            return Promise.resolve();\n        }\n\n        const blob = await IconService.asBlobWithMime(this.editor.document.selectionSprite, MIME_PNG);\n\n        return ClipboardService.copyBlob(blob, MIME_PNG);\n\n    }\n\n    async cut(): Promise<void>{\n\n        if (!this.editor.document.selectionBuffer){\n            throw new NoSelectionError();\n        }\n\n        try{\n            await this.copy();\n\n            this.editor.transact({\n                ...this.editor.cloneDocument(),\n                icon: this.editor.document.selectionBuffer,\n                selectionRegion: undefined,\n                selectionSprite: undefined,\n                selectionBuffer: undefined,\n            });\n\n        }catch(e){\n            return Promise.reject(e);\n        }\n\n    }\n\n    async paste(): Promise<PasteResult>{\n\n        let success = false;\n        let tool: IconEditorTool | undefined;\n        let warnings: string[] = [];\n\n        try{\n            const blob = await ClipboardService.pasteBlob();\n            tool = await this.importFile(blob);\n            success = true;\n\n        }catch(e){\n            if (e instanceof ClipboardEmptyError){\n              return Promise.reject(e);\n\n            }else if(e instanceof Array){\n                warnings = [...e];\n            }\n        }\n\n        return {success, tool, warnings};\n    }\n\n    async downloadAs(format: DownloadFormat, icons: Icon[] | null = null): Promise<void>{\n\n        let blob: Blob;\n        let name: string;\n\n        if (format == 'png'){\n            blob = await IconService.asBlobWithMime(this.editor.document.icon, MIME_PNG);\n            name = `favicon.png`;\n        }else{\n            blob = await IconService.asIcoBlob(icons || [this.editor.document.icon]);\n            name = 'favicon.ico'\n        }\n\n        const a = document.createElement('a');\n\n        a.href = URL.createObjectURL(blob);\n        a.download = name;\n        a.click();\n\n    }\n\n    async importFile(file: Blob): Promise<SelectionTool>{\n        const icon = this.editor.document.icon;\n        const size = makeSz(icon.width, icon.height);\n        const sprite = await IconService.fromFile(file, size);\n\n        this.pasteSprite(sprite);\n\n        if (this.tool instanceof SelectionTool){\n            return this.tool;\n        }\n\n        const tool = new SelectionTool(this);\n        this.tool = tool;\n        return tool;\n    }\n\n    pasteSprite(sprite: Icon){\n\n        const newDoc = this.editor.cloneDocument();\n        const containerRec = new Rectangle(0 ,0, newDoc.icon.width, newDoc.icon.height);\n        const spriteRect = new Rectangle(0, 0, sprite.width, sprite.height)\n            .centerAt(containerRec.center).round();\n\n        newDoc.selectionRegion = spriteRect;\n        newDoc.selectionSprite = sprite;\n        newDoc.selectionBuffer = newDoc.icon;\n        newDoc.icon = IconService.blend(newDoc.selectionBuffer, newDoc.selectionSprite, newDoc.selectionRegion);\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n    }\n\n    pixelToData(pixel: Point): number{\n        const icon = this.editor.document.icon;\n        return icon.width * 4 * pixel.y + pixel.x * 4;\n    }\n\n    pointToPixel(p: Point): Point | null{\n        if (!this.previewBounds.contains(p)){\n            return null;\n        }\n\n        const left = p.x - this.previewBounds.left;\n        const top = p.y - this.previewBounds.top;\n\n        return makePt(\n            Math.floor(left / this.previewPixelSize),\n            Math.floor(top / this.previewPixelSize)\n        );\n    }\n\n    pointToData(p: Point): number{\n\n        // Deflation prevents round-errors\n        if (!this.previewBounds.deflate(1, 1).contains(p)){\n            return - 1;\n        }\n\n        const pixel = this.pointToPixel(p);\n\n        if (pixel){\n            return this.pixelToData(pixel);\n        }\n\n        return -1;\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n\n        if (this._colorPicker){\n            const color = this.colorFromPoint(e.point);\n\n            if (color){\n                this._colorPicker(color);\n                this._colorPicker = undefined;\n            }\n\n            return;\n        }\n\n        if (this.tool?.pointingGestureStart){\n            return this.tool.pointingGestureStart(e);\n        }\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        if (this._colorPicker){\n            const color = this.colorFromPoint(e.point);\n\n            if (color){\n                this._colorPicker(null, color);\n            }\n\n            return;\n        }\n\n        if (this.tool?.pointingGestureMove){\n            return this.tool.pointingGestureMove(e);\n        }\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n        if (this.tool?.pointingGestureEnd){\n            return this.tool.pointingGestureEnd(e);\n        }\n    }\n\n    keyDown(e: KeyEvent): KeyEventResult | void{\n        if (this.tool?.keyDown){\n            return this.tool.keyDown(e);\n        }\n    }\n\n    keyUp(e: KeyEvent): KeyEventResult | void{\n        if (this.tool?.keyUp){\n            return this.tool.keyUp(e);\n        }\n    }\n\n    render(context: CanvasRenderingContext2D, size: Size){\n\n        const cvBounds = new Rectangle(0, 0, size.width, size.height);\n        const previewArea = cvBounds.deflate(10, 10);\n\n        context.clearRect(0, 0, size.width, size.height);\n\n        if (this.editor.document){\n\n            const icon = this.editor.document.icon;\n            const pixelLength = this.previewPixelSize = Math.min(previewArea.size.width, previewArea.size.height) / Math.min(icon.width, icon.height);\n\n            this.previewBounds = new Rectangle(\n                0, 0,\n                icon.width * pixelLength,\n                icon.height *  pixelLength)\n                .centerAt(cvBounds.center);\n                //.centerAt(makePt(cvBounds.center.x, (icon.height * pixelLength)/2));\n\n            const renderer = new IconDocumentRenderer(\n                this.editor.document,\n                context,\n                this.previewBounds,\n                this.showBackground,\n                this.showGrid,\n                );\n\n            renderer.render();\n        }\n    }\n\n    get iconSize(): Size{\n        return makeSz(this.editor.document.icon.width, this.editor.document.icon.height);\n    }\n\n    get tool(): IconEditorTool | null{\n        return this._tool;\n    }\n\n    set tool(value: IconEditorTool | null){\n\n        if(value === this._tool){\n            return;\n        }\n\n        if (this._tool?.deactivate){\n            this._tool.deactivate();\n        }\n\n        this._tool = value;\n\n        if (this._tool?.activate){\n            this._tool.activate();\n        }\n    }\n}","import {Icon} from \"./Icon\";\nimport {Editor} from \"./Editor\";\nimport {CanvasSensor} from \"../components/CanvasView\";\nimport {Rectangle} from \"../hui/helpers/Rectangle\";\nimport {IconService} from \"./IconService\";\nimport {Color} from \"../hui/helpers/Color\";\n\ndeclare interface ClipboardItem{\n    ClipboardItem: (data: any) => ClipboardItem;\n}\n\nexport interface IconDocument{\n    icon: Icon;\n    selectionRegion?: Rectangle;\n    selectionBuffer?: Icon;\n    selectionSprite?: Icon;\n}\n\nexport interface IconEditorTool extends CanvasSensor{\n    activate?: () => void;\n    deactivate?: () => void;\n    useColor?: (color: Color) => void;\n}\n\nexport class IconEditor extends Editor<IconDocument>{\n\n    cloneDocument(doc?: IconDocument): IconDocument{\n\n        if (typeof doc === \"undefined\"){\n            doc = this.document;\n        }\n\n        const newDocument = {\n            ...doc,\n            icon: IconService.clone(doc.icon),\n        };\n\n        return newDocument;\n    }\n\n}","import {Icon} from \"./Icon\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {BasicCardinalPoint, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {GraphicsMemoryError} from \"../hui/helpers/errors\";\nimport {compositeColor} from \"./IconService\";\n\nexport type StartCorner = 'ne' | 'nw' | 'se' | 'sw';\n\nconst UNVISITED = new Color(0, 0, 0, 0.9);\nconst VISITED = new Color(0, 255, 0, 0.7);\n\nexport class IconReviewer{\n\n    readonly current: Icon;\n    readonly sampleSprite: Uint8ClampedArray;\n\n    private hotspot: Rectangle;\n\n    constructor(\n        readonly original: Icon,\n        readonly sample: Size,\n        readonly startCorner: StartCorner) {\n\n        this.current = {...original, data: new Uint8ClampedArray(original.data)};\n\n        const w = sample.width;\n        const h = sample.height;\n        const wh: [number, number]= [sample.width, sample.height];\n\n        if (startCorner == \"nw\"){\n            this.hotspot = new Rectangle(0, 0, ...wh);\n\n        }else if(startCorner === 'ne'){\n            this.hotspot = new Rectangle(original.width  - w, 0, ...wh);\n\n        }else if(startCorner === 'se'){\n            this.hotspot = new Rectangle(original.width  - w, original.height - h, ...wh);\n\n        }else if(startCorner === 'sw'){\n            this.hotspot = new Rectangle(0, original.height - h, ...wh);\n\n        }\n\n        this.sampleSprite = new Uint8ClampedArray(sample.width * sample.height * 4);\n\n        this.tintRegion(new Rectangle(0,0,original.width, original.height), UNVISITED);\n        this.tintRegion(this.hotspot, Color.transparent);\n        this.updateSampleSprite();\n    }\n\n    private updateSampleSprite(){\n\n        const index = (x: number, y: number, w: number) => y * w * 4 + x * 4;\n\n        // Clean sampleSprite\n        this.sampleSprite.forEach((v, i) => this.sampleSprite[i] = 0);\n\n\n        for(let y = 0; y < this.sample.height; y++){\n\n            for(let x = 0; x < this.sample.height; x++){\n\n                const imgX = this.hotspot.left + x;\n                const imgY = this.hotspot.top + y;\n\n                if (\n                    imgX < 0 ||\n                    imgY < 0 ||\n                    imgX >= this.original.width ||\n                    imgY >= this.original.height\n                ) { continue; }\n\n                const sampleIndex = index(x, y, this.sample.width);\n                const imgIndex = index(imgX, imgY, this.original.width);\n\n                this.sampleSprite[sampleIndex] = this.original.data[imgIndex];\n                this.sampleSprite[sampleIndex + 1] = this.original.data[imgIndex + 1];\n                this.sampleSprite[sampleIndex + 2] = this.original.data[imgIndex + 2];\n                this.sampleSprite[sampleIndex + 3] = this.original.data[imgIndex + 3];\n\n            }\n        }\n\n    }\n\n    tintRegion(region: Rectangle, color: Color){\n\n        const index = (x: number, y: number) => y * this.original.width * 4 + x * 4;\n\n        for(let y = region.top; y < region.bottom; y++){\n\n            if(y < 0 || y >= this.original.height){\n                continue;\n            }\n\n            for(let x = region.left; x < region.right; x++){\n\n                if(x < 0 || x >= this.original.width){\n                    continue;\n                }\n\n                const sIndex = index(x, y);\n                const originalColor = Color.fromInt8Array(this.original.data, sIndex);\n                const newColor = compositeColor(originalColor, color);\n\n                newColor.copyToUint8(this.current.data, sIndex);\n\n                // const dR = this.original.data[sIndex];\n                // const dG = this.original.data[sIndex + 1];\n                // const dB = this.original.data[sIndex + 2];\n                // const dA = this.original.data[sIndex + 3] / 255;\n                //\n                // const [sR, sG, sB] = color.tupleInt8;\n                // const sA = color.a;\n                //\n                // const rR = Math.round(sR * sA + dR * (1 - sA));\n                // const rG = Math.round(sG * sA + dG * (1 - sA));\n                // const rB = Math.round(sB * sA + dB * (1 - sA));\n                // const rA = dA + sA * (1 - dA);\n                // const rA8 = Math.round(rA * 255);\n                //\n                // this.current.data[sIndex] = rR;\n                // this.current.data[sIndex + 1] = rG;\n                // this.current.data[sIndex + 2] = rB;\n                // this.current.data[sIndex + 3] = rA8;\n            }\n        }\n\n    }\n\n    move(cardinalPoint: BasicCardinalPoint){\n        this.tintRegion(this.hotspot, VISITED);\n\n        if (cardinalPoint === 'n'){\n            this.hotspot = this.hotspot.offset(0, -this.sample.height);\n\n        }else if(cardinalPoint === 's'){\n            this.hotspot = this.hotspot.offset(0, this.sample.height);\n\n        }else if(cardinalPoint === 'e'){\n            this.hotspot = this.hotspot.offset(this.sample.width, 0);\n\n        }else if(cardinalPoint === 'w'){\n            this.hotspot = this.hotspot.offset(-this.sample.width, 0);\n\n        }\n\n        // TODO: Bound checking\n\n        this.tintRegion(this.hotspot, Color.transparent);\n\n        this.updateSampleSprite();\n\n    }\n\n    reviewImage(): HTMLCanvasElement{\n\n        const index = (x: number, y: number, w: number) => y * w * 4 + x * 4;\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const superSample = this.hotspot.inflate(this.sample.width, this.sample.height);\n        const current = this.current;\n\n        canvas.width = superSample.width;\n        canvas.height = superSample.height;\n\n        const cx = canvas.getContext('2d');\n\n        if(!cx){\n            throw new GraphicsMemoryError();\n        }\n\n        const arr = new Uint8ClampedArray(superSample.width * superSample.height * 4);\n\n        let curImgX = superSample.left;\n        let curImgY = superSample.top;\n\n        for(let y = 0; y < superSample.height; y++){\n\n            if(curImgY < 0 || curImgY >= this.current.height){\n                curImgY++;\n                continue;\n            }\n\n            for(let x = 0; x < superSample.width; x++) {\n\n                if(curImgX < 0 || curImgX >= this.current.width){\n                    curImgX++;\n                    continue;\n                }\n\n                const arrIndex = index(x, y, superSample.width);\n                const curIndex = index(curImgX, curImgY, current.width);\n\n                for(let i = 0; i <=3; i++){\n                    arr[arrIndex + i] = current.data[curIndex + i];\n                }\n\n                curImgX++;\n            }\n\n            curImgX = superSample.left;\n            curImgY++;\n        }\n\n        cx.putImageData(new ImageData(arr, superSample.width), 0,0);\n\n        return canvas;\n    }\n\n    get currentHotspot(): Rectangle{\n        return this.hotspot;\n    }\n\n}","import {Icon, IconColorModel} from \"./Icon\";\nimport {makePt, makeSz, Point, Rectangle, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {InvalidRegionError, MemoryError} from \"./errors\";\nimport {ImageService} from \"./ImageService\";\nimport {BlobComposer, readInt16LE, readInt32LE, writeInt32LE} from \"./BlobComposer\";\n\nconst sizeICONDIR = 6;\nconst sizeICONDIRENTRY = 16;\n\nexport interface IconDirectory{\n    icons: Icon[];\n}\n\nexport function compositeColor(background: Color, foreground: Color): Color{\n    const dR = background.r;\n    const dG = background.g;\n    const dB = background.b;\n    const dA = background.a;\n\n    const [sR, sG, sB] = foreground.tupleInt8;\n    const sA = foreground.a;\n\n    const rR = Math.round(sR * sA + dR * (1 - sA));\n    const rG = Math.round(sG * sA + dG * (1 - sA));\n    const rB = Math.round(sB * sA + dB * (1 - sA));\n    const rA = dA + sA * (1 - dA);\n\n    return new Color(rR, rG, rB, rA);\n}\n\nexport class IconService{\n\n    static clone(icon: Icon): Icon{\n        return {...icon, data: new Uint8ClampedArray(icon.data)};\n    }\n\n    static asCanvas(icon: Icon): HTMLCanvasElement{\n\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        canvas.width = icon.width;\n        canvas.height = icon.height;\n\n        const cx = canvas.getContext('2d');\n\n        if (!cx){\n            throw new MemoryError();\n        }\n\n        cx.putImageData(this.asImageData(icon), 0, 0);\n\n        return canvas;\n\n    }\n\n    static asBlobWithMime(icon: Icon, mime: string = 'image/png'): Promise<Blob>{\n        return new Promise<Blob>((resolve, reject) => {\n\n            const canvas = this.asCanvas(icon);\n\n            canvas.toBlob(blob => {\n                if (blob){\n                    resolve(blob);\n                }else{\n                    reject(new MemoryError());\n                }\n            }, mime);\n\n        });\n    }\n\n    static async asBlobUrl(icon: Icon, mime: string = 'image/png'): Promise<string>{\n        const blob = await this.asBlobWithMime(icon, mime);\n        return URL.createObjectURL(blob);\n    }\n\n    static async asIcoBlob(icons: Icon[]): Promise<Blob>{\n\n        const composer = new BlobComposer();\n        const pngBlobs: Blob[] = [];\n        let pngBlobSum = 0;\n\n        // ICONDIR structure\n        composer.writeUint8Clamped(new Uint8ClampedArray([\n            0, 0, // 2B\tReserved. Must always be 0.\n            1, 0, // 2B Specifies image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid.\n        ]));\n\n        composer.writeInt16LE(icons.length); // 2b Specifies number of images in the file.\n\n        for (const icon of icons){\n            const pngBlob = await this.asBlobWithMime(icon, 'image/png');\n            pngBlobs.push(pngBlob);\n\n            // ICONDIRENTRY\n            composer.writeUint8Clamped(new Uint8ClampedArray([\n                icon.width === 256 ? 0 : icon.width,    // 1B Specifies image width in pixels. Can be any number between 0 and 255. Value 0 means image width is 256 pixels.\n                icon.height === 256 ? 0 : icon.height,  // 1B Specifies image height in pixels. Can be any number between 0 and 255. Value 0 means image height is 256 pixels.\n                0,                                      // 1B Specifies number of colors in the color palette. Should be 0 if the image does not use a color palette.\n                0,                                      // 1B Reserved. Should be 0\n                1, 0,                                   // 2B Specifies color planes. Should be 0 or 1\n                8, 0,                                   // 2B Specifies bits per pixel\n            ]));\n\n            const dataOffset = sizeICONDIR + sizeICONDIRENTRY * icons.length + pngBlobSum;\n\n            composer.writeInt32LE(pngBlob.size);    // 4B Specifies the size of the image's data in bytes\n            composer.writeInt32LE(dataOffset);      // 4B Specifies the offset of BMP or PNG data from the beginning of the ICO/CUR file\n\n            pngBlobSum += pngBlob.size;\n        }\n\n        for(const b of pngBlobs){\n            await composer.writeBlob(b);\n        }\n\n        return composer.getBlob();\n    }\n\n    static async fromIcoBlob(blob: Blob): Promise<IconDirectory>{\n\n        const icons: Icon[] = [];\n\n        const buffer = await blob.arrayBuffer();\n        const array = new Uint8ClampedArray(buffer);\n        const iconCount = readInt16LE(array, 4);\n\n        for(let i = 0; i < iconCount; i++){\n\n            const dirEntryStart = sizeICONDIR + sizeICONDIRENTRY * i;\n            const dirEntry = array.slice(dirEntryStart, dirEntryStart + sizeICONDIRENTRY);\n            const dataSize = readInt32LE(dirEntry, 8);\n            const dataOffset = readInt32LE(dirEntry, 12);\n            const data = array.slice(dataOffset, dataOffset + dataSize);\n            const composer = new BlobComposer();\n\n            // ICONDIR structure\n            composer.writeUint8Clamped(new Uint8ClampedArray([\n                0, 0, // 2B\tReserved. Must always be 0.\n                1, 0, // 2B Specifies image type: 1 for icon (.ICO) image, 2 for cursor (.CUR) image. Other values are invalid.\n                1, 0, // 2B Specifies number of images in the file.\n            ]));\n\n            // Update offset\n            writeInt32LE(dirEntry, 12, 22);\n\n            composer.writeUint8Clamped(dirEntry);\n            composer.writeUint8Clamped(data);\n\n            const blob = composer.getBlob({type: \"image/x-icon\"});\n            const image = await ImageService.fromFile(blob);\n\n            icons.push(IconService.fromImage(image));\n\n        }\n\n        return {icons};\n    }\n\n    static asImageData(icon: Icon): ImageData{\n        return new ImageData(icon.data, icon.width);\n    }\n\n    static fromCanvas(canvas: HTMLCanvasElement, cx: CanvasRenderingContext2D | null = null): Icon{\n\n        if (!cx){\n            cx = canvas.getContext('2d');\n        }\n\n        if (!cx) {\n            throw new MemoryError();\n        }\n\n        const model: IconColorModel = 'rgba';\n        const width = canvas.width;\n        const height = canvas.height;\n        const imageData = cx.getImageData(0,0,width, height);\n        const data = imageData.data;\n\n        return {width, height, model, data};\n    }\n\n    static fromIcon(icon: Icon, region: Rectangle): Icon{\n\n        const data = new Uint8ClampedArray(region.width * region.height * 4);\n\n        this.region32(icon, region, (index, current) => {\n            data[current] = icon.data[index];\n            data[current + 1] = icon.data[index + 1];\n            data[current + 2] = icon.data[index + 2];\n            data[current + 3] = icon.data[index + 3];\n        });\n\n        return {\n            width: region.width,\n            height: region.height,\n            data,\n            model: `rgba`\n        }\n    }\n\n    static fromImage(image: HTMLImageElement, newSize?: Size): Icon{\n\n        const model: IconColorModel = 'rgba';\n        const width = newSize? newSize.width : image.naturalWidth;\n        const height = newSize? newSize.height : image.naturalHeight;\n        const data = ImageService.resize(image, makeSz(width, height));\n\n        return {width, height, model, data};\n\n    }\n\n    static async fromFile(file: Blob, contain?: Size, allowScaleUp = false): Promise<Icon>{\n\n        const image = await ImageService.fromFile(file);\n        let width = image.width;\n        let height = image.height;\n\n        if (contain){\n            const actual = makeSz(width, height);\n            const contained = (actual.width > contain.width && actual.height > contain.height) || allowScaleUp ?  scaleToContain(contain, actual) : actual;\n            width = Math.round(contained.width);\n            height = Math.round(contained.height);\n        }\n\n        return this.fromImage(image, makeSz(width, height));\n\n    }\n\n    static newIcon(width: number, height: number, model: IconColorModel = 'rgba'): Icon{\n        const icon = {\n            width, height, model, data: new Uint8ClampedArray(width * height * 4)\n        };\n\n        return icon;\n    }\n\n    static newIconWithBg(width: number, height: number, color: Color): Icon{\n        const model: IconColorModel = 'rgba';\n        const icon = {\n            width, height, model, data: new Uint8ClampedArray(width * height * 4)\n        };\n\n        for (let i = 0; i < icon.data.length; i += 4){\n            icon.data[i] = color.r;\n            icon.data[i + 1] = color.g;\n            icon.data[i + 2] = color.b;\n            icon.data[i + 3] = color.a * 255;\n        }\n\n        return icon;\n    }\n\n    static pixelToData(pixel: Point, icon: Icon): number{\n        return icon.width * 4 * pixel.y + pixel.x * 4;\n    }\n\n    static region32(icon: Icon, region: Rectangle, onPixel: (regionIndex: number, iconIndex: number) => void){\n        let current = 0;\n        for(let y = region.top; y < region.bottom; y++){\n            for(let x = region.left; x < region.right; x++){\n                const index = IconService.pixelToData(makePt(x,y), icon);\n                onPixel(index, current);\n                current += 4;\n            }\n        }\n    }\n\n    static blend(base: Icon, sprite: Icon, region: Rectangle, spriteOffset? : Point): Icon {\n\n        if (region.width > sprite.width || region.height > sprite.height){\n            throw new InvalidRegionError();\n        }\n\n        if (!spriteOffset){\n            spriteOffset = makePt(0, 0)\n        }\n\n        const buffer = this.clone(base);\n\n        for (let y = 0; y < region.height; y++){\n            for(let x = 0; x < region.width; x++){\n                const bufferIndex = this.pixelToData(makePt(region.left + x, region.top + y), base);\n                const spriteIndex = this.pixelToData(makePt(x + spriteOffset.x, y + spriteOffset.y), sprite);\n\n                const bufferColor = Color.fromInt8Array(buffer.data, bufferIndex);\n                const spriteColor = Color.fromInt8Array(sprite.data, spriteIndex);\n                const newColor = compositeColor(bufferColor, spriteColor);\n\n                newColor.copyToUint8(buffer.data, bufferIndex);\n\n            }\n        }\n\n        return buffer;\n    }\n}","import {Color} from \"../hui/helpers/Color\";\n\nexport class ImageAdjustService {\n\n    static brightness(data: Uint8ClampedArray, delta: number){\n        for(let i = 0; i < data.length; i+=4){\n            data[i] = Math.max(Math.min(data[i] + delta, 255), 0);\n            data[i + 1] = Math.max(Math.min(data[i + 1] + delta, 255), 0);\n            data[i + 2] = Math.max(Math.min(data[i + 2] + delta, 255), 0);\n        }\n    }\n\n    static contrast(data: Uint8ClampedArray, delta: number){\n        const factor = (259 * (delta + 255)) / (255 * (259 - delta));\n        const limit = 128;\n\n        for(let i = 0; i < data.length; i+=4){\n            data[i] = Math.max(Math.min(factor * (data[i] - limit) + limit, 255), 0);\n            data[i + 1] = Math.max(Math.min(factor * (data[i + 1] - limit) + limit, 255), 0);\n            data[i + 2] = Math.max(Math.min(factor * (data[i + 2] - limit) + limit, 255), 0);\n        }\n    }\n\n    /**\n     * Dithers the image in place\n     */\n    static dither(data: Uint8ClampedArray, width: number, height: number, palette: Color[], kernelIndex: number = 1, serpentine:boolean = true) {\n        // http://www.tannerhelland.com/4660/dithering-eleven-algorithms-source-code/\n        const kernels: {[name:string]:number[][]} = {\n            FloydSteinberg: [\n                [7 / 16, 1, 0],\n                [3 / 16, -1, 1],\n                [5 / 16, 0, 1],\n                [1 / 16, 1, 1]\n            ],\n            FalseFloydSteinberg: [\n                [3 / 8, 1, 0],\n                [3 / 8, 0, 1],\n                [2 / 8, 1, 1]\n            ],\n            Stucki: [\n                [8 / 42, 1, 0],\n                [4 / 42, 2, 0],\n                [2 / 42, -2, 1],\n                [4 / 42, -1, 1],\n                [8 / 42, 0, 1],\n                [4 / 42, 1, 1],\n                [2 / 42, 2, 1],\n                [1 / 42, -2, 2],\n                [2 / 42, -1, 2],\n                [4 / 42, 0, 2],\n                [2 / 42, 1, 2],\n                [1 / 42, 2, 2]\n            ],\n            Atkinson: [\n                [1 / 8, 1, 0],\n                [1 / 8, 2, 0],\n                [1 / 8, -1, 1],\n                [1 / 8, 0, 1],\n                [1 / 8, 1, 1],\n                [1 / 8, 0, 2]\n            ],\n            Jarvis: [\t\t\t// Jarvis, Judice, and Ninke / JJN?\n                [7 / 48, 1, 0],\n                [5 / 48, 2, 0],\n                [3 / 48, -2, 1],\n                [5 / 48, -1, 1],\n                [7 / 48, 0, 1],\n                [5 / 48, 1, 1],\n                [3 / 48, 2, 1],\n                [1 / 48, -2, 2],\n                [3 / 48, -1, 2],\n                [5 / 48, 0, 2],\n                [3 / 48, 1, 2],\n                [1 / 48, 2, 2]\n            ],\n            Burkes: [\n                [8 / 32, 1, 0],\n                [4 / 32, 2, 0],\n                [2 / 32, -2, 1],\n                [4 / 32, -1, 1],\n                [8 / 32, 0, 1],\n                [4 / 32, 1, 1],\n                [2 / 32, 2, 1],\n            ],\n            Sierra: [\n                [5 / 32, 1, 0],\n                [3 / 32, 2, 0],\n                [2 / 32, -2, 1],\n                [4 / 32, -1, 1],\n                [5 / 32, 0, 1],\n                [4 / 32, 1, 1],\n                [2 / 32, 2, 1],\n                [2 / 32, -1, 2],\n                [3 / 32, 0, 2],\n                [2 / 32, 1, 2],\n            ],\n            TwoSierra: [\n                [4 / 16, 1, 0],\n                [3 / 16, 2, 0],\n                [1 / 16, -2, 1],\n                [2 / 16, -1, 1],\n                [3 / 16, 0, 1],\n                [2 / 16, 1, 1],\n                [1 / 16, 2, 1],\n            ],\n            SierraLite: [\n                [2 / 4, 1, 0],\n                [1 / 4, -1, 1],\n                [1 / 4, 0, 1],\n            ],\n        };\n        const names = [\n            \"FloydSteinberg\",\n            \"FalseFloydSteinberg\",\n            \"Stucki\",\n            \"Atkinson\",\n            \"Jarvis\",\n            \"Burkes\",\n            \"Sierra\",\n            \"TwoSierra\",\n            \"SierraLite\"\n        ];\n\n        if (kernelIndex < 0 || kernelIndex > names.length - 1) {\n            throw 'Unknown dithering kernel: ' + kernelIndex;\n        }\n\n        const nearestBuffer = new Map<number, Color>();\n        const nearest = (r: number, g: number, b: number): Color => {\n\n            const originInt =\n                (255 << 24)\t|\t// alpha\n                (b  << 16)\t|\t// blue\n                (g  <<  8)\t|\t// green\n                r;\n\n            if (nearestBuffer.has(originInt)){\n                return nearestBuffer.get(originInt)!;\n            }\n\n            let min = {\n                distance: Number.MAX_SAFE_INTEGER,\n                color: Color.white\n            };\n\n            for(const color of palette){\n                const distance = Math.sqrt(\n                    Math.pow(r - color.r, 2) +\n                    Math.pow(g - color.g, 2) +\n                    Math.pow(b - color.b, 2)\n                );\n                if (distance < min.distance){\n                    min = {distance, color};\n                }\n            }\n\n            nearestBuffer.set(originInt, min.color);\n\n            return min.color;\n        };\n        const getPixel = (x: number, y: number): [number, number, number] => {\n            const i = width * 4 * y + x * 4;\n            return [data[i], data[i+1], data[i+2]];\n        };\n        const setPixel = (x: number, y: number, r: number, g: number, b: number) => {\n\n            const i = width * 4 * y + x * 4;\n            data[i] = r;\n            data[i + 1] = g;\n            data[i + 2] = b;\n        }\n\n        let kernel: number[][] = kernels[names[kernelIndex]];\n\n        let dir = serpentine ? -1 : 1;\n\n        for (let y = 0; y < height; y++) {\n\n            dir *= serpentine ? -1 : 1;\n\n            for (let x = (dir == 1 ? 0 : width - 1), xEnd = (dir == 1 ? width : -1); x !== xEnd; x += dir) {\n\n                // Image pixel\n                const [r1, g1, b1] = getPixel(x, y);\n\n                // Reduced pixel\n                const [r2, g2, b2] = nearest(r1, g1, b1).tupleInt8;\n\n                setPixel(x, y, r2, g2, b2);\n\n                // Component distance\n                let er = r1 - r2;\n                let eg = g1 - g2;\n                let eb = b1 - b2;\n\n                for (let i = (dir == 1 ? 0 : kernel.length - 1), end = (dir == 1 ? kernel.length : 0); i !== end; i += dir) {\n                    let x1 = x + kernel[i][1] * dir;\n                    let y1 = y + kernel[i][2];\n\n                    if (x1 >= 0 && x1 < width && y1 >= 0 && y1 < height) {\n                        let d = kernel[i][0];\n\n                        const [r3, g3, b3] = getPixel(x1, y1);\n\n                        let r4 = Math.max(0, Math.min(255, r3 + er * d));\n                        let g4 = Math.max(0, Math.min(255, g3 + eg * d));\n                        let b4 = Math.max(0, Math.min(255, b3 + eb * d));\n\n                        setPixel(x1, y1, r4, g4, b4);\n                    }\n                }\n            }\n        }\n\n    }\n\n}","import {FileError, InvalidImageError, MemoryError} from \"./errors\";\nimport {makeSz, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\n\nconst REDUCE_MARGIN = 256;\n\nexport class ImageService{\n\n    static fromFile(file: Blob): Promise<HTMLImageElement>{\n        return new Promise<HTMLImageElement>((resolve, reject) => {\n\n            const reader = new FileReader();\n\n            reader.addEventListener('load', readEvent => {\n\n                if (readEvent.target){\n                    const img = new Image();\n\n                    img.addEventListener('load', () => resolve(img));\n                    img.addEventListener('error', () => reject(new InvalidImageError()));\n\n                    img.src = readEvent.target.result as string;\n                }else{\n                    reject(new MemoryError());\n                }\n\n            });\n\n            reader.addEventListener('error', () => reject(new FileError()));\n\n            reader.readAsDataURL(file);\n\n        });\n\n    }\n\n    static resize(image: HTMLImageElement, size: Size): Uint8ClampedArray{\n\n        const mustReduce = image.width > REDUCE_MARGIN || image.height > REDUCE_MARGIN;\n        const reducedSize = mustReduce ? scaleToContain(makeSz(REDUCE_MARGIN, REDUCE_MARGIN), size) : size;\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const cx = canvas.getContext('2d');\n\n        if (!cx){\n            throw new MemoryError();\n        }\n\n        canvas.width = reducedSize.width;\n        canvas.height = reducedSize.height;\n        cx.drawImage(image, 0, 0, reducedSize.width, reducedSize.height);\n\n        const imageData = cx.getImageData(0,0, reducedSize.width, reducedSize.height);\n\n        if (size.width <= REDUCE_MARGIN || size.height <= REDUCE_MARGIN){\n            return this.resample(imageData, size);\n        }else{\n            return imageData.data;\n        }\n\n    }\n\n    static resample(image: ImageData, size: Size): Uint8ClampedArray{\n        const srcW = image.width;\n        const srcH = image.height;\n        const destW = Math.round(size.width);\n        const destH = Math.round(size.height);\n        let data = image.data;\n        let data2 = new Uint8ClampedArray(size.width * size.height * 4);\n        let ratio_w = srcW / destW;\n        let ratio_h = srcH / destH;\n        let ratio_w_half = Math.ceil(ratio_w/2);\n        let ratio_h_half = Math.ceil(ratio_h/2);\n\n        for(let j = 0; j < destH; j++){\n            for(let i = 0; i < destW; i++){\n                let x2 = (i + j*destW) * 4;\n                let weight = 0;\n                let weights = 0;\n                let weights_alpha = 0;\n                let gx_r = 0, gx_g = 0, gx_b = 0, gx_a = 0;\n                let center_y = (j + 0.5) * ratio_h;\n                for(let yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++){\n                    let dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;\n                    let center_x = (i + 0.5) * ratio_w;\n                    let w0 = dy*dy; //pre-calc part of w\n                    for(let xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++){\n                        let dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;\n                        let w = Math.sqrt(w0 + dx*dx);\n                        if(w >= -1 && w <= 1){\n                            //hermite filter\n                            weight = 2 * w*w*w - 3*w*w + 1;\n                            if(weight > 0){\n                                dx = 4*(xx + yy*srcW);\n                                //alpha\n                                gx_a += weight * data[dx + 3];\n                                weights_alpha += weight;\n                                //colors\n                                if(data[dx + 3] < 255)\n                                    weight = weight * data[dx + 3] / 250;\n                                gx_r += weight * data[dx];\n                                gx_g += weight * data[dx + 1];\n                                gx_b += weight * data[dx + 2];\n                                weights += weight;\n                            }\n                        }\n                    }\n                }\n                data2[x2]     = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        return data2;\n    }\n\n}","import {uuid} from \"../hui/helpers/Uuid\";\n\nconst VER = \"1\";\n\nexport interface PaletteColor{\n    name: string;\n    hex: string;\n}\n\nexport interface Palette{\n    version?:string;\n    id?: string;\n    name: string;\n    native?: boolean;\n    unsaved?: boolean;\n    unnamed?: boolean;\n    colors: PaletteColor[];\n}\n\nconst PALETTES_STORAGE_KEY = 'palettes-v1';\n\nfunction validateVersion(arr: any[]): Palette[]{\n    const r: Palette[] = [];\n\n    for(const obj of arr){\n        if (obj.version === VER){\n            r.push(obj as Palette);\n        }\n    }\n\n    return r;\n}\n\nexport class PaletteService{\n\n    static async getAll(): Promise<Palette[]>{\n        try{\n            const value = String(window.localStorage.getItem(PALETTES_STORAGE_KEY));\n\n            if (value){\n                const obj = JSON.parse(value);\n\n                if(!obj){\n                    return [];\n\n                }else if(!(obj instanceof Array)){\n                    return Promise.reject(new Error());\n                }else{\n                    return validateVersion(obj);\n                }\n\n            }else{\n                return [];\n            }\n\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n\n    static async upsert(palette: Palette): Promise<Palette>{\n\n        if (!palette.id){\n            palette.id = uuid();\n        }\n\n        palette = {...palette, unsaved: false, version: VER};\n\n        const all = await this.getAll();\n        const index = all.findIndex(p => p.id === palette.id);\n\n        if (index >= 0 ){\n            all[index] = palette;\n        }else{\n            all.push(palette);\n        }\n\n        try{\n            window.localStorage.setItem(PALETTES_STORAGE_KEY, JSON.stringify(all));\n            return palette;\n        }catch(e){\n            return Promise.reject(e);\n        }\n\n    }\n\n}","export class InvalidImageError extends Error{}\nexport class FileError extends Error{}\nexport class InvalidRegionError extends Error{}\nexport class MemoryError extends Error{}\nexport class NoSelectionError extends Error{}\nexport class NoClipboardAccessError extends Error{}","import {IconDocument, IconEditorTool} from \"../IconEditor\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Color} from \"../../hui/helpers/Color\";\nimport {ImageAdjustService} from \"../ImageAdjustService\";\nimport {Palette} from \"../PaletteService\";\n\nexport interface AdjustProperties{\n    palette?: Palette;\n    brightness?: number;\n    contrast?: number;\n    kernel?: number;\n    serpentine?: boolean;\n}\n\nexport class AdjustTool implements IconEditorTool{\n\n    original: IconDocument | null = null;\n\n    private lastProps?: AdjustProperties;\n\n    constructor(readonly controller: IconCanvasController){}\n\n    activate(){\n        this.controller.editor.begin();\n        this.original = this.controller.editor.cloneDocument();\n    }\n\n    deactivate(){\n        this.controller.editor.rollback();\n    }\n\n    apply(){\n        this.controller.editor.commit();\n        this.original = this.controller.editor.cloneDocument();\n        this.controller.editor.begin();\n    }\n\n    updateAdjustments(props: AdjustProperties): boolean{\n\n        if (!this.original){\n            return false;\n        }\n\n        let changed = false;\n\n        if(this.lastProps) {\n            for(let name in props){\n                if((props as any)[name] !== (this.lastProps as any)[name]) {\n                    changed = true;\n                    break;\n                }\n            }\n        }else{\n            changed = true;\n        }\n\n        if(!changed){\n            return false;\n        }\n\n        const doc = this.controller.editor.cloneDocument(this.original);\n        const icon = doc.icon;\n        const data = icon.data;\n        const {palette, contrast, brightness, kernel, serpentine} = props;\n\n\n        if (typeof brightness === \"number\" && brightness !== 0){\n            ImageAdjustService.brightness(data, brightness);\n        }\n\n        if ( typeof contrast === \"number\" && contrast !== 0){\n            ImageAdjustService.contrast(data, contrast);\n        }\n\n        if (palette){\n            ImageAdjustService.dither(data, icon.width, icon.height, palette.colors.map(tuple => Color.fromHex(tuple.hex)), kernel || 0, !!serpentine);\n        }\n\n        this.controller.editor.setDocument(doc);\n\n        this.lastProps = props;\n\n        return true;\n    }\n\n}","import {PencilTool} from \"./PencilTool\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Color} from \"../../hui/helpers/Color\";\n\nexport class EraserTool extends PencilTool{\n\n    constructor(controller: IconCanvasController) {\n        super(controller);\n        this.color = Color.transparent;\n    }\n\n    useColor(color: Color) {\n        // do nothing, color must be transparent\n    }\n\n}","import {IconEditorTool} from \"../IconEditor\";\nimport {Color} from \"../../hui/helpers/Color\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {Point} from \"../../hui/helpers/Rectangle\";\n\nexport class FloodFillTool implements IconEditorTool{\n\n    color: Color = Color.black;\n\n    constructor(readonly controller: IconCanvasController) {}\n\n    fill(p: Point){\n\n        this.controller.editor.begin();\n\n        const limit = 30000;\n        const tuple = this.color.tupleInt8;\n        const doc = this.controller.editor.cloneDocument();\n        const data = doc.icon.data;\n        const width = doc.icon.width;\n        const index = this.controller.pixelToData(p);\n        const origin = new Color(doc.icon.data[index], doc.icon.data[index + 1], doc.icon.data[index + 2], doc.icon.data[index + 3]);\n        const q: number[] = [];\n        const visited: number[] = [];\n        let counter = 0;\n\n        q.push(index);\n\n        const keep = () => {\n            if (q.length > 0){\n                batch();\n            }\n        }\n\n        const batch = () => {\n            while(q.length > 0){\n                counter++;\n\n                if (counter >= limit){\n                    counter = 0;\n                    this.controller.editor.setDocument(doc);\n                    setTimeout(() => keep());\n                    return;\n                }\n\n                const n = q.pop();\n\n                if (typeof n === 'number'){\n                    const insideArray = (n >=  0) || (n + 3) < data.length;\n                    const matchesColor = origin.equals(new Color(data[n], data[n+1], data[n+2], data[n+3]));\n                    const repeated = visited.indexOf(n) >= 0;\n\n                    if (!repeated && insideArray && matchesColor){\n                        data[n] = tuple[0];\n                        data[n+1] = tuple[1];\n                        data[n+2] = tuple[2];\n                        data[n+3] = tuple[3];\n\n                        q.push(n + 4);\n                        q.push(n - 4);\n                        q.push(n - width * 4);\n                        q.push(n + width * 4);\n\n                        visited.push(n);\n                    }\n                }\n            }\n\n            this.controller.editor.commit(doc);\n        }\n\n        batch();\n\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n            this.fill(p);\n        }\n\n    }\n\n    useColor(color: Color){\n        this.color = color;\n    }\n\n}","import {IconDocument, IconEditorTool} from \"../IconEditor\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Color} from \"../../hui/helpers/Color\";\n\ninterface ColorReplace{\n    document: IconDocument;\n    oldColor?: Color;\n    newColor?: Color;\n}\n\nexport class PaletteComposerTool implements IconEditorTool{\n\n    private replace: ColorReplace | null = null;\n\n    constructor(readonly controller: IconCanvasController) {}\n\n    deactivate(){\n        if (this.controller.editor.currentTransaction){\n            this.controller.editor.rollback();\n        }\n    }\n\n    colorReplaceStart(){\n        this.replace = {\n            document: this.controller.editor.cloneDocument()\n        };\n\n        this.controller.editor.begin();\n    }\n\n    colorReplaceCancel(){\n        this.controller.editor.rollback();\n    }\n\n    colorReplaceSelectOld(c: Color){\n        if (!this.replace){\n            throw new Error(`No replace operation`);\n        }\n\n        this.replace.oldColor = c;\n\n    }\n\n    colorReplaceSelectNew(newColor: Color){\n\n        if (!this.replace){\n            throw new Error(`No replace operation`);\n        }\n\n        if (!this.replace.oldColor){\n            throw new Error(`No color to replace`);\n        }\n\n        this.replace.newColor = newColor;\n\n        const old = this.replace.oldColor;\n        const doc = this.controller.editor.cloneDocument(this.replace.document);\n        const data = doc.icon.data;\n\n        for(let i = 0; i < data.length; i+=4){\n\n            const color = Color.fromInt8Array(data, i);\n\n            if (color.equals(old)){\n                newColor.copyToUint8(data, i);\n            }\n        }\n\n        this.controller.editor.setDocument(doc);\n    }\n\n    colorReplaceConfirm(c: Color){\n\n        this.controller.editor.commit();\n    }\n\n}","import {IconEditorTool} from \"../IconEditor\";\nimport {PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Point} from \"../../hui/helpers/Rectangle\";\nimport {Color} from \"../../hui/helpers/Color\";\n\nexport class PencilTool implements IconEditorTool{\n\n    private drawing = false;\n    color: Color = new Color(0,0,0,);\n\n    constructor(readonly controller: IconCanvasController) {}\n\n    private drawAt(p: Point){\n\n        const index = this.controller.pointToData(p);\n\n        if (index < 0){\n            return;\n        }\n\n\n        const newState = this.controller.editor.cloneDocument();\n        const data = newState.icon.data;\n\n        data[index    ] = this.color.r;\n        data[index + 1] = this.color.g;\n        data[index + 2] = this.color.b;\n        data[index + 3] = Math.round(this.color.a * 255);\n\n        this.controller.editor.setDocument(newState);\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n\n        this.drawing = true;\n\n        if (!this.controller.editor.currentTransaction){\n            this.controller.editor.begin();\n            this.drawAt(e.point);\n        }\n\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        if (this.drawing){\n            this.drawAt(e.point);\n        }\n\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n\n        this.drawing = false;\n        this.controller.editor.commit();\n\n    }\n\n    useColor(color: Color){\n        this.color = color;\n    }\n\n}","import {IconDocument, IconEditor, IconEditorTool} from \"../IconEditor\";\nimport {KeyEvent, KeyEventResult, PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {makePt, makeSz, Point, Rectangle} from \"../../hui/helpers/Rectangle\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Icon} from \"../Icon\";\nimport {IconService} from \"../IconService\";\nimport {NoSelectionError} from \"../errors\";\n\nexport type SelectionDragMode = 'sprite' | 'area';\n\nexport class SelectionTool implements IconEditorTool{\n\n    private selecting = false;\n    private dragging = false;\n    private dragOffset: Point = makePt(0, 0);\n    private startPixel = makePt(0,0);\n\n    readonly editor: IconEditor;\n\n    _dragMode: SelectionDragMode = 'sprite';\n\n    constructor(readonly controller: IconCanvasController) {\n        this.editor = controller.editor;\n    }\n\n    private clipOutSelection(document?: IconDocument): {buffer: Icon, sprite: Icon}{\n\n        if(!document){\n            document = this.document;\n        }\n\n        if (!document.selectionRegion){\n            throw new Error();\n        }\n\n        const buffer = IconService.clone(document.icon);\n        const sprite = IconService.fromIcon(buffer, document.selectionRegion);\n\n        IconService.region32(buffer, document.selectionRegion,\n            (index, current) => {\n                buffer.data[index] = 0\n                buffer.data[index + 1] = 0\n                buffer.data[index + 2] = 0\n                buffer.data[index + 3] = 0\n        });\n\n        return {buffer, sprite};\n    }\n\n    private updateSelRegion(a: Point, b: Point){\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.selectionRegion = Rectangle.fromLTRB(\n            Math.round(Math.min(a.x, b.x)),\n            Math.round(Math.min(a.y, b.y)),\n            Math.round(Math.max(a.x, b.x)) + 1,\n            Math.round(Math.max(a.y, b.y)) + 1\n        );\n\n        this.editor.setDocument(newDoc);\n    }\n\n    private selectionDragEnded(){\n\n        if (!this.document.selectionRegion){\n            return;\n        }\n\n        this.selectRegion(this.document.selectionRegion, false);\n\n        this.selecting = false;\n    }\n\n    private pixelIsInsideSelection(p: Point | null){\n        return p && this.document.selectionRegion && this.document.selectionRegion.contains(p);\n    }\n\n    private dragEnded(){\n        this.dragging = false;\n        this.dragOffset = makePt(0,0);\n    }\n\n    private updateDrag(p: Point){\n\n        this.moveSelection(p.x - this.dragOffset.x, p.y - this.dragOffset.y);\n\n    }\n\n    private moveSelection(x: number, y: number){\n\n        if(\n            !this.document.selectionRegion\n        ){\n            throw new NoSelectionError();\n        }\n\n        const base = this.document.icon;\n        const spriteW = this.document.selectionSprite?.width || this.document.selectionRegion.width;\n        const spriteH = this.document.selectionSprite?.height || this.document.selectionRegion.height;\n\n        x = Math.max(-spriteW, x);\n        x = Math.min(base.width, x);\n        y = Math.max(-spriteH, y);\n        y = Math.min(base.height, y);\n\n        const region = new Rectangle(x, y, spriteW, spriteH);\n        const offset = makePt(\n            region.left < 0 ? Math.abs(region.left) : 0,\n            region.top < 0 ? Math.abs(region.top) : 0\n        );\n        const selectionRegion = Rectangle.fromLTRB(\n            region.left < 0 ? 0 : region.left,\n            region.top < 0 ? 0 : region.top,\n            region.right > base.width ? base.width : region.right,\n            region.bottom > base.height ? base.height : region.bottom\n        );\n\n        let newDoc: IconDocument;\n\n        if (this.dragMode === 'sprite'){\n            if (\n                !this.document.selectionSprite ||\n                !this.document.selectionBuffer\n            ){\n                throw new NoSelectionError();\n            }\n\n            const {selectionBuffer, selectionSprite} = this.document;\n\n            newDoc = {\n                ...this.editor.cloneDocument(),\n                selectionRegion,\n                icon: IconService.blend(selectionBuffer, selectionSprite, selectionRegion, offset)\n            };\n\n        }else{\n            newDoc = {\n                ...this.editor.cloneDocument(),\n                selectionRegion,\n                selectionBuffer: undefined,\n                selectionSprite: undefined\n            }\n        }\n\n        if (this.editor.currentTransaction){\n            this.editor.setDocument(newDoc);\n        }else{\n            this.editor.transact(newDoc);\n        }\n\n    }\n\n    private offsetSelection(x: number, y: number){\n        if(\n            !this.document.selectionRegion ||\n            !this.document.selectionSprite\n        ){\n            throw new NoSelectionError();\n        }\n\n        const sprite: Icon = this.document.selectionSprite;\n        const current: Rectangle = this.document.selectionRegion;\n\n        let implicitX = current.right - sprite.width;\n        let implicitY = current.bottom - sprite.height;\n\n        implicitX = implicitX < 0 ? implicitX : 0;\n        implicitY = implicitY < 0 ? implicitY : 0;\n\n        this.moveSelection(current.left + x + implicitX, current.top + y + implicitY);\n\n    }\n\n    private saveDragOffset(p: Point){\n\n        if (!this.document.selectionRegion){\n            throw new NoSelectionError();\n        }\n\n        this.dragOffset = makePt(\n            p.x - this.document.selectionRegion.left,\n            p.y - this.document.selectionRegion.top\n        );\n    }\n\n    selectRegion(selectionRegion: Rectangle, transact = true){\n\n        let doc: IconDocument = {\n            ...this.editor.cloneDocument(),\n            selectionRegion\n        };\n\n        if (this.dragMode === 'sprite'){\n            const {buffer, sprite} = this.clipOutSelection(doc);\n\n            doc = {\n                ...doc,\n                selectionBuffer: buffer,\n                selectionSprite: sprite,\n            };\n        }\n\n        if(transact){\n            this.editor.transact(doc);\n        }else{\n            this.editor.setDocument(doc);\n        }\n\n    }\n\n    selectAll(){\n        const icon = this.document.icon;\n        this.selectRegion(Rectangle.fromSize(makeSz(icon.width, icon.height)));\n    }\n\n    clearSelection(){\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.selectionRegion = newDoc.selectionSprite = newDoc.selectionBuffer = undefined;\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n\n    }\n\n    cropToSelection(){\n\n        const sprite = this.editor.document.selectionSprite;\n\n        if (sprite){\n            this.editor.transact({icon: sprite});\n        }else{\n            throw new NoSelectionError();\n        }\n    }\n\n    deactivate(){\n        if (this.document.selectionRegion){\n            this.clearSelection();\n        }\n    }\n\n    deleteSelection(){\n\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.icon = newDoc.selectionBuffer!;\n        newDoc.selectionSprite = newDoc.selectionBuffer = newDoc.selectionRegion = undefined;\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void{\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n            this.startPixel = p;\n            this.editor.begin();\n\n            if (this.pixelIsInsideSelection(p)){\n                this.dragging = true;\n                this.saveDragOffset(p);\n\n            }else{\n                this.selecting = true;\n\n            }\n        }\n\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (this.selecting){\n            this.selectionDragEnded();\n        }\n\n        if (this.dragging){\n            this.dragEnded();\n        }\n\n        if (this.editor.currentTransaction){\n            this.editor.commit();\n        }\n\n        if (this.pixelIsInsideSelection(p)){\n            return {cursor: 'move'};\n        }\n\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n\n            if (this.selecting) {\n                this.updateSelRegion(this.startPixel, p);\n\n            }else if(this.dragging){\n                this.updateDrag(p);\n\n            }else if(this.pixelIsInsideSelection(p)){\n                return {cursor: 'move'};\n            }\n\n        }\n\n        return {cursor: 'crosshair'};\n    }\n\n    keyDown(e: KeyEvent): KeyEventResult | void {\n\n        if (e.key == 'Escape'){\n            this.clearSelection();\n\n        }else if (e.key == 'Delete' || e.key == 'Backspace'){\n            this.deleteSelection();\n\n        }else if (e.key == 'ArrowLeft'){\n            this.offsetSelection(-1, 0);\n\n        }else if (e.key == 'ArrowRight'){\n            this.offsetSelection(1, 0);\n\n        }else if (e.key == 'ArrowUp'){\n            this.offsetSelection(0, -1);\n\n        }else if (e.key == 'ArrowDown'){\n            this.offsetSelection(0, 1);\n\n        }\n\n    }\n\n    get document(): IconDocument{\n        return this.editor.document;\n    }\n\n    get dragMode(): SelectionDragMode{\n        return this._dragMode;\n    }\n\n    set dragMode(mode: SelectionDragMode){\n\n        const changed = mode !== this._dragMode;\n\n        if(!changed){\n            return;\n        }\n\n        this._dragMode = mode;\n\n        if (this.document.selectionRegion){\n            this.selectRegion(this.document.selectionRegion);\n        }\n\n    }\n\n}","import {IconDocument} from \"../model/IconEditor\";\nimport {makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {MemoryError} from \"../model/errors\";\nimport {darkModeOn} from \"../hui/helpers/Utils\";\nimport {MarchingAnts} from \"./MarchingAnts\";\n\nconst dark = darkModeOn();\nconst GRID_OUT = Color.fromHex(dark ? 'fff' : '000').withAlpha(0.05);\nconst GRID_STRONG = Color.fromHex(dark ? `#4C4A4A` : `#e0e0e0`);\nconst GRID_LIGHT = Color.fromHex(dark ? `fff` : `000`).withAlpha(0.05);\nconst CHECKER_EVEN = Color.transparent;\nconst CHECKER_ODD = Color.fromHex(dark ? 'fff' : '000').withAlpha(0.05);\nconst CHECKER_SIZE = 10;\nconst CORNER_RADIUS = 10;\nconst PLATE_BG = Color.fromHex(dark ? 'fff' : '000').withAlpha(0.05);\n\nconst CLOCK_MOD = 4;\nconst SAFE_CLEAR = 10;\n\ninterface Corners {\n    tl: number;\n    tr: number;\n    br: number;\n    bl: number;\n}\n\nexport class IconDocumentRenderer {\n\n    private static clock = 0;\n    private static clockReminder = 0;\n    private static checkerCanvas: HTMLCanvasElement | null = null;\n    private static pixelsBuffer: HTMLCanvasElement | null = null;\n    private static pixelsContext: CanvasRenderingContext2D | null = null;\n\n    static getPixelsBuffer(canvasSize: Size): {canvas: HTMLCanvasElement; cx: CanvasRenderingContext2D}{\n        if(\n            !this.pixelsBuffer ||\n            this.pixelsBuffer.width !== canvasSize.width ||\n            this.pixelsBuffer.height !== canvasSize.height\n        ) {\n            this.pixelsBuffer = document.createElement('canvas');\n            this.pixelsBuffer.width = canvasSize.width;\n            this.pixelsBuffer.height = canvasSize.height;\n            this.pixelsContext = this.pixelsBuffer.getContext('2d');\n        }\n\n        if(!this.pixelsContext) {\n            throw new MemoryError();\n        }\n\n        return {\n            canvas: this.pixelsBuffer,\n            cx: this.pixelsContext,\n        }\n    }\n\n    static getPattern(context: CanvasRenderingContext2D): CanvasPattern | null{\n\n        if(!IconDocumentRenderer.checkerCanvas){\n            const canvas: HTMLCanvasElement = IconDocumentRenderer.checkerCanvas = document.createElement('canvas');\n            canvas.width = canvas.height = CHECKER_SIZE;\n\n            const localCx = canvas.getContext('2d');\n            const size = CHECKER_SIZE / 2;\n\n            if(!localCx){\n                return null;\n            }\n\n            if (!CHECKER_EVEN.isTransparent){\n                localCx.fillStyle = CHECKER_EVEN.cssRgba;\n                localCx.fillRect(0,0, size, size);\n                localCx.fillRect(size, size, size, size);\n            }\n\n            if (!CHECKER_ODD.isTransparent){\n                localCx.fillStyle = CHECKER_ODD.cssRgba;\n                localCx.fillRect(size, 0, size, size);\n                localCx.fillRect(0, size, size, size);\n            }\n        }\n\n        const canvas = IconDocumentRenderer.checkerCanvas;\n\n        return context.createPattern(canvas, 'repeat');\n\n    }\n\n    readonly bounds: Rectangle;\n\n    constructor(\n        readonly document: IconDocument,\n        readonly context: CanvasRenderingContext2D,\n        readonly plateBounds: Rectangle,\n        readonly drawBackground: boolean,\n        readonly drawGrid: boolean,\n    ) {\n        this.bounds = this.plateBounds.deflate(CORNER_RADIUS, CORNER_RADIUS);\n    }\n\n    private pathRoundRect(bounds: Rectangle, radius: number | Corners = 10) {\n\n        const ctx = this.context;\n        const {x, y} = bounds.location;\n        const {width, height} = bounds.size;\n\n        if (typeof radius === 'number') {\n            radius = {tl: radius, tr: radius, br: radius, bl: radius};\n        }\n\n        ctx.beginPath();\n        ctx.moveTo(x + radius.tl, y);\n        ctx.lineTo(x + width - radius.tr, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);\n        ctx.lineTo(x + width, y + height - radius.br);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);\n        ctx.lineTo(x + radius.bl, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);\n        ctx.lineTo(x, y + radius.tl);\n        ctx.quadraticCurveTo(x, y, x + radius.tl, y);\n        ctx.closePath();\n\n    }\n\n    private pathLines(lines: [Point, Point][]){\n        const c = this.context;\n\n        c.beginPath();\n\n        for(const line of lines){\n            c.moveTo(line[0].x, line[0].y);\n            c.lineTo(line[1].x, line[1].y);\n        }\n    }\n\n    private renderPixels(pixelSize: Size){\n        const {canvas, cx} = IconDocumentRenderer.getPixelsBuffer(makeSz(this.document.icon.width, this.document.icon.height));\n\n        cx.putImageData(new ImageData(this.document.icon.data, this.document.icon.width), 0, 0);\n\n        this.context.imageSmoothingEnabled = false;\n        this.context.drawImage(canvas, ...this.bounds.tuple);\n        this.context.imageSmoothingEnabled = true;\n    }\n\n    private renderGrid(pixelSize: Size){\n\n        const ctx = this.context;\n        const icon = this.document.icon;\n        const bounds = this.bounds;\n\n        ctx.beginPath();\n\n        let x = this.bounds.left;\n        let y = this.bounds.top;\n\n        for(let i = 0; i <= icon.width; i++){\n            ctx.moveTo(x, bounds.top);\n            ctx.lineTo(x, bounds.bottom);\n            x += pixelSize.width;\n        }\n\n        for(let i = 0; i <= icon.height; i++){\n            ctx.moveTo(bounds.left, y);\n            ctx.lineTo(bounds.right, y);\n            y += pixelSize.height;\n        }\n\n        ctx.strokeStyle = GRID_LIGHT.cssRgba;\n        ctx.stroke();\n\n    }\n\n    private renderFrame(){\n        const r = CORNER_RADIUS;\n        const p = this.plateBounds;\n        this.pathLines([\n            p.offset(0, r).northSegment,\n            p.offset(-r, 0).eastSegment,\n            p.offset(0, -r).southSegment,\n            p.offset(r, 0).westSegment\n        ]);\n        this.context.strokeStyle = GRID_OUT.cssRgba;\n        this.context.stroke();\n    }\n\n    private renderChecker(){\n        const pattern = IconDocumentRenderer.getPattern(this.context);\n\n        if(!pattern){\n            return;\n        }\n\n        this.context.fillStyle = pattern;\n        this.context.fillRect(...this.bounds.tuple);\n\n    }\n\n    private renderSelection(pixelSize: Size){\n\n        if (!this.document.selectionRegion){\n            return;\n        }\n\n        const selection = this.document.selectionRegion;\n\n        const selBounds = new Rectangle(\n            this.bounds.left + selection.left * pixelSize.width,\n            this.bounds.top + selection.top * pixelSize.height,\n            selection.width * pixelSize.width,\n            selection.height * pixelSize.height\n        ).round();\n\n        IconDocumentRenderer.clock++;\n\n        if(IconDocumentRenderer.clock % CLOCK_MOD === 0){\n            IconDocumentRenderer.clockReminder++;\n\n            if (IconDocumentRenderer.clockReminder === 9){\n                IconDocumentRenderer.clockReminder = 0;\n            }\n        }\n\n        MarchingAnts.rectangle(this.context, selBounds, Color.black, Color.white, IconDocumentRenderer.clockReminder);\n\n        return;\n\n    }\n\n    private drawPlate(){\n        this.pathRoundRect(this.plateBounds, CORNER_RADIUS);\n        this.context.fillStyle = PLATE_BG.cssRgba;\n        this.context.fill();\n    }\n\n    render(){\n        const pixelSize = makeSz(\n            this.bounds.width / this.document.icon.width,\n            this.bounds.height / this.document.icon.height);\n\n        //this.context.clearRect(...this.plateBounds.inflate(SAFE_CLEAR, SAFE_CLEAR).tuple);\n        //this.context.clearRect(0, 0, this.)\n\n        //this.drawPlate();\n\n        if (this.drawBackground){\n            this.renderChecker();\n        }\n\n        this.renderPixels(pixelSize);\n\n        if (this.drawGrid){\n            this.renderGrid(pixelSize);\n        }\n\n        //this.renderFrame();\n\n        if (this.document.selectionRegion){\n            this.renderSelection(pixelSize);\n        }\n\n    }\n\n}","import {distance, Point, Rectangle} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\n\nexport class MarchingAnts{\n\n    static line(cx: CanvasRenderingContext2D, a: Point, b: Point, color1 = Color.black, color2  = Color.white, step: number = 0){\n\n        step = step % 8; // step can only go from 0 to 8\n\n        const lineWidthBuffer = cx.lineWidth;\n        cx.lineWidth = 1.5;\n\n        const fives = new Array(Math.round(distance(a, b) / 5)).fill(5);\n\n        switch(step){\n            case 0: cx.setLineDash([1, ...fives]); break;\n            case 1: cx.setLineDash([2, ...fives]); break;\n            case 2: cx.setLineDash([3, ...fives]); break;\n            case 3: cx.setLineDash([4, ...fives]); break;\n            case 4: cx.setLineDash([5, 5]); break;\n            case 5: cx.setLineDash([0, 1,...fives]); break;\n            case 6: cx.setLineDash([0,2,...fives]); break;\n            case 7: cx.setLineDash([0,3,...fives]); break;\n            case 8: cx.setLineDash([0,4,...fives]); break;\n        }\n\n        cx.strokeStyle = color1.cssRgba;\n        cx.beginPath();\n        cx.moveTo(a.x, a.y);\n        cx.lineTo(b.x, b.y);\n        cx.stroke();\n\n        switch(step){\n            case 0: cx.setLineDash([0, 1, ...fives]); break;\n            case 1: cx.setLineDash([0, 2, ...fives]); break;\n            case 2: cx.setLineDash([0, 3, ...fives]); break;\n            case 3: cx.setLineDash([0, 4, ...fives]); break;\n            case 4: cx.setLineDash([0, 5, ...fives]); break;\n            case 5: cx.setLineDash([1,...fives]); break;\n            case 6: cx.setLineDash([2,...fives]); break;\n            case 7: cx.setLineDash([3,...fives]); break;\n            case 8: cx.setLineDash([4,...fives]); break;\n        }\n\n        cx.strokeStyle = color2.cssRgba;\n        cx.beginPath();\n        cx.moveTo(a.x, a.y);\n        cx.lineTo(b.x, b.y);\n        cx.stroke();\n\n        cx.setLineDash([]);\n        cx.lineWidth = lineWidthBuffer;\n    }\n\n    static rectangle(cx: CanvasRenderingContext2D, r: Rectangle, color1 = Color.black, color2  = Color.white, step: number = 0){\n        const lines: [Point, Point][] = [\n            [r.northWest, r.northEast],\n            [r.northEast, r.southEast],\n            [r.southEast, r.southWest],\n            [r.southWest, r.northWest],\n        ];\n\n        for(const [a, b] of lines){\n            this.line(cx, a, b, color1, color2, step);\n        }\n\n    }\n\n}","import {IconReviewer} from \"../model/IconReviewer\";\nimport {makePt, makeSz, Rect, Rectangle, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\nimport {MarchingAnts} from \"./MarchingAnts\";\nimport {IconService} from \"../model/IconService\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {Palette} from \"../model/PaletteService\";\n\nexport function marchingAntsMarker(cx: CanvasRenderingContext2D, contentBounds: Rectangle, focusRegion: Rectangle){\n    // N\n    const na = makePt(contentBounds.left, focusRegion.top);\n    const nb = makePt(contentBounds.right, focusRegion.top);\n\n    // S\n    const sa = makePt(contentBounds.left, focusRegion.bottom);\n    const sb = makePt(contentBounds.right, focusRegion.bottom);\n\n    // W\n    const wa = makePt(focusRegion.left, contentBounds.top);\n    const wb = makePt(focusRegion.left, contentBounds.bottom);\n\n    // E\n    const ea = makePt(focusRegion.right, contentBounds.top);\n    const eb = makePt(focusRegion.right, contentBounds.bottom);\n\n\n    MarchingAnts.line(cx, na, nb);\n    MarchingAnts.line(cx, sa, sb);\n    MarchingAnts.line(cx, wa, wb);\n    MarchingAnts.line(cx, ea, eb);\n}\n\nexport class ReviewRenderer{\n\n    constructor(\n        readonly reviewer: IconReviewer,\n        readonly palette?: Palette,\n    ) {}\n\n    private colorName(color: Color){\n        if (this.palette){\n            for(const palColor of this.palette.colors){\n                if (palColor.hex === color.hexRgb){\n                    if (palColor.name){\n                        return palColor.name;\n                    }else{\n                        break;\n                    }\n                }\n            }\n        }\n\n        return color.isTransparent ? 'Nothing' :  color.hexRgb.toUpperCase();\n    }\n\n    private drawCode(cx: CanvasRenderingContext2D, color: Color, region: Rectangle){\n\n        const txt = this.colorName(color);\n        const measure = cx.measureText(txt);\n        const txtSize = makeSz(measure.width, measure.actualBoundingBoxDescent);\n        const txtBounds = Rectangle.fromSize(txtSize).centerAt(region.center)\n            .offset(0, 9);\n\n        cx.fillStyle = color.relativeLuminance > 0.5 ? 'black' : 'white';\n        cx.font = `18px 'Mukta Mahee', 'San Francisco', 'Helvetica', sans-serif`;\n        cx.fillText(txt, txtBounds.left, txtBounds.top, region.width);\n    }\n\n    private drawColorCodes(cx: CanvasRenderingContext2D, data: Uint8ClampedArray, region: Rectangle, sample: Size){\n\n        const pixel = makeSz(region.width / sample.width, region.height / sample.height);\n\n        for(let row = 0; row < sample.height; row++){\n            for(let col = 0; col < sample.width; col++){\n                const index = sample.width * row * 4 + col * 4;\n                const color = Color.fromTupleInt8([\n                    data[index], data[index + 1], data[index + 2], data[index + 3]\n                ]);\n                const pixelBounds = new Rectangle(\n                    region.left + col * pixel.width,\n                    region.top + row * pixel.height,\n                    pixel.width, pixel.height\n                );\n\n                this.drawCode(cx, color, pixelBounds);\n            }\n        }\n\n    }\n\n    renderPreview(context: CanvasRenderingContext2D, canvasSize: Size){\n\n        const sourceCanvas = IconService.asCanvas(this.reviewer.current);\n\n        const srcW = sourceCanvas.width;\n        const srcH = sourceCanvas.height;\n        const w = canvasSize.width;\n        const h = canvasSize.height;\n\n\n\n        context.clearRect(0, 0, w, h);\n        context.imageSmoothingEnabled = false;\n        context.drawImage(sourceCanvas, 0,0, w, h);\n\n        const sampleW = this.reviewer.sample.width;\n        const sampleH = this.reviewer.sample.height;\n        const contentBounds = new Rectangle(0, 0, w, h);\n        const pixelSize = makeSz(w/srcW, h/srcH);\n        const focusSize = makeSz(sampleW * pixelSize.width, sampleH * pixelSize.height);\n        const focusLocation = makePt(pixelSize.width * this.reviewer.currentHotspot.left, pixelSize.height * this.reviewer.currentHotspot.top);\n        const focusRegion = Rectangle.fromPoint(focusLocation).withSize(focusSize);\n\n        marchingAntsMarker(context, contentBounds, focusRegion);\n\n    }\n\n    renderReview(context: CanvasRenderingContext2D, canvasSize: Size){\n\n        const source = this.reviewer.reviewImage();\n        const cx = context;\n        const sample = this.reviewer.sample;\n        const graphicSize = makeSz(source.width, source.height);\n\n        const contentBounds = Rectangle\n            .fromSize(scaleToContain(canvasSize, graphicSize))\n            .centerAt(Rectangle.fromSize(canvasSize).center);\n\n        cx.clearRect(0,0, canvasSize.width, canvasSize.height);\n        cx.imageSmoothingEnabled = false;\n        cx.drawImage(source, ...contentBounds.tuple);\n\n        const pixelSize = makeSz(contentBounds.width / source.width, contentBounds.height / source.height);\n\n        const focusRegion = new Rectangle(\n            contentBounds.left + pixelSize.width * sample.width,\n            contentBounds.top + pixelSize.height * sample.height,\n            pixelSize.width * sample.width,\n            pixelSize.height * sample.height);\n\n        marchingAntsMarker(cx, contentBounds, focusRegion);\n\n        // Labels\n        this.drawColorCodes(cx, this.reviewer.sampleSprite, focusRegion, sample);\n\n    }\n\n}","module.exports = React;","module.exports = ReactDOM;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/dist/\";","// startup\n// Load entry module\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(2629);\n"],"sourceRoot":""}