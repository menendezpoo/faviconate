{"version":3,"sources":["webpack://faviconate/./src/hui/css/index.scss","webpack://faviconate/./src/hui/css/styles.css","webpack://faviconate/./src/hui/css/theme.css","webpack://faviconate/./src/index.scss","webpack://faviconate/./src/hui/css/icons/0175-floppy-disk.svg","webpack://faviconate/./src/hui/css/icons/0180-file-empty.svg","webpack://faviconate/./src/hui/css/icons/0187-folder.svg","webpack://faviconate/./src/hui/css/icons/0822-cross2.svg","webpack://faviconate/./src/hui/css/icons/0826-chevron-up.svg","webpack://faviconate/./src/hui/css/icons/0827-chevron-down.svg","webpack://faviconate/./src/hui/css/icons/0828-chevron-left.svg","webpack://faviconate/./src/hui/css/icons/0829-chevron-right.svg","webpack://faviconate/./node_modules/css-loader/dist/runtime/api.js","webpack://faviconate/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://faviconate/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://faviconate/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://faviconate/./src/hui/css/index.scss?80b8","webpack://faviconate/./src/hui/css/styles.css?787b","webpack://faviconate/./src/hui/css/theme.css?1493","webpack://faviconate/./src/index.scss?7223","webpack://faviconate/./src/components/App.tsx","webpack://faviconate/./src/components/CanvasView.tsx","webpack://faviconate/./src/components/PreviewPanel.tsx","webpack://faviconate/./src/hui/helpers/ClickDismiss.tsx","webpack://faviconate/./src/hui/helpers/Color.ts","webpack://faviconate/./src/hui/helpers/FocusStackHandler.tsx","webpack://faviconate/./src/hui/helpers/KeyCaptureStackHandler.tsx","webpack://faviconate/./src/hui/helpers/Rectangle.ts","webpack://faviconate/./src/hui/items/Button.tsx","webpack://faviconate/./src/hui/items/Clickable.tsx","webpack://faviconate/./src/hui/items/ColorPicker.tsx","webpack://faviconate/./src/hui/items/Icon.tsx","webpack://faviconate/./src/hui/items/Label.tsx","webpack://faviconate/./src/hui/items/Loader.tsx","webpack://faviconate/./src/hui/items/MenuItem.tsx","webpack://faviconate/./src/hui/items/Separator.tsx","webpack://faviconate/./src/hui/items/TextBox.tsx","webpack://faviconate/./src/hui/layout/DockView.tsx","webpack://faviconate/./src/hui/layout/ToolbarView.tsx","webpack://faviconate/./src/hui/overlays/MenuOverlay.tsx","webpack://faviconate/./src/hui/overlays/SuggestionsOverlay.tsx","webpack://faviconate/./src/index.tsx","webpack://faviconate/./src/model/Editor.ts","webpack://faviconate/./src/model/IconCanvasController.ts","webpack://faviconate/./src/model/IconDocumentRenderer.ts","webpack://faviconate/./src/model/IconEditor.ts","webpack://faviconate/./src/model/IconService.ts","webpack://faviconate/./src/model/ImageService.ts","webpack://faviconate/./src/model/errors.ts","webpack://faviconate/./src/model/tools/EraserTool.ts","webpack://faviconate/./src/model/tools/PencilTool.ts","webpack://faviconate/./src/model/tools/SelectionTool.ts","webpack://faviconate/external \"React\"","webpack://faviconate/external \"ReactDOM\"","webpack://faviconate/webpack/bootstrap","webpack://faviconate/webpack/runtime/compat get default export","webpack://faviconate/webpack/runtime/define property getters","webpack://faviconate/webpack/runtime/hasOwnProperty shorthand","webpack://faviconate/webpack/runtime/make namespace object","webpack://faviconate/webpack/runtime/publicPath","webpack://faviconate/webpack/startup"],"names":["___CSS_LOADER_EXPORT___","push","module","id","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_arrayLikeToArray","arr","len","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","next","done","value","err","_iterableToArrayLimit","o","minLen","n","prototype","call","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","url","options","__esModule","default","hash","needQuotes","replace","memo","getTarget","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","key","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","App","React","Component","props","super","controller","IconCanvasController","selectedTool","SelectionTool","state","previewCanvas","undos","redos","showBackground","showGrid","usePen","preventDefault","dataTransfer","items","file","getAsFile","console","log","size","importFile","icon","editor","makeSz","width","height","IconService","fromFile","then","sprite","setState","setTimeout","nodes","getElementsByTagName","focus","EraserTool","pen","PencilTool","color","tool","undo","undoPeek","selectionRegion","redo","redoPeek","doc","newIcon","getImageCanvas","addEventListener","focused","tagName","ctrlKey","shiftKey","useEraser","useSelection","mainToolbarItems","Button","text","MenuItem","onActivate","newDocument","Separator","onClick","disabled","undoCount","redoCount","toolToolbarItems","selected","sideBar","PreviewPanel","canvas","ColorPicker","colorPicked","colorPick","documentSubmitted","src","link","oldLink","getElementById","rel","href","changeFavicon","toDataURL","onDragOver","appDragOver","onDrop","appDrop","ToolbarView","DockView","side","sideView","CanvasView","containerRef","createRef","canvasRef","canvasSize","_cursor","resizer","updateCanvasSize","mouseUpCatcher","mouseUp","keyDownCatcher","keyDown","keyUpCatcher","keyUp","clientX","clientY","current","bounds","Rectangle","fromDOMRect","getBoundingClientRect","makePt","left","top","removeEventListener","rect","pointingGestureStart","point","canvasPoint","touch","body","pointingGestureEnd","pointingGestureMove","cursor","touches","t","stopPropagation","ignoreKey","context","getContext","draw","render","requestAnimationFrame","registerResizeHook","unRegisterResizeHook","prevProps","prevState","snapshot","ref","className","tabIndex","onMouseDown","mouseDown","onMouseMove","mouseMove","onTouchStart","touchStart","onTouchMove","touchMove","onTouchEnd","touchEnd","innerHTML","updateCanvas","ClickDismiss","eventName","stack","preventNext","stopImmediatePropagation","popAndExecute","m","idReminder","entry","pop","unregister","mouseup","InvalidColorFormatError","Color","r","g","b","a","hexColor","match","hexParsable","toDecimal","hex","parseInt","Math","round","FocusStackHandler","dismiss","commit","KeyCaptureStackHandler","execute","instance","x","y","sqrt","pow","container","scalable","wOriented","hOriented","right","bottom","p","s","rects","union","withLocation","horizontal","vertical","fromLTRB","c","north","northEast","east","southEast","south","southWest","west","northWest","rectangle","thisX","thisY","thisW","thisH","rectX","rectY","rectW","rectH","min","max","location","center","escapeKeyDismissId","clickDismissId","buttonRef","activate","showDropDown","hideDropDown","keyDownHide","keyDownShow","keyDownActivate","keyPass","dropDownVisible","register","DOMRect","chevron","Icon","label","Label","menu","MenuOverlay","refRect","onDismissSignal","children","tags","face","classTag","tabProp","split","onKeyDown","Clickable","mouseEnter","mouseLeave","avoidHover","isHovered","isSelected","onMouseEnter","onMouseLeave","currentColor","transparent","fromHex","TextBox","change","handleChange","background","hexRgb","classNames","iconSize","description","Loader","showOverlay","hideOverlay","mouseActivate","sendDismissSignal","sendDismissSingleSignal","sendSelectSignal","preventNextEvent","onClose","onOpen","selectedClass","propsWithIcon","assign","isActivated","Children","isOpen","parentMenuItem","onDismissSingleSignal","onSelectSignal","triggeredWhileLoading","tRef","wRef","defaultValue","clear","handleKeyDown","sug","suggestions","onSuggestionSelected","getSuggestions","event","loadSuggestions","stop","selectPreviousSuggestion","selectNextSuggestion","selectedSuggestion","activateSuggestion","opts","getSuggestionsOptions","charsToTrigger","loadingSuggestions","pieces","input","placeholder","type","onChange","clearButton","clearOn","suggestionOpts","contents","separator","loader","SuggestionsOverlay","relativeElement","prev","sideCss","mainCss","sideClassNames","containerClassNames","itemsCenter","itemsFar","separators","overlayRef","setOpenItem","isActivationKey","cancelAndDo","f","keyCaptureId","selectNext","selectPrev","openCurrentIndex","activatedIndex","selectedIndex","openIndex","find","childCount","view","innerWidth","innerHeight","newRectangle","clone","withRight","withBottom","equals","st","correctPosition","menuItem","cloneElement","setNoOpenItem","closeOpenedIndex","setSelectedItem","parent","ReactDOM","NoTransactionError","TransactionInProgressError","UnsavedChangesError","_currentTransaction","_hasChanges","undoStack","redoStack","documentChanged","_document","documentState","_tool","previewBounds","empty","previewPixelSize","IconEditor","_editor","pixel","contains","floor","deflate","pointToPixel","pixelToData","cvBounds","previewArea","pixelLength","centerAt","IconDocumentRenderer","deactivate","GRID_OUT","GRID_INT","CHECKER_EVEN","CHECKER_ODD","drawBackground","drawGrid","checkerCanvas","localCx","CHECKER_SIZE","isTransparent","fillStyle","cssRgba","fillRect","createPattern","strokeStyle","strokeRect","tuple","pixelSize","drawn","rectFill","ctx","beginPath","moveTo","lineTo","stroke","rectStroke","pattern","getPattern","selection","selBounds","clock","clockReminder","fives","fill","segmentedRect","lineWidthBuffer","lineWidth","setLineDash","clearRect","inflate","renderChecker","renderPixels","renderGrid","renderFrame","renderSelection","Editor","putImageData","ImageData","Uint8ClampedArray","cx","MemoryError","model","getImageData","region","region32","image","newSize","ImageService","resize","contain","contained","scaleToContain","fromImage","onPixel","spriteOffset","InvalidRegionError","buffer","blend","d","sA","baseIndex","spriteIndex","baseR","baseG","baseB","baseA","spR","spG","spB","spA","REDUCE_MARGIN","Promise","resolve","reject","reader","FileReader","readEvent","img","Image","InvalidImageError","FileError","readAsDataURL","reducedSize","drawImage","imageData","resample","srcW","srcH","destW","destH","data2","ratio_w","ratio_h","ratio_w_half","ceil","ratio_h_half","j","x2","weight","weights","weights_alpha","gx_r","gx_g","gx_b","gx_a","center_y","yy","dy","abs","center_x","w0","xx","dx","w","NoSelectionError","drawing","pointToData","newState","cloneDocument","setDocument","currentTransaction","begin","drawAt","selecting","dragging","dragOffset","startPixel","pasteSprite","fromIcon","newDoc","isEmpty","clipOutSelection","selectionBuffer","selectionSprite","clearSelection","containerRec","spriteRect","pixelIsInsideSelection","saveDragOffset","selectionEnded","dragEnded","updateSel","updateDrag","deleteSelection","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","definition","defineProperty","enumerable","get","prop","hasOwnProperty","toStringTag"],"mappings":"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","file":"main.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-button-wrap{display:inline-flex;align-items:stretch}.ui-button-wrap.split>.split-part>.ui-icon.size-8{margin-left:0}.ui-button{display:inline-flex;align-items:center;padding:0.6em}.ui-button>.ui-icon.size-8{margin-left:0.6em}.swatch{display:block;width:20px;height:20px}.ui-clickable:not(.disabled){cursor:pointer}.ui-clickable.disabled{opacity:0.3}.ui-icon{background:center center no-repeat;background-size:100% 100%}.ui-icon.size-8{width:8px;height:8px}.ui-icon.size-16{width:16px;height:16px}.ui-icon.size-32{width:32px;height:32px}.ui-item-group{display:inline-flex;overflow:hidden;align-items:stretch}.ui-label.with-icon{display:flex;align-items:center}.ui-label.with-icon .ui-icon{margin-right:0.5em}.ui-label .desc{opacity:50%}.ui-separator{position:relative;height:1em}.ui-separator::after{display:block;position:absolute;content:'.';color:transparent;left:0;right:0;top:50%;height:1px}.ui-textbox{display:inline-flex;position:relative;border:solid 1px WindowFrame;background-color:white}.ui-textbox input{border:none;background-color:white}.ui-textbox input:focus{outline:none}.ui-menuitem{position:relative;display:flex;align-items:center;padding:0.6em;cursor:pointer}.ui-menuitem .ui-icon.icon-chevron-right{position:absolute;right:0.6em}.ui-menuitem .ui-label{padding-right:25px}.ui-tree-item{display:flex;padding:0.6em;align-items:center;cursor:pointer}.ui-tree-item>.collapse-glyph{margin-right:0.6em}.ui-dock-view,.ui-dock-view>.dock-side,.ui-dock-view>.main-side{position:absolute;top:0;left:0;right:0;bottom:0}.ui-dock-view .dock-side,.ui-dock-view>.main-side{overflow:auto}.ui-dock-view.side-left>.dock-side{right:auto}.ui-dock-view.side-top>.dock-side{bottom:auto}.ui-dock-view.side-right>.dock-side{left:auto}.ui-dock-view.side-bottom>.dock-side{top:auto}.ui-split-view.side-left>.dock-side{border-right-style:solid;border-right-width:1px}.ui-split-view.side-top>.dock-side{border-bottom-style:solid;border-bottom-width:1px}.ui-split-view.side-right>.dock-side{border-left-style:solid;border-left-width:1px}.ui-split-view.side-bottom>.dock-side{border-top-style:solid;border-top-width:1px}.ui-tab-view>.tabs>.items>.tab{padding-left:2em;padding-right:2em}.ui-tree-view{position:absolute;top:0;left:0;right:0;bottom:0}.ui-toolbar-view>.toolbar{display:flex;justify-content:space-between}.ui-toolbar-view>.toolbar>.items{display:flex;align-items:stretch}.ui-toolbar-view>.content{flex-grow:1;overflow:auto}.ui-toolbar-view.side-left>.toolbar,.ui-toolbar-view.side-right>.toolbar{flex-direction:column}.ui-toolbar-view.side-left>.toolbar>.items,.ui-toolbar-view.side-right>.toolbar>.items{flex-direction:column}.ui-menu-overlay{min-width:100px;box-shadow:3px 3px 3px rgba(0,0,0,0.3);z-index:10000}.ui-suggestions-overlay{background-color:Menu}.ui-suggestions-overlay .ui-clickable,.ui-suggestions-overlay .ui-loader{padding:0.6em}.ui-overlay{position:fixed;z-index:10000}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/items/Button.scss\",\"webpack://./src/hui/items/ColorPicker.scss\",\"webpack://./src/hui/items/Clickable.scss\",\"webpack://./src/hui/items/Icon.scss\",\"webpack://./src/hui/items/ItemGroup.scss\",\"webpack://./src/hui/items/Label.scss\",\"webpack://./src/hui/items/Separator.scss\",\"webpack://./src/hui/items/TextBox.scss\",\"webpack://./src/hui/items/MenuItem.scss\",\"webpack://./src/hui/items/TreeItem.scss\",\"webpack://./src/hui/layout/DockView.scss\",\"webpack://./src/hui/layout/SplitView.scss\",\"webpack://./src/hui/layout/TabView.scss\",\"webpack://./src/hui/layout/TreeView.scss\",\"webpack://./src/hui/layout/ToolbarView.scss\",\"webpack://./src/hui/overlays/MenuOverlay.scss\",\"webpack://./src/hui/overlays/SuggestionsOverlay.scss\",\"webpack://./src/hui/overlays/Overlay.scss\"],\"names\":[],\"mappings\":\"AAAA,gBACE,mBAAoB,CACpB,mBAAoB,CAFtB,kDAOQ,aAAc,CACf,WAML,mBAAoB,CACpB,kBAAmB,CACnB,aAAc,CAHhB,2BAMI,iBAAkB,CACnB,QCnBA,aAAc,CACd,UAAW,CACX,WAAY,CACb,6BCDE,cAAe,CAHnB,uBAOI,WAAY,CACb,SCPD,kCAAmC,CACnC,yBAA0B,CAF5B,gBAIa,SAAU,CAAG,UAAW,CAJrC,iBAKa,UAAW,CAAE,WAAY,CALtC,iBAMa,UAAW,CAAE,WAAY,CAAI,eCLxC,mBAAoB,CACpB,eAAgB,CAChB,mBAAoB,CACrB,oBCDG,YAAa,CACb,kBAAmB,CAJvB,6BAOM,kBAAmB,CAPzB,gBAYI,WAAY,CACb,cCZD,iBAAkB,CAClB,UAAW,CAFb,qBAKI,aAAc,CACd,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,MAAO,CACP,OAAQ,CACR,OAAQ,CACR,UAAW,CACZ,YCZD,mBAAoB,CACpB,iBAAkB,CAClB,4BAA6B,CAC7B,sBAAuB,CAJzB,kBAOI,WAAY,CACZ,sBAAuB,CAR3B,wBAUM,YAAa,CACd,aCVH,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,aAAc,CACd,cAAe,CALjB,yCAaI,iBAAkB,CAClB,WAAY,CAdhB,uBAkBI,kBAAmB,CACpB,cClBD,YAAa,CACb,aAAc,CACd,kBAAmB,CACnB,cAAe,CAJjB,8BAOI,kBAAmB,CACpB,gECLC,iBAAkB,CAClB,KAAK,CACL,MAAM,CACN,OAAQ,CACR,QAAQ,CAPZ,kDAWI,aAAc,CAXlB,mCAc8B,UAAY,CAd1C,kCAe8B,WAAY,CAf1C,oCAgB8B,SAAY,CAhB1C,qCAiB8B,QAAY,CAAI,oCCfhB,wBAAyB,CAAE,sBAAuB,CAFhF,mCAG8B,yBAA0B,CAAE,uBAAwB,CAHlF,qCAI8B,uBAAwB,CAAE,qBAAsB,CAJ9E,sCAK8B,sBAAuB,CAAE,oBAAqB,CAAI,+BCF1E,gBAAiB,CACjB,iBAAkB,CACnB,cCJH,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,OAAQ,CACR,QAAS,CACV,0BCHG,YAAa,CACb,6BAA8B,CAJlC,iCAOM,YAAa,CACb,mBAAoB,CAR1B,0BAaI,WAAY,CACZ,aAAc,CAdlB,yEAmBM,qBAAsB,CAnB5B,uFAsBQ,qBAAsB,CACvB,iBCtBL,eAAgB,CAChB,sCAA0C,CAC1C,aAAc,CACf,wBCHC,qBAAsB,CADxB,yEAII,aAAc,CACf,YCJD,cAAe,CACf,aAAc\",\"sourcesContent\":[\".ui-button-wrap{\\n  display: inline-flex;\\n  align-items: stretch;\\n\\n  &.split {\\n    > .split-part {\\n      > .ui-icon.size-8 {\\n        margin-left: 0;\\n      }\\n    }\\n  }\\n}\\n\\n.ui-button{\\n  display: inline-flex;\\n  align-items: center;\\n  padding: 0.6em;\\n\\n  > .ui-icon.size-8{\\n    margin-left: 0.6em;\\n  }\\n}\",\" .swatch{\\n   display: block;\\n   width: 20px;\\n   height: 20px;\\n }\",\".ui-clickable{\\n\\n  &:not(.disabled){\\n    cursor: pointer;\\n  }\\n\\n  &.disabled{\\n    opacity: 0.3;\\n  }\\n\\n  &.is-open,&:hover{\\n\\n  }\\n}\",\".ui-icon {\\n  background: center center no-repeat;\\n  background-size: 100% 100%;\\n\\n  &.size-8 { width: 8px;  height: 8px;  }\\n  &.size-16{ width: 16px; height: 16px; }\\n  &.size-32{ width: 32px; height: 32px; }\\n\\n}\\n\",\".ui-item-group{\\n  display: inline-flex;\\n  overflow: hidden;\\n  align-items: stretch;\\n}\",\".ui-label{\\n\\n  &.with-icon{\\n    display: flex;\\n    align-items: center;\\n\\n    .ui-icon{\\n      margin-right: 0.5em;\\n    }\\n  }\\n\\n  .desc{\\n    opacity: 50%;\\n  }\\n}\\n\",\".ui-separator{\\n  position: relative;\\n  height: 1em;\\n\\n  &::after{\\n    display: block;\\n    position: absolute;\\n    content: '.';\\n    color: transparent;\\n    left: 0;\\n    right: 0;\\n    top: 50%;\\n    height: 1px;\\n  }\\n}\",\".ui-textbox {\\n  display: inline-flex;\\n  position: relative;\\n  border: solid 1px WindowFrame;\\n  background-color: white;\\n\\n  input{\\n    border: none;\\n    background-color: white;\\n    &:focus{\\n      outline: none;\\n    }\\n  }\\n}\",\".ui-menuitem{\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 0.6em;\\n  cursor: pointer;\\n\\n\\n  &.is-open,&:hover{\\n    /* Colors */\\n  }\\n\\n  .ui-icon.icon-chevron-right{\\n    position: absolute;\\n    right: 0.6em;\\n  }\\n\\n  .ui-label{\\n    padding-right: 25px; // Based on a 16px icon to be positioned as chevron to the right\\n  }\\n}\",\".ui-tree-item{\\n  display: flex;\\n  padding: 0.6em;\\n  align-items: center;\\n  cursor: pointer;\\n\\n  > .collapse-glyph {\\n    margin-right: 0.6em;\\n  }\\n}\\n\\n.tree-item-children{\\n}\",\".ui-dock-view{\\n\\n  &, > .dock-side, > .main-side{\\n    position: absolute;\\n    top:0;\\n    left:0;\\n    right: 0;\\n    bottom:0;\\n  }\\n\\n  .dock-side, > .main-side {\\n    overflow: auto;\\n  }\\n\\n  &.side-left   > .dock-side{ right:  auto; }\\n  &.side-top    > .dock-side{ bottom: auto; }\\n  &.side-right  > .dock-side{ left:   auto; }\\n  &.side-bottom > .dock-side{ top:    auto; }\\n}\",\".ui-split-view{\\n\\n  &.side-left > .dock-side{   border-right-style: solid; border-right-width: 1px; }\\n  &.side-top > .dock-side{    border-bottom-style: solid; border-bottom-width: 1px; }\\n  &.side-right > .dock-side{  border-left-style: solid; border-left-width: 1px; }\\n  &.side-bottom > .dock-side{ border-top-style: solid; border-top-width: 1px; }\\n}\",\".ui-tab-view{\\n  > .tabs{\\n    > .items > .tab{\\n      padding-left: 2em;\\n      padding-right: 2em;\\n    }\\n  }\\n\\n}\",\".ui-tree-view{\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\",\".ui-toolbar-view{\\n\\n  > .toolbar{\\n    display: flex;\\n    justify-content: space-between;\\n\\n    > .items{\\n      display: flex;\\n      align-items: stretch;\\n    }\\n  }\\n\\n  > .content{\\n    flex-grow: 1;\\n    overflow: auto;\\n  }\\n\\n  &.side-left, &.side-right{\\n    > .toolbar{\\n      flex-direction: column;\\n\\n      > .items{\\n        flex-direction: column;\\n      }\\n    }\\n  }\\n\\n}\",\".ui-menu-overlay {\\n  min-width: 100px;\\n  box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.3);\\n  z-index: 10000;\\n}\",\".ui-suggestions-overlay{\\n  background-color: Menu;\\n\\n  .ui-clickable, .ui-loader{\\n    padding: 0.6em;\\n  }\\n}\",\".ui-overlay{\\n  position: fixed;\\n  z-index: 10000;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./icons/0822-cross2.svg\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./icons/0175-floppy-disk.svg\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"./icons/0180-file-empty.svg\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"./icons/0187-folder.svg\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"./icons/0826-chevron-up.svg\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"./icons/0827-chevron-down.svg\";\nimport ___CSS_LOADER_URL_IMPORT_6___ from \"./icons/0828-chevron-left.svg\";\nimport ___CSS_LOADER_URL_IMPORT_7___ from \"./icons/0829-chevron-right.svg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"body{font:caption}.ui-panel>div{margin:50px}.ui-icon.icon-cross{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.ui-icon.icon-floppy{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.ui-icon.icon-file{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.ui-icon.icon-folder{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.ui-icon.icon-chevron-up{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.ui-icon.icon-chevron-down{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.ui-icon.icon-chevron-left{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.ui-icon.icon-chevron-right{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/css/styles.css\"],\"names\":[],\"mappings\":\"AAAA,KACI,YAAa,CAChB,cAGG,WAAY,CAEf,oBAEqB,wDAA8C,CAAI,qBACjD,wDAAmD,CAAI,mBACzD,wDAAkD,CAAI,qBACpD,wDAA8C,CAAI,yBAC9C,wDAAkD,CAAI,2BACpD,wDAAoD,CAAI,2BACxD,wDAAoD,CAAI,4BACvD,wDAAqD\",\"sourcesContent\":[\"body{\\n    font: caption;\\n}\\n\\n.ui-panel > div {\\n    margin: 50px;\\n    /*box-shadow: 0 0 0 3px blue;*/\\n}\\n\\n.ui-icon.icon-cross { background-image: url(\\\"icons/0822-cross2.svg\\\"); }\\n.ui-icon.icon-floppy { background-image: url(\\\"icons/0175-floppy-disk.svg\\\"); }\\n.ui-icon.icon-file { background-image: url(\\\"icons/0180-file-empty.svg\\\"); }\\n.ui-icon.icon-folder { background-image: url(\\\"icons/0187-folder.svg\\\"); }\\n.ui-icon.icon-chevron-up { background-image: url(\\\"icons/0826-chevron-up.svg\\\"); }\\n.ui-icon.icon-chevron-down { background-image: url(\\\"icons/0827-chevron-down.svg\\\"); }\\n.ui-icon.icon-chevron-left { background-image: url(\\\"icons/0828-chevron-left.svg\\\"); }\\n.ui-icon.icon-chevron-right { background-image: url(\\\"icons/0829-chevron-right.svg\\\"); }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ui-clickable.is-open{background-color:Highlight;color:HighlightText}.ui-button-wrap.split:hover>.ui-button-split-part,.ui-button-wrap.split:hover>.ui-button,.ui-button:hover:not(.face-never):not(.disabled),.ui-clickable.selected:not(.disabled),.ui-button.is-open{background-color:Highlight;color:HighlightText}.ui-menuitem.is-open,.ui-menuitem.is-selected{background-color:Highlight;color:HighlightText}.ui-menu-overlay,.ui-suggestions-overlay{background-color:Window;color:WindowText;border:solid 1px #ddd;box-shadow:2px 2px 2px rgba(0,0,0,0.2)}.ui-separator:after{background-color:rgba(0,0,0,0.13)}.ui-item-group{border:solid 1px #ddd;border-radius:0.5em}.ui-item-group>.ui-clickable.selected:not(.disabled){background-color:#ddd}.ui-split-view>.dock-side{border-color:#ddd}.ui-tab-view>.tabs{background-color:#ddd}.ui-tab-view>.tabs>.items>.tab{margin-top:0.6em}.ui-tab-view>.tabs>.items>.selected{background-color:white}.ui-tree-view:focus .ui-tree-item.selected{background-color:Highlight;color:HighlightText}.ui-tree-item.selected{background-color:#f0f0f0;color:HighlightText}.ui-tree-item:not(.selected):hover{background-color:#E3EFFE}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/hui/css/theme.css\"],\"names\":[],\"mappings\":\"AAAA,sBACI,0BAA2B,CAC3B,mBAAoB,CACvB,mMAOG,0BAA2B,CAC3B,mBAAoB,CACvB,8CAIG,0BAA2B,CAC3B,mBAAoB,CACvB,yCAIG,uBAAwB,CACxB,gBAAiB,CACjB,qBAAsB,CACtB,sCAA0C,CAC7C,oBAGG,iCAAqC,CACxC,eAEG,qBAAsB,CACtB,mBAAoB,CACvB,qDAGG,qBAAsB,CACzB,0BAE4B,iBAAkB,CAAK,mBAE7B,qBAAsB,CAAG,+BACT,gBAAiB,CAAG,oCACf,sBAAuB,CAAI,2CAGnE,0BAA2B,CAC3B,mBAAoB,CACvB,uBAGG,wBAAyB,CACzB,mBAAoB,CACvB,mCAGG,wBAAyB\",\"sourcesContent\":[\".ui-clickable.is-open{\\n    background-color: Highlight;\\n    color: HighlightText;\\n}\\n\\n.ui-button-wrap.split:hover > .ui-button-split-part,\\n.ui-button-wrap.split:hover > .ui-button,\\n.ui-button:hover:not(.face-never):not(.disabled),\\n.ui-clickable.selected:not(.disabled),\\n.ui-button.is-open{\\n    background-color: Highlight;\\n    color: HighlightText;\\n}\\n\\n.ui-menuitem.is-open,\\n.ui-menuitem.is-selected{\\n    background-color: Highlight;\\n    color: HighlightText;\\n}\\n\\n.ui-menu-overlay,\\n.ui-suggestions-overlay{\\n    background-color: Window;\\n    color: WindowText;\\n    border: solid 1px #ddd;\\n    box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n}\\n\\n.ui-separator:after{\\n    background-color: rgba(0, 0, 0, 0.13);\\n}\\n.ui-item-group{\\n    border: solid 1px #ddd;\\n    border-radius: 0.5em;\\n}\\n\\n.ui-item-group > .ui-clickable.selected:not(.disabled){\\n    background-color: #ddd;\\n}\\n\\n.ui-split-view > .dock-side{ border-color: #ddd;  }\\n\\n.ui-tab-view > .tabs { background-color: #ddd;}\\n.ui-tab-view > .tabs  > .items > .tab {margin-top: 0.6em;}\\n.ui-tab-view > .tabs  > .items > .selected{ background-color: white; }\\n\\n.ui-tree-view:focus .ui-tree-item.selected{\\n    background-color: Highlight;\\n    color: HighlightText;\\n}\\n\\n.ui-tree-item.selected{\\n    background-color: #f0f0f0;\\n    color: HighlightText;\\n}\\n\\n.ui-tree-item:not(.selected):hover{\\n    background-color: #E3EFFE;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div.canvas-view{position:absolute;top:0;left:0;right:0;bottom:0}div.canvas-view canvas:focus{outline:none}#app{position:absolute;top:0;left:0;right:0;bottom:0}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/CanvasView.scss\",\"webpack://./src/components/App.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAEE,iBAAkB,CAClB,KAAM,CAAE,MAAO,CAAE,OAAQ,CAAE,QAAQ,CAHrC,6BAMI,YAAa,CACd,KCND,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,OAAQ,CACR,QAAS\",\"sourcesContent\":[\"div.canvas-view{\\n\\n  position: absolute;\\n  top: 0; left: 0; right: 0; bottom:0;\\n\\n  canvas:focus{\\n    outline: none;\\n  }\\n\\n}\",\"#app{\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","export default __webpack_public_path__ + \"images/eaa6b0d5c4b755a1c5f442a5b31d3913.svg\";","export default __webpack_public_path__ + \"images/1c7c2677071e811d4aca7f0b4a48fbb3.svg\";","export default __webpack_public_path__ + \"images/ae2087a3922088a93b0f3fde77c0e56f.svg\";","export default __webpack_public_path__ + \"images/bb9f1f8d917fff10d0587496ee1e8cfd.svg\";","export default __webpack_public_path__ + \"images/38aee18e86f51b62ad5e548bd745488d.svg\";","export default __webpack_public_path__ + \"images/384b04f25826b885bb36dbf1d2d847c1.svg\";","export default __webpack_public_path__ + \"images/16d86ed52ad1cc4fa6e0eb00d1794003.svg\";","export default __webpack_public_path__ + \"images/12f0f97012b8956a484acfdd52300568.svg\";","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === 'function') {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./styles.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./theme.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import * as React from \"react\";\nimport {ToolbarView} from \"../hui/layout/ToolbarView\";\nimport {Button} from \"../hui/items/Button\";\nimport {Separator} from \"../hui/items/Separator\";\nimport {DockView} from \"../hui/layout/DockView\";\nimport {CanvasView} from \"./CanvasView\";\nimport {IconCanvasController} from \"../model/IconCanvasController\";\nimport {EraserTool} from \"../model/tools/EraserTool\";\nimport {PencilTool} from \"../model/tools/PencilTool\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {ColorPicker} from \"../hui/items/ColorPicker\";\nimport {PreviewPanel} from \"./PreviewPanel\";\nimport {IconEditorTool} from \"../model/IconEditor\";\nimport {SelectionTool} from \"../model/tools/SelectionTool\";\nimport {IconService} from \"../model/IconService\";\nimport {makeSz} from \"../hui/helpers/Rectangle\";\nimport {MenuItem} from \"../hui/items/MenuItem\";\n\nfunction changeFavicon(src: string) {\n    const link = document.createElement('link'),\n        oldLink = document.getElementById('dynamic-favicon');\n    link.id = 'dynamic-favicon';\n    link.rel = 'shortcut icon';\n    link.href = src;\n    if (oldLink) {\n        document.head.removeChild(oldLink);\n    }\n    document.head.appendChild(link);\n}\n\nexport interface AppProps{}\n\nexport interface AppState{\n    controller: IconCanvasController;\n    selectedTool: IconEditorTool | null;\n    previewCanvas: HTMLCanvasElement | null;\n    undos: number;\n    redos: number;\n    showBackground: boolean;\n    showGrid: boolean;\n}\n\nexport class App extends React.Component<AppProps, AppState>{\n\n    constructor(props: AppProps) {\n        super(props);\n\n        const controller = new IconCanvasController();\n        const selectedTool = new SelectionTool(controller);\n\n        this.state = {\n            controller,\n            previewCanvas: null,\n            selectedTool,\n            undos: 0,\n            redos: 0,\n            showBackground: true,\n            showGrid: true,\n        }\n\n        this.usePen();\n    }\n\n    private appDragOver(e: React.DragEvent<HTMLDivElement>){\n        e.preventDefault();\n    }\n\n    private appDrop(e: React.DragEvent<HTMLDivElement>){\n        e.preventDefault();\n\n        if (e.dataTransfer.items){\n            for (let i = 0; i < e.dataTransfer.items.length; i++){\n                const item = e.dataTransfer.items[i];\n                const file = item.getAsFile();\n\n                if (file){\n                    console.log(`${file.name} -> ${file.size}`);\n                    this.importFile(file);\n                }else{\n                    console.log(`Can't get as file`)\n                }\n\n                break;\n            }\n        }else{\n            console.log(`No transfer items`)\n        }\n\n    }\n\n    private importFile(file: File){\n\n        const controller = this.state.controller;\n        const icon = controller.editor.document.icon;\n        const size = makeSz(icon.width, icon.height);\n\n        IconService.fromFile(file, size).then(sprite => {\n            this.setState({selectedTool: null});\n\n            setTimeout(() => {\n\n                this.setState({selectedTool: new SelectionTool(controller, sprite)});\n\n                const nodes = document.getElementsByTagName('canvas');\n                if (nodes.length > 0){\n                    nodes[0].focus();\n                }else{\n                    console.log(`no canvas found`)\n                }\n            });\n        });\n\n    }\n\n    private useEraser(){\n        this.setState({selectedTool: new EraserTool(this.state.controller)});\n    }\n\n    private usePen(){\n        const pen = new PencilTool(this.state.controller);\n        this.setState({selectedTool: pen});\n\n    }\n\n    private useSelection(){\n        this.setState({selectedTool: new SelectionTool(this.state.controller)});\n    }\n\n    private colorPick(color: Color){\n        if (this.state.controller.tool instanceof PencilTool){\n            const p: PencilTool = this.state.controller.tool as PencilTool;\n            p.color = color;\n        }\n    }\n\n    private undo(){\n        this.state.controller.editor.undo();\n        const undos = this.state.undos + 1;\n\n        if (this.state.controller.editor.undoPeek?.selectionRegion && !(this.state.selectedTool instanceof SelectionTool)){\n            this.setState({undos, selectedTool: new SelectionTool(this.state.controller)});\n        }else{\n            this.setState({undos});\n        }\n\n    }\n\n    private redo(){\n        this.state.controller.editor.redo();\n        const redos = this.state.redos + 1;\n\n        if (this.state.controller.editor.redoPeek?.selectionRegion && !(this.state.selectedTool instanceof SelectionTool)){\n            this.setState({redos, selectedTool: new SelectionTool(this.state.controller)});\n        }else{\n            this.setState({redos});\n        }\n    }\n\n    private newDocument(size: number){\n\n        console.log(`New Doc: ${size}`)\n\n        const icon = IconService.newIcon(size, size)\n        const doc = {icon};\n        const controller = new IconCanvasController(doc);\n\n        this.setState({controller, previewCanvas: controller.editor.getImageCanvas()});\n    }\n\n    componentDidMount() {\n        document.addEventListener('keydown', e => {\n\n            const focused = document.querySelector(\"*:focus\");\n\n            if (focused && (focused.tagName == 'INPUT' || focused.tagName == 'TEXTAREA')){\n                return;\n            }\n\n            if (e.key == 'z' && e.ctrlKey && e.shiftKey){\n                this.redo();\n                e.preventDefault();\n\n            }else if(e.key == 'z' && e.ctrlKey){\n                this.undo();\n                e.preventDefault();\n\n            }else if(e.key === 'v' && !e.ctrlKey){\n                this.useSelection();\n                e.preventDefault();\n\n            }else if((e.key === 'p' || e.key == 'd') && !e.ctrlKey){\n                this.usePen();\n                e.preventDefault();\n\n            }else if(e.key === 'e' && !e.ctrlKey){\n                this.useEraser();\n                e.preventDefault();\n\n            }else if(e.key === 'b' && !e.ctrlKey){\n                this.setState({showBackground: !this.state.showBackground});\n                e.preventDefault();\n\n            }else if(e.key === 'g' && !e.ctrlKey){\n                this.setState({showGrid: !this.state.showGrid});\n                e.preventDefault();\n\n            }\n\n        });\n    }\n\n    render() {\n\n        const controller = this.state.controller;\n\n        const mainToolbarItems = <>\n            <Button text={`Faviconate`}>\n                <MenuItem text={`New 16x16 Icon`} onActivate={() => this.newDocument(16)}/>\n                <MenuItem text={`New 32x32 Icon`} onActivate={() => this.newDocument(32)}/>\n                <MenuItem text={`New 64x64 Icon`} onActivate={() => this.newDocument(64)}/>\n                <MenuItem text={`New 128x128 Icon`} onActivate={() => this.newDocument(128)}/>\n                <MenuItem text={`New 256x256 Icon`} onActivate={() => this.newDocument(256)}/>\n            </Button>\n            <Separator/>\n            <Button text={`Undo`} onClick={() => this.undo()} disabled={controller.editor.undoCount == 0}/>\n            <Button text={`Redo`} onClick={() => this.redo()} disabled={controller.editor.redoCount == 0}/>\n            <Button text={`Copy`}/>\n            <Button text={`Paste`}/>\n        </>;\n\n        const toolToolbarItems = <>\n            <Button\n                text={`Sel`}\n                onClick={() => this.useSelection()}\n                selected={this.state.selectedTool instanceof SelectionTool}\n            />\n            <Button\n                text={`Pen`}\n                onClick={() => this.usePen()}\n                selected={this.state.selectedTool instanceof PencilTool && !(this.state.selectedTool instanceof EraserTool)}\n            />\n            <Button\n                text={`Ers`}\n                onClick={() => this.useEraser()}\n                selected={this.state.selectedTool instanceof EraserTool}/>\n            <Button\n                text={`Bg`}\n                onClick={() => this.setState({showBackground: !this.state.showBackground})}\n                selected={this.state.showBackground}\n            />\n            <Button\n                text={`Gr`}\n                onClick={() => this.setState({showGrid: !this.state.showGrid})}\n                selected={this.state.showGrid}\n            />\n        </>;\n\n        const sideBar = <>\n            <PreviewPanel canvas={this.state.previewCanvas}/>\n            <ColorPicker colorPicked={color => this.colorPick(color) } />\n        </>;\n\n        this.state.controller.editor.documentSubmitted = () => {\n            this.setState({previewCanvas: this.state.controller.editor.getImageCanvas()});\n        };\n\n        if (this.state.previewCanvas){\n            changeFavicon(this.state.previewCanvas.toDataURL());\n        }\n\n        controller.tool = this.state.selectedTool;\n        controller.showBackground = this.state.showBackground;\n        controller.showGrid = this.state.showGrid;\n\n        return (\n            <div id={`app`}\n                 onDragOver={e => this.appDragOver(e)}\n                 onDrop={e => this.appDrop(e)}\n            >\n            <ToolbarView items={mainToolbarItems}>\n                <DockView side={`right`} sideView={sideBar}>\n                    <ToolbarView side={`left`} items={toolToolbarItems}>\n                        <CanvasView controller={controller} />\n                    </ToolbarView>\n                </DockView>\n            </ToolbarView>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {RefObject} from \"react\";\nimport {makePt, makeSz, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\n\nexport interface PointingEvent {\n    point: Point;\n    touch: boolean;\n}\n\nexport interface PointingEventResult{\n    cursor?: string;\n}\n\nexport interface KeyEvent{\n    key: string;\n}\n\nexport interface KeyEventResult{\n    preventDefault?: boolean;\n}\n\nexport interface CanvasSensor{\n    pointingGestureMove?     (e: PointingEvent):    PointingEventResult | void;\n    pointingGestureStart?    (e: PointingEvent):    PointingEventResult | void;\n    pointingGestureEnd?      (e: PointingEvent):    PointingEventResult | void;\n    keyDown?                 (e: KeyEvent):         KeyEventResult | void;\n    keyUp?                   (e: KeyEvent):         KeyEventResult | void;\n}\n\nexport interface CanvasViewController extends CanvasSensor{\n    render                   (context: CanvasRenderingContext2D, size: Size): void;\n}\n\nexport interface CanvasViewProps{\n    controller: CanvasViewController;\n}\n\nexport class CanvasView extends React.Component<CanvasViewProps>{\n\n    readonly containerRef: RefObject<HTMLDivElement> = React.createRef();\n    readonly canvasRef: RefObject<HTMLCanvasElement> = React.createRef();\n\n    private canvasSize: Size = makeSz(0,0);\n    private _cursor: string | null = null;\n    private resizer = () => this.updateCanvasSize();\n    private mouseUpCatcher = (e: MouseEvent) => this.mouseUp(e);\n    private keyDownCatcher = (e: KeyboardEvent) => this.keyDown(e);\n    private keyUpCatcher = (e: KeyboardEvent) => this.keyUp(e);\n\n    constructor(props: CanvasViewProps) {\n        super(props);\n\n    }\n\n    private canvasPoint(clientX: number, clientY: number): Point{\n        if(this.canvasRef.current) {\n            const bounds = Rectangle.fromDOMRect(this.canvasRef.current.getBoundingClientRect());\n            return makePt(clientX - bounds.left, clientY - bounds.top);\n        }\n        return makePt(clientX, clientY);\n    }\n\n    private registerResizeHook(){\n        window.addEventListener('resize', this.resizer);\n    }\n\n    private unRegisterResizeHook(){\n        window.removeEventListener('resize', this.resizer);\n    }\n\n    private updateCanvasSize(){\n        if(this.containerRef.current) {\n\n            const rect = Rectangle.fromDOMRect(this.containerRef.current.getBoundingClientRect());\n\n            if(this.canvasRef.current) {\n                this.canvasSize = makeSz(rect.width, rect.height);\n                this.canvasRef.current.width = rect.width;\n                this.canvasRef.current.height = rect.height;\n\n            }else{\n                console.log(`Diagram::resize: No canvasRef`);\n            }\n\n        }else{\n            console.log(`Diagram::resize: No containerRef`);\n        }\n\n    }\n\n    private mouseDown(e: React.MouseEvent<HTMLCanvasElement, MouseEvent>){\n\n        if (this.controller.pointingGestureStart){\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            this.controller.pointingGestureStart({point, touch: false});\n        }\n\n        document.body.addEventListener('mouseup', this.mouseUpCatcher);\n\n    }\n\n    private mouseUp(e: MouseEvent){\n\n        if(this.canvasRef.current && this.controller.pointingGestureEnd) {\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            this.controller.pointingGestureEnd({point, touch: false});\n        }\n\n        document.body.removeEventListener(`mouseup`, this.mouseUpCatcher);\n    }\n\n    private mouseMove(e: React.MouseEvent<HTMLCanvasElement, MouseEvent>){\n\n        if (this.controller.pointingGestureMove){\n            const point = this.canvasPoint(e.clientX, e.clientY);\n            const result = this.controller.pointingGestureMove({point, touch: false});\n\n            if (result && result.cursor){\n                this.cursor = result.cursor;\n            }else{\n                this.cursor = 'default';\n            }\n        }\n    }\n\n    private touchEnd(e: React.TouchEvent<HTMLCanvasElement>){\n        if (this.controller.pointingGestureEnd){\n            if(e.touches.length > 0) {\n                const t = e.touches[0];\n                this.controller.pointingGestureEnd({\n                    point: this.canvasPoint(t.clientX, t.clientY),\n                    touch: true,\n                });\n            }else{\n                this.controller.pointingGestureEnd({point: makePt(0,0), touch: true})\n            }\n        }\n    }\n\n    private touchMove(e: React.TouchEvent<HTMLCanvasElement>){\n        if(this.controller.pointingGestureMove && e.touches.length > 0) {\n            const t = e.touches[0];\n            this.controller.pointingGestureMove({\n                point: this.canvasPoint(t.clientX, t.clientY),\n                touch: true\n            });\n        }\n    }\n\n    private touchStart(e: React.TouchEvent<HTMLCanvasElement>){\n        if(this.controller.pointingGestureStart && e.touches.length > 0) {\n            e.preventDefault();\n            e.stopPropagation();\n            const t = e.touches[0];\n            const point = this.canvasPoint(t.clientX, t.clientY);\n            this.controller.pointingGestureStart({point, touch: true});\n        }\n\n    }\n\n    private ignoreKey(): boolean{\n        const focused = document.querySelector(\"*:focus\");\n\n        return !!focused && (focused.tagName === 'INPUT' || focused.tagName === 'TEXTAREA');\n    }\n\n    private keyDown(e: KeyboardEvent){\n\n        if (!this.ignoreKey() && this.controller.keyDown){\n            const result = this.controller.keyDown({key: e.key});\n\n            if (result && result.preventDefault === true){\n                e.preventDefault();\n            }\n        }\n    }\n\n    private keyUp(e: KeyboardEvent){\n        if (!this.ignoreKey() && this.controller.keyUp){\n            const result = this.controller.keyUp({key: e.key});\n\n            if (result && result.preventDefault === true){\n                e.preventDefault();\n            }\n        }\n    }\n\n    componentDidMount() {\n        this.resizer();\n\n        if (this.canvasRef.current){\n            const context = this.canvasRef.current.getContext(\"2d\");\n\n            if (context){\n\n                const draw = () => {\n                    this.controller.render(context, this.canvasSize);\n                    requestAnimationFrame(draw);\n                };\n\n                requestAnimationFrame(() => draw());\n\n            }else{\n                console.log(`No context`);\n            }\n        }else{\n            console.log(`No canvasRef`);\n        }\n\n    }\n\n    componentWillMount(): void {\n        this.registerResizeHook();\n\n        document.addEventListener('keyup', this.keyUpCatcher);\n        document.addEventListener('keydown', this.keyDownCatcher);\n    }\n\n    componentWillUnmount(): void {\n        this.unRegisterResizeHook();\n\n        document.removeEventListener('keyup', this.keyUpCatcher);\n        document.removeEventListener('keydown', this.keyDownCatcher);\n    }\n\n    componentDidUpdate(prevProps: Readonly<CanvasViewProps>, prevState: Readonly<{}>, snapshot?: any) {\n\n    }\n\n    render() {\n        return (\n            <div ref={this.containerRef} className={`canvas-view`}>\n                <canvas\n                    ref={this.canvasRef}\n                    tabIndex={0}\n                    onMouseDown={e => this.mouseDown(e)}\n                    onMouseMove={e => this.mouseMove(e)}\n                    onTouchStart={e => this.touchStart(e)}\n                    onTouchMove={e => this.touchMove(e)}\n                    onTouchEnd={e => this.touchEnd(e)}\n                ></canvas>\n            </div>\n        );\n    }\n\n    get controller(): CanvasViewController{\n        return this.props.controller;\n    }\n\n    get cursor(): string | null{\n        return this._cursor;\n    }\n\n    set cursor(value: string | null){\n\n        const changed = value !== this._cursor;\n\n        if(changed){\n\n            if(this.canvasRef.current) {\n                this.canvasRef.current.style.cursor = value || '';\n            }\n\n            this._cursor = value;\n        }\n    }\n}","import * as React from \"react\";\nimport {RefObject} from \"react\";\n\nexport interface PreviewPanelProps{\n    canvas: HTMLCanvasElement | null;\n}\n\nexport class PreviewPanel extends React.Component<PreviewPanelProps>{\n\n    ref: RefObject<HTMLDivElement> = React.createRef();\n\n    private updateCanvas(){\n        if (this.ref.current && this.props.canvas){\n            this.ref.current.innerHTML = '';\n            this.ref.current.appendChild(this.props.canvas);\n        }\n    }\n\n    render() {\n\n        this.updateCanvas();\n\n        return (\n            <div ref={this.ref} className={`preview-panel`}>\n            </div>\n        );\n    }\n\n}","import {Callable} from \"./hui\";\n\nexport class ClickDismiss{\n\n    static mouseup = new ClickDismiss('mouseup');\n\n    private static idReminder = 1;\n\n    private stack: {id: number, call: Callable}[] = [];\n\n    private preventNext = false;\n\n    private constructor(eventName: string){\n        window.addEventListener(eventName, e => {\n            if(this.preventNext) {\n                this.preventNext = false;\n                return;\n            }else{\n                if(this.stack.length > 0) {\n                    e.stopImmediatePropagation();\n                    this.popAndExecute();\n                }\n            }\n        });\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: Callable): number{\n\n        const id = ClickDismiss.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    popAndExecute(){\n        const entry = this.stack.pop();\n\n        if(entry){\n            entry.call();\n            this.unregister(entry.id);\n        }\n    }\n\n    preventNextEvent(){\n        this.preventNext = true;\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n        this.preventNext = false;\n    }\n\n}","\nexport class InvalidColorFormatError extends Error{}\n\nexport class Color{\n\n    static hexParsable(hexColor: string): boolean{\n        return hexColor.match(/#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?/) !== null;\n    }\n\n    static fromHex(hexColor: string): Color{\n\n        if (!Color.hexParsable(hexColor)){\n            throw new InvalidColorFormatError(hexColor);\n        }\n\n        hexColor = hexColor.replace('#', '');\n\n        let toDecimal = function(hex: any){ return parseInt(hex, 16) };\n\n        let r = 0;\n        let g = 0;\n        let b = 0;\n        let a = 1;\n\n        // If three digits\n        if(hexColor.length == 3){\n            r = toDecimal(hexColor[0] + hexColor[0]);\n            g = toDecimal(hexColor[1] + hexColor[1]);\n            b = toDecimal(hexColor[2] + hexColor[2]);\n        }else{\n            r = toDecimal(hexColor[0] + hexColor[1]);\n            g = toDecimal(hexColor[2] + hexColor[3]);\n            b = toDecimal(hexColor[4] + hexColor[5]);\n\n            if(hexColor.length == 8) {\n                a = toDecimal(hexColor[6] + hexColor[7]);\n            }\n        }\n\n        return new Color(r, g, b, a);\n\n    }\n\n    static get transparent(): Color{\n        return new Color(0, 0, 0, 0);\n    }\n\n    constructor(\n        readonly r: number,     //  0 - 255\n        readonly g: number,     //  0 - 255\n        readonly b: number,     //  0 - 255\n        readonly a: number = 1, //  0 - 1\n    ) {}\n\n    get cssRgb(): string{\n        return `rgb(${this.r}, ${this.g}, ${this.b})`;\n    }\n\n    get cssRgba(): string{\n        return `rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`;\n    }\n\n    get hexRgb(): string{\n\n        const hex = (n: number) => {\n            const result = n.toString(16);\n            return result.length == 1 ? `0${result}` : result;\n        }\n\n        return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`\n    }\n\n    get hexRgba(): string{\n\n        const hex = (n: number) => {\n            const result = n.toString(16);\n            return result.length == 1 ? `0${result}` : result;\n        }\n\n        return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(Math.round(this.a * 255))}`\n    }\n\n    get isTransparent(): boolean{\n        return (this.r === 0 &&\n            this.g ===  0 &&\n            this.b ===  0 &&\n            this.a === 0);\n    }\n\n}","/**\n * Keeps a stack for globally reacting to keys, like Escape and Enter.\n */\nimport {Callable} from \"./hui\";\n\nexport class\nFocusStackHandler{\n\n    private static idReminder = 1;\n\n    static dismiss = new FocusStackHandler('Escape');\n\n    static commit = new FocusStackHandler('Enter');\n\n    private stack: {id: number, call: Callable}[] = [];\n\n    private constructor(key: string){\n\n        window.addEventListener('keydown', e => {\n            if(e.key === key) {\n                if(this.stack.length > 0) {\n                    e.stopImmediatePropagation();\n                    this.popAndExecute();\n                }\n            }\n        });\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: Callable): number{\n\n        const id = FocusStackHandler.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    popAndExecute(){\n        const entry = this.stack.pop();\n\n        if(entry){\n            entry.call();\n            this.unregister(entry.id);\n        }\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n    }\n\n}","export type KeyCaptureEvent = (e: KeyboardEvent) => void;\n\nexport class KeyCaptureStackHandler{\n    private static idReminder = 1;\n\n    static instance = new KeyCaptureStackHandler();\n\n    private stack: {id: number, call: KeyCaptureEvent}[] = [];\n\n    private constructor(){\n        window.addEventListener('keydown', e => {\n            if(this.stack.length > 0) {\n                this.execute(e);\n            }\n        }, true);\n    }\n\n    isIdRegistered(id: number): boolean{\n        return this.stack.filter(m => m.id === id).length > 0;\n    }\n\n    register(call: KeyCaptureEvent): number{\n\n        const id = KeyCaptureStackHandler.idReminder++;\n\n        this.stack.push({id, call});\n\n        return id;\n\n    }\n\n    private execute(e: KeyboardEvent){\n        if(this.stack.length > 0) {\n            const entry = this.stack[this.stack.length - 1];\n            entry.call(e);\n        }\n    }\n\n    unregister(id: number){\n        this.stack = this.stack.filter(m => m.id != id);\n    }\n}","\nexport interface Point {\n    x: number;\n    y: number;\n}\n\nexport interface Rect{\n    left: number,\n    top: number,\n    width: number,\n    height: number,\n}\n\nexport interface Size {\n    width: number;\n    height: number;\n}\n\nexport type BasicCardinalPoint = 'n' | 'e' | 's' | 'w';\nexport type CardinalPoint = BasicCardinalPoint | 'ne' | 'se' | 'sw'| 'nw';\n\nexport function makePt(x: number, y: number): Point {\n    return {x, y};\n}\n\nexport function makeSz(width: number, height: number): Size{\n    return {width, height};\n}\n\nexport function slope(a: Point, b: Point): number{\n    return (b.y - a.y) / (b.x - a.x);\n}\n\nexport function midPoint(a: Point, b: Point): Point {\n    return {x: (a.x + b.x) / 2, y: (a.y + b.y) / 2};\n}\n\nexport function distance(a: Point, b: Point): number{\n    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n}\n\nexport function scaleToContain(container: Size, scalable: Size): Size{\n    const wOriented = makeSz(container.width, container.width * scalable.height / scalable.width);\n    const hOriented = makeSz(container.height * scalable.width / scalable.height, container.height);\n\n    if (wOriented.width <= container.width && wOriented.height <= container.height){\n        return wOriented;\n    }\n\n    return hOriented;\n}\n\nexport class Rectangle{\n\n    static get empty(): Rectangle{\n        return new Rectangle(0, 0, 0, 0);\n    }\n\n    static fromRect(r: Rect): Rectangle{\n        return new Rectangle(r.left, r.top, r.width, r.height);\n    }\n\n    static fromDOMRect(r: DOMRect): Rectangle{\n        return new Rectangle(r.left, r.top, r.width, r.height);\n    }\n\n    static fromLTRB(left: number, top: number, right: number, bottom: number): Rectangle{\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n\n    static fromPoint(p: Point): Rectangle{\n        return new Rectangle(p.x, p.y, 0, 0);\n    }\n\n    static fromSize(s: Size): Rectangle{\n        return new Rectangle(0, 0, s.width, s.height);\n    }\n\n    static unionOf(...rects: Rectangle[]): Rectangle | null{\n\n        if(rects.length == 0) {\n            return null;\n        }\n\n        let current = rects[0];\n\n        for(let i = 1; i < rects.length; i++){\n            current = current.union(rects[i]);\n        }\n\n        return current;\n    }\n\n    constructor(readonly left: number, readonly top:number, readonly width: number, readonly height: number){}\n\n    centerAt(point: Point): Rectangle{\n        return this.withLocation(makePt(\n            point.x - this.width / 2,\n            point.y - this.height / 2\n        ));\n    }\n\n    clone(): Rectangle{\n        return new Rectangle(this.left, this.top, this.width, this.height);\n    }\n\n    contains(p: Point): boolean{\n        return p.x >= this.left && p.x < this.right && p.y >= this.top && p.y < this.bottom;\n    }\n\n    deflate(horizontal: number, vertical: number): Rectangle{\n        return Rectangle.fromLTRB(this.left + horizontal, this.top + vertical, this.right - horizontal, this.bottom - vertical);\n    }\n\n    equals(r: Rectangle): boolean{\n        return r.left === this.left &&\n            r.top === this.top &&\n            r.width === this.width &&\n            r.height === this.height;\n    }\n\n    getCardinalPoint(c: CardinalPoint): Point{\n        switch (c) {\n            case 'n': return this.north;\n            case 'ne': return this.northEast;\n            case 'e': return this.east;\n            case 'se': return this.southEast;\n            case 's': return this.south;\n            case 'sw': return this.southWest;\n            case 'w': return this.west;\n            case 'nw': return this.northWest;\n        }\n    }\n\n    inflate(horizontal: number, vertical: number): Rectangle{\n        return Rectangle.fromLTRB(this.left - horizontal, this.top - vertical, this.right + horizontal, this.bottom + vertical);\n    }\n\n    intersects(rectangle: Rectangle): boolean{\n        let thisX = this.left;\n        let thisY = this.top;\n        let thisW = this.width;\n        let thisH = this.height;\n        let rectX = rectangle.left;\n        let rectY = rectangle.top;\n        let rectW = rectangle.width;\n        let rectH = rectangle.height;\n        return (rectX < thisX + thisW) && (thisX < (rectX + rectW)) && (rectY < thisY + thisH) && (thisY < rectY + rectH);\n    }\n\n    round(): Rectangle{\n        return new Rectangle(\n            Math.round(this.left),\n            Math.round(this.top),\n            Math.round(this.width),\n            Math.round(this.height),\n        );\n    }\n\n    toString(){\n        return `(Rect: ${this.left}, ${this.top}, ${this.width}, ${this.height})`;\n    }\n\n    union(r: Rectangle): Rectangle{\n        const x = [this.left, this.right, r.left, r.right];\n        const y = [this.top, this.bottom, r.top, r.bottom];\n        return Rectangle.fromLTRB(\n            Math.min(...x), Math.min(...y),\n            Math.max(...x), Math.max(...y)\n        );\n    }\n\n    withBottom(bottom: number){\n        return new Rectangle(this.left, bottom - this.height, this.width, this.height);\n    }\n\n    withHeight(height: number){\n        return new Rectangle(this.left, this.top, this.width, height);\n    }\n\n    withLeft(left: number){\n        return new Rectangle(left, this.top, this.width, this.height);\n    }\n\n    withLocation(location: Point): Rectangle{\n        return new Rectangle(location.x, location.y, this.width, this.height);\n    }\n\n    withRight(right: number){\n        return new Rectangle(right - this.width, this.top, this.width, this.height);\n    }\n\n    withSize(size: Size): Rectangle{\n        return new Rectangle(this.left, this.top, size.width, size.height);\n    }\n\n    withTop(top: number){\n        return new Rectangle(this.left, top, this.width, this.height);\n    }\n\n    withWidth(width: number){\n        return new Rectangle(this.left, this.top, width, this.height);\n    }\n\n    get center(): Point{\n        return {\n            x: this.left + this.width / 2,\n            y: this.top + this.height / 2\n        };\n    }\n\n    get isEmpty(): boolean{\n        return this.width == 0 && this.height == 0 && this.left == 0 && this.top == 0;\n    }\n\n    get right(): number{\n        return this.left + this.width;\n    }\n\n    get bottom(): number{\n        return this.top + this.height;\n    }\n\n    get location(): Point{\n        return makePt(this.left, this.top);\n    }\n\n    get tuple(): [number, number, number, number]{\n        return [this.left, this.top, this.width, this.height];\n    }\n\n    get northEast(): Point{\n        return {x: this.right, y: this.top};\n    }\n\n    get southEast(): Point{\n        return {x: this.right, y: this.bottom};\n    }\n\n    get southWest(): Point{\n        return {x: this.left, y: this.bottom};\n    }\n\n    get northWest(): Point{\n        return {x: this.left, y: this.top};\n    }\n\n    get east(): Point{\n        return makePt(this.right, this.center.y);\n    }\n\n    get north(): Point{\n        return makePt(this.center.x, this.top);\n    }\n\n    get south(): Point{\n        return makePt(this.center.x, this.bottom);\n    }\n\n    get west(): Point{\n        return makePt(this.left, this.center.y);\n    }\n\n    get size(): Size{\n        return {width: this.width, height: this.height};\n    }\n}","import * as React from \"react\";\nimport {ClickableProps} from \"./Clickable\";\nimport {Label} from \"./Label\";\nimport {Icon} from \"./Icon\";\nimport {KeyboardEvent, RefObject} from \"react\";\nimport {MenuOverlay} from \"../overlays/MenuOverlay\";\nimport {Callable} from \"../helpers/hui\";\nimport {FocusStackHandler} from \"../helpers/FocusStackHandler\";\nimport {ClickDismiss} from \"../helpers/ClickDismiss\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface ButtonProps extends ClickableProps{\n    children?: React.ReactNode;\n    onClick?: Callable;\n    split?: boolean;\n    face?: \"hover\" | \"always\" | \"never\";\n    classTag?: string;\n    disabled?: boolean;\n    selected?: boolean;\n}\n\nexport interface ButtonState {\n    dropDownVisible?: boolean;\n}\n\nexport class Button extends React.Component<ButtonProps, ButtonState>{\n\n    buttonRef: RefObject<HTMLDivElement>;\n\n    private escapeKeyDismissId = 0;\n    private clickDismissId = 0;\n\n    constructor(props: ButtonProps){\n        super(props);\n        this.buttonRef = React.createRef();\n        this.state = {};\n        this.activate = this.activate.bind(this);\n        this.showDropDown = this.showDropDown.bind(this);\n        this.hideDropDown = this.hideDropDown.bind(this);\n        this.keyDownHide = this.keyDownHide.bind(this);\n        this.keyDownShow = this.keyDownShow.bind(this);\n        this.keyDownActivate = this.keyDownActivate.bind(this);\n    }\n\n    activate(){\n        if(this.props.disabled !== true && this.props.onClick) {\n            this.props.onClick();\n        }\n    }\n\n    keyPass(e: KeyboardEvent<HTMLDivElement>, call: Callable){\n        if(e.key === 'Enter' || e.key === ' ') {\n            if(!this.props.disabled) {\n                e.stopPropagation();\n                e.preventDefault();\n                call();\n            }\n        }\n    }\n\n    keyDownHide(e: KeyboardEvent<HTMLDivElement>){\n        this.keyPass(e, () => this.hideDropDown());\n    }\n\n    keyDownShow(e: KeyboardEvent<HTMLDivElement>){\n        if(this.props.disabled) {\n            return;\n        }\n        this.keyPass(e, () => this.showDropDown());\n    }\n\n    keyDownActivate(e: KeyboardEvent<HTMLDivElement>){\n        this.keyPass(e, () => this.activate());\n    }\n\n    hideDropDown(){\n        this.setState({dropDownVisible: false});\n\n        // Unregister for ESC key\n        FocusStackHandler.dismiss.unregister(this.escapeKeyDismissId);\n\n        // Unregister from body click\n        ClickDismiss.mouseup.unregister(this.clickDismissId);\n    }\n\n    showDropDown(){\n        this.setState({dropDownVisible: true});\n\n        // Register for hiding when ESC key is pressed\n        this.escapeKeyDismissId = FocusStackHandler.dismiss.register(() => { this.hideDropDown(); });\n\n        // Register for hiding when body is clicked\n        this.clickDismissId = ClickDismiss.mouseup.register(() => this.hideDropDown());\n    }\n\n    render(){\n        const rect = Rectangle.fromDOMRect(this.buttonRef.current?.getBoundingClientRect() || new DOMRect());\n        const chevron = () => <Icon name={\"chevron-down\"} size={8}/>;\n        const label = () => <Label {...this.props} />;\n        const menu = () => (\n            <MenuOverlay\n                top={rect.top + rect.height}\n                left={rect.left}\n                refRect={rect}\n                onDismissSignal={this.hideDropDown}>\n                {this.props.children}\n            </MenuOverlay>\n        );\n\n        const tags = [\n                `face-${this.props.face || 'hover'}`,\n                 this.props.classTag,\n                 this.props.disabled ? 'disabled' : null,\n                 this.props.selected ? 'selected' : null,\n            ]\n            .filter(a => !!a)\n            .join(` `);\n\n        const tabProp = this.props.disabled ? {} : {tabIndex: 0};\n\n        if(this.props.children) {\n            if(this.props.split) {\n                if(this.state.dropDownVisible) {\n                    return (\n                        <div className={`ui-button-wrap split `}>\n                            <div {...tabProp}\n                                 ref={this.buttonRef}\n                                 className={`ui-clickable ui-button is-open ${tags}`}\n                                 onClick={this.activate}>\n                                {label()}\n                            </div>\n                            <div {...tabProp}\n                                 className={`ui-clickable ui-button split-part`}\n                                 onClick={this.showDropDown}\n                                 onKeyDown={this.keyDownShow}>\n                                {chevron()}\n                                {menu()}\n                            </div>\n                        </div>\n                    )\n                }else{\n                    return (\n                        <div className={`ui-button-wrap split ${tags}`}>\n                            <div {...tabProp}\n                                 ref={this.buttonRef}\n                                 className={\"ui-clickable ui-button\"}\n                                 onKeyDown={this.keyDownActivate}\n                                 onClick={this.activate}>\n                                {label()}\n                            </div>\n                            <div {...tabProp}\n                                 className={`ui-clickable ui-button split-part`}\n                                 onClick={this.showDropDown}\n                                 onKeyDown={this.keyDownShow}>\n                                {chevron()}\n                            </div>\n                        </div>\n                    )\n                }\n\n            }else if(this.state.dropDownVisible) {\n                return (\n                    <div className={`ui-button-wrap`}>\n                        <div {...tabProp}\n                             ref={this.buttonRef}\n                             className={`ui-clickable ui-button is-open ${tags}`}\n                             onKeyDown={this.keyDownHide}\n                             onClick={this.showDropDown}>\n                            {label()}\n                            {chevron()}\n                        </div>\n                        {menu()}\n                    </div>\n                )\n            }else{\n                return (\n                    <div className={`ui-button-wrap`}>\n                        <div {...tabProp}\n                             ref={this.buttonRef}\n                             className={`ui-clickable ui-button ${tags}`}\n                             onClick={this.showDropDown}\n                             onKeyDown={this.keyDownShow}>\n                            {label()}\n                            {chevron()}\n                        </div>\n                    </div>\n                )\n            }\n        }else{\n            return (\n                <div {...tabProp}\n                     ref={this.buttonRef}\n                     className={`ui-clickable ui-button ${tags}`}\n                     onClick={this.activate}\n                     onKeyDown={this.keyDownActivate}>\n                    {label()}\n                </div>\n            )\n        }\n    }\n}","import * as React from \"react\";\nimport {Label, LabelProps} from \"./Label\";\nimport {Callable} from \"../helpers/hui\";\n\nexport interface ClickableProps extends LabelProps{\n    isSelected?: boolean;\n    avoidHover?: boolean;\n    onClick?: Callable;\n}\n\ninterface ClickableState {\n    isHovered?: boolean;\n}\nexport class Clickable extends React.Component<ClickableProps, ClickableState>{\n\n    constructor(props: ClickableProps){\n        super(props);\n        this.state = {};\n        this.mouseEnter = this.mouseEnter.bind(this);\n        this.mouseLeave = this.mouseLeave.bind(this);\n    }\n\n    mouseEnter(){\n        if(this.props.avoidHover !== true) {\n            this.setState({isHovered: true});\n        }\n    }\n\n    mouseLeave(){\n        if(this.props.avoidHover !== true) {\n            this.setState({isHovered: false});\n        }\n    }\n\n    render(){\n        return (\n            <div\n                className={`ui-clickable ${this.props.isSelected || this.state.isHovered ? 'selected' : ''}`}\n                onMouseEnter={this.mouseEnter}\n                onMouseLeave={this.mouseLeave}\n                onClick={this.props.onClick}\n            >\n                <Label {...this.props} />\n            </div>\n        );\n    }\n}","import * as React from \"react\";\nimport {Color} from \"../helpers/Color\";\nimport {TextBox} from \"./TextBox\";\n\nexport interface ColorPickerProps{\n    colorPicked: (color: Color) => any;\n}\n\nexport interface ColorPickerState{\n    currentColor: Color;\n}\n\nexport class ColorPicker extends React.Component<ColorPickerProps, ColorPickerState>{\n\n    constructor(props: ColorPickerProps) {\n        super(props);\n\n        this.state = {\n            currentColor: Color.transparent\n        }\n\n    }\n\n    private handleChange(value: string){\n        if (Color.hexParsable(value)){\n\n            const color = Color.fromHex(value);\n\n            this.setState({currentColor: color});\n\n            if (this.props.colorPicked){\n                this.props.colorPicked(color);\n            }\n\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <TextBox change={value => this.handleChange(value)}/>\n                <div className={`swatch`} style={{background: this.state.currentColor.hexRgb}}/>\n            </div>\n        );\n    }\n\n}","import * as React from \"react\";\n\nexport type IconSize = 8 | 16 | 32;\nexport type IconName = \"empty\" | \"cross\" | \"floppy\" | \"file\" | \"folder\" | \"chevron-up\" | \"chevron-down\" | \"chevron-left\" | \"chevron-right\";\n\nexport interface IconProps{\n    classNames?: string;\n    name: IconName;\n    size?: IconSize;\n}\n\nexport const Icon = (props: IconProps) => {\n    return <div className={`ui-icon size-${props.size || 16} icon-${props.name} ${props.classNames || ''}`} />;\n};","import * as React from \"react\";\nimport {Icon, IconName, IconSize} from \"./Icon\";\n\nexport interface LabelProps{\n    text?: string;\n    icon?: IconName;\n    iconSize?: IconSize;\n    description?: string;\n}\n\nexport const Label = (props: LabelProps) => {\n\n    if(props.icon && !props.text) {\n        return <div className={\"ui-label\"}>\n            <Icon name={props.icon} size={props.iconSize}/>\n        </div>\n    }else if(!props.icon && !props.description) {\n        return <div className=\"ui-label\">{props.text}</div>;\n\n    }else if(!props.icon && props.description) {\n        return <div className=\"ui-label\">\n            <div className=\"text\">{props.text}</div>\n            <div className=\"desc\">{props.description}</div>\n        </div>;\n\n    }else if(props.icon){\n        if(props.description) {\n            return <div className=\"ui-label with-icon\">\n                <Icon name={props.icon} size={props.iconSize} />\n                <div className=\"text-side\">\n                    <div className=\"text\">{props.text}</div>\n                    <div className=\"desc\">{props.description}</div>\n                </div>\n            </div>\n        }else{\n            return <div className=\"ui-label with-icon\">\n                <Icon name={props.icon} size={props.iconSize} />\n                <div className=\"text\">{props.text}</div>\n            </div>\n        }\n    }else{\n        throw \"Undesired configuration\";\n    }\n};","import * as React from \"react\";\nimport {Label, LabelProps} from \"./Label\";\n\nexport interface LoaderProps extends LabelProps{\n    text: string;\n}\n\nexport class Loader extends React.Component<LoaderProps>{\n    render(){\n        return (\n            <div className={`ui-loader`}>\n                <Label {...this.props}/>\n            </div>\n        );\n    }\n}","import * as React from \"react\";\nimport {Label, LabelProps} from \"./Label\";\nimport {Icon} from \"./Icon\";\nimport {MenuOverlay} from \"../overlays/MenuOverlay\";\nimport {RefObject} from \"react\";\nimport {Callable} from \"../helpers/hui\";\nimport {ClickDismiss} from \"../helpers/ClickDismiss\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface MenuItemProps  extends LabelProps{\n    children?: React.ReactNode;\n    isOpen?: boolean;\n    isSelected?: boolean;\n    isActivated?: boolean;\n    onOpen?: Callable;\n    onClose?: Callable;\n    onActivate?: Callable;\n    onDismissSignal?: Callable;\n    onDismissSingleSignal?: Callable;\n    onSelectSignal?: Callable;\n    parent?: MenuOverlay;\n}\n\nexport interface MenuItemState {\n}\n\nexport class MenuItem extends React.Component<MenuItemProps, MenuItemState>{\n\n    ref: RefObject<HTMLDivElement>;\n\n    constructor(props: MenuItemProps){\n        super(props);\n        this.ref = React.createRef();\n        this.showOverlay = this.showOverlay.bind(this);\n        this.hideOverlay = this.hideOverlay.bind(this);\n        this.mouseActivate = this.mouseActivate.bind(this);\n        this.sendDismissSignal = this.sendDismissSignal.bind(this);\n        this.sendDismissSingleSignal = this.sendDismissSingleSignal.bind(this);\n        this.sendSelectSignal = this.sendSelectSignal.bind(this);\n    }\n\n    mouseActivate(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n        e.stopPropagation();\n\n        this.activate();\n    }\n\n    activate(){\n\n        if(this.props.onActivate) {\n            this.props.onActivate();\n        }\n\n        this.sendDismissSignal();\n\n    }\n\n    hideOverlay(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n\n        ClickDismiss.mouseup.preventNextEvent();\n        e.stopPropagation();\n\n        if(this.props.onClose) {\n            this.props.onClose();\n        }\n    }\n\n    showOverlay(e: React.MouseEvent<HTMLDivElement, MouseEvent>){\n\n        ClickDismiss.mouseup.preventNextEvent();\n\n        e.stopPropagation();\n\n        if(this.props.onOpen && this.ref && this.ref.current) {\n            this.props.onOpen();\n        }\n    }\n\n\n    render(){\n\n        const selectedClass = this.props.isSelected ? 'is-selected' : '';\n        const propsWithIcon = Object.assign({icon: \"empty\"}, this.props);\n\n        if(this.props.isActivated === true && React.Children.count(this.props.children) === 0) {\n            setTimeout(() => this.activate());\n        }\n\n        if(this.props.children) {\n\n            const rect = Rectangle.fromDOMRect(this.ref.current?.getBoundingClientRect() || new DOMRect());\n\n            if(this.props.isOpen) {\n                return (\n                    <div ref={this.ref} className={`ui-menuitem is-selected is-open`} onMouseDown={this.hideOverlay}>\n                        <Label {...propsWithIcon} />\n                        <Icon name={`chevron-right`} size={8} />\n                        <MenuOverlay\n                            left={rect.right} top={rect.top} refRect={rect} parentMenuItem={this}\n                            onDismissSingleSignal={this.sendDismissSingleSignal}\n                            onDismissSignal={this.sendDismissSignal}>\n                            {this.props.children}\n                        </MenuOverlay>\n                    </div>\n                )\n            }else{\n                return (\n                    <div ref={this.ref}\n                         className={`ui-menuitem ${selectedClass}`}\n                         onMouseEnter={this.sendSelectSignal}\n                         onMouseDown={this.showOverlay}>\n                        <Label {...propsWithIcon} />\n                        <Icon name={`chevron-right`} size={8} />\n                    </div>\n                )\n            }\n        }else{\n            return (\n                <div ref={this.ref}\n                     className={`ui-menuitem ${selectedClass}`}\n                     onMouseEnter={this.sendSelectSignal}\n                     onMouseDown={this.mouseActivate}>\n                    <Label {...propsWithIcon} />\n                </div>\n            )\n        }\n    }\n\n    sendDismissSignal(){\n        if(this.props.onDismissSignal) {\n            this.props.onDismissSignal();\n        }\n    }\n\n    sendDismissSingleSignal(){\n        if(this.props.onDismissSingleSignal) {\n            this.props.onDismissSingleSignal();\n        }\n    }\n\n    sendSelectSignal(){\n        if(this.props.onSelectSignal) {\n            this.props.onSelectSignal();\n        }\n    }\n}","import * as React from \"react\";\n\nexport interface SeparatorProps{\n\n}\n\nexport class Separator extends React.Component<SeparatorProps>{\n    render(){\n        return (\n            <div className={`ui-separator`}/>\n        );\n    }\n}","import * as React from \"react\";\nimport {ChangeEvent} from \"react\";\nimport {Button} from \"./Button\";\nimport {RefObject} from \"react\";\nimport {SuggestionsOverlay} from \"../overlays/SuggestionsOverlay\";\nimport {Separator} from \"./Separator\";\nimport {Loader} from \"./Loader\";\nimport {LabelProps} from \"./Label\";\nimport {Clickable} from \"./Clickable\";\nimport {Callable} from \"../helpers/hui\";\n\nexport type SuggestionLoader = (text: string) => Promise<Suggestion[]>;\n\nexport interface SuggestionsOptions {\n    getSuggestions: SuggestionLoader;\n    showLoader?: boolean;\n    charsToTrigger?: number;\n}\n\nexport interface Suggestion extends LabelProps{\n    key: string;\n    separator?: boolean;\n    onClick?: Callable;\n}\n\nexport interface TextBoxProps {\n    defaultValue?: string;\n    clearButton?: boolean | 'always';\n    change?: (text: string) => void;\n    placeholder?: string;\n    suggestions?: SuggestionLoader | SuggestionsOptions;\n    onSuggestionSelected?: (suggestion: Suggestion) => void;\n}\n\ninterface TextBoxState{\n    value: string;\n    focused?: boolean;\n    suggestions?: Suggestion[];\n    loadingSuggestions?: boolean;\n    selectedSuggestion?: number;\n}\n\nexport class TextBox extends React.Component<TextBoxProps, TextBoxState>{\n\n    wRef: RefObject<HTMLDivElement>;\n    tRef: RefObject<HTMLInputElement>;\n    triggeredWhileLoading = false;\n\n    constructor(props: TextBoxProps){\n        super(props);\n        this.tRef = React.createRef();\n        this.wRef = React.createRef();\n\n        this.state = {\n            value: props.defaultValue || '',\n            focused: false,\n        };\n\n        this.clear = this.clear.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    activateSuggestion(sug: Suggestion){\n\n        this.setState({\n            value: sug.text || '',\n            suggestions: undefined\n        });\n\n        if(this.props.onSuggestionSelected) {\n            this.props.onSuggestionSelected(sug);\n        }\n    }\n\n    clear(){\n        this.setState({value: ''});\n        if(this.tRef.current){\n            this.tRef.current.focus();\n        }\n    }\n\n    getSuggestionsOptions(): SuggestionsOptions | undefined{\n\n        if(!this.props.suggestions) {\n            return;\n        }\n\n        if(typeof this.props.suggestions === 'function') {\n            return {getSuggestions: this.props.suggestions as any}\n        }else{\n            return this.props.suggestions;\n        }\n    }\n\n    handleChange(event: ChangeEvent<HTMLInputElement>){\n\n        this.setState({\n            value: event.target.value\n        });\n\n        if(this.props.change) {\n            this.props.change(event.target.value);\n        }\n\n        // Load suggestions on next tick\n        setTimeout(() => this.loadSuggestions());\n    }\n\n    handleKeyDown(e: React.KeyboardEvent){\n\n        let stop = true;\n\n        if(e.key === 'ArrowUp') {\n            this.selectPreviousSuggestion();\n\n        }else if(e.key === 'ArrowDown') {\n            this.selectNextSuggestion()\n\n        }else if(e.key === 'Escape') {\n            this.setState({suggestions: undefined});\n\n        }else if(e.key === 'Enter'){\n            if(typeof this.state.selectedSuggestion === 'number' && this.state.suggestions) {\n                this.activateSuggestion(this.state.suggestions[this.state.selectedSuggestion]);\n            }\n        }else{\n            stop = false;\n        }\n\n        if(stop) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    }\n\n    async loadSuggestions(){\n\n        const opts = this.getSuggestionsOptions();\n\n        if(\n            !opts ||                                                    // No options\n            !opts.getSuggestions ||                                     // Options, but no suggestions loader\n            this.state.value.length < (opts.charsToTrigger || 3))       // Enough chars to start searching\n        {\n            this.triggeredWhileLoading = false;\n            this.setState({loadingSuggestions: false, suggestions: undefined, selectedSuggestion: undefined});\n            return;\n        }\n\n        if(this.state.loadingSuggestions) {                             // Already loading, ignore\n            this.triggeredWhileLoading = true;                          // Tag as triggeredWhileLoading\n            return;\n        }\n\n        this.setState({loadingSuggestions: true});\n\n        const pieces = await opts.getSuggestions(this.state.value);\n\n        setTimeout(() => {this.setState({suggestions: pieces, loadingSuggestions: false, selectedSuggestion: undefined});\n            if(this.triggeredWhileLoading) {\n                this.triggeredWhileLoading = false;\n                setTimeout(() => this.loadSuggestions());\n            }\n        });\n    }\n\n    render(){\n\n        const input = <input\n            ref={this.tRef}\n            placeholder={this.props.placeholder}\n            type={`text`}\n            value={this.state.value}\n            onChange={this.handleChange}\n            onKeyDown={this.handleKeyDown}\n        />;\n        const clearButton = this.props.clearButton || false;\n        const clearOn = clearButton === 'always' || (clearButton && !!this.state.value);\n        const clear = <Button\n            icon={clearOn ? `cross` : `empty`}\n            classTag={`clear`}\n            face={`never`}\n            iconSize={8}\n            onClick={this.clear}\n            disabled={!clearOn}\n        />;\n        let suggestionOpts = this.getSuggestionsOptions();\n        let suggestions = undefined;\n\n        if(\n            suggestionOpts &&                                                   // Has suggestions configured\n            (this.state.loadingSuggestions || this.state.suggestions) &&        // Is Loading or has suggestions\n            this.state.value.length >= (suggestionOpts.charsToTrigger || 3) &&  // Min chars reached\n            this.wRef.current                                                   // There is a reference element\n        ) {\n\n            const contents = this.state.suggestions?.map(\n                (sug, index) => {\n                    return sug.separator === true ?\n                        <Separator key={sug.key}/> :\n                        <Clickable\n                            {...sug}\n                            isSelected={this.state.selectedSuggestion === index}\n                            onClick={() => this.activateSuggestion(sug)}\n                        />\n                }\n            );\n            const loader = <Loader text={`Loading`}/>;\n\n            suggestions = (\n                <SuggestionsOverlay relativeElement={this.wRef.current}>\n                    {contents}\n                    {contents && this.state.loadingSuggestions ? <Separator/> : undefined}\n                    {this.state.loadingSuggestions ? loader : undefined}\n                </SuggestionsOverlay>\n            );\n        }\n\n        if(clearButton !== false) {\n            return (\n                <div ref={this.wRef} className={`ui-textbox`}>\n                    {input}\n                    {clear}\n                    {suggestions}\n                </div>\n            );\n        }else{\n            return (\n                <div ref={this.wRef} className={`ui-textbox`}>\n                    {input}\n                    {suggestions}\n                </div>\n            );\n        }\n    }\n\n    selectNextSuggestion(){\n        const suggestions = this.state.suggestions;\n\n        if(!suggestions) {\n            return;\n        }\n\n        const current = typeof this.state.selectedSuggestion === 'number' ? this.state.selectedSuggestion : -1;\n        let next = current + 1;\n\n        if( suggestions[next] && suggestions[next].separator ) {\n            next++;\n        }\n\n        if(next >= suggestions.length) {\n            next = suggestions.length - 1;\n        }\n\n        this.setState({selectedSuggestion: next});\n    }\n\n    selectPreviousSuggestion(){\n        const suggestions = this.state.suggestions;\n\n        if(!suggestions) {\n            return;\n        }\n\n        const current = typeof this.state.selectedSuggestion === 'number' ? this.state.selectedSuggestion : suggestions.length;\n        let prev = current - 1;\n\n        if( suggestions[prev] && suggestions[prev].separator) {\n            prev--;\n        }\n\n        if(prev < 0) {\n            prev = 0;\n        }\n\n        this.setState({selectedSuggestion: prev});\n\n    }\n}","import * as React from \"react\";\nimport {CSSProperties, ReactNode} from \"react\";\n\nconst DEFAULT_LENGTH = 300;\n\nexport interface DockViewProps {\n    classNames?: string;\n    sideClassNames?: string;\n    containerClassNames?: string;\n    side?: 'left' | 'right' | 'top' | 'bottom';\n    sideView?: ReactNode;\n    length?: number;\n}\n\nexport class DockView extends React.Component<DockViewProps>{\n\n    render(){\n\n        const side = this.props.side || 'left';\n        const len = this.props.length || DEFAULT_LENGTH;\n        let sideCss: CSSProperties = {};\n        let mainCss: CSSProperties = {};\n\n        switch (side) {\n            case \"left\":\n                sideCss.width = len + 'px';\n                mainCss.left = len + 'px';\n                break;\n            case \"right\":\n                sideCss.width = len + 'px';\n                mainCss.right = len + 'px';\n                break;\n            case \"top\":\n                sideCss.height = len + 'px';\n                mainCss.top = len + 'px';\n                break;\n            case \"bottom\":\n                sideCss.height = len + 'px';\n                mainCss.bottom = len + 'px';\n                break;\n        }\n\n        return (\n            <div className={`ui-dock-view side-${side} ${this.props.classNames}`}>\n                <div className={`dock-side ${this.props.sideClassNames || ''}`} style={sideCss}>{this.props.sideView}</div>\n                <div className={`main-side ${this.props.containerClassNames || ''}`} style={mainCss}>{this.props.children}</div>\n            </div>\n        );\n\n    }\n}","import * as React from \"react\";\nimport {ReactNode} from \"react\";\nimport {DockView, DockViewProps} from \"./DockView\";\n\nconst DEFAULT_TOOLBAR_SIZE = 40;\n\nexport interface ToolbarViewProps extends DockViewProps{\n    items?: ReactNode;\n    itemsCenter?: ReactNode;\n    itemsFar?: ReactNode;\n}\n\nexport class ToolbarView extends React.Component<ToolbarViewProps>{\n\n    render(){\n\n        const len = this.props.length || DEFAULT_TOOLBAR_SIZE;\n        const side = this.props.side || 'top';\n\n        return (\n            <DockView\n                {...this.props}\n                length={len}\n                classNames={`ui-toolbar-view ${this.props.classNames || ''}`}\n                side={side}\n                sideClassNames={`toolbar ${this.props.sideClassNames || ''}`}\n                sideView={<>\n                    <div className=\"items near\">{this.props.items}</div>\n                    <div className=\"items center\">{this.props.itemsCenter}</div>\n                    <div className=\"items far\">{this.props.itemsFar}</div>\n                </>}\n            >\n                {this.props.children}\n            </DockView>\n        );\n    }\n\n}","import * as React from \"react\";\nimport {OverlayProps} from \"./Overlay\";\nimport {MenuItem, MenuItemProps} from \"../items/MenuItem\";\nimport {RefObject} from \"react\";\nimport {Separator} from \"../items/Separator\";\nimport {Rectangle} from \"../helpers/Rectangle\";\nimport {Callable} from \"../helpers/hui\";\nimport {KeyCaptureStackHandler} from \"../helpers/KeyCaptureStackHandler\";\n\nexport interface MenuOverlayProps extends OverlayProps{\n    refRect: Rectangle;\n    onDismissSignal: Callable;\n    onDismissSingleSignal?: Callable;\n    parentMenuItem?: MenuItem;\n}\n\nexport interface MenuOverlayState{\n    selectedIndex?: number;\n    openIndex?: number;\n    activatedIndex?: number;\n}\n\nexport class MenuOverlay extends React.Component<MenuOverlayProps, MenuOverlayState>{\n\n    overlayRef: RefObject<HTMLDivElement> | undefined;\n\n    readonly keyCaptureId: number;\n    private childCount: number | undefined;\n    private separators: number[] = [];\n\n    constructor(props: MenuOverlayProps){\n        super(props);\n        this.overlayRef = React.createRef();\n        this.state = {};\n        this.setOpenItem = this.setOpenItem.bind(this);\n        const isActivationKey = (e: KeyboardEvent) => e.key === 'Enter' || e.key === ' ';\n        const cancelAndDo = (e: KeyboardEvent, f: Callable) => {\n            e.stopPropagation();\n            e.preventDefault();\n            f();\n        };\n\n        this.keyCaptureId = KeyCaptureStackHandler.instance.register(e => {\n            if(e.key == 'ArrowDown') {\n                cancelAndDo(e, this.selectNext.bind(this));\n\n            }else if(e.key === 'ArrowUp') {\n                cancelAndDo(e, this.selectPrev.bind(this));\n\n            }else if(e.key === 'ArrowRight' || isActivationKey(e)) {\n                cancelAndDo(e, this.openCurrentIndex.bind(this));\n\n                if(isActivationKey(e)) {\n                    this.setState({activatedIndex: this.state.selectedIndex});\n                }\n\n            }else if(e.key === 'ArrowLeft') {\n                if(\"undefined\" !== typeof this.props.parentMenuItem) {\n                    cancelAndDo(e, () => this.sendDismissSingleSignal());\n                }\n            }\n        });\n    }\n\n    closeOpenedIndex(){\n        if(\"undefined\" !== typeof this.state.openIndex) {\n            this.setState({openIndex: undefined});\n        }\n    }\n\n    componentWillUnmount(): void {\n        KeyCaptureStackHandler.instance.unregister(this.keyCaptureId);\n    }\n\n    selectNext(){\n\n        let current = -1;\n\n        if(\"number\" === typeof this.state.selectedIndex) {\n            current = this.state.selectedIndex;\n        }\n\n        let next = current + 1;\n\n        while(\"undefined\" !== typeof this.separators.find(i => i === next)) {\n            next++;\n        }\n\n        if(\"undefined\" !== typeof this.childCount && next >= this.childCount) {\n            next = 0;\n        }\n\n        this.setState({selectedIndex: next});\n    }\n\n    selectPrev(){\n\n        let current = -1;\n\n        if(\"number\" === typeof this.state.selectedIndex) {\n            current = this.state.selectedIndex;\n        }\n\n        let prev = current - 1;\n\n        while(\"undefined\" !== typeof this.separators.find(i => i === prev)) {\n            prev--;\n        }\n\n        if(prev < 0) {\n            if(\"undefined\" !== typeof this.childCount) {\n                prev = this.childCount - 1;\n            }else{\n                prev = 0;\n            }\n        }\n\n        this.setState({selectedIndex: prev});\n    }\n\n    openCurrentIndex(){\n        if(\"undefined\" !== typeof this.state.selectedIndex) {\n            this.setOpenItem(this.state.selectedIndex);\n        }\n    }\n\n    correctPosition(){\n        if(!(this.overlayRef && this.overlayRef.current)) {\n            return;\n        }\n\n        const rect = Rectangle.fromDOMRect(this.overlayRef.current.getBoundingClientRect());\n        const view = {width: window.innerWidth, height: window.innerHeight};\n        const refRect = this.props.refRect;\n        let newRectangle = rect.clone();\n\n        if(rect.right > view.width) {\n            newRectangle = newRectangle.withRight(refRect.right);\n        }\n\n        if(rect.bottom > view.height) {\n            newRectangle = newRectangle.withBottom(view.height);\n        }\n\n        if(!newRectangle.equals(rect)) {\n            this.overlayRef.current.style.left = newRectangle.left + 'px';\n            this.overlayRef.current.style.top  = newRectangle.top  + 'px';\n        }\n    }\n\n    setNoOpenItem(){\n        this.setState({selectedIndex: undefined});\n    }\n\n    setOpenItem(index: number){\n        this.setState({selectedIndex: index, openIndex: index});\n    }\n\n    setSelectedItem(index: number){\n        this.setState({selectedIndex: index});\n    }\n\n    render(){\n        const st = {\n            top: this.props.top + 'px',\n            left: this.props.left + 'px',\n            width: `auto`,\n            height: `auto`,\n        };\n\n        if(\"number\" === typeof this.props.height) {\n            st.height = this.props.height + 'px';\n        }\n\n        if(\"number\" === typeof this.props.width) {\n            st.width = this.props.width + 'px';\n        }\n\n        setTimeout(() => {\n            this.correctPosition();\n        });\n\n        this.childCount = React.Children.count(this.props.children);\n\n        this.separators = []; // Reset to collect on .map bellow\n\n        return <div ref={this.overlayRef} className={`ui-overlay ui-menu-overlay`} style={st}>\n            {React.Children.map(this.props.children, (menuItem: React.ReactElement<MenuItemProps>, index) => {\n                if(menuItem.type === Separator) {\n                    this.separators.push(index);\n                }\n                return React.cloneElement(menuItem, {\n                    onOpen: () => this.setOpenItem(index),\n                    onClose: () => this.setNoOpenItem(),\n                    onDismissSignal: () => this.sendDismissSignal(),\n                    onDismissSingleSignal: () => this.closeOpenedIndex(),\n                    onSelectSignal: () => this.setSelectedItem(index),\n                    isSelected: index === this.state.selectedIndex,\n                    isOpen: index === this.state.openIndex,\n                    isActivated: index === this.state.activatedIndex,\n                    parent: this,\n                });\n            })}\n        </div>;\n    }\n\n    sendDismissSignal(){\n        if(this.props.onDismissSignal) {\n            this.props.onDismissSignal();\n        }\n    }\n\n    sendDismissSingleSignal(){\n        if(this.props.onDismissSingleSignal) {\n            this.props.onDismissSingleSignal();\n        }\n    }\n}","import * as React from \"react\";\nimport {ReactNode} from \"react\";\nimport {ClickableProps} from \"../items/Clickable\";\nimport {Rectangle} from \"../helpers/Rectangle\";\n\nexport interface SuggestionsOverlayProps {\n    relativeElement: HTMLElement;\n    children?: ReactNode;\n}\n\ninterface SuggestionsOverlayState{\n\n}\n\nexport class SuggestionsOverlay extends React.Component<SuggestionsOverlayProps, SuggestionsOverlayState>{\n\n    constructor(props: SuggestionsOverlayProps){\n        super(props);\n\n        this.state = {};\n    }\n\n    render(){\n        const rect = Rectangle.fromDOMRect(this.props.relativeElement.getBoundingClientRect());\n\n        const st = {\n            top: rect.bottom + 'px',\n            left: rect.left + 'px',\n            width: `auto`,\n            height: `auto`,\n        };\n\n        return (\n            <div className={`ui-overlay ui-suggestions-overlay`} style={st}>\n                {this.props.children}\n            </div>\n        );\n    }\n}","import './hui/css/styles.css';\nimport './hui/css/theme.css';\nimport './hui/css/index.scss';\nimport './index.scss';\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport {App} from \"./components/App\";\n\nReactDOM.render(\n    <App />,\n    document.getElementById(`root`)\n);","\ninterface EditorTransaction<T>{\n    documentState: T;\n}\n\nexport class NoTransactionError extends Error{}\nexport class TransactionInProgressError extends Error{}\nexport class UnsavedChangesError extends Error{}\n\nexport class Editor<T>{\n\n    private _currentTransaction: EditorTransaction<T> | null = null;\n    private _document: T;\n    private _hasChanges: boolean = false;\n\n    private readonly undoStack: EditorTransaction<T>[] = [];\n    private readonly redoStack: EditorTransaction<T>[] = [];\n\n    public documentChanged: (() => void) | null = null;\n    public documentSubmitted: (() => void) | null = null;\n\n    constructor(document: T) {\n        this._document = document;\n    }\n\n    redo(): boolean{\n\n        if (this.redoStack.length == 0){\n            return false;\n        }\n\n        const top = this.redoStack.pop();\n\n        if (top){\n            this.undoStack.push({documentState: this.document!});\n            this._document = top.documentState;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n        }\n\n        return true;\n\n    }\n\n    undo(): boolean{\n\n        if (this.undoStack.length == 0){\n            return false;\n        }\n\n        const top = this.undoStack.pop();\n\n        if (top){\n            this.redoStack.push({documentState: this.document!});\n            this._document = top.documentState;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n        }\n\n        return true;\n    }\n\n    begin(){\n\n        if (this._currentTransaction){\n            throw new TransactionInProgressError();\n        }else{\n            this._currentTransaction = {documentState: this._document};\n        }\n    }\n\n    setDocument(document: T){\n        if (this._currentTransaction){\n            this._document = document;\n\n            if (this.documentChanged){\n                this.documentChanged();\n            }\n\n        }else{\n            throw new NoTransactionError();\n        }\n\n    }\n\n    commit(){\n\n        if (!this._currentTransaction){\n            throw new NoTransactionError();\n        }\n\n        // Push to undo stack\n        this.undoStack.push(this._currentTransaction);\n\n        // Clear transaction\n        this._currentTransaction = null;\n\n        // Empty redo stack\n        while(this.redoStack.length > 0) {this.redoStack.pop()}\n\n        // We have changes\n        this._hasChanges = true;\n\n        if (this.documentSubmitted){\n            this.documentSubmitted();\n        }\n    }\n\n    rollback(){\n\n        if (this._currentTransaction){\n            this._document = this._currentTransaction.documentState;\n            this._currentTransaction = null;\n\n            if (this.documentSubmitted){\n                this.documentSubmitted();\n            }\n\n        }else{\n            throw new NoTransactionError();\n        }\n\n    }\n\n    clearChanges(){\n        this._hasChanges = false;\n    }\n\n    get currentTransaction(): EditorTransaction<T> | null{\n        return this._currentTransaction;\n    }\n\n    get document(): T{\n        return this._document;\n    }\n\n    get hasChanges(): boolean{\n        return this._hasChanges;\n    }\n\n    get redoCount(): number{\n        return this.redoStack.length;\n    }\n\n    get redoPeek(): T | null{\n        if (this.redoStack.length > 0){\n            return this.redoStack[this.redoStack.length - 1].documentState;\n        }\n        return null;\n    }\n\n    get undoCount(): number{\n        return this.undoStack.length;\n    }\n\n    get undoPeek(): T | null{\n        if (this.undoStack.length > 0){\n            return this.undoStack[this.undoStack.length - 1].documentState;\n        }\n        return null;\n    }\n\n}","import {\n    CanvasViewController,\n    KeyEvent,\n    KeyEventResult,\n    PointingEvent,\n    PointingEventResult\n} from \"../components/CanvasView\";\nimport {IconDocument, IconEditor, IconEditorTool} from \"./IconEditor\";\nimport {PencilTool} from \"./tools/PencilTool\";\nimport {IconService} from \"./IconService\";\nimport {IconDocumentRenderer} from \"./IconDocumentRenderer\";\nimport {makePt, Point, Rectangle, Size} from \"../hui/helpers/Rectangle\";\n\nexport class IconCanvasController implements CanvasViewController{\n\n    showBackground = false;\n    showGrid = false;\n\n    readonly editor: IconEditor;\n    private _tool: IconEditorTool | null = new PencilTool(this);\n    private previewBounds: Rectangle = Rectangle.empty;\n    private previewPixelSize: number = 0;\n\n    constructor(document?: IconDocument) {\n\n        if (document){\n            this.editor = new IconEditor(document);\n        }else{\n            this.editor = new IconEditor({\n                icon: IconService.newIcon(16, 16)\n            });\n        }\n\n        (window as any)._editor = this.editor;\n    }\n\n    pixelToData(pixel: Point): number{\n        const icon = this.editor.document.icon;\n        return icon.width * 4 * pixel.y + pixel.x * 4;\n    }\n\n    pointToPixel(p: Point): Point | null{\n        if (!this.previewBounds.contains(p)){\n            return null;\n        }\n\n        const left = p.x - this.previewBounds.left;\n        const top = p.y - this.previewBounds.top;\n\n        return makePt(\n            Math.floor(left / this.previewPixelSize),\n            Math.floor(top / this.previewPixelSize)\n        );\n    }\n\n    pointToData(p: Point): number{\n\n        // Deflation prevents round-errors\n        if (!this.previewBounds.deflate(1, 1).contains(p)){\n            return - 1;\n        }\n\n        const pixel = this.pointToPixel(p);\n\n        if (pixel){\n            return this.pixelToData(pixel);\n        }\n\n        return -1;\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n        if (this.tool?.pointingGestureStart){\n            return this.tool.pointingGestureStart(e);\n        }\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n        if (this.tool?.pointingGestureMove){\n            return this.tool.pointingGestureMove(e);\n        }\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n        if (this.tool?.pointingGestureEnd){\n            return this.tool.pointingGestureEnd(e);\n        }\n    }\n\n    keyDown(e: KeyEvent): KeyEventResult | void{\n        if (this.tool?.keyDown){\n            return this.tool.keyDown(e);\n        }\n    }\n\n    keyUp(e: KeyEvent): KeyEventResult | void{\n        if (this.tool?.keyUp){\n            return this.tool.keyUp(e);\n        }\n    }\n\n    render(context: CanvasRenderingContext2D, size: Size){\n\n        const cvBounds = new Rectangle(0, 0, size.width, size.height);\n        const previewArea = cvBounds.deflate(10, 10);\n\n        if (this.editor.document){\n\n            const icon = this.editor.document.icon;\n            const pixelLength = this.previewPixelSize = Math.min(previewArea.size.width, previewArea.size.height) / Math.min(icon.width, icon.height);\n\n            this.previewBounds = new Rectangle(\n                0, 0,\n                icon.width * pixelLength,\n                icon.height *  pixelLength)\n                .centerAt(cvBounds.center);\n\n            const renderer = new IconDocumentRenderer(\n                this.editor.document,\n                context,\n                this.previewBounds,\n                this.showBackground,\n                this.showGrid,\n                );\n\n            renderer.render();\n        }\n    }\n\n    get tool(): IconEditorTool | null{\n        return this._tool;\n    }\n\n    set tool(value: IconEditorTool | null){\n\n        if(value === this._tool){\n            return;\n        }\n\n        if (this._tool?.deactivate){\n            this._tool.deactivate();\n        }\n\n        this._tool = value;\n\n        if (this._tool?.activate){\n            this._tool.activate();\n        }\n    }\n}","import {IconDocument} from \"./IconEditor\";\nimport {makeSz, Rectangle, Size} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {Icon} from \"../hui/items/Icon\";\n\nconst GRID_OUT = Color.fromHex(`#d0d0d0`);\nconst GRID_INT = Color.fromHex(`#e0e0e0`);\nconst CHECKER_EVEN = Color.transparent;\nconst CHECKER_ODD = Color.fromHex(`#f0f0f0`);\nconst CHECKER_SIZE = 20;\n\nconst CLOCK_MOD = 4;\nconst SAFE_CLEAR = 10;\n\nexport class IconDocumentRenderer {\n\n    private static clock = 0;\n    private static clockReminder = 0;\n    private static checkerCanvas: HTMLCanvasElement | null = null\n\n    static getPattern(context: CanvasRenderingContext2D): CanvasPattern | null{\n\n        if(!IconDocumentRenderer.checkerCanvas){\n            const canvas: HTMLCanvasElement = IconDocumentRenderer.checkerCanvas = document.createElement('canvas');\n            canvas.width = canvas.height = CHECKER_SIZE;\n\n            const localCx = canvas.getContext('2d');\n            const size = CHECKER_SIZE / 2;\n\n            if(!localCx){\n                return null;\n            }\n\n            if (!CHECKER_EVEN.isTransparent){\n                localCx.fillStyle = CHECKER_EVEN.cssRgba;\n                localCx.fillRect(0,0, size, size);\n                localCx.fillRect(size, size, size, size);\n            }\n\n            if (!CHECKER_ODD.isTransparent){\n                localCx.fillStyle = CHECKER_ODD.cssRgba;\n                localCx.fillRect(size, 0, size, size);\n                localCx.fillRect(0, size, size, size);\n            }\n        }\n\n        const canvas = IconDocumentRenderer.checkerCanvas;\n\n        return context.createPattern(canvas, 'repeat');\n\n    }\n\n    constructor(\n        readonly document: IconDocument,\n        readonly context: CanvasRenderingContext2D,\n        readonly bounds: Rectangle,\n        readonly drawBackground: boolean,\n        readonly drawGrid: boolean,\n    ) {}\n\n    private rectStroke(r: Rectangle, color: Color){\n        this.context.strokeStyle = color.cssRgba;\n        this.context.strokeRect(...r.tuple);\n    }\n\n    private rectFill(r: Rectangle, color: Color){\n        this.context.fillStyle = color.cssRgba;\n        this.context.fillRect(...r.tuple);\n    }\n\n    private renderPixels(pixelSize: Size){\n\n        const data = this.document.icon.data;\n        let x = this.bounds.left;\n        let y = this.bounds.top;\n        let drawn = 0;\n\n\n        for(let i = 0; i < data.length; i += 4){\n            const color = new Color(data[i], data[i + 1], data[i + 2], data[i + 3] / 255);\n            const r = new Rectangle(x, y, pixelSize.width, pixelSize.height);\n            this.rectFill(r, color);\n\n            drawn++;\n            x += pixelSize.width;\n\n            if ((drawn % this.document.icon.width) === 0){\n                y += pixelSize.height;\n                x = this.bounds.left;\n            }\n\n        }\n\n    }\n\n    private renderGrid(pixelSize: Size){\n\n        const ctx = this.context;\n        const icon = this.document.icon;\n        const bounds = this.bounds;\n\n        ctx.beginPath();\n\n        let x = this.bounds.left;\n        let y = this.bounds.top;\n\n        for(let i = 0; i < icon.width; i++){\n            ctx.moveTo(x, bounds.top);\n            ctx.lineTo(x, bounds.bottom);\n            x += pixelSize.width;\n        }\n\n        for(let i = 0; i < icon.height; i++){\n            ctx.moveTo(bounds.left, y);\n            ctx.lineTo(bounds.right, y);\n            y += pixelSize.height;\n        }\n\n        ctx.strokeStyle = GRID_INT.cssRgba;\n        ctx.stroke();\n\n    }\n\n    private renderFrame(){\n        this.rectStroke(this.bounds, GRID_OUT);\n    }\n\n    private renderChecker(){\n        const pattern = IconDocumentRenderer.getPattern(this.context);\n\n        if(!pattern){\n            return;\n        }\n\n        this.context.fillStyle = pattern;\n        this.context.fillRect(...this.bounds.tuple);\n\n    }\n\n    private renderSelection(pixelSize: Size){\n\n        if (!this.document.selectionRegion){\n            return;\n        }\n\n        const selection = this.document.selectionRegion;\n\n        const selBounds = new Rectangle(\n            this.bounds.left + selection.left * pixelSize.width,\n            this.bounds.top + selection.top * pixelSize.height,\n            selection.width * pixelSize.width,\n            selection.height * pixelSize.height\n        ).round();\n\n        IconDocumentRenderer.clock++;\n\n        if(IconDocumentRenderer.clock % CLOCK_MOD === 0){\n            IconDocumentRenderer.clockReminder++;\n\n            if (IconDocumentRenderer.clockReminder === 9){\n                IconDocumentRenderer.clockReminder = 0;\n            }\n        }\n\n        // this.context.strokeStyle = '#000';\n        // this.context.strokeRect(...selBounds.tuple);\n\n\n\n        const fives = new Array(Math.round(selBounds.width / 5)).fill(5);\n\n        const segmentedRect = (r: Rectangle) => {\n            // Drawing the rect like this prevents weird behavior\n            // of the segmented pattern\n            this.context.beginPath();\n            this.context.moveTo(r.left, r.top);\n            this.context.lineTo(r.right, r.top);\n            this.context.moveTo(r.right, r.bottom);\n            this.context.lineTo(r.left, r.bottom);\n            this.context.stroke();\n\n            this.context.beginPath();\n            this.context.moveTo(r.right, r.top);\n            this.context.lineTo(r.right, r.bottom);\n            this.context.moveTo(r.left, r.bottom);\n            this.context.lineTo(r.left, r.top);\n            this.context.stroke();\n        }\n\n        // =00000====\n        // ==00000===\n        // ===00000==\n        // ====00000=\n        // =====00000\n\n        const lineWidthBuffer = this.context.lineWidth;\n        this.context.lineWidth = 1.5;\n\n        switch(IconDocumentRenderer.clockReminder){\n            case 0: this.context.setLineDash([1, ...fives]); break;\n            case 1: this.context.setLineDash([2, ...fives]); break;\n            case 2: this.context.setLineDash([3, ...fives]); break;\n            case 3: this.context.setLineDash([4, ...fives]); break;\n            case 4: this.context.setLineDash([5, 5]); break;\n            case 5: this.context.setLineDash([0, 1,...fives]); break;\n            case 6: this.context.setLineDash([0,2,...fives]); break;\n            case 7: this.context.setLineDash([0,3,...fives]); break;\n            case 8: this.context.setLineDash([0,4,...fives]); break;\n        }\n        this.context.strokeStyle = '#fff';\n\n        segmentedRect(selBounds);\n\n\n        switch(IconDocumentRenderer.clockReminder){\n            case 0: this.context.setLineDash([0, 1, ...fives]); break;\n            case 1: this.context.setLineDash([0, 2, ...fives]); break;\n            case 2: this.context.setLineDash([0, 3, ...fives]); break;\n            case 3: this.context.setLineDash([0, 4, ...fives]); break;\n            case 4: this.context.setLineDash([0, 5, ...fives]); break;\n            case 5: this.context.setLineDash([1,...fives]); break;\n            case 6: this.context.setLineDash([2,...fives]); break;\n            case 7: this.context.setLineDash([3,...fives]); break;\n            case 8: this.context.setLineDash([4,...fives]); break;\n        }\n        this.context.strokeStyle = '#000';\n        segmentedRect(selBounds);\n\n\n        this.context.setLineDash([]);\n        this.context.lineWidth = lineWidthBuffer;\n\n    }\n\n    render(){\n        const pixelSize = makeSz(\n            this.bounds.width / this.document.icon.width,\n            this.bounds.height / this.document.icon.height);\n\n        this.context.clearRect(...this.bounds.inflate(SAFE_CLEAR, SAFE_CLEAR).tuple);\n\n        if (this.drawBackground){\n            this.renderChecker();\n        }\n\n        this.renderPixels(pixelSize);\n\n        if (this.drawGrid){\n            this.renderGrid(pixelSize);\n        }\n\n        this.renderFrame();\n\n        if (this.document.selectionRegion){\n            this.renderSelection(pixelSize);\n        }\n\n    }\n\n}","import {Icon} from \"./Icon\";\nimport {Editor} from \"./Editor\";\nimport {CanvasSensor} from \"../components/CanvasView\";\nimport {Rectangle} from \"../hui/helpers/Rectangle\";\nimport {IconService} from \"./IconService\";\n\nexport interface IconDocument{\n    icon: Icon;\n    selectionRegion?: Rectangle;\n    selectionBuffer?: Icon;\n    selectionSprite?: Icon;\n}\n\nexport interface IconEditorTool extends CanvasSensor{\n    activate?: () => void;\n    deactivate?: () => void;\n}\n\nexport class IconEditor extends Editor<IconDocument>{\n\n    cloneDocument(): IconDocument{\n\n        const doc = this.document;\n\n        const newDocument = {\n            ...doc,\n            icon: IconService.clone(this.document.icon),\n        };\n\n        return newDocument;\n\n    }\n\n    getImageCanvas(): HTMLCanvasElement{\n\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const icon = this.document.icon;\n        canvas.width = this.document.icon.width;\n        canvas.height = this.document.icon.height;\n\n        const ctx = canvas.getContext('2d');\n\n        if (ctx){\n            ctx.putImageData(new ImageData(icon.data, icon.width, icon.height), 0, 0);\n        }\n\n        return canvas;\n\n    }\n\n}","import {Icon, IconColorModel} from \"./Icon\";\nimport {makePt, makeSz, Point, Rectangle, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\nimport {Color} from \"../hui/helpers/Color\";\nimport {InvalidImageError, InvalidRegionError, MemoryError} from \"./errors\";\nimport {ImageService} from \"./ImageService\";\n\nexport class IconService{\n\n    static clone(icon: Icon): Icon{\n        return {...icon, data: new Uint8ClampedArray(icon.data)};\n    }\n\n    static fromCanvas(canvas: HTMLCanvasElement, cx: CanvasRenderingContext2D | null = null): Icon{\n\n        if (!cx){\n            cx = canvas.getContext('2d');\n        }\n\n        if (!cx) {\n            throw new MemoryError();\n        }\n\n        const model: IconColorModel = 'rgba';\n        const width = canvas.width;\n        const height = canvas.height;\n        const imageData = cx.getImageData(0,0,width, height);\n        const data = imageData.data;\n\n        return {width, height, model, data};\n    }\n\n    static fromIcon(icon: Icon, region: Rectangle): Icon{\n\n        const data = new Uint8ClampedArray(region.width * region.height * 4);\n\n        this.region32(icon, region, (index, current) => {\n            data[current] = icon.data[index];\n            data[current + 1] = icon.data[index + 1];\n            data[current + 2] = icon.data[index + 2];\n            data[current + 3] = icon.data[index + 3];\n        });\n\n        return {\n            width: region.width,\n            height: region.height,\n            data,\n            model: `rgba`\n        }\n    }\n\n    static fromImage(image: HTMLImageElement, newSize: Size): Icon{\n\n        const model: IconColorModel = 'rgba';\n        const width = newSize.width;\n        const height = newSize.height;\n        const data = ImageService.resize(image, newSize);\n\n        return {width, height, model, data};\n\n    }\n\n    static async fromFile(file: File, contain?: Size): Promise<Icon>{\n\n        const image = await ImageService.fromFile(file);\n        let width = image.width;\n        let height = image.height;\n\n        if (contain){\n            const contained = scaleToContain(contain, makeSz(width, height));\n            width = Math.round(contained.width);\n            height = Math.round(contained.height);\n        }\n\n        return this.fromImage(image, makeSz(width, height));\n\n    }\n\n    static newIcon(width: number, height: number, model: IconColorModel = 'rgba'): Icon{\n        const icon = {\n            width, height, model, data: new Uint8ClampedArray(width * height * 4)\n        };\n\n        return icon;\n    }\n\n    static newIconWithBg(width: number, height: number, color: Color): Icon{\n        const model: IconColorModel = 'rgba';\n        const icon = {\n            width, height, model, data: new Uint8ClampedArray(width * height * 4)\n        };\n\n        for (let i = 0; i < icon.data.length; i += 4){\n            icon.data[i] = color.r;\n            icon.data[i + 1] = color.g;\n            icon.data[i + 2] = color.b;\n            icon.data[i + 3] = color.a * 255;\n        }\n\n        return icon;\n    }\n\n    static pixelToData(pixel: Point, icon: Icon): number{\n        return icon.width * 4 * pixel.y + pixel.x * 4;\n    }\n\n    static region32(icon: Icon, region: Rectangle, onPixel: (regionIndex: number, iconIndex: number) => void){\n        let current = 0;\n        for(let y = region.top; y < region.bottom; y++){\n            for(let x = region.left; x < region.right; x++){\n                const index = IconService.pixelToData(makePt(x,y), icon);\n                onPixel(index, current);\n                current += 4;\n            }\n        }\n    }\n\n    static blend(base: Icon, sprite: Icon, region: Rectangle, spriteOffset? : Point): Icon {\n\n        if (region.width > sprite.width || region.height > sprite.height){\n            throw new InvalidRegionError();\n        }\n\n        if (!spriteOffset){\n            spriteOffset = makePt(0, 0)\n        }\n\n        const buffer = this.clone(base);\n        const sourceOver = (s: number, d: number, sA: number) => d + s * (255 - sA);\n        const blend = sourceOver;\n\n        for (let y = 0; y < region.height; y++){\n            for(let x = 0; x < region.width; x++){\n                const baseIndex = this.pixelToData(makePt(region.left + x, region.top + y), base);\n                const spriteIndex = this.pixelToData(makePt(x + spriteOffset.x, y + spriteOffset.y), sprite);\n                const baseR = buffer.data[baseIndex];\n                const baseG = buffer.data[baseIndex + 1];\n                const baseB = buffer.data[baseIndex + 2];\n                const baseA = buffer.data[baseIndex + 3];\n                const spR = sprite.data[spriteIndex];\n                const spG = sprite.data[spriteIndex + 1];\n                const spB = sprite.data[spriteIndex + 2];\n                const spA = sprite.data[spriteIndex + 3];\n\n                buffer.data[baseIndex] = blend(baseR, spR, spA);\n                buffer.data[baseIndex + 1] = blend(baseG, spG, spA);\n                buffer.data[baseIndex + 2] = blend(baseB, spB, spA);\n                buffer.data[baseIndex + 3] = Math.max(baseA, spA);\n            }\n        }\n\n        return buffer;\n    }\n}","import {FileError, InvalidImageError, MemoryError} from \"./errors\";\nimport {makeSz, scaleToContain, Size} from \"../hui/helpers/Rectangle\";\n\nconst REDUCE_MARGIN = 256;\n\nexport class ImageService{\n\n    static fromFile(file: File): Promise<HTMLImageElement>{\n        return new Promise<HTMLImageElement>((resolve, reject) => {\n\n            const reader = new FileReader();\n\n            reader.addEventListener('load', readEvent => {\n\n                if (readEvent.target){\n                    const img = new Image();\n\n                    img.addEventListener('load', () => resolve(img));\n                    img.addEventListener('error', () => reject(new InvalidImageError()));\n\n                    img.src = readEvent.target.result as string;\n                }else{\n                    reject(new MemoryError());\n                }\n\n            });\n\n            reader.addEventListener('error', () => reject(new FileError()));\n\n            reader.readAsDataURL(file);\n\n        });\n\n    }\n\n    static resize(image: HTMLImageElement, size: Size): Uint8ClampedArray{\n\n        const mustReduce = image.width > REDUCE_MARGIN || image.height > REDUCE_MARGIN;\n        const reducedSize = mustReduce ? scaleToContain(makeSz(REDUCE_MARGIN, REDUCE_MARGIN), size) : size;\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        const cx = canvas.getContext('2d');\n\n        if (!cx){\n            throw new MemoryError();\n        }\n\n        canvas.width = reducedSize.width;\n        canvas.height = reducedSize.height;\n        cx.drawImage(image, 0, 0, reducedSize.width, reducedSize.height);\n\n        const imageData = cx.getImageData(0,0, reducedSize.width, reducedSize.height);\n\n        if (size.width < REDUCE_MARGIN || size.height < REDUCE_MARGIN){\n            return this.resample(imageData, size);\n        }else{\n            return imageData.data;\n        }\n\n    }\n\n    static resample(image: ImageData, size: Size): Uint8ClampedArray{\n        const srcW = image.width;\n        const srcH = image.height;\n        const destW = Math.round(size.width);\n        const destH = Math.round(size.height);\n        let data = image.data;\n        let data2 = new Uint8ClampedArray(size.width * size.height * 4);\n        let ratio_w = srcW / destW;\n        let ratio_h = srcH / destH;\n        let ratio_w_half = Math.ceil(ratio_w/2);\n        let ratio_h_half = Math.ceil(ratio_h/2);\n\n        for(let j = 0; j < destH; j++){\n            for(let i = 0; i < destW; i++){\n                let x2 = (i + j*destW) * 4;\n                let weight = 0;\n                let weights = 0;\n                let weights_alpha = 0;\n                let gx_r = 0, gx_g = 0, gx_b = 0, gx_a = 0;\n                let center_y = (j + 0.5) * ratio_h;\n                for(let yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++){\n                    let dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;\n                    let center_x = (i + 0.5) * ratio_w;\n                    let w0 = dy*dy; //pre-calc part of w\n                    for(let xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++){\n                        let dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;\n                        let w = Math.sqrt(w0 + dx*dx);\n                        if(w >= -1 && w <= 1){\n                            //hermite filter\n                            weight = 2 * w*w*w - 3*w*w + 1;\n                            if(weight > 0){\n                                dx = 4*(xx + yy*srcW);\n                                //alpha\n                                gx_a += weight * data[dx + 3];\n                                weights_alpha += weight;\n                                //colors\n                                if(data[dx + 3] < 255)\n                                    weight = weight * data[dx + 3] / 250;\n                                gx_r += weight * data[dx];\n                                gx_g += weight * data[dx + 1];\n                                gx_b += weight * data[dx + 2];\n                                weights += weight;\n                            }\n                        }\n                    }\n                }\n                data2[x2]     = gx_r / weights;\n                data2[x2 + 1] = gx_g / weights;\n                data2[x2 + 2] = gx_b / weights;\n                data2[x2 + 3] = gx_a / weights_alpha;\n            }\n        }\n        return data2;\n    }\n\n}","export class InvalidImageError extends Error{}\nexport class FileError extends Error{}\nexport class InvalidRegionError extends Error{}\nexport class MemoryError extends Error{}\nexport class NoSelectionError extends Error{}","import {PencilTool} from \"./PencilTool\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Color} from \"../../hui/helpers/Color\";\n\nexport class EraserTool extends PencilTool{\n\n    constructor(controller: IconCanvasController) {\n        super(controller);\n\n        this.color = Color.transparent;\n    }\n\n}","import {IconEditorTool} from \"../IconEditor\";\nimport {PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Point} from \"../../hui/helpers/Rectangle\";\nimport {Color} from \"../../hui/helpers/Color\";\n\nexport class PencilTool implements IconEditorTool{\n\n    private drawing = false;\n    color: Color = new Color(0,0,0,);\n\n    constructor(readonly controller: IconCanvasController) {}\n\n    private drawAt(p: Point){\n\n        const index = this.controller.pointToData(p);\n\n        if (index < 0){\n            return;\n        }\n\n\n        const newState = this.controller.editor.cloneDocument();\n        const data = newState.icon.data;\n\n        data[index    ] = this.color.r;\n        data[index + 1] = this.color.g;\n        data[index + 2] = this.color.b;\n        data[index + 3] = Math.round(this.color.a * 255);\n\n        this.controller.editor.setDocument(newState);\n\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void {\n\n        this.drawing = true;\n\n        if (!this.controller.editor.currentTransaction){\n            this.controller.editor.begin();\n            this.drawAt(e.point);\n        }\n\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        if (this.drawing){\n            this.drawAt(e.point);\n        }\n\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n\n        this.drawing = false;\n        this.controller.editor.commit();\n\n    }\n\n}","import {IconDocument, IconEditor, IconEditorTool} from \"../IconEditor\";\nimport {KeyEvent, KeyEventResult, PointingEvent, PointingEventResult} from \"../../components/CanvasView\";\nimport {makePt, Point, Rectangle} from \"../../hui/helpers/Rectangle\";\nimport {IconCanvasController} from \"../IconCanvasController\";\nimport {Icon} from \"../Icon\";\nimport {IconService} from \"../IconService\";\nimport {NoSelectionError} from \"../errors\";\n\nexport class SelectionTool implements IconEditorTool{\n\n\n    private selecting = false;\n    private dragging = false;\n    private dragOffset: Point = makePt(0, 0);\n    private startPixel = makePt(0,0);\n\n    readonly editor: IconEditor;\n\n    constructor(readonly controller: IconCanvasController, sprite?: Icon) {\n        this.editor = controller.editor;\n\n        if (sprite){\n            this.pasteSprite(sprite);\n        }\n    }\n\n    private clipOutSelection(): {buffer: Icon, sprite: Icon}{\n\n        if (!this.document.selectionRegion){\n            throw new Error();\n        }\n\n        const buffer = IconService.clone(this.document.icon);\n        const sprite = IconService.fromIcon(buffer, this.document.selectionRegion);\n\n        IconService.region32(buffer, this.document.selectionRegion,\n            (index, current) => {\n                buffer.data[index] = 0\n                buffer.data[index + 1] = 0\n                buffer.data[index + 2] = 0\n                buffer.data[index + 3] = 0\n        });\n\n        return {buffer, sprite};\n    }\n\n    private updateSel(a: Point, b: Point){\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.selectionRegion = Rectangle.fromLTRB(\n            Math.round(Math.min(a.x, b.x)),\n            Math.round(Math.min(a.y, b.y)),\n            Math.round(Math.max(a.x, b.x)) + 1,\n            Math.round(Math.max(a.y, b.y)) + 1\n        );\n\n        this.editor.setDocument(newDoc);\n    }\n\n    private selectionEnded(){\n\n        if (!this.document.selectionRegion || this.document.selectionRegion.isEmpty){\n            return;\n        }\n\n        const newDoc = this.editor.cloneDocument();\n        const {buffer, sprite} = this.clipOutSelection();\n        newDoc.selectionBuffer = buffer;\n        newDoc.selectionSprite = sprite;\n        this.editor.setDocument(newDoc);\n        this.selecting = false;\n    }\n\n    private pixelIsInsideSelection(p: Point | null){\n        return p && this.document.selectionRegion && this.document.selectionRegion.contains(p);\n    }\n\n    private dragEnded(){\n        this.dragging = false;\n        this.dragOffset = makePt(0,0);\n    }\n\n    private updateDrag(p: Point){\n\n        if(\n            !this.document.selectionRegion ||\n            !this.document.selectionSprite ||\n            !this.document.selectionBuffer\n        ){\n            throw new NoSelectionError();\n        }\n\n        const region = new Rectangle(\n            p.x - this.dragOffset.x, p.y - this.dragOffset.y,\n            this.document.selectionSprite.width, this.document.selectionSprite.height);\n\n        const base = this.document.icon;\n        const newDoc = this.editor.cloneDocument();\n        const spriteOffset = makePt(\n           region.left < 0 ? Math.abs(region.left) : 0,\n           region.top < 0 ? Math.abs(region.top) : 0\n        );\n\n        newDoc.selectionRegion = Rectangle.fromLTRB(\n            region.left < 0 ? 0 : region.left,\n            region.top < 0 ? 0 : region.top,\n            region.right > base.width ? base.width : region.right,\n            region.bottom > base.height ? base.height : region.bottom\n        );\n\n        newDoc.icon = IconService.blend(\n            newDoc.selectionBuffer!, newDoc.selectionSprite!, newDoc.selectionRegion, spriteOffset);\n\n        this.editor.setDocument(newDoc);\n\n    }\n\n    private saveDragOffset(p: Point){\n\n        if (!this.document.selectionRegion){\n            throw new NoSelectionError();\n        }\n\n        this.dragOffset = makePt(\n            p.x - this.document.selectionRegion.left,\n            p.y - this.document.selectionRegion.top\n        );\n    }\n\n    clearSelection(){\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.selectionRegion = newDoc.selectionSprite = newDoc.selectionBuffer = undefined;\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n\n    }\n\n    deactivate(){\n        if (this.document.selectionRegion){\n            this.clearSelection();\n        }\n    }\n\n    deleteSelection(){\n\n        const newDoc = this.editor.cloneDocument();\n\n        newDoc.icon = newDoc.selectionBuffer!;\n        newDoc.selectionSprite = newDoc.selectionBuffer = newDoc.selectionRegion = undefined;\n\n        this.editor.begin();\n        this.editor.setDocument(newDoc);\n        this.editor.commit();\n    }\n\n    pasteSprite(sprite: Icon){\n\n        const newDoc = this.editor.cloneDocument();\n        const containerRec = new Rectangle(0 ,0, newDoc.icon.width, newDoc.icon.height);\n        const spriteRect = new Rectangle(0, 0, sprite.width, sprite.height)\n                                    .centerAt(containerRec.center).round();\n\n        newDoc.selectionRegion = spriteRect;\n        newDoc.selectionSprite = sprite;\n        newDoc.selectionBuffer = newDoc.icon;\n        newDoc.icon = IconService.blend(newDoc.selectionBuffer, newDoc.selectionSprite, newDoc.selectionRegion);\n\n        this.controller.editor.begin();\n        this.controller.editor.setDocument(newDoc);\n        this.controller.editor.commit();\n    }\n\n    pointingGestureStart(e: PointingEvent): PointingEventResult | void{\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n            this.startPixel = p;\n            this.editor.begin();\n\n            if (this.pixelIsInsideSelection(p)){\n                this.dragging = true;\n                this.saveDragOffset(p);\n\n            }else{\n                this.selecting = true;\n\n            }\n        }\n\n    }\n\n    pointingGestureEnd(e: PointingEvent): PointingEventResult | void {\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (this.selecting){\n            this.selectionEnded();\n        }\n\n        if (this.dragging){\n            this.dragEnded();\n        }\n\n        this.editor.commit();\n\n        if (this.pixelIsInsideSelection(p)){\n            return {cursor: 'move'};\n        }\n\n    }\n\n    pointingGestureMove(e: PointingEvent): PointingEventResult | void {\n\n        const p = this.controller.pointToPixel(e.point);\n\n        if (p){\n\n            if (this.selecting) {\n                this.updateSel(this.startPixel, p);\n\n            }else if(this.dragging){\n                this.updateDrag(p);\n\n            }else if(this.pixelIsInsideSelection(p)){\n                return {cursor: 'move'};\n            }\n\n        }\n\n        return {cursor: 'crosshair'};\n    }\n\n    keyDown(e: KeyEvent): KeyEventResult | void {\n\n        if (e.key == 'Escape'){\n            this.clearSelection();\n\n        }else if (e.key == 'Delete' || e.key == 'Backspace'){\n            this.deleteSelection();\n        }\n\n    }\n\n    get document(): IconDocument{\n        return this.editor.document;\n    }\n\n}","module.exports = React;","module.exports = ReactDOM;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/dist/\";","// startup\n// Load entry module\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(2629);\n"],"sourceRoot":""}